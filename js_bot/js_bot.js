!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=198)}([function(e,t,n){"use strict";const r=n(200),{valuesById:i}=r.lookupEnum("AIBuild"),{valuesById:o}=r.lookupEnum("Alert"),{valuesById:s}=r.lookupEnum("Alliance"),{valuesById:a}=r.lookupEnum("Attribute"),{valuesById:u}=r.lookupEnum("Difficulty"),{valuesById:l}=r.lookupEnum("DisplayType"),{valuesById:c}=r.lookupEnum("Result"),{valuesById:p}=r.lookupEnum("PlayerType"),{valuesById:d}=r.lookupEnum("Race"),{valuesById:f}=r.lookupEnum("Status"),{valuesById:h}=r.lookupEnum("TargetType"),{valuesById:g}=r.lookupType("AbilityData").lookupEnum("Target"),{valuesById:y}=r.lookupEnum("CloakState");e.exports={AbilityDataTarget:{NONE:1,POINT:2,UNIT:3,POINTORUNIT:4,POINTORNONE:5},AbilityDataTargetId:g,AIBuild:{RandomBuild:1,Rush:2,Timing:3,Power:4,Macro:5,Air:6},AIBuildId:i,Alert:{NUCLEARLAUNCHDETECTED:1,NYDUSWORMDETECTED:2},AlertId:o,Alliance:{SELF:1,ALLY:2,NEUTRAL:3,ENEMY:4},AllianceId:s,Attribute:{LIGHT:1,ARMORED:2,BIOLOGICAL:3,MECHANICAL:4,ROBOTIC:5,PSIONIC:6,MASSIVE:7,STRUCTURE:8,HOVER:9,HEROIC:10,SUMMONED:11},AttributeId:a,BuildOrder:{NOT_STARTED:0,COMMAND_GIVEN:1,IN_PROGRESS:2,COMPLETE:3,SKIPPED:4},BuildOrderId:{0:"NOT_STARTED",1:"COMMAND_GIVEN",2:"IN_PROGRESS",3:"COMPLETE",4:"SKIPPED"},BuildResult:{SUCCESS:0,COMMAND_SENT:1,CANNOT_SATISFY:2,ERROR:3,SKIPPED:4},CloakState:{CLOAKED:1,CLOAKEDDETECTED:2,NOTCLOAKED:3},CloakStateId:y,Difficulty:{VERYEASY:1,EASY:2,MEDIUM:3,MEDIUMHARD:4,HARD:5,HARDER:6,VERYHARD:7,CHEATVISION:8,CHEATMONEY:9,CHEATINSANE:10},DifficultyId:u,DisplayType:{VISIBLE:1,SNAPSHOT:2,HIDDEN:3},DisplayTypeId:l,GameResult:{VICTORY:1,DEFEAT:2,TIE:3,UNDECIDED:4},GameResultId:c,PlayerType:{PARTICIPANT:1,COMPUTER:2,OBSERVER:3},PlayerTypeId:p,Race:{NORACE:0,TERRAN:1,ZERG:2,PROTOSS:3,RANDOM:4},RaceId:d,Status:{LAUNCHED:1,INIT_GAME:2,IN_GAME:3,IN_REPLAY:4,ENDED:5,QUIT:6,UNKNOWN:99},StatusId:f,WeaponTargetType:{GROUND:1,AIR:2,ANY:3},WeaponTargetTypeId:h}},function(e,t,n){"use strict";e.exports={INVALID:0,ARMORY:29,AUTOTURRET:31,BANSHEE:55,BARRACKS:21,BARRACKSFLYING:46,BARRACKSREACTOR:38,BARRACKSTECHLAB:37,BATTLECRUISER:57,BUNKER:24,COMMANDCENTER:18,COMMANDCENTERFLYING:36,CYCLONE:692,ENGINEERINGBAY:22,FACTORY:27,FACTORYFLYING:43,FACTORYREACTOR:40,FACTORYTECHLAB:39,FUSIONCORE:30,GHOST:50,GHOSTACADEMY:26,HELLION:53,HELLIONTANK:484,LIBERATOR:689,LIBERATORAG:734,MARAUDER:51,MARINE:48,MEDIVAC:54,MISSILETURRET:23,MULE:268,ORBITALCOMMAND:132,ORBITALCOMMANDFLYING:134,PLANETARYFORTRESS:130,RAVEN:56,REAPER:49,REFINERY:20,RICHREFINERY:1943,SCV:45,SENSORTOWER:25,SIEGETANK:33,SIEGETANKSIEGED:32,STARPORT:28,STARPORTFLYING:44,STARPORTREACTOR:42,STARPORTTECHLAB:41,SUPPLYDEPOT:19,SUPPLYDEPOTLOWERED:47,THOR:52,THORAP:691,VIKINGASSAULT:34,VIKINGFIGHTER:35,WIDOWMINE:498,WIDOWMINEBURROWED:500,KD8CHARGE:830,NUKE:58,POINTDEFENSEDRONE:11,REACTOR:6,TECHLAB:5,BANELING:9,BANELINGBURROWED:115,BANELINGCOCOON:8,BANELINGNEST:96,BROODLING:289,BROODLORD:114,BROODLORDCOCOON:113,CHANGELING:12,CHANGELINGMARINE:15,CHANGELINGMARINESHIELD:14,CHANGELINGZEALOT:13,CHANGELINGZERGLING:17,CHANGELINGZERGLINGWINGS:16,CORRUPTOR:112,CREEPTUMOR:87,CREEPTUMORBURROWED:137,CREEPTUMORQUEEN:138,DRONE:104,DRONEBURROWED:116,EGG:103,EVOLUTIONCHAMBER:90,EXTRACTOR:88,GREATERSPIRE:102,HATCHERY:86,HIVE:101,HYDRALISK:107,HYDRALISKBURROWED:117,HYDRALISKDEN:91,INFESTATIONPIT:94,INFESTEDTERRANSEGG:150,INFESTOR:111,INFESTORBURROWED:127,INFESTORTERRAN:7,LAIR:100,LARVA:151,LOCUSTMP:489,LOCUSTMPFLYING:693,LURKERDENMP:504,LURKERMP:502,LURKERMPBURROWED:503,LURKERMPEGG:501,MUTALISK:108,NYDUSCANAL:142,NYDUSNETWORK:95,OVERLORD:106,OVERLORDCOCOON:128,OVERLORDTRANSPORT:893,OVERSEER:129,QUEEN:126,QUEENBURROWED:125,RAVAGER:688,RAVAGERCOCOON:687,RICHEXTRACTOR:1995,ROACH:110,ROACHBURROWED:118,ROACHWARREN:97,SPAWNINGPOOL:89,SPINECRAWLER:98,SPINECRAWLERUPROOTED:139,SPIRE:92,SPORECRAWLER:99,SPORECRAWLERUPROOTED:140,SWARMHOSTBURROWEDMP:493,SWARMHOSTMP:494,TRANSPORTOVERLORDCOCOON:892,ULTRALISK:109,ULTRALISKCAVERN:93,VIPER:499,ZERGLING:105,ZERGLINGBURROWED:119,PARASITICBOMBDUMMY:824,ADEPT:311,ADEPTPHASESHIFT:801,ARCHON:141,ASSIMILATOR:61,CARRIER:79,COLOSSUS:4,CYBERNETICSCORE:72,DARKSHRINE:69,DARKTEMPLAR:76,DISRUPTOR:694,DISRUPTORPHASED:733,FLEETBEACON:64,FORGE:63,GATEWAY:62,HIGHTEMPLAR:75,IMMORTAL:83,INTERCEPTOR:85,MOTHERSHIP:10,MOTHERSHIPCORE:488,NEXUS:59,OBSERVER:82,ORACLE:495,ORACLESTASISTRAP:732,PHOENIX:78,PHOTONCANNON:66,PROBE:84,PYLON:60,PYLONOVERCHARGED:894,RICHASSIMILATOR:1994,ROBOTICSBAY:70,ROBOTICSFACILITY:71,SENTRY:77,SHIELDBATTERY:1910,STALKER:74,STARGATE:67,TEMPEST:496,TEMPLARARCHIVE:68,TWILIGHTCOUNCIL:65,VOIDRAY:80,WARPGATE:133,WARPPRISM:81,WARPPRISMPHASING:136,ZEALOT:73,BATTLESTATIONMINERALFIELD:886,BATTLESTATIONMINERALFIELD750:887,COLLAPSIBLEROCKTOWERDEBRIS:490,COLLAPSIBLEROCKTOWERDIAGONAL:588,COLLAPSIBLEROCKTOWERPUSHUNIT:561,COLLAPSIBLETERRANTOWERDEBRIS:485,COLLAPSIBLETERRANTOWERDIAGONAL:589,COLLAPSIBLETERRANTOWERPUSHUNIT:562,COLLAPSIBLETERRANTOWERPUSHUNITRAMPLEFT:559,COLLAPSIBLETERRANTOWERPUSHUNITRAMPRIGHT:560,COLLAPSIBLETERRANTOWERRAMPLEFT:590,COLLAPSIBLETERRANTOWERRAMPRIGHT:591,DEBRISRAMPLEFT:486,DEBRISRAMPRIGHT:487,DESTRUCTIBLEDEBRIS4X4:364,DESTRUCTIBLEDEBRIS6X6:365,DESTRUCTIBLEDEBRISRAMPDIAGONALHUGEBLUR:377,DESTRUCTIBLEDEBRISRAMPDIAGONALHUGEULBR:376,DESTRUCTIBLEROCK6X6:371,DESTRUCTIBLEROCKEX1DIAGONALHUGEBLUR:641,FORCEFIELD:135,KARAKFEMALE:324,LABMINERALFIELD:665,LABMINERALFIELD750:666,MINERALFIELD:341,MINERALFIELD10:1996,MINERALFIELD750:483,PROTOSSVESPENEGEYSER:608,PURIFIERMINERALFIELD:884,PURIFIERMINERALFIELD750:885,PURIFIERRICHMINERALFIELD:796,PURIFIERRICHMINERALFIELD750:797,PURIFIERVESPENEGEYSER:880,RICHMINERALFIELD:146,RICHMINERALFIELD750:147,RICHVESPENEGEYSER:344,SCANTIPEDE:335,SHAKURASVESPENEGEYSER:881,SPACEPLATFORMGEYSER:343,UNBUILDABLEROCKSDESTRUCTIBLE:472,UNBUILDABLEBRICKSDESTRUCTIBLE:473,UNBUILDABLEPLATESDESTRUCTIBLE:474,UTILITYBOT:330,VESPENEGEYSER:342,XELNAGATOWER:149}},function(e,t,n){"use strict";function r(e,t){return e.x*t.x+e.y*t.y}function i(e,t){return Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2)}const o=({x:e,y:t})=>({x:Math.floor(e),y:Math.floor(t)}),s=({x:e,y:t})=>[{y:t-1,x:e-1},{y:t-1,x:e+1},{y:t+1,x:e-1},{y:t+1,x:e+1}];e.exports={createPoint:({x:e,y:t,z:n})=>({x:Math.floor(e),y:Math.floor(t),z:Math.floor(n)}),createPoint2D:o,getNeighbors:function(e,t=!0,n=!1){const r=o(e);let i=(({x:e,y:t})=>[{y:t-1,x:e},{y:t,x:e-1},{y:t,x:e+1},{y:t+1,x:e}])(r);return t&&n?s(r):t?i.concat(s(r)):i},areEqual:function(e,t){return e.x===t.x&&e.y===t.y},avgPoints:function(e){return{x:e.reduce((e,t)=>e+t.x,0)/e.length,y:e.reduce((e,t)=>e+t.y,0)/e.length}},dotProduct:r,distance:i,distanceX:function(e,t){return Math.abs(e.x-t.x)},distanceY:function(e,t){return Math.abs(e.y-t.y)},distanceSquared:function(e,t){const n={x:e.x-t.x,y:e.y-t.y};return r(n,n)},add:function(e,t){return"number"==typeof t?{x:e.x+t,y:e.y+t}:{x:e.x+t.x,y:e.y+t.y}},subtract:function(e,t){return"number"==typeof t?{x:e.x-t,y:e.y-t}:{x:e.x-t.x,y:e.y-t.y}},multiply:function(e,t){return"number"==typeof t?{x:e.x*t,y:e.y*t}:{x:e.x*t.x,y:e.y*t.y}},divide:function(e,t){return"number"==typeof t?{x:e.x/t,y:e.y/t}:{x:e.x/t.x,y:e.y/t.y}},normalize:function(e){return{x:e.x/Math.sqrt(e.x*e.x+e.y*e.y),y:e.y/Math.sqrt(e.x*e.x+e.y*e.y)}},closestPoint:function(e,t){return t.map(t=>({point:t,distance:i(e,t)})).sort((e,t)=>e.distance-t.distance).map(e=>e.point)[0]},nClosestPoint:function(e,t,n=1){return t.map(t=>({point:t,distance:i(e,t)})).sort((e,t)=>e.distance-t.distance).map(e=>e.point).slice(0,n)}}},function(e,t,n){"use strict";e.exports={INVALID:0,SMART:1,ATTACK:3674,ATTACK_ATTACK:23,ATTACK_ATTACKBUILDING:2048,ATTACK_REDIRECT:1682,BEHAVIOR_BUILDINGATTACKOFF:2082,BEHAVIOR_BUILDINGATTACKON:2081,BEHAVIOR_CLOAKOFF:3677,BEHAVIOR_CLOAKOFF_BANSHEE:393,BEHAVIOR_CLOAKOFF_GHOST:383,BEHAVIOR_CLOAKON:3676,BEHAVIOR_CLOAKON_BANSHEE:392,BEHAVIOR_CLOAKON_GHOST:382,BEHAVIOR_GENERATECREEPOFF:1693,BEHAVIOR_GENERATECREEPON:1692,BEHAVIOR_HOLDFIREOFF:3689,BEHAVIOR_HOLDFIREOFF_LURKER:2552,BEHAVIOR_HOLDFIREON:3688,BEHAVIOR_HOLDFIREON_GHOST:36,BEHAVIOR_HOLDFIREON_LURKER:2550,BEHAVIOR_PULSARBEAMOFF:2376,BEHAVIOR_PULSARBEAMON:2375,BUILD_ARMORY:331,BUILD_ASSIMILATOR:882,BUILD_BANELINGNEST:1162,BUILD_BARRACKS:321,BUILD_BUNKER:324,BUILD_COMMANDCENTER:318,BUILD_CREEPTUMOR:3691,BUILD_CREEPTUMOR_QUEEN:1694,BUILD_CREEPTUMOR_TUMOR:1733,BUILD_CYBERNETICSCORE:894,BUILD_DARKSHRINE:891,BUILD_ENGINEERINGBAY:322,BUILD_EVOLUTIONCHAMBER:1156,BUILD_EXTRACTOR:1154,BUILD_FACTORY:328,BUILD_FLEETBEACON:885,BUILD_FORGE:884,BUILD_FUSIONCORE:333,BUILD_GATEWAY:883,BUILD_GHOSTACADEMY:327,BUILD_HATCHERY:1152,BUILD_HYDRALISKDEN:1157,BUILD_INFESTATIONPIT:1160,BUILD_INTERCEPTORS:1042,BUILD_MISSILETURRET:323,BUILD_NEXUS:880,BUILD_NUKE:710,BUILD_NYDUSNETWORK:1161,BUILD_NYDUSWORM:1768,BUILD_PHOTONCANNON:887,BUILD_PYLON:881,BUILD_REACTOR:3683,BUILD_REACTOR_BARRACKS:422,BUILD_REACTOR_FACTORY:455,BUILD_REACTOR_STARPORT:488,BUILD_REFINERY:320,BUILD_ROACHWARREN:1165,BUILD_ROBOTICSBAY:892,BUILD_ROBOTICSFACILITY:893,BUILD_SENSORTOWER:326,BUILD_SHIELDBATTERY:895,BUILD_SPAWNINGPOOL:1155,BUILD_SPINECRAWLER:1166,BUILD_SPIRE:1158,BUILD_SPORECRAWLER:1167,BUILD_STARGATE:889,BUILD_STARPORT:329,BUILD_STASISTRAP:2505,BUILD_SUPPLYDEPOT:319,BUILD_TECHLAB:3682,BUILD_TECHLAB_BARRACKS:421,BUILD_TECHLAB_FACTORY:454,BUILD_TECHLAB_STARPORT:487,BUILD_TEMPLARARCHIVE:890,BUILD_TWILIGHTCOUNCIL:886,BUILD_ULTRALISKCAVERN:1159,BURROWDOWN:3661,BURROWDOWN_BANELING:1374,BURROWDOWN_DRONE:1378,BURROWDOWN_HYDRALISK:1382,BURROWDOWN_INFESTOR:1444,BURROWDOWN_LURKER:2108,BURROWDOWN_QUEEN:1433,BURROWDOWN_RAVAGER:2340,BURROWDOWN_ROACH:1386,BURROWDOWN_SWARMHOST:2014,BURROWDOWN_WIDOWMINE:2095,BURROWDOWN_ZERGLING:1390,BURROWUP:3662,BURROWUP_BANELING:1376,BURROWUP_DRONE:1380,BURROWUP_HYDRALISK:1384,BURROWUP_INFESTOR:1446,BURROWUP_LURKER:2110,BURROWUP_QUEEN:1435,BURROWUP_RAVAGER:2342,BURROWUP_ROACH:1388,BURROWUP_SWARMHOST:2016,BURROWUP_WIDOWMINE:2097,BURROWUP_ZERGLING:1392,CANCEL:3659,CANCELSLOT_ADDON:313,CANCELSLOT_QUEUE1:305,CANCELSLOT_QUEUE5:307,CANCELSLOT_QUEUECANCELTOSELECTION:309,CANCELSLOT_QUEUEPASSIVE:1832,CANCEL_ADEPTPHASESHIFT:2594,CANCEL_ADEPTSHADEPHASESHIFT:2596,CANCEL_BARRACKSADDON:451,CANCEL_BUILDINPROGRESS:314,CANCEL_CREEPTUMOR:1763,CANCEL_FACTORYADDON:484,CANCEL_GRAVITONBEAM:174,CANCEL_LAST:3671,CANCEL_MORPHBROODLORD:1373,CANCEL_MORPHLAIR:1217,CANCEL_MORPHLURKER:2333,CANCEL_MORPHLURKERDEN:2113,CANCEL_MORPHMOTHERSHIP:1848,CANCEL_MORPHORBITAL:1517,CANCEL_MORPHOVERLORDTRANSPORT:2709,CANCEL_MORPHOVERSEER:1449,CANCEL_MORPHPLANETARYFORTRESS:1451,CANCEL_MORPHRAVAGER:2331,CANCEL_QUEUE1:304,CANCEL_QUEUE5:306,CANCEL_QUEUEADDON:312,CANCEL_QUEUECANCELTOSELECTION:308,CANCEL_QUEUEPASIVE:1831,CANCEL_QUEUEPASSIVECANCELTOSELECTION:1833,CANCEL_SPINECRAWLERROOT:1730,CANCEL_STARPORTADDON:517,EFFECT_ABDUCT:2067,EFFECT_ADEPTPHASESHIFT:2544,EFFECT_AUTOTURRET:1764,EFFECT_BLINDINGCLOUD:2063,EFFECT_BLINK:3687,EFFECT_BLINK_STALKER:1442,EFFECT_CALLDOWNMULE:171,EFFECT_CAUSTICSPRAY:2324,EFFECT_CHARGE:1819,EFFECT_CHRONOBOOST:261,EFFECT_CHRONOBOOSTENERGYCOST:3755,EFFECT_CONTAMINATE:1825,EFFECT_CORROSIVEBILE:2338,EFFECT_EMP:1628,EFFECT_EXPLODE:42,EFFECT_FEEDBACK:140,EFFECT_FORCEFIELD:1526,EFFECT_FUNGALGROWTH:74,EFFECT_GHOSTSNIPE:2714,EFFECT_GRAVITONBEAM:173,EFFECT_GUARDIANSHIELD:76,EFFECT_HEAL:386,EFFECT_HUNTERSEEKERMISSILE:169,EFFECT_IMMORTALBARRIER:2328,EFFECT_INFESTEDTERRANS:247,EFFECT_INJECTLARVA:251,EFFECT_KD8CHARGE:2588,EFFECT_LOCKON:2350,EFFECT_LOCUSTSWOOP:2387,EFFECT_MASSRECALL:3686,EFFECT_MASSRECALL_MOTHERSHIP:2368,EFFECT_MASSRECALL_MOTHERSHIPCORE:1974,EFFECT_MEDIVACIGNITEAFTERBURNERS:2116,EFFECT_NEURALPARASITE:249,EFFECT_NUKECALLDOWN:1622,EFFECT_ORACLEREVELATION:2146,EFFECT_PARASITICBOMB:2542,EFFECT_PHOTONOVERCHARGE:2162,EFFECT_POINTDEFENSEDRONE:144,EFFECT_PSISTORM:1036,EFFECT_PURIFICATIONNOVA:2346,EFFECT_REPAIR:3685,EFFECT_REPAIR_MULE:78,EFFECT_REPAIR_SCV:316,EFFECT_RESTORE:3765,EFFECT_SALVAGE:32,EFFECT_SCAN:399,EFFECT_SHADOWSTRIDE:2700,EFFECT_SPAWNCHANGELING:181,EFFECT_SPAWNLOCUSTS:2704,EFFECT_SPRAY:3684,EFFECT_SPRAY_PROTOSS:30,EFFECT_SPRAY_TERRAN:26,EFFECT_SPRAY_ZERG:28,EFFECT_STIM:3675,EFFECT_STIM_MARAUDER:253,EFFECT_STIM_MARINE:380,EFFECT_STIM_MARINE_REDIRECT:1683,EFFECT_SUPPLYDROP:255,EFFECT_TACTICALJUMP:2358,EFFECT_TEMPESTDISRUPTIONBLAST:2698,EFFECT_TIMEWARP:2244,EFFECT_TRANSFUSION:1664,EFFECT_VIPERCONSUME:2073,EFFECT_VOIDRAYPRISMATICALIGNMENT:2393,EFFECT_WIDOWMINEATTACK:2099,EFFECT_YAMATOGUN:401,HALLUCINATION_ADEPT:2391,HALLUCINATION_ARCHON:146,HALLUCINATION_COLOSSUS:148,HALLUCINATION_DISRUPTOR:2389,HALLUCINATION_HIGHTEMPLAR:150,HALLUCINATION_IMMORTAL:152,HALLUCINATION_ORACLE:2114,HALLUCINATION_PHOENIX:154,HALLUCINATION_PROBE:156,HALLUCINATION_STALKER:158,HALLUCINATION_VOIDRAY:160,HALLUCINATION_WARPPRISM:162,HALLUCINATION_ZEALOT:164,HALT:3660,HALT_BUILDING:315,HALT_TERRANBUILD:348,HARVEST_GATHER:3666,HARVEST_GATHER_DRONE:1183,HARVEST_GATHER_MULE:166,HARVEST_GATHER_PROBE:298,HARVEST_GATHER_SCV:295,HARVEST_RETURN:3667,HARVEST_RETURN_DRONE:1184,HARVEST_RETURN_MULE:167,HARVEST_RETURN_PROBE:299,HARVEST_RETURN_SCV:296,HOLDPOSITION:18,LAND:3678,LAND_BARRACKS:554,LAND_COMMANDCENTER:419,LAND_FACTORY:520,LAND_ORBITALCOMMAND:1524,LAND_STARPORT:522,LIFT:3679,LIFT_BARRACKS:452,LIFT_COMMANDCENTER:417,LIFT_FACTORY:485,LIFT_ORBITALCOMMAND:1522,LIFT_STARPORT:518,LOAD:3668,LOADALL:3663,LOADALL_COMMANDCENTER:416,LOAD_BUNKER:407,LOAD_MEDIVAC:394,MORPH_ARCHON:1766,MORPH_BROODLORD:1372,MORPH_GATEWAY:1520,MORPH_GREATERSPIRE:1220,MORPH_HELLBAT:1998,MORPH_HELLION:1978,MORPH_HIVE:1218,MORPH_LAIR:1216,MORPH_LIBERATORAAMODE:2560,MORPH_LIBERATORAGMODE:2558,MORPH_LURKER:2332,MORPH_LURKERDEN:2112,MORPH_MOTHERSHIP:1847,MORPH_ORBITALCOMMAND:1516,MORPH_OVERLORDTRANSPORT:2708,MORPH_OVERSEER:1448,MORPH_PLANETARYFORTRESS:1450,MORPH_RAVAGER:2330,MORPH_ROOT:3680,MORPH_SIEGEMODE:388,MORPH_SPINECRAWLERROOT:1729,MORPH_SPINECRAWLERUPROOT:1725,MORPH_SPORECRAWLERROOT:1731,MORPH_SPORECRAWLERUPROOT:1727,MORPH_SUPPLYDEPOT_LOWER:556,MORPH_SUPPLYDEPOT_RAISE:558,MORPH_THOREXPLOSIVEMODE:2364,MORPH_THORHIGHIMPACTMODE:2362,MORPH_UNSIEGE:390,MORPH_UPROOT:3681,MORPH_VIKINGASSAULTMODE:403,MORPH_VIKINGFIGHTERMODE:405,MORPH_WARPGATE:1518,MORPH_WARPPRISMPHASINGMODE:1528,MORPH_WARPPRISMTRANSPORTMODE:1530,MOVE:16,PATROL:17,RALLY_BUILDING:195,RALLY_COMMANDCENTER:203,RALLY_HATCHERY_UNITS:211,RALLY_HATCHERY_WORKERS:212,RALLY_MORPHING_UNIT:199,RALLY_NEXUS:207,RALLY_UNITS:3673,RALLY_WORKERS:3690,RESEARCH_ADEPTRESONATINGGLAIVES:1594,RESEARCH_ADVANCEDBALLISTICS:805,RESEARCH_BANSHEECLOAKINGFIELD:790,RESEARCH_BANSHEEHYPERFLIGHTROTORS:799,RESEARCH_BATTLECRUISERWEAPONREFIT:1532,RESEARCH_BLINK:1593,RESEARCH_BURROW:1225,RESEARCH_CENTRIFUGALHOOKS:1482,RESEARCH_CHARGE:1592,RESEARCH_CHITINOUSPLATING:265,RESEARCH_COMBATSHIELD:731,RESEARCH_CONCUSSIVESHELLS:732,RESEARCH_DRILLINGCLAWS:764,RESEARCH_ENHANCEDMUNITIONS:806,RESEARCH_EXTENDEDTHERMALLANCE:1097,RESEARCH_GLIALREGENERATION:216,RESEARCH_GRAVITICBOOSTER:1093,RESEARCH_GRAVITICDRIVE:1094,RESEARCH_GROOVEDSPINES:1282,RESEARCH_HIGHCAPACITYFUELTANKS:804,RESEARCH_HISECAUTOTRACKING:650,RESEARCH_INFERNALPREIGNITER:761,RESEARCH_INTERCEPTORGRAVITONCATAPULT:44,RESEARCH_MAGFIELDLAUNCHERS:766,RESEARCH_MUSCULARAUGMENTS:1283,RESEARCH_NEOSTEELFRAME:655,RESEARCH_NEURALPARASITE:1455,RESEARCH_PATHOGENGLANDS:1454,RESEARCH_PERSONALCLOAKING:820,RESEARCH_PHOENIXANIONPULSECRYSTALS:46,RESEARCH_PNEUMATIZEDCARAPACE:1223,RESEARCH_PROTOSSAIRARMOR:3692,RESEARCH_PROTOSSAIRARMORLEVEL1:1565,RESEARCH_PROTOSSAIRARMORLEVEL2:1566,RESEARCH_PROTOSSAIRARMORLEVEL3:1567,RESEARCH_PROTOSSAIRWEAPONS:3693,RESEARCH_PROTOSSAIRWEAPONSLEVEL1:1562,RESEARCH_PROTOSSAIRWEAPONSLEVEL2:1563,RESEARCH_PROTOSSAIRWEAPONSLEVEL3:1564,RESEARCH_PROTOSSGROUNDARMOR:3694,RESEARCH_PROTOSSGROUNDARMORLEVEL1:1065,RESEARCH_PROTOSSGROUNDARMORLEVEL2:1066,RESEARCH_PROTOSSGROUNDARMORLEVEL3:1067,RESEARCH_PROTOSSGROUNDWEAPONS:3695,RESEARCH_PROTOSSGROUNDWEAPONSLEVEL1:1062,RESEARCH_PROTOSSGROUNDWEAPONSLEVEL2:1063,RESEARCH_PROTOSSGROUNDWEAPONSLEVEL3:1064,RESEARCH_PROTOSSSHIELDS:3696,RESEARCH_PROTOSSSHIELDSLEVEL1:1068,RESEARCH_PROTOSSSHIELDSLEVEL2:1069,RESEARCH_PROTOSSSHIELDSLEVEL3:1070,RESEARCH_PSISTORM:1126,RESEARCH_RAPIDFIRELAUNCHERS:768,RESEARCH_RAVENCORVIDREACTOR:793,RESEARCH_RAVENRECALIBRATEDEXPLOSIVES:803,RESEARCH_SHADOWSTRIKE:2720,RESEARCH_SMARTSERVOS:766,RESEARCH_STIMPACK:730,RESEARCH_TERRANINFANTRYARMOR:3697,RESEARCH_TERRANINFANTRYARMORLEVEL1:656,RESEARCH_TERRANINFANTRYARMORLEVEL2:657,RESEARCH_TERRANINFANTRYARMORLEVEL3:658,RESEARCH_TERRANINFANTRYWEAPONS:3698,RESEARCH_TERRANINFANTRYWEAPONSLEVEL1:652,RESEARCH_TERRANINFANTRYWEAPONSLEVEL2:653,RESEARCH_TERRANINFANTRYWEAPONSLEVEL3:654,RESEARCH_TERRANSHIPWEAPONS:3699,RESEARCH_TERRANSHIPWEAPONSLEVEL1:861,RESEARCH_TERRANSHIPWEAPONSLEVEL2:862,RESEARCH_TERRANSHIPWEAPONSLEVEL3:863,RESEARCH_TERRANSTRUCTUREARMORUPGRADE:651,RESEARCH_TERRANVEHICLEANDSHIPPLATING:3700,RESEARCH_TERRANVEHICLEANDSHIPPLATINGLEVEL1:864,RESEARCH_TERRANVEHICLEANDSHIPPLATINGLEVEL2:865,RESEARCH_TERRANVEHICLEANDSHIPPLATINGLEVEL3:866,RESEARCH_TERRANVEHICLEWEAPONS:3701,RESEARCH_TERRANVEHICLEWEAPONSLEVEL1:855,RESEARCH_TERRANVEHICLEWEAPONSLEVEL2:856,RESEARCH_TERRANVEHICLEWEAPONSLEVEL3:857,RESEARCH_TUNNELINGCLAWS:217,RESEARCH_WARPGATE:1568,RESEARCH_ZERGFLYERARMOR:3702,RESEARCH_ZERGFLYERARMORLEVEL1:1315,RESEARCH_ZERGFLYERARMORLEVEL2:1316,RESEARCH_ZERGFLYERARMORLEVEL3:1317,RESEARCH_ZERGFLYERATTACK:3703,RESEARCH_ZERGFLYERATTACKLEVEL1:1312,RESEARCH_ZERGFLYERATTACKLEVEL2:1313,RESEARCH_ZERGFLYERATTACKLEVEL3:1314,RESEARCH_ZERGGROUNDARMOR:3704,RESEARCH_ZERGGROUNDARMORLEVEL1:1189,RESEARCH_ZERGGROUNDARMORLEVEL2:1190,RESEARCH_ZERGGROUNDARMORLEVEL3:1191,RESEARCH_ZERGLINGADRENALGLANDS:1252,RESEARCH_ZERGLINGMETABOLICBOOST:1253,RESEARCH_ZERGMELEEWEAPONS:3705,RESEARCH_ZERGMELEEWEAPONSLEVEL1:1186,RESEARCH_ZERGMELEEWEAPONSLEVEL2:1187,RESEARCH_ZERGMELEEWEAPONSLEVEL3:1188,RESEARCH_ZERGMISSILEWEAPONS:3706,RESEARCH_ZERGMISSILEWEAPONSLEVEL1:1192,RESEARCH_ZERGMISSILEWEAPONSLEVEL2:1193,RESEARCH_ZERGMISSILEWEAPONSLEVEL3:1194,SCAN_MOVE:19,STOP:3665,STOP_BUILDING:2057,STOP_CHEER:6,STOP_DANCE:7,STOP_REDIRECT:1691,STOP_STOP:4,TRAINWARP_ADEPT:1419,TRAINWARP_DARKTEMPLAR:1417,TRAINWARP_HIGHTEMPLAR:1416,TRAINWARP_SENTRY:1418,TRAINWARP_STALKER:1414,TRAINWARP_ZEALOT:1413,TRAIN_ADEPT:922,TRAIN_BANELING:80,TRAIN_BANSHEE:621,TRAIN_BATTLECRUISER:623,TRAIN_CARRIER:948,TRAIN_COLOSSUS:978,TRAIN_CORRUPTOR:1353,TRAIN_CYCLONE:597,TRAIN_DARKTEMPLAR:920,TRAIN_DISRUPTOR:994,TRAIN_DRONE:1342,TRAIN_GHOST:562,TRAIN_HELLBAT:596,TRAIN_HELLION:595,TRAIN_HIGHTEMPLAR:919,TRAIN_HYDRALISK:1345,TRAIN_IMMORTAL:979,TRAIN_INFESTOR:1352,TRAIN_LIBERATOR:626,TRAIN_MARAUDER:563,TRAIN_MARINE:560,TRAIN_MEDIVAC:620,TRAIN_MOTHERSHIP:110,TRAIN_MOTHERSHIPCORE:1853,TRAIN_MUTALISK:1346,TRAIN_OBSERVER:977,TRAIN_ORACLE:954,TRAIN_OVERLORD:1344,TRAIN_PHOENIX:946,TRAIN_PROBE:1006,TRAIN_QUEEN:1632,TRAIN_RAVEN:622,TRAIN_REAPER:561,TRAIN_ROACH:1351,TRAIN_SCV:524,TRAIN_SENTRY:921,TRAIN_SIEGETANK:591,TRAIN_STALKER:917,TRAIN_SWARMHOST:1356,TRAIN_TEMPEST:955,TRAIN_THOR:594,TRAIN_ULTRALISK:1348,TRAIN_VIKINGFIGHTER:624,TRAIN_VIPER:1354,TRAIN_VOIDRAY:950,TRAIN_WARPPRISM:976,TRAIN_WIDOWMINE:614,TRAIN_ZEALOT:916,TRAIN_ZERGLING:1343,UNLOADALL:3664,UNLOADALLAT:3669,UNLOADALLAT_MEDIVAC:396,UNLOADALLAT_OVERLORD:1408,UNLOADALLAT_WARPPRISM:913,UNLOADALL_BUNKER:408,UNLOADALL_COMMANDCENTER:413,UNLOADALL_NYDASNETWORK:1438,UNLOADALL_NYDUSWORM:2371,UNLOADUNIT_BUNKER:410,UNLOADUNIT_COMMANDCENTER:415,UNLOADUNIT_MEDIVAC:397,UNLOADUNIT_NYDASNETWORK:1440,UNLOADUNIT_OVERLORD:1409,UNLOADUNIT_WARPPRISM:914}},function(e,t,n){"use strict";const r=n(17),{UnitTypeId:i,Ability:o,UnitType:s,Buff:a}=n(8),{MOVE:u,ATTACK_ATTACK:l,STOP:c,CANCEL_QUEUE5:p,TRAIN_ZERGLING:d,RALLY_BUILDING:f,SMART:h}=n(3),{Race:g,Attribute:y,Alliance:E,WeaponTargetType:m,RaceId:A}=n(0),{reactorTypes:v,techLabTypes:R,mineralFieldTypes:b,workerTypes:C,townhallTypes:T,constructionAbilities:S,liftingAbilities:O,landingAbilities:_,gasMineTypes:I,rallyWorkersAbilities:P}=n(6),{gridsInCircle:w}=n(15),{distance:N,avgPoints:L,createPoint2D:D,getNeighbors:x}=n(2),{getClosestPosition:F}=n(40),{countTypes:M,morphMapping:B,addOnTypesMapping:U}=n(28),{findPosition:k,getCandidatePositions:j}=n(42),G=n(29),{balanceResources:H,gatherOrMine:W}=n(45),{createUnitCommand:V}=n(18),Y=n(23),{formatToMinutesAndSeconds:$}=n(46),K=n(46),q=n(14),{isPendingContructing:z}=n(41),Q=n(12),{getUnitTypeData:Z,isRepairing:J,calculateSplashDamage:X,getThirdWallPosition:ee,setPendingOrders:te,getBuilders:ne,getOrderTargetPosition:re,getNeediestMineralField:ie}=n(12),{getArmorUpgradeLevel:oe,getAttackUpgradeLevel:se,getWeaponThatCanAttack:ae,getMovementSpeed:ue,isMoving:le,getPendingOrders:ce,getHighestRangeWeapon:pe}=n(24),{GasMineRace:de,WorkerRace:fe,SupplyUnitRace:he,TownhallRace:ge}=n(13),{calculateHealthAdjustedSupply:ye,getInRangeUnits:Ee}=n(67),{filterLabels:me}=n(104),Ae=n(12),{getClosestUnitPositionByPath:ve,getClosestUnitByPath:Re,getDistanceByPath:be,getClosestPositionByPath:Ce,getClosestPathablePositionsBetweenPositions:Te,gather:Se,getCombatRally:Oe}=n(16),{getPathablePositionsForStructure:_e,getClosestExpansion:Ie,getPathablePositions:Pe}=n(39),{cellsInFootprint:we}=n(19),{getFootprint:Ne}=n(20),{getOccupiedExpansions:Le}=n(51),{existsInMap:De}=n(32),{pointsOverlap:xe,intersectionOfPoints:Fe,shuffle:Me}=n(31),Be=n(68),{findWallOffPlacement:Ue}=n(106),ke=n(22),{SPAWNINGPOOL:je,ADEPT:Ge,EGG:He,DRONE:We,ZERGLING:Ve,PROBE:Ye,BARRACKS:$e,SUPPLYDEPOT:Ke,REACTOR:qe,CREEPTUMORQUEEN:ze}=n(1),Qe=n(25),{getTimeInSeconds:Ze,getTravelDistancePerStep:Je}=n(44),Xe=n(25),et=n(10),tt=n(107),{keepPosition:nt}=n(108),rt=n(33),{canAttack:it}=n(53),{getMiddleOfStructure:ot,moveAwayPosition:st}=n(30),{micro:at}=n(109),ut=n(39),{getPathCoordinates:lt}=n(50),ct=n(106),{CHRONOBOOSTENERGYCOST:pt}=n(58),dt=n(16),{getAddOnPlacement:ft}=n(52),{getEnemyUnits:ht}=(n(80),n(80)),gt={outpowered:!1,totalEnemyDPSHealth:0,totalSelfDPSHealth:0,unitProductionAvailable:!0,assignAndSendWorkerToBuild:(e,t,n,r=!0)=>{const{agent:i,data:s,resources:a}=e,{race:u}=i,{map:l,units:c}=a.get(),{abilityId:p}=s.getUnitTypeData(t),d=[];n=r?ot(n,t):n;const f=gt.getBuilder(e,n);if(f){const{pos:e}=f;if(void 0===e)return d;if(Y.addEarmark(s,s.getUnitTypeData(t)),!f.isConstructing()&&!z(f)){vt(f);const r=V(p,[f]);if(de[i.race]===t){const[t]=c.getClosest(n,c.getGasGeysers());if(void 0===t)return d;if(r.targetUnitTag=t.tag,d.push(r),f.unitType===Ye){const[t]=Re(a,e,c.getBases());if(t){const{pos:e}=t;if(void 0===e)return d;const[n]=Ie(l,e),{mineralFields:r}=n.cluster;let i=ie(c,r);const o=Se(a,f,i,!0).find(e=>e.abilityId===h);o&&o.targetUnitTag&&(d.push(o),i=i||c.getByTag(o.targetUnitTag),i&&(f.labels.set("mineralField",i),i.labels.set("workerCount",i.labels.get("workerCount")+1)))}}}else r.targetWorldSpacePos=n,d.push(r);console.log("Command given: "+Object.keys(o).find(e=>o[e]===p)),0===ge[u].indexOf(t)&&(dt.availableExpansions=[]),Q.setPendingOrders(f,r),d.push(...Q.stopOverlappingBuilders(c,f,n))}}return d},buildWorkers:async(e,t=1)=>{const{agent:n,data:r,resources:i}=e,{actions:o,units:a}=i.get(),u=[],l=fe[n.race];if(gt.canBuild(e,l)){const{abilityId:e}=r.getUnitTypeData(l);if(void 0===e)return;let i=[];if(i=n.race===g.ZERG?a.getById(s.LARVA).filter(e=>!e.pendingOrders||0===e.pendingOrders.length):a.getById(T,{alliance:E.SELF,buildProgress:1,noQueue:!0}).filter(t=>t.abilityAvailable(e)&&!t.pendingOrders||0===t.pendingOrders.length),i.length>0){i=Me(i),i=i.slice(0,t),i.forEach(t=>{const n=V(e,[t]);u.push(n),te(t,n)});try{await o.sendAction(u)}catch(e){console.log(e)}}}},calculateDPSHealthOfTrainingUnits:(e,t,n,r)=>t.reduce((t,i)=>C.includes(i)?t:t+gt.getDPSHealthOfTrainingUnit(e,i,n,r.map(e=>e.unitType)),0),calculateNearDPSHealth:(e,t,n)=>{const{resources:r}=e,{map:i}=r.get();return t.reduce((t,r)=>{if(r.isWorker())if(r.alliance===E.SELF){if(r.isHarvesting()&&!r.labels.has("retreating")&&!r.labels.has("defending"))return t}else if(r.alliance===E.ENEMY){const[e]=Ie(i,r.pos);if(e&&xe(e.areas.mineralLine,[r.pos]))return t}return t+gt.getDPSHealth(e,r,n)},0)},canBuild:(e,t)=>{const{agent:n}=e;return n.canAfford(t)&&n.hasTechFor(t)&&(!gt.isSupplyNeeded(e)||t===s.OVERLORD)},checkBuildingCount:(e,t,n)=>gt.getUnitTypeCount(e,t)===n,findAndPlaceBuilding:async(e,t,n,r=!1)=>{const{agent:i,data:o,resources:a}=e,u=[],{actions:l,units:c}=a.get();if(0===n.length&&(n=await gt.findPlacements(e,t)),q.foundPosition=q.foundPosition?q.foundPosition:await k(a,t,n),q.foundPosition){const{abilityId:n}=o.getUnitTypeData(t);if(o.findUnitTypesWithAbility(n).includes(s.NYDUSNETWORK))u.push(...await async function(e,t,n){const{agent:r,resources:i,data:o}=e,{actions:a,units:u}=i.get(),l=[],c=u.getById(s.NYDUSNETWORK,{alliance:E.SELF});if(c.length>0){const e=ke(c);if(r.canAfford(t))if(await a.canPlace(t,[q.foundPosition])){const r=V(n,[e]);r.targetWorldSpacePos=q.foundPosition,l.push(r),q.pausePlan=!1,q.continueBuild=!0,Y.addEarmark(o,o.getUnitTypeData(t)),q.foundPosition=null}else q.foundPosition=null,q.pausePlan=!0,q.continueBuild=!1}return l}(e,t,n));else if(i.canAfford(t)&&!r){const n=await l.canPlace(t,[q.foundPosition]);!1===n?(q.foundPosition=nt(a,t,q.foundPosition)?q.foundPosition:null,q.foundPosition&&u.push(...gt.premoveBuilderToPosition(e,q.foundPosition,t,r)),r||(q.pausePlan=!0,q.continueBuild=!1)):(await l.sendAction(gt.assignAndSendWorkerToBuild(e,t,n)),q.pausePlan=!1,q.continueBuild=!0,Y.addEarmark(o,o.getUnitTypeData(t)),q.foundPosition=null)}else if(u.push(...gt.premoveBuilderToPosition(e,q.foundPosition,t,r)),!r){const{mineralCost:n,vespeneCost:r}=o.getUnitTypeData(t);await H(e,n/r),q.pausePlan=!0,q.continueBuild=!1}const[p]=c.getById(s.PYLON);p&&p.buildProgress<1&&(u.push(...gt.premoveBuilderToPosition(e,p.pos,p.unitType,r)),q.pausePlan=!0,q.continueBuild=!1)}return u},findPlacements:async(e,t)=>{const{agent:n,data:r,resources:i}=e,{race:o}=n,{actions:a,map:u,units:l}=i.get(),[c,p]=u.getExpansions(),d=c.areas.mineralLine;if(I.includes(t)){const e=u.freeGasGeysers().map(e=>{const{pos:t}=e;if(void 0===t)return{pos:t,buildProgress:0};const[n]=l.getClosest(t,l.getBases());return{pos:t,buildProgress:n.buildProgress}}).filter(e=>{const{pos:n,buildProgress:i}=e;if(void 0===n||void 0===i)return!1;const[o]=l.getClosest(n,l.getBases());if(void 0===o)return!1;const{unitType:s}=o;if(void 0===s)return!1;const{buildTime:a}=r.getUnitTypeData(s);if(void 0===a)return!1;const u=mt(o,a,i),{buildTime:c}=r.getUnitTypeData(t);return void 0!==c&&Ze(u)<=Ze(c)}).sort((e,t)=>{const{buildProgress:n,pos:r}=e,{buildProgress:i,pos:o}=t;if(void 0===n||void 0===i||void 0===r||void 0===o)return 0;const[s]=l.getClosest(e,l.getBases()),[a]=l.getClosest(t,l.getBases()),{buildProgress:u}=s,{buildProgress:c}=a;return void 0===u||void 0===c?0:u-c}),[n]=e;if(n){const{buildProgress:t}=n;if(void 0===t)return[];return e.filter(e=>e.buildProgress===t).map(e=>e.pos)}return[]}let f=[];if(o===g.PROTOSS)if(t===s.PYLON){if(0===gt.getUnitTypeCount(e,t)&&q.naturalWallPylon)return j(i,"NaturalWallPylon",t);const n=[...Le(i).map(e=>e.areas.placementGrid)],r=[];n.forEach(e=>r.push(...e)),f=r.filter(e=>N(p.townhallPosition,e)>4.5&&d.every(t=>N(t,e)>1.5)&&p.areas.hull.every(t=>N(t,e)>3)&&l.getStructures({alliance:E.SELF}).map(e=>e.pos).every(t=>N(t,e)>3))}else{let n;n=1===l.getById(s.PYLON).length?l.getById(s.PYLON):l.getById(s.PYLON).filter(e=>e.buildProgress>=1).filter(e=>N(e.pos,c.townhallPosition)<50),n.forEach(e=>{f.push(...w(e.pos,6.5,{normalize:!0}).filter(t=>De(u,t)&&N(t,e.pos)<6.5))});const r=[...M.get(s.GATEWAY),s.CYBERNETICSCORE],i=[];if(r.includes(t)&&l.getById(r).length<3){const n=gt.getCurrentlyEnrouteConstructionGrids(e),o=Be.threeByThreePositions.filter(e=>{const r=we(D(e),Ne(t));return u.isPlaceableAt(t,e)&&xe([...r],[...f])&&!xe([...r],[...n])});if(o.length>0)i.push(...o);else if(Be.wall.length>0){const e=Be.wall.filter(e=>1===Fe(x(e,!0,!1),Be.wall).length),o=N(e[0],e[1])/2;i.push(...w(L(Be.wall),o,{normalize:!0}).filter(e=>{const i=we(D(e),Ne(t));let o=De(u,e)&&u.isPlaceable(e)&&xe([...i],[...f])&&!xe([...i],[...n]);if(2===l.getById(r).length){const n=ee(l.getById(r),e,t);return o&&n}return o}))}}i.length>0&&Fe(i,f).some(e=>u.isPlaceableAt(t,e))&&(f=Fe(i,f)),f=f.filter(e=>N(p.townhallPosition,e)>5&&d.every(t=>N(t,e)>1.5)&&(i.length>0||p.areas.hull.every(t=>N(t,e)>2))&&u.isPlaceableAt(t,e))}else if(o===g.TERRAN){const n=[];if([s.SUPPLYDEPOT,s.BARRACKS].includes(t)){const e=Ue(t);if(e.length>0&&await a.canPlace(t,e))return e}Le(e.resources).forEach(e=>{n.push(...e.areas.placementGrid)});const{barracksWallOffPosition:r,supplyWallOffPositions:i}=ct,o=[];if(r){const e=Ne($e);if(void 0===e)return[];const t=we(r,e);o.push(...t)}if(i.length>0){const e=Ne(Ke);if(void 0===e)return[];const t=i.map(t=>we(t,e));o.push(...t.flat())}const l=Ne(t);let c;if(U.has(t)&&(c=Ne(qe),void 0===c))return[];if(void 0===l)return[];f=n.filter(e=>{const t=[...we(e,l)];return c&&t.push(...we(ft(e),c)),t.every(e=>u.isPlaceable(e))&&!xe(t,[...o])}).map(e=>({pos:e,rand:Math.random()})).sort((e,t)=>e.rand-t.rand).map(e=>e.pos).slice(0,20)}else o===g.ZERG&&f.push(...function(e,t){const{map:n,units:r}=e.get(),i=n.getExpansions().reduce((e,t)=>{const{mineralLine:n}=t.areas;return[...e,...n]},[]),o=[];if(t!==s.NYDUSCANAL){const e=n.getCreep().filter(e=>{const[t]=F(e,i),[n]=r.getClosest(e,r.getStructures());return N(e,t)>1.5&&N(e,n.pos)>3&&N(e,n.pos)<=12.5});o.push(...e)}else{const e=n.getVisibility().filter(e=>{const[t]=F(e,i),[n]=r.getClosest(e,r.getStructures());return N(e,t)>1.5&&N(e,n.pos)>3});o.push(...e)}return o}(i,t));return f},getAbilityIdsForAddons:(e,t)=>{let{abilityId:n}=e.getUnitTypeData(t),r=[];return 1674===n?r.push(...gt.getReactorAbilities(e)):1666===n?r.push(...gt.getTechlabAbilities(e)):r.push(n),r},getBuilder:(e,t)=>{const{data:n,resources:r}=e,{units:i}=r.get();let o=ne(i);o.push(...i.getWorkers().filter(e=>{const{pos:n}=e;if(void 0===re(i,e)||void 0===n)return!1;const r=!o.some(t=>t.tag===e.tag),s=e.isGathering()&&!Ae.isMining(i,e),a=e.noQueue||s||e.orders.findIndex(e=>e.targetWorldSpacePos&&N(e.targetWorldSpacePos,t)<1)>-1;return r&&a}));const s=o.filter(e=>le(e)&&e.unitType===Ye);o=o.filter(e=>{const t=ce(e).filter(e=>{const{abilityId:t}=e;return void 0!==t&&[...S,u].includes(t)});return!s.some(t=>t.tag===e.tag)||0===t.length});const a=s.map(e=>{const{orders:n,pos:i}=e;if(void 0===n||void 0===i)return;const o=n[0].targetWorldSpacePos,s=ue(e);if(void 0===o||void 0===s)return;const a=ve(r,o,i),u=be(r,i,a)/s,l=ve(r,a,t);return{unit:e,timeToPosition:u+be(r,a,l)/s}}),l=[],[c]=a.sort((e,t)=>void 0===e||void 0===t?0:e.timeToPosition-t.timeToPosition);void 0!==c&&l.push(c);const[p]=Re(r,t,o);if(void 0!==p){const{pos:e}=p;if(void 0===e)return null;const n=ue(p);if(void 0===n)return null;const i={unit:p,timeToPosition:Te(r,e,t).distance/n};l.push(i)}const d=i.getConstructingWorkers(),[f]=d.map(e=>{const o=e.orders.find(e=>S.includes(e.abilityId)),s=Y.unitTypeTrainingAbilities.get(o.abilityId),{buildTime:a}=n.getUnitTypeData(s),u=i.getClosest(e.pos,i.getById(s)).filter(t=>N(t.pos,e.pos)<3)[0];let l=1/0;if(u){const{buildProgress:n}=u,i=Ze(a-a*n),o=be(r,e.pos,t),{movementSpeed:s}=e.data();l=i+o/s}return{unit:e,timeToPosition:l}}).sort((e,t)=>e.timeToPosition-t.timeToPosition);void 0!==f&&l.push(f);const[h]=l.sort((e,t)=>void 0===e||void 0===t?0:e.timeToPosition-t.timeToPosition);return void 0===h?null:h.unit},getCurrentlyEnrouteConstructionGrids:e=>{const{data:t,resources:n}=e,{units:r}=n.get(),i=[];return r.getWorkers().forEach(e=>{if(e.isConstructing()||z(e)){const n=[...e.orders,...e.pendingOrders].find(e=>S.includes(e.abilityId));if(n&&n.targetWorldSpacePos){const e=Object.keys(s).find(e=>t.getUnitTypeData(s[e]).abilityId===n.abilityId);e&&i.push(...we(D(n.targetWorldSpacePos),Ne(s[e])))}}}),i},getDamageDealingUnits:(e,t,n)=>{const{data:r,resources:i}=e;return n.filter(e=>!(!it(i,e,t)||!function(e,t,n){const{pos:r,radius:i,unitType:o}=t;if(void 0===r||void 0===i||void 0===o)return!1;const{pos:s,radius:a}=n;if(void 0===s||void 0===a)return!1;const{weapons:u}=n.data();if(void 0===u)return!1;const l=ae(e,o,n);if(void 0===l)return!1;const{range:c}=l;return void 0!==c&&N(r,s)<=c+i+a+Je(n)+Je(t)}(r,e,t)))},getDPSHealth:(e,t,n)=>{const{resources:r}=e,{units:i}=r.get();let o=0,{alliance:u,buffIds:l,health:c,buildProgress:p,shield:d,unitType:f}=t;if(void 0===u||void 0===l||void 0===c||void 0===p||void 0===d||void 0===f)return 0;f=f!==s.ADEPTPHASESHIFT?f:Ge;let h=0;if((t=function(e,t){const{units:n}=e.get();if(t.unitType===s.ADEPTPHASESHIFT){const i="ADEPT";if(!t.hasLabel(i)){const[r]=function(e,t){return e===E.SELF?rt.selfUnits.filter(e=>e.unitType===t):e===E.ENEMY?G.mappedEnemyUnits.filter(e=>e.unitType===t):[]}(t.alliance,Ge).filter(e=>!n.withLabel(i).some(t=>t.labels.get(i)===e.tag)).sort((n,r)=>be(e,n.pos,t.pos)-be(e,r.pos,t.pos));return r&&(t.labels.set(i,r.tag),console.log(`${t.unitType} ${t.tag} assigned to ${r.unitType} ${r.tag}`)),r}r=t.getLabel(i),t=G.mappedEnemyUnits.find(e=>e.tag===r)}var r;return t}(r,t))&&p>=1)h=c+d;else{const e=Z(i,f);if(e){const{healthMax:t,shieldMax:n}=e;h=t+n}}return p>.9&&(o=gt.getWeaponDPS(e,f,u,n)*h*(l.includes(a.STIMPACK)?1.5:1)),o},getDPSHealthOfTrainingUnit:(e,t,n,r)=>{const{resources:i}=e,{units:o}=i.get();let a=0;const u=Z(o,t);if(u){const{healthMax:i,shieldMax:o}=u;a=gt.getWeaponDPS(e,t,n,r)*(i+o),a=t===s.ZERGLING?2*a:a}return a},getDPSOfInRangeAntiAirUnits:(e,t)=>{const{data:n,resources:r}=e,{units:i}=r.get(),o=i.getAlive(E.ENEMY),{pos:s,radius:a,unitType:u}=t;return void 0===s||void 0===a||void 0===u?0:o.reduce((r,i)=>{let o=0;const{alliance:l,pos:c,radius:p,unitType:d}=i;if(void 0===l||void 0===c||void 0===p||void 0===d)return r;const f=ae(n,d,t);if(void 0===f)return r;const{range:h}=f;return void 0===h?r:(N(s,c)<=h+a+p&&(o=gt.getWeaponDPS(e,d,l,[u])),r+o)},0)},getFoodUsed:e=>{const{agent:t,resources:n}=e,{units:r}=n.get(),{foodUsed:i,race:o}=t,s=o===g.ZERG?r.getWorkers().filter(e=>e.isConstructing()).length:0;return i+q.pendingFood-s},getPositionVersusTargetUnit:(e,t,n)=>{const{data:r,resources:i}=e,o=t.radius+n.radius+1,s=Math.max.apply(Math,r.getUnitTypeData(t.unitType).weapons.map(e=>e.range))+o;if(N(t.pos,n.pos)<s){const e=[],o=11,a=r.getEffectData(o).radius;i.get().frame.getEffects().forEach(t=>{t.effectId===o&&e.push(...w(t.pos[0],a))});const u=w(n.pos,s).filter(r=>N(r,n.pos)>=s-.5&&e.every(e=>N(e,t.pos)>a+t.radius)),[l]=F(L(t.selfUnits.map(e=>e.pos)),u);return l}return n.pos},getReactorAbilities:e=>{const t=[];return v.forEach(n=>{t.push(e.getUnitTypeData(n).abilityId)}),t},getTechlabAbilities:e=>{const t=[];return R.forEach(n=>{t.push(e.getUnitTypeData(n).abilityId)}),t},getTrainingPower:e=>{const{resources:t}=e,n=dt.getTrainingUnitTypes(t),{enemyCombatUnits:r}=G;return n.reduce((t,n)=>t+gt.getDPSHealthOfTrainingUnit(e,n,E.SELF,r.map(e=>e.unitType)),0)},getUnitsInRangeOfPosition:(e,t,n=16)=>{const{units:r}=e.resources.get();return r.getCombatUnits(E.SELF).filter(e=>e.pos&&N(e.pos,t)<=n)},getUnitsTrainingTargetUnitType:(e,t)=>{const{data:n,resources:r}=e,{units:i}=r.get();let{abilityId:o}=n.getUnitTypeData(t);return void 0===o?[]:gt.getUnitsWithCurrentOrders(i,[o])},getWeaponDPS(e,t,n,r){const{data:i,resources:o}=e,{units:a}=o.get(),{weapons:u}=i.getUnitTypeData(t);if(void 0===u)return 0;const l=u.map(e=>r.reduce((o,u)=>{const{attacks:l,damage:c,speed:p}=e;if(!l||!c||!p)return o;if(function(e,t,n){const{isFlying:r}=Z(e,n);return t.type===m.ANY||t.type===m.GROUND&&!r||t.type===m.AIR&&r||n===s.COLOSSUS}(a,e,u)){const s=c+se(n)*Y.getUpgradeBonus(n,e.damage),d=Y.getAttributeBonusDamageAverage(i,e,[u]);return o+(s-oe(n)+d)*l*X(a,t,r)/(p/1.4)}return o},0)/r.length);return 0===l.length?0:Math.max.apply(Math,l)},getUnitsWithCurrentOrders:(e,t)=>{const n=[];return t.forEach(t=>{n.push(...e.withCurrentOrders(t))}),n},getUnitCount:(e,t)=>{const{data:n,resources:r}=e,{units:i}=r.get(),{abilityId:o,attributes:s}=n.getUnitTypeData(t);if(void 0===o||void 0===s)return 0;if(s.includes(y.STRUCTURE))return gt.getUnitTypeCount(e,t);{let e=[];e=B.has(t)?B.get(t):[t];const n=i.withCurrentOrders(o).reduce((e,t)=>{const{orders:n}=t;return void 0===n||n.forEach(t=>{t.abilityId===o&&e.push(t)}),e},[]),r=i.getAlive(E.SELF).filter(e=>e.pendingOrders&&e.pendingOrders.some(e=>e.abilityId===o)).map(e=>e.pendingOrders).reduce((e,t)=>e.concat(t),[]);let s=(n.some(e=>e.abilityId===d)?2*n.length:n.length)+(r.some(e=>e.abilityId===d)?2*r.length:r.length);return s>0&&(s=t===Ve?s-1:s),i.getById(e).length+s+rt.missingUnits.filter(e=>e.unitType===t).length}},getUnitTypeCount:(e,t)=>{const{agent:n,data:r,resources:i}=e,{units:o}=i.get(),a=gt.getAbilityIdsForAddons(r,t);let u=gt.getUnitsWithCurrentOrders(o,a).length;return(M.get(t)?M.get(t):[t]).forEach(e=>{let t=o.getById(e);if(n.race===g.TERRAN){const n=e===s.ORBITALCOMMAND?.998:1;t=t.filter(e=>e.buildProgress>=n)}u+=t.length}),u},getUnitTypesWithAbilities:(e,t)=>{const n=[];return t.forEach(t=>{n.push(...e.findUnitTypesWithAbility(t))}),n},getZergEarlyBuild(e){const{data:t,resources:n}=e,{frame:r,map:i,units:o}=n.get(),a=G.mappedEnemyUnits.filter(e=>e.unitType===s.ZERGLING),u=o.getById(je,{alliance:E.ENEMY}).sort((e,t)=>t.buildProgress-e.buildProgress)[0],l=u||a.length>0,c=u?r.timeInSeconds()-Y.getBuildTimeElapsed(t,u):null,p=i.getEnemyNatural().getBase(),d=p?r.timeInSeconds()-Y.getBuildTimeElapsed(t,p):null;a.length>0&&!p&&(Qe.earlyScout=!1,Qe.enemyBuildType="cheese",Xe.scoutReport="Early scout cancelled. Zerglings detected before natural hatchery scouted.");const f=i.getNatural().getBase(),h=f?r.timeInSeconds()-Y.getBuildTimeElapsed(t,f):null,g=l&&p,y=g&&c<d,m=f&&p&&h<d,{lastSeen:A}=Xe;return c&&c<A.enemyNaturalTownhallFootprint&&!p?(Qe.earlyScout=!1,Qe.enemyBuildType="cheese",void(Qe.scoutReport="Early scout set to false because Spawning Pool start time is less than time enemy natural position was last seen and no enemy natural was found")):y?(Qe.enemyBuildType="standard",Qe.scoutReport=`Early scout cancelled: ${y?"spawning pool":"natural command center"} before enemy natural`,void(g&&(Qe.earlyScout=!1))):m?(Qe.enemyBuildType="cheese",Qe.scoutReport=`Early scout cancelled: ${m?"natural command center":"natural hatchery"} before enemy natural`,void(f&&p&&(Qe.earlyScout=!1))):void 0},isSupplyNeeded:(e,t=0)=>{const{agent:n,data:r,resources:i}=e,{foodCap:o,foodUsed:s}=n,{units:a}=i.get(),u=he[n.race],l=r.getUnitTypeData(u).abilityId,c=8*a.inProgress(u).length+8*a.withCurrentOrders(l).length;return[o-s+c<(o+c)*t,!(200==o),n.canAfford(u)].every(e=>e)},defendWithUnit:(e,t,n)=>{const{agent:r,resources:i}=e,{units:o}=i.get(),{pos:s}=n;if(void 0===s)return!1;const a=n.selfDPSHealth||0,u=o.getById(fe[r.race]).filter(e=>me(e,["scoutEnemyMain","scoutEnemyNatural","clearFromEnemy","builder"])&&!J(e)),l=Re(i,s,u.filter(e=>!e.isReturning()&&!e.isConstructing()),u.length),c=[];let p=0;for(let t=0;t<l.length;t++){const r=l[t],i=gt.getDPSHealth(e,r,n.selfUnits.map(e=>e.unitType));if(c.push(r),p+i>=a)break;p+=i}return c.some(e=>e.tag===t.tag)},logActionIfNearPosition:(e,t,n,r)=>{const{resources:o}=e;N(n.pos,r)<4&&gt.setAndLogExecutedSteps(e,o.get().frame.timeInSeconds(),i[t],r)},microRangedUnit:(e,t,n)=>{const{data:r}=e,i=[],{radius:o,tag:a,unitType:c,weaponCooldown:p}=t;if(void 0===o||void 0===a||void 0===c||void 0===p)return i;const d=p>8,f=function(e,t,n){const{unitType:r}=t;if(!r)return;return r===s.SENTRY?{attacks:1,damage:6,damageBonus:[],range:5,speed:1,type:m.ANY}:ae(e,r,n)}(r,n,t);if((d||t.unitType===s.CYCLONE)&&f){const r=gt.getPositionVersusTargetUnit(e,t,n);i.push({abilityId:u,targetWorldSpacePos:r,unitTags:[a]})}else{const e=V(l,[t]),r=[],{weapons:s}=t.data();if(void 0===s)return i;if(s.forEach(e=>{const{range:i}=e;if(void 0===i||void 0===n.radius)return;const s=i+o+n.radius;if(e.type!==m.ANY)if(e.type!==m.GROUND)if(e.type!==m.AIR);else{const e=G.mappedEnemyUnits.filter(e=>e.isFlying);r.push(...Ee(t,e,s))}else{const e=G.mappedEnemyUnits.filter(e=>!e.isFlying);r.push(...Ee(t,e,s))}else r.push(...Ee(t,[...G.mappedEnemyUnits],s))}),r.length>0){const t=r.reduce((e,t)=>void 0===e?t:e.health<t.health?e:t,void 0);t&&(e.targetUnitTag=t.tag)}else e.targetWorldSpacePos=n.pos;i.push(e)}return i},premoveBuilderToPosition:(e,t,n,r=!1)=>{const{agent:i,data:o,resources:a}=e,{debug:l,map:p,units:d}=a.get(),{rallyWorkerToTarget:f}=gt,h=[];t=ot(t,n);const y=gt.getBuilder(e,t);if(y){const{movementSpeed:E}=y.data(),m=Pe(p,t),{orders:A,pos:v}=y;if(void 0===E||void 0===A||void 0===v)return h;const[R]=Ce(a,v,m);let b=be(a,v,R);void 0!==l&&l.setDrawCells("prmv",lt(ut.getMapPath(p,v,R)).map(e=>({pos:e})),{size:1,cube:!1});let T=b/E,O=!1,_=0;if(r){const e=d.getBases().filter(e=>e.buildProgress>=1),[t]=Re(a,R,e);if(t){const e=_e(p,t),[n]=Ce(a,R,e),r=be(a,n,R),{unitTypeTrainingAbilities:s}=Y;if(0===t.orders.findIndex(e=>C.includes(s.get(e.abilityId)))){const{buildTime:e}=o.getUnitTypeData(fe[i.race]),{progress:n}=t.orders[0];if(void 0===e||void 0===n)return h;_=mt(t,e,n);let s=r/E+Ze(_)+E;O=T>s,T=O?s:T}}}const I=ce(y).some(e=>e.abilityId&&S.includes(e.abilityId)),P=y?V(u,[y],I):{},w=function(e,t){const{agent:n,data:r,resources:i}=e,{frame:o}=i.get(),{collectionRateMinerals:s,collectionRateVespene:a}=o.getObservation().score.scoreDetails;Y.addEarmark(r,r.getUnitTypeData(t));const u=r.getEarmarkTotals("stepAhead").minerals-n.minerals,l=r.getEarmarkTotals("stepAhead").vespene-n.vespene,c=u/(s/60),{vespeneCost:p}=r.getUnitTypeData(t),d=p>0?l/(a/60):0;return Math.max(c,d)}(e,n),L=function(e,t){const{data:n,resources:r}=e,{units:i}=r.get(),o=n.getUnitTypeData(t),{techRequirement:s}=o;if(void 0===s||0===s)return 0;const{buildTime:a}=n.getUnitTypeData(s);if(void 0===a)return 0;const[u]=i.getById(s).sort((e,t)=>{const{buildProgress:n}=e,{buildProgress:r}=t;return void 0===n||void 0===r?0:r-n});if(void 0===u)return 0;const{buildProgress:l}=u;return void 0===l?0:Ze((1-l)*a)}(e,n);if(function(e,t,n){const{agent:r,data:i,resources:o}=e,{units:a}=o.get(),u=t<=n;if(r.race===g.PROTOSS){const e=a.getById(s.PYLON);if(1===e.length){const[t]=e;if(t.buildProgress<1){const e=function(e,t){const{buildProgress:n}=t,{buildTime:r}=e.getUnitTypeData(t.unitType);return Ze(r-r*n)}(i,t);return u&&e<=n}}}return u}(e,L>w?L:w,T))if(O)h.push(...f(e,t)),h.push(...function(e,t){const n=[],{orders:r}=e;if(void 0===r)return n;if(r.length>0){const{targetWorldSpacePos:i}=r[0];if(void 0===i)return n;N(i,t)<1&&n.push(V(c,[e]))}return n}(y,t));else{if(P.targetWorldSpacePos=t,vt(y),h.push(P,...Ae.stopOverlappingBuilders(d,y,t)),te(y,P),i.race===g.ZERG){const{foodRequired:e}=o.getUnitTypeData(n);if(void 0===e)return h;q.pendingFood-=e}h.push(...f(e,t,!0))}else h.push(...f(e,t,!0)),1===y.orders.length&&y.orders.some(e=>e.targetWorldSpacePos&&e.targetWorldSpacePos.x===t.x&&e.targetWorldSpacePos.y===t.y)&&h.push(V(c,[y]))}return h},pullWorkersToDefend:(e,t,n,r)=>{const{agent:i,data:o,resources:s}=e,{units:a}=s.get(),u=[],c=ye(e,Ee(n,[...G.mappedEnemyUnits])),p=Math.ceil(c/o.getUnitTypeData(fe[i.race]).foodRequired),d=a.getById(fe[i.race]).filter(e=>me(e,["scoutEnemyMain","scoutEnemyNatural","clearFromEnemy","builder"])&&!J(e)&&!e.isReturning());if(a.getClosest(n.pos,d.filter(e=>!e.isReturning()&&!e.isConstructing()),p).find(e=>e.tag===t.tag)){const e=a.getByType(b).filter(e=>N(t.pos,e.pos)<N(n.pos,e.pos)),[i]=a.getClosest(t.pos,e);i&&u.push(...at(a,t,n,r))}else t.isAttacking()&&t.orders.find(e=>e.abilityId===l).targetUnitTag===n.tag&&u.push(...W(s,t));return u},rallyWorkerToTarget:(e,t,n=!1)=>{const{data:r,resources:i}=e,{map:o,units:s}=i.get(),a=[],u=gt.getWorkerSourceByPath(e,t);let l=null;if(u){const{orders:e,pos:i}=u;if(void 0===i)return a;if(l=u.unitType===He?e.some(e=>e.abilityId===r.getUnitTypeData(We).abilityId)?f:null:P.find(e=>u.abilityAvailable(e)),l){const e=V(l,[u]);if(n){const[t]=Ie(o,i),{mineralFields:n}=t.cluster,r=ie(s,n);if(void 0===r)return a;e.targetUnitTag=r.tag}else e.targetWorldSpacePos=t;a.push(e)}}return a},repositionBuilding:e=>{const{data:t,resources:n}=e,{units:r}=n.get(),i=r.withLabel("reposition"),s=[];return i.length>0&&i.forEach(e=>{const{orders:n,pos:i}=e;if(void 0!==n&&void 0!==i){if(e.availableAbilities().find(e=>O.includes(e))&&!e.labels.has("pendingOrders"))if(N(i,e.labels.get("reposition"))>1){const t=V(o.LIFT,[e]);s.push(t),te(e,t)}else{e.labels.delete("reposition");const{addOnTag:t}=e;if(void 0===t)return s;const n=r.getByTag(t);n&&n.labels.delete("reposition")}if(e.availableAbilities().find(e=>_.includes(e))){const t=V(o.LAND,[e]);t.targetWorldSpacePos=e.labels.get("reposition"),s.push(t),q.pausePlan=!1,te(e,t)}Y.isTrainingUnit(t,e)&&n.forEach(()=>{s.push(V(p,[e]))})}}),s},retreat:(e,t,n,r=!0)=>{const{resources:i}=e,{map:o,units:a}=i.get(),{pos:u}=t;if(void 0===u)return;const l=yt(i,t),c=Je(t);if(l){if(N(u,l)<c){const l=a.getById(s.BUNKER).filter(e=>1===e.buildProgress).map(e=>e.pos).sort((e,n)=>be(i,e,t.pos)-be(i,n,t.pos))[0],p=Oe(i);let d=!0;l&&(d=be(i,p,t.pos)<be(i,l,t.pos));const f=be(i,u,p),h=be(i,n.pos,p);if(r&&d&&f>16&&f!==1/0&&f<=h)return p;if(l)return l;{const r=function(e,t,n){const{resources:r}=e,{map:i}=r.get();return i.getExpansions().map(e=>e.centroid).map(o=>{if(void 0===o)return;const s=gt.getDamageDealingUnits(e,t,n.selfUnits||ht(n));let[a]=Re(r,o,s);if(a){const e=a||n;if(void 0===e.pos)return;const s=Pe(i,o),[u]=Ce(r,e.pos,s),l=be(r,e.pos,u),{pos:c}=t;if(void 0===c)return;const[p]=Ce(r,c,s),d=be(r,c,p);if(d===1/0)return;return{point:o,getDistanceByPathToRetreat:d,getDistanceByPathToTarget:l,closerOrEqualThanTarget:d<=l}}}).filter(e=>void 0!==e&&e.closerOrEqualThanTarget)}(e,t,n),[s]=r.map(e=>{if(void 0===e)return;const{point:t}=e,[n]=Ce(i,u,Pe(o,t));return{point:t,distanceByPath:be(i,u,n)}}).sort((e,t)=>{const[n]=Ce(i,u,Pe(o,e)),[r]=Ce(i,u,Pe(o,t));return be(i,u,n)-be(i,u,r)});return s?s.point:yt(i,t,c)||st(n.pos,t.pos,c)}}return l}return st(n.pos,t.pos,c)},saveBuildOrder:(e,t)=>{const{agent:n}=e;let i=A[n.race],o=A[Xe.opponentRace];console.log("__dirname",__dirname);const s=JSON.parse(r.readFileSync(et.join(__dirname,"data","plans.json")).toString());s[i]||(s[i]={}),s[i][o]||(s[i][o]={});const a=K.executedSteps.map(e=>{const t=[e[0],e[2]];return e[7]&&t.push(e[7]),t});s[i][o][q.uuid]||(s[i][o][q.uuid]={},s[i][o][q.uuid].result={wins:0,losses:0}),s[i][o][q.uuid].orders=a,1===t.result?s[i][o][q.uuid].result.wins++:s[i][o][q.uuid].result.losses++,s[i][o][q.uuid].attackFood=tt.minimumAmountToAttackWith,r.writeFileSync(et.join(__dirname,"data","plans.json"),JSON.stringify(s,null,2))},setAndLogExecutedSteps:(e,t,n,r="")=>{const{agent:i,data:o}=e,{foodUsed:a,minerals:u,vespene:l}=i;let c=!1;if(s[n]){const{attributes:e}=o.getUnitTypeData(s[n]);if(void 0===e)return;c=e.includes(y.STRUCTURE)}const p=[c&&i.race===g.ZERG?a+1:a,$(t),n,q.currentStep,gt.outpowered,`${u}/${l}`],d=s[n]?gt.getUnitCount(e,s[n]):0;if(d&&p.push(d),r&&p.push(r),console.log(p),[ze].includes(s[n])){const{creeptumorQueenSteps:e}=K;Rt(e,p,c)?K.creeptumorQueenSteps.splice(e.length-1,1,p):K.creeptumorQueenSteps.push(p)}else{const{executedSteps:e}=K;Rt(e,p,c)?K.executedSteps.splice(e.length-1,1,p):K.executedSteps.push(p)}},setEnemyDPSHealthPower:(e,t,n)=>{const{resources:r}=e;t.forEach(t=>{t.enemyUnits=At(t,n);const[i]=r.get().units.getClosest(t.pos,n).filter(e=>N(t.pos,e.pos)<=16);t.enemyDPSHealth=gt.calculateNearDPSHealth(e,t.enemyUnits,i&&i.selfUnits?i.selfUnits.map(e=>e.unitType):[])})},setSelfDPSHealthPower:(e,t,n)=>{const{resources:r}=e;t.forEach(i=>{i.selfUnits=At(i,t);const[o]=r.get().units.getClosest(i.pos,n).filter(e=>N(i.pos,e.pos)<=16);i.selfDPSHealth=gt.calculateNearDPSHealth(e,i.selfUnits,o?o.selfUnits.map(e=>e.unitType):[])})},setTotalEnemyDPSHealth:e=>{const{resources:t}=e,{units:n}=t.get(),r=[...n.getCombatUnits(),...n.getById(s.QUEEN)],{enemyCombatUnits:i}=G;gt.totalEnemyDPSHealth=i.reduce((n,i)=>{const o=[...r.map(e=>e.unitType),...dt.getTrainingUnitTypes(t)].filter(e=>void 0!==e);return n+gt.calculateNearDPSHealth(e,[i],o)},0)},setTotalSelfDPSHealth:e=>{const{resources:t}=e,{units:n}=t.get(),r=[...n.getCombatUnits(),...n.getById(s.QUEEN)],{enemyCombatUnits:i}=G;gt.totalSelfDPSHealth=r.reduce((t,n)=>t+gt.calculateNearDPSHealth(e,[n],i.map(e=>e.unitType)),0),gt.totalSelfDPSHealth+=dt.getTrainingUnitTypes(t).reduce((t,n)=>t+gt.calculateDPSHealthOfTrainingUnits(e,[n],E.SELF,i),0)},shortOnWorkers:e=>{const{agent:t,resources:n}=e,{units:r}=n.get();let i=0,o=0;[...r.getBases(),...r.getById(I)].forEach(e=>{const{buildProgress:t,assignedHarvesters:s,idealHarvesters:a,unitType:u}=e;if(void 0!==t&&void 0!==s&&void 0!==a&&void 0!==u)if(1===t)o+=s,i+=a;else if(T.includes(u)){const o=e.labels.get("mineralFields")||r.getMineralFields().filter(t=>{const{pos:r}=t,{pos:i}=e;if(void 0===r||void 0===i)return!1;if(N(r,i)<16){const e=ve(n,i,r);if(void 0===e)return!1;return be(n,r,e)<=16}return!1});e.labels.has("mineralFields")||e.labels.set("mineralFields",o),i+=2*o.length*t}else i+=3*t});const s=gt.getUnitsTrainingTargetUnitType(e,fe[t.race]);return i>o+s.length},unpauseAndLog:(e,t,n="")=>{const{agent:r,resources:i}=e,{frame:o}=i.get();q.pausePlan=!1,q.continueBuild=!0,fe[r.race]!==s[t]&&gt.setAndLogExecutedSteps(e,o.timeInSeconds(),t,n)},getWorkerSourceByPath:(e,t)=>{const{agent:n,resources:r}=e,{units:i}=r.get();let o=null;return n.race===g.ZERG?[o]=Re(r,t,i.getById(He)):[o]=Re(r,t,i.getBases()),o}};function yt(e,t,n=1){const r=function(e,t,n=1){const{map:r,units:i}=e.get();let o=[];const{pos:s}=t;if(void 0===s)return o;const a=i.getAlive({alliance:E.ENEMY}).filter(e=>e.pos&&N(s,e.pos)<=16);for(;0===o.length&&n<=16;){const e=w(s,n).filter(e=>N(e,s)>n-1);o=e.filter(e=>{if(De(r,e)&&r.isPathable(e)){if(a.every(t=>t.pos&&N(e,t.pos)>N(e,s))){const n={...e,z:r.getHeight(e)};return Et(r,t,a,n)}return!1}return!1}),n+=1}return o}(e,t,n);if(t.isFlying){const[e]=F(t.pos,r);return e}{const[n]=Ce(e,t.pos,r);return n}}function Et(e,t,n,r){if(!De(e,r))return!1;let i=null;const{pos:o,radius:s}=t;if(void 0===o||void 0===s)return!1;if(void 0===r.z||void 0===o||void 0===o.z)return!1;if(r.z>o.z+2)i=m.AIR;else if(i=m.GROUND,!e.isPathable(r))return!1;return n.every(e=>{const{pos:n}=e;if(void 0===n||void 0===e.radius)return!0;const o=pe(e,i);if(void 0===o||void 0===o.range)return!0;const a=o.range;return N(r,n)>a+s+e.radius+Je(e)+Je(t)})}function mt(e,t,n){const{buffIds:r}=e;return void 0===r?t:(r.includes(pt)&&(t=2*t/3),t*(1-n))}function At(e,t){return t.filter(t=>{if(void 0===e.pos||void 0===t.pos||void 0===e.radius||void 0===t.radius)return!1;const{weapons:n}=t.data();if(void 0===n)return!1;const r=n.reduce((e,t)=>void 0===t.range?e:t.range>e?t.range:e,0);return N(e.pos,t.pos)<=r+e.radius+t.radius+Je(t)+Je(e)})}function vt(e){if(e.labels.set("builder",!0),e.labels.has("mineralField")){const t=e.labels.get("mineralField");t&&(t.labels.set("workerCount",t.labels.get("workerCount")-1),e.labels.delete("mineralField"))}}function Rt(e,t,n){const r=e[e.length-1];let i=!1;return r&&(i=t[2]===r[2]&&t[6]===r[6],i&&!n&&(i=i&&t[3]===r[3])),i}e.exports=gt},function(e,t,n){"use strict";const{PlayerType:r}=n(0),i=n(215),o=n(222),s=n(98),{taskFunctions:a}=n(160);e.exports={createAgent:i,createEngine:o,createSystem:s,createPlayer:function(e,t){return{...e,type:t?r.PARTICIPANT:r.COMPUTER,agent:t}},taskFunctions:a}},function(e,t,n){"use strict";const r=n(1),i=n(3),o=n(58),s=[r.FACTORYFLYING,r.BARRACKSFLYING,r.ORBITALCOMMANDFLYING,r.COMMANDCENTERFLYING,r.STARPORTFLYING],a=[r.UNBUILDABLEROCKSDESTRUCTIBLE,r.UNBUILDABLEBRICKSDESTRUCTIBLE,r.UNBUILDABLEPLATESDESTRUCTIBLE],u=[r.PROTOSSVESPENEGEYSER,r.PURIFIERVESPENEGEYSER,r.RICHVESPENEGEYSER,r.SHAKURASVESPENEGEYSER,r.SPACEPLATFORMGEYSER,r.VESPENEGEYSER],l=[r.ARMORY,r.ASSIMILATOR,r.AUTOTURRET,r.BANELINGNEST,r.BARRACKS,r.BARRACKSFLYING,r.BARRACKSREACTOR,r.BARRACKSTECHLAB,r.BUNKER,r.COMMANDCENTER,r.COMMANDCENTERFLYING,r.CREEPTUMOR,r.CREEPTUMORBURROWED,r.CREEPTUMORQUEEN,r.CYBERNETICSCORE,r.DARKSHRINE,r.ENGINEERINGBAY,r.EVOLUTIONCHAMBER,r.EXTRACTOR,r.FACTORY,r.FACTORYFLYING,r.FACTORYREACTOR,r.FACTORYTECHLAB,r.FLEETBEACON,r.FORGE,r.FUSIONCORE,r.GATEWAY,r.GHOSTACADEMY,r.GREATERSPIRE,r.HATCHERY,r.HIVE,r.HYDRALISKDEN,r.INFESTATIONPIT,r.KD8CHARGE,r.LAIR,r.LURKERDENMP,r.MISSILETURRET,r.NEXUS,r.NYDUSCANAL,r.NYDUSNETWORK,r.ORACLESTASISTRAP,r.ORBITALCOMMAND,r.ORBITALCOMMANDFLYING,r.PHOTONCANNON,r.PLANETARYFORTRESS,r.POINTDEFENSEDRONE,r.PYLON,r.REACTOR,r.REFINERY,r.ROACHWARREN,r.ROBOTICSBAY,r.ROBOTICSFACILITY,r.SENSORTOWER,r.SHIELDBATTERY,r.SPAWNINGPOOL,r.SPINECRAWLER,r.SPINECRAWLERUPROOTED,r.SPIRE,r.SPORECRAWLER,r.SPORECRAWLERUPROOTED,r.STARGATE,r.STARPORT,r.STARPORTFLYING,r.STARPORTREACTOR,r.STARPORTTECHLAB,r.SUPPLYDEPOT,r.SUPPLYDEPOTLOWERED,r.TECHLAB,r.TEMPLARARCHIVE,r.TWILIGHTCOUNCIL,r.ULTRALISKCAVERN,r.WARPGATE,...u,...a],c=[r.HATCHERY,r.LAIR,r.HIVE],p=[r.COMMANDCENTER,r.COMMANDCENTERFLYING,r.ORBITALCOMMAND,r.ORBITALCOMMANDFLYING,r.PLANETARYFORTRESS],d=[...c,r.NEXUS,...p],f=[r.MINERALFIELD,r.MINERALFIELD10,r.MINERALFIELD750,r.LABMINERALFIELD,r.LABMINERALFIELD750,r.PURIFIERMINERALFIELD,r.PURIFIERMINERALFIELD750,r.PURIFIERRICHMINERALFIELD,r.PURIFIERRICHMINERALFIELD750,r.RICHMINERALFIELD,r.RICHMINERALFIELD750,r.BATTLESTATIONMINERALFIELD,r.BATTLESTATIONMINERALFIELD750],h=[r.RICHEXTRACTOR,r.RICHASSIMILATOR,r.RICHREFINERY],g=[r.EXTRACTOR,r.ASSIMILATOR,r.REFINERY,...h],y=[r.TECHLAB,r.BARRACKSTECHLAB,r.FACTORYTECHLAB,r.STARPORTTECHLAB],E=[r.REACTOR,r.BARRACKSREACTOR,r.FACTORYREACTOR,r.STARPORTREACTOR],m=[...y,...E],A=[r.DRONE,r.PROBE,r.SCV,r.MULE],v=[r.BANSHEE,r.CYCLONE,r.GHOST,r.HELLION,r.HELLIONTANK,r.LIBERATOR,r.LIBERATORAG,r.MARAUDER,r.MARINE,r.MEDIVAC,r.RAVEN,r.REAPER,r.SIEGETANK,r.SIEGETANKSIEGED,r.THOR,r.THORAP,r.VIKINGASSAULT,r.VIKINGFIGHTER,r.WIDOWMINE,r.WIDOWMINEBURROWED,r.BANELING,r.BANELINGBURROWED,r.BROODLORD,r.CORRUPTOR,r.HYDRALISK,r.HYDRALISKBURROWED,r.INFESTOR,r.INFESTORBURROWED,r.INFESTORTERRAN,r.LURKERMP,r.LURKERMPBURROWED,r.MUTALISK,r.RAVAGER,r.ROACH,r.ROACHBURROWED,r.SPINECRAWLER,r.ULTRALISK,r.VIPER,r.ZERGLING,r.ZERGLINGBURROWED,r.ADEPT,r.ARCHON,r.RAVEN,r.COLOSSUS,r.DARKTEMPLAR,r.DISRUPTOR,r.DISRUPTORPHASED,r.HIGHTEMPLAR,r.IMMORTAL,r.MOTHERSHIP,r.ORACLE,r.PHOENIX,r.SENTRY,r.STALKER,r.TEMPEST,r.VOIDRAY,r.ZEALOT,r.PHOTONCANNON,r.SPINECRAWLER],R=[r.CREEPTUMORBURROWED,...c],b=[r.CREEPTUMOR,r.CREEPTUMORBURROWED,r.CREEPTUMORQUEEN],C=[r.CHANGELINGMARINE,r.CHANGELINGMARINESHIELD,r.CHANGELINGZEALOT,r.CHANGELINGZERGLINGWINGS],T=[i.HARVEST_GATHER,i.HARVEST_GATHER_DRONE,i.HARVEST_GATHER_MULE,i.HARVEST_GATHER_PROBE,i.HARVEST_GATHER_SCV],S=[i.HARVEST_RETURN,i.HARVEST_RETURN_DRONE,i.HARVEST_RETURN_MULE,i.HARVEST_RETURN_PROBE,i.HARVEST_RETURN_SCV],O=[...T,...S],_=[o.CARRYMINERALFIELDMINERALS,o.CARRYHIGHYIELDMINERALFIELDMINERALS],I=[o.CARRYHARVESTABLEVESPENEGEYSERGAS,o.CARRYHARVESTABLEVESPENEGEYSERGASPROTOSS,o.CARRYHARVESTABLEVESPENEGEYSERGASZERG],P=[..._,...I],w=[i.BUILD_ARMORY,i.BUILD_ASSIMILATOR,i.BUILD_BANELINGNEST,i.BUILD_BARRACKS,i.BUILD_BUNKER,i.BUILD_COMMANDCENTER,i.BUILD_CREEPTUMOR,i.BUILD_CREEPTUMOR_QUEEN,i.BUILD_CREEPTUMOR_TUMOR,i.BUILD_CYBERNETICSCORE,i.BUILD_DARKSHRINE,i.BUILD_ENGINEERINGBAY,i.BUILD_EVOLUTIONCHAMBER,i.BUILD_EXTRACTOR,i.BUILD_FACTORY,i.BUILD_FLEETBEACON,i.BUILD_FORGE,i.BUILD_FUSIONCORE,i.BUILD_GATEWAY,i.BUILD_GHOSTACADEMY,i.BUILD_HATCHERY,i.BUILD_HYDRALISKDEN,i.BUILD_INFESTATIONPIT,i.BUILD_INTERCEPTORS,i.BUILD_MISSILETURRET,i.BUILD_NEXUS,i.BUILD_NUKE,i.BUILD_NYDUSNETWORK,i.BUILD_NYDUSWORM,i.BUILD_PHOTONCANNON,i.BUILD_PYLON,i.BUILD_REACTOR,i.BUILD_REACTOR_BARRACKS,i.BUILD_REACTOR_FACTORY,i.BUILD_REACTOR_STARPORT,i.BUILD_REFINERY,i.BUILD_ROACHWARREN,i.BUILD_ROBOTICSBAY,i.BUILD_ROBOTICSFACILITY,i.BUILD_SENSORTOWER,i.BUILD_SHIELDBATTERY,i.BUILD_SPAWNINGPOOL,i.BUILD_SPINECRAWLER,i.BUILD_SPIRE,i.BUILD_SPORECRAWLER,i.BUILD_STARGATE,i.BUILD_STARPORT,i.BUILD_STASISTRAP,i.BUILD_SUPPLYDEPOT,i.BUILD_TECHLAB,i.BUILD_TECHLAB_BARRACKS,i.BUILD_TECHLAB_FACTORY,i.BUILD_TECHLAB_STARPORT,i.BUILD_TEMPLARARCHIVE,i.BUILD_TWILIGHTCOUNCIL,i.BUILD_ULTRALISKCAVERN],N=[i.LIFT_BARRACKS,i.LIFT_COMMANDCENTER,i.LIFT_FACTORY,i.LIFT_ORBITALCOMMAND,i.LIFT_STARPORT],L=[i.LAND_BARRACKS,i.LAND_COMMANDCENTER,i.LAND_FACTORY,i.LAND_ORBITALCOMMAND,i.LAND_STARPORT],D=[i.RALLY_COMMANDCENTER,i.RALLY_HATCHERY_WORKERS,i.RALLY_NEXUS];e.exports={addonTypes:m,carryingBuffs:P,carryingMineralsBuffs:_,carryingVespeneBuffs:I,changelingTypes:C,combatTypes:v,commandCenterTypes:p,constructionAbilities:w,creepGenerators:R,creepTumorTypes:b,flyingStructureTypes:s,gasMineTypes:g,gatheringAbilities:T,harvestingAbilities:O,hatcheryTypes:c,landingAbilities:L,liftingAbilities:N,mineralFieldTypes:f,rallyWorkersAbilities:D,richGasMineTypes:h,reactorTypes:E,returningAbilities:S,structureTypes:l,techLabTypes:y,townhallTypes:d,unbuildablePlateTypes:a,vespeneGeyserTypes:u,workerTypes:A}},function(e,t,n){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(217):e.exports=n(219)},function(e,t,n){"use strict";const r=n(159),i=n(3),o=n(58),s=n(74),a=n(0),u=n(6),l=n(1),c=n(92),p=Object.entries(l).reduce((e,[t,n])=>(e[n]=t,e),{}),d=Object.entries(i).reduce((e,[t,n])=>(e[n]=t,e),{}),f=Object.entries(c).reduce((e,[t,n])=>(e[n]=t,e),{}),h=Object.entries(o).reduce((e,[t,n])=>(e[n]=t,e),{}),g={[l.ZEALOT]:i.TRAINWARP_ZEALOT,[l.STALKER]:i.TRAINWARP_STALKER,[l.SENTRY]:i.TRAINWARP_SENTRY,[l.ADEPT]:i.TRAINWARP_ADEPT,[l.HIGHTEMPLAR]:i.TRAINWARP_HIGHTEMPLAR,[l.DARKTEMPLAR]:i.TRAINWARP_DARKTEMPLAR};e.exports={Ability:i,AbilityId:d,AbilitiesByUnit:r,Buff:o,BuffId:h,Color:s,enums:a,groups:u,UnitType:l,UnitTypeId:p,Upgrade:c,UpgradeId:f,WarpUnitAbility:g}},function(e,t,n){"use strict";var r=SyntaxError,i=Function,o=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch(e){a=null}var u=function(){throw new o},l=a?function(){try{return u}catch(e){try{return a(arguments,"callee").get}catch(e){return u}}}():u,c=n(165)(),p=Object.getPrototypeOf||function(e){return e.__proto__},d={},f="undefined"==typeof Uint8Array?void 0:p(Uint8Array),h={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":c?p([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":c?p(p([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&c?p((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&c?p((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":c?p(""[Symbol.iterator]()):void 0,"%Symbol%":c?Symbol:void 0,"%SyntaxError%":r,"%ThrowTypeError%":l,"%TypedArray%":f,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=n(99),E=n(38),m=y.call(Function.call,Array.prototype.concat),A=y.call(Function.apply,Array.prototype.splice),v=y.call(Function.call,String.prototype.replace),R=y.call(Function.call,String.prototype.slice),b=y.call(Function.call,RegExp.prototype.exec),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,S=function(e){var t=R(e,0,1),n=R(e,-1);if("%"===t&&"%"!==n)throw new r("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new r("invalid intrinsic syntax, expected opening `%`");var i=[];return v(e,C,(function(e,t,n,r){i[i.length]=n?v(r,T,"$1"):t||e})),i},O=function(e,t){var n,i=e;if(E(g,i)&&(i="%"+(n=g[i])[0]+"%"),E(h,i)){var a=h[i];if(a===d&&(a=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=p(i.prototype))}return h[t]=n,n}(i)),void 0===a&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:a}}throw new r("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new o('"allowMissing" argument must be a boolean');if(null===b(/^%?[^%]*%?$/g,e))throw new r("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=S(e),i=n.length>0?n[0]:"",s=O("%"+i+"%",t),u=s.name,l=s.value,c=!1,p=s.alias;p&&(i=p[0],A(n,m([0,1],p)));for(var d=1,f=!0;d<n.length;d+=1){var g=n[d],y=R(g,0,1),v=R(g,-1);if(('"'===y||"'"===y||"`"===y||'"'===v||"'"===v||"`"===v)&&y!==v)throw new r("property names with quotes must have matching quotes");if("constructor"!==g&&f||(c=!0),E(h,u="%"+(i+="."+g)+"%"))l=h[u];else if(null!=l){if(!(g in l)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(a&&d+1>=n.length){var C=a(l,g);l=(f=!!C)&&"get"in C&&!("originalValue"in C.get)?C.get:l[g]}else f=E(l,g),l=l[g];f&&!c&&(h[u]=l)}}return l}},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";var r=n(47),i="undefined"==typeof navigator,o={e:{}},s,a="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null;function u(){try{var e=s;return s=null,e.apply(this,arguments)}catch(e){return o.e=e,o}}function l(e){return s=e,u}var c=function(e,t){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=e,this.constructor$=t,t.prototype)n.call(t.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=t.prototype[r])}return r.prototype=t.prototype,e.prototype=new r,e.prototype};function p(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function d(e){return"function"==typeof e||"object"==typeof e&&null!==e}function f(e){return p(e)?new Error(S(e)):e}function h(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=e[n];return i[n]=t,i}function g(e,t,n){if(!r.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var i=Object.getOwnPropertyDescriptor(e,t);return null!=i?null==i.get&&null==i.set?i.value:n:void 0}function y(e,t,n){if(p(e))return e;var i={value:n,configurable:!0,enumerable:!1,writable:!0};return r.defineProperty(e,t,i),e}function E(e){throw e}var m=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(r.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var i=[],o=Object.create(null);null!=e&&!t(e);){var s;try{s=n(e)}catch(e){return i}for(var a=0;a<s.length;++a){var u=s[a];if(!o[u]){o[u]=!0;var l=Object.getOwnPropertyDescriptor(e,u);null!=l&&null==l.get&&null==l.set&&i.push(u)}}e=r.getPrototypeOf(e)}return i}}var i={}.hasOwnProperty;return function(n){if(t(n))return[];var r=[];e:for(var o in n)if(i.call(n,o))r.push(o);else{for(var s=0;s<e.length;++s)if(i.call(e[s],o))continue e;r.push(o)}return r}}(),A=/this\s*\.\s*\S+\s*=/;function v(e){try{if("function"==typeof e){var t=r.names(e.prototype),n=r.isES5&&t.length>1,i=t.length>0&&!(1===t.length&&"constructor"===t[0]),o=A.test(e+"")&&r.names(e).length>0;if(n||i||o)return!0}return!1}catch(e){return!1}}function R(e){function t(){}t.prototype=e;var n=new t;function r(){return typeof n.foo}return r(),r(),e}var b=/^[a-z$_][a-z$_0-9]*$/i;function C(e){return b.test(e)}function T(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=t+i+n;return r}function S(e){try{return e+""}catch(e){return"[no string representation]"}}function O(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function _(e){try{y(e,"isOperational",!0)}catch(e){}}function I(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function P(e){return O(e)&&r.propertyIsWritable(e,"stack")}var w="stack"in new Error?function(e){return P(e)?e:new Error(S(e))}:function(e){if(P(e))return e;try{throw new Error(S(e))}catch(e){return e}};function N(e){return{}.toString.call(e)}function L(e,t,n){for(var i=r.names(e),o=0;o<i.length;++o){var s=i[o];if(n(s))try{r.defineProperty(t,s,r.getDescriptor(e,s))}catch(e){}}}var D=function(e){return r.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var x="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};D=function(e){return r.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?x(e):null}}var F="undefined"!=typeof process&&"[object process]"===N(process).toLowerCase(),M="undefined"!=typeof process&&void 0!==process.env,B;function U(e){return M?process.env[e]:void 0}function k(){if("function"==typeof Promise)try{if("[object Promise]"===N(new Promise((function(){}))))return Promise}catch(e){}}function j(e,t){if(null===e||"function"!=typeof t||t===B)return t;null!==e.domain&&(t=e.domain.bind(t));var n=e.async;if(null!==n){var r=t;t=function(){for(var e=arguments.length+2,t=new Array(e),i=2;i<e;++i)t[i]=arguments[i-2];return t[0]=r,t[1]=this,n.runInAsyncScope.apply(n,t)}}return t}var G={setReflectHandler:function(e){B=e},isClass:v,isIdentifier:C,inheritedDataKeys:m,getDataPropertyOrDefault:g,thrower:E,isArray:r.isArray,asArray:D,notEnumerableProp:y,isPrimitive:p,isObject:d,isError:O,canEvaluate:i,errorObj:o,tryCatch:l,inherits:c,withAppended:h,maybeWrapAsError:f,toFastProperties:R,filledRange:T,toString:S,canAttachTrace:P,ensureErrorObject:w,originatesFromRejection:I,markAsOriginatingFromRejection:_,classString:N,copyDescriptors:L,isNode:F,hasEnvVariables:M,env:U,global:a,getNativePromise:k,contextBind:j},H;G.isRecentNode=G.isNode&&(process.versions&&process.versions.node?H=process.versions.node.split(".").map(Number):process.version&&(H=process.version.split(".").map(Number)),0===H[0]&&H[1]>10||H[0]>0),G.nodeSupportsAsyncResource=G.isNode&&function(){var e=!1;try{e="function"==typeof n(130).AsyncResource.prototype.runInAsyncScope}catch(t){e=!1}return e}(),G.isNode&&G.toFastProperties(process);try{throw new Error}catch(e){G.lastLineError=e}e.exports=G},function(e,t,n){"use strict";const{EFFECT_REPAIR:r,STOP:i}=n(3),{Alliance:o}=n(0),{workerTypes:s}=n(6),{WorkerRace:a}=n(13),{PROBE:u,COLOSSUS:l,MULE:c}=n(1),{cellsInFootprint:p}=n(19),{distance:d}=n(2),{getFootprint:f}=n(20),{countTypes:h}=n(28),{createUnitCommand:g}=n(18),{isPendingContructing:y}=n(41),{isMoving:E,getPendingOrders:m}=n(24),A={unitTypeData:{},seigeTanksSiegedGrids:[],calculateSplashDamage:(e,t,n)=>{if(n.length>0&&t===l){let t=0;const r=2.8/(n.reduce((n,r)=>{const i=A.getUnitTypeData(e,r);return i.isFlying?n:(t+=1,n+2*i.radius)},0)/t),i=r<t?r:t;return i>1?i:1}return 1},calculateTotalHealthRatio:(e,t)=>{if(A.getUnitTypeData(e,t.unitType)){const{healthMax:n,shieldMax:r}=A.getUnitTypeData(e,t.unitType);return(t.health+t.shield)/(n+r)}},deleteLabel(e,t){e.withLabel(t).forEach(e=>e.labels.delete(t))},inSightRange:(e,t)=>e.some(e=>{const n=d(e.pos,t.pos)-t.radius;return e.data().sightRange>=n}),isMining(e,t){const{pos:n,unitType:r}=t;if(void 0===n||void 0===r)return!1;const i=A.getOrderTargetPosition(e,t);if(void 0===i)return!1;const o=d(n,i);let s=0;return t.isGathering("vespene")?s=2.2:t.isGathering("minerals")&&(s=r===c?1.92:1.62),o<s},isRepairing:e=>e.orders.some(e=>e.abilityId===r),getThirdWallPosition(e,t,n){const{getSpaceBetweenFootprints:r}=A,[i,o]=e,s=p(i.pos,f(i.unitType)),a=p(o.pos,f(o.unitType)),u=[s,a];let l=!1;return l=2===r([s,a])?u.some(e=>{const i=r([p(t,f(n)),e]);return i>.5&&i<1.5}):u.some(e=>{const i=r([p(t,f(n)),e]);return i>1.5&&i<2.5}),l},getSpaceBetweenFootprints(e){const[t,n]=e;let r=1/0;return t.forEach(e=>{n.forEach(t=>{r=r<d(e,t)?r:d(e,t)})}),r},getUnitTypeData:(e,t)=>{const n=A.unitTypeData[t];if(n){if(["healthMax","isFlying","radius","shieldMax","weaponCooldownMax"].every(e=>Object.prototype.hasOwnProperty.call(n,e))){let{healthMax:e,isFlying:t,radius:r,shieldMax:i,weaponCooldownMax:o}=n;return{healthMax:e,isFlying:t,radius:r,shieldMax:i,weaponCooldownMax:o}}return A.saveAndGetUnitTypeData(e,t)}return A.saveAndGetUnitTypeData(e,t)},getWithLabelAvailable:(e,t)=>{let n=t.isConstructing();if(n){t.orders[0].targetWorldSpacePos||e.getByTag(t.orders[0].targetUnitTag)||console.log("unit.orders",t.orders);const r=t.orders[0].targetWorldSpacePos?t.orders[0].targetWorldSpacePos:e.getByTag(t.orders[0].targetUnitTag).pos,i=e.getAlive().filter(e=>e.isStructure()).find(e=>t.orders[0].targetWorldSpacePos&&d(e.pos,r)<1);if(i){const{buildProgress:e}=i;if(void 0===e)return!1;e>=1&&(n=!1)}else n=!1}const r=!n||n&&t.unitType===u,i=t.unitType===u&&E(t);return r&&!t.isAttacking()&&!y(t)||i},getBuilders:e=>{const{getWithLabelAvailable:t}=A;return[...e.withLabel("builder").filter(n=>t(e,n)),...e.withLabel("proxy").filter(n=>t(e,n))].filter(t=>{const n=t.isGathering()&&A.isMining(e,t);return!t.isReturning()&&!n})},getUnitsById:(e,t)=>{const n=h.get(t)?h.get(t):[t];return e.getById(n)},getEnemyWorkers:e=>e.resources.get().units.getAlive(o.ENEMY).filter(t=>t.unitType===a[e.agent.race]),getMineralFieldTarget:(e,t)=>e.getClosest(t.pos,e.getMineralFields(),e.getMineralFields().length).filter(e=>d(e.pos,t.pos)<8).reduce((e,t)=>e.mineralContents<t.mineralContents?t:e,{mineralContents:0}),getMineralFieldAssignments:(e,t)=>{const n=e.getWorkers().filter(e=>e.isHarvesting("minerals"));return t.map(e=>{const t=n.filter(t=>{const n=t.labels.get("mineralField");return n&&n.tag===e.tag});e.labels.set("workerCount",t.length);const r=n.filter(t=>{const{orders:n}=t;if(void 0===n)return!1;const r=m(t);return[...n,...r].some(n=>!(n.targetUnitTag!==e.tag||!t.labels.has("mineralField")))});return{count:t.length,mineralContents:e.mineralContents,mineralFieldTag:e.tag,targetedCount:r.length}})},getNeediestMineralField:(e,t)=>{const n=A.getMineralFieldAssignments(e,t).filter(e=>e.count<2&&e.targetedCount<2).sort((e,t)=>{const{mineralContents:n}=e,{mineralContents:r}=t;return void 0===n||void 0===r?0:r-n}).sort((e,t)=>Math.max(e.count,e.targetedCount)-Math.max(t.count,t.targetedCount));if(n.length>0){const[t]=n,{mineralFieldTag:r}=t;if(r)return e.getByTag(r)}},getOrderTargetPosition:(e,t)=>{if(t.orders&&t.orders.length>0){const n=t.orders[0];if(n.targetWorldSpacePos)return n.targetWorldSpacePos;if(n.targetUnitTag){const t=e.getByTag(n.targetUnitTag);if(t)return t.pos}}},getTargetedByWorkers:(e,t)=>e.getWorkers().filter(e=>{const{orders:n}=e,r=e.pendingOrders;return void 0!==n&&n.some(e=>e.targetUnitTag===t.tag||!(!r||!r.some(e=>e.targetUnitTag===t.tag)))}),saveAndGetUnitTypeData:(e,t)=>{const[n]=e.getByType(t);if(n){let{healthMax:e,isFlying:r,radius:i,shieldMax:o,weaponCooldown:s}=n;const a=s;return A.unitTypeData[t]={healthMax:e,isFlying:r,radius:i,shieldMax:o,weaponCooldownMax:a},{healthMax:e,isFlying:r,radius:i,shieldMax:o,weaponCooldownMax:a}}return A.unitTypeData[t]},isWorker:e=>s.includes(e.unitType),setPendingOrders:(e,t)=>{e.pendingOrders?e.pendingOrders.push(t):e.pendingOrders=[t]},stopOverlappingBuilders:(e,t,n)=>{const r=[],o=A.getBuilders(e).filter(r=>{const i=A.getOrderTargetPosition(e,r);return r.tag!==t.tag&&i&&d(i,n)<1.6});if(o.length>0){const e=g(i,o.map(e=>e));r.push(e)}return r}};e.exports=A},function(e,t,n){"use strict";const{Race:r}=n(0),i=n(1),o=n(3),s={[r.ZERG]:i.EXTRACTOR,[r.PROTOSS]:i.ASSIMILATOR,[r.TERRAN]:i.REFINERY},a={[r.ZERG]:i.OVERLORD,[r.PROTOSS]:i.PYLON,[r.TERRAN]:i.SUPPLYDEPOT},u={[r.ZERG]:[i.HATCHERY,i.LAIR,i.HIVE],[r.PROTOSS]:[i.NEXUS],[r.TERRAN]:[i.COMMANDCENTER,i.ORBITALCOMMAND,i.PLANETARYFORTRESS]},l={[r.ZERG]:i.DRONE,[r.PROTOSS]:i.PROBE,[r.TERRAN]:i.SCV},c={[r.ZERG]:o.HARVEST_GATHER_DRONE,[r.PROTOSS]:o.HARVEST_GATHER_PROBE,[r.TERRAN]:o.HARVEST_GATHER_SCV};e.exports={GasMineRace:s,SupplyUnitRace:a,TownhallRace:u,WorkerRace:l,HarvestGatheringRace:c}},function(e,t,n){"use strict";const{UnitTypeId:r}=n(8),{gasMineTypes:i}=n(6),{supplyTypes:o}=n(28),s={set pausePlan(e){s.isPlanPaused!==e&&(s.isPlanPaused=e,console.log("Current step: "+s.currentStep)),s.pausedThisRound=e},bogIsActive:!1,dirtyBasePlan:!1,continueBuild:!0,currentStep:0,foodMark:12,foundPosition:null,isPlanPaused:null,latestStep:0,legacyPlan:[],mineralThreshold:512,naturalWallPylon:!1,pausedThisRound:!1,pendingFood:0,plan:[],planMax:{gasMine:null,supplyDepot:null},planMin:{},setPlan:e=>{s.plan=e,s.planMax.supplyDepot=Math.max.apply(Math,e.filter(e=>o.includes(e.unitType)).map(e=>e.food)),s.planMax.gasMine=Math.max.apply(Math,e.filter(e=>i.includes(e.unitType)).map(e=>e.food)),s.trainingTypes.forEach(t=>{s.planMin[r[t]]=Math.min.apply(Math,e.filter(e=>e.unitType===t).map(e=>e.food))})},getNextPlanStep:e=>s.legacyPlan.find(t=>Number.isInteger(t[0])&&t[0]>e),rallies:[],scouts:[],trainingTypes:[],unitMax:{},wallOff:null};e.exports=s},function(e,t,n){"use strict";const{createPoint2D:r}=n(2),i=n(74),o=Math.PI/180,s=2*Math.PI;e.exports={toRadians:e=>e*o,toDegrees:e=>e/o,gridsInCircle:(e,t,n={},o)=>{const s={distance:.5,...n},a=r(e);o&&o.setDrawSpheres(""+t,[{pos:a,color:i.YELLOW,size:5}]);const u=n.normalize?r:e=>e,l=2*s.distance,c=[];for(let n=a.x-t;n<a.x+l+t;n+=l)for(let r=a.y-t;r<a.y+l+t;r+=l)o&&o.setDrawCells(`xy-${n}${r}`,[{pos:{x:n,y:r}}],{color:i.WHITE,size:1}),(Math.pow(n-e.x,2)+Math.pow(r-e.y,2)<=t*t||Math.pow(n+l-e.x,2)+Math.pow(r-e.y,2)<=t*t||Math.pow(n-e.x,2)+Math.pow(r+l-e.y,2)<=t*t||Math.pow(n+l-e.x,2)+Math.pow(r+l-e.y,2)<=t*t)&&c.push(u({x:n,y:r}));return c},randomCirclePoints:(e,t,n=1)=>Array.from({length:n},()=>((e,t)=>{const n=Math.random()*s,r=Math.sin(n),i=Math.cos(n);return{x:Math.floor(e.x+t*i),y:Math.floor(e.y+t*r)}})(e,Math.sqrt(Math.random())*t))}},function(e,t,n){"use strict";const{UnitType:r}=n(8),{SMART:i,MOVE:o}=n(3),{Alliance:s}=n(0),{combatTypes:a,creepGenerators:u}=n(6),{gridsInCircle:l}=n(15),{distance:c,areEqual:p,avgPoints:d}=n(2),{getClosestPosition:f}=n(40),h=n(32),{getTargetedByWorkers:g,setPendingOrders:y}=n(12),{createUnitCommand:E}=n(18),m=n(23),{getPathablePositions:A,getPathablePositionsForStructure:v,getMapPath:R,getClosestPathablePositions:b,isCreepEdge:C}=n(39),{getPathCoordinates:T}=n(50),{getDistance:S}=n(30),O={availableExpansions:[],creepEdges:[],combatRally:null,gather:(e,t,n,r=!0)=>{const{map:a,units:u}=e.get(),{pos:l}=t,c=[];if(void 0===l)return c;t.labels.has("command")&&!1===r&&(console.warn("WARNING! unit with command erroniously told to force gather! Forcing queue"),r=!0);const p=u.getBases(s.SELF).filter(e=>e.buildProgress>=1);let d;if(n&&n.tag)d=n;else{let n;const r=p.filter(e=>{const{assignedHarvesters:t,idealHarvesters:n}=e;return void 0!==t&&void 0!==n&&t<n}),i=r.length>0?r:p;if(n=O.getClosestUnitFromUnit(e,t,i),void 0===n||void 0===n.pos)return c;[d]=function(e,t,n){return t.filter(t=>{const{pos:r}=t;return void 0!==r&&S(r,e)<=n})}(n.pos,u.getMineralFields(),10).sort((e,t)=>g(u,e).length-g(u,t).length)}if(d){const{pos:n}=d;if(void 0===n)return c;const s=O.getClosestPathablePositionsBetweenPositions(e,l,n),{distance:a,pathCoordinates:u}=s;if(S(l,n)>10&&a>16&&u.length>0){const e=E(o,[t]);e.targetWorldSpacePos=u[u.length-1],c.push(e),r=!0}const p=E(i,[t]);p.targetUnitTag=d.tag,p.queueCommand=r,c.push(p),y(t,p)}return c},getCombatRally:e=>{const{map:t,units:n}=e.get(),{combatRally:r}=O;return r||(function(e){const t=e.getNatural();if(void 0===t)return[];const n=t.getWall();return void 0===n?[]:n}(t).length>0?t.getCombatRally():h.getRallyPointByBases(t,n))},getClosestPathablePositionsBetweenPositions:(e,t,n)=>{const{map:r}=e.get(),i=A(r,t),o=_(i,t),s=A(r,n),a=_(s,n),u=i.map(t=>{const i=s.map(n=>({pathablePosition:t,pathableTargetPosition:n,pathCoordinates:T(R(r,t,n)),distance:O.getDistanceByPath(e,t,n)}));if(o||a){const e=i.reduce((e,{distance:t})=>e+t,0)/i.length;return{pathCoordinates:T(R(r,t,n)),pathablePosition:t,pathableTargetPosition:n,distance:e}}return i.reduce((e,t)=>e.distance<t.distance?e:t)}).sort((e,t)=>e.distance-t.distance);if(o||a){const e=u.reduce((e,t)=>e+t.distance,0)/u.length,l=o?d(i):t,c=a?d(s):f(n,s)[0];return{pathCoordinates:T(R(r,l,c)),pathablePosition:l,pathableTargetPosition:c,distance:e}}return u[0]},getClosestPositionByPath:(e,t,n,r=1)=>n.map(n=>({point:n,distance:O.getDistanceByPath(e,t,n)})).sort((e,t)=>e.distance-t.distance).map(e=>e.point).slice(0,r),getClosestUnitByPath:(e,t,n,r=1)=>n.map(n=>{const{pos:r}=n;if(void 0===r)return;const i={unit:n};if(n.isFlying)i.distance=c(r,t);else{const n=O.getClosestPathablePositionsBetweenPositions(e,r,t);i.distance=n.distance}return i}).sort((e,t)=>e.distance-t.distance).map(e=>e.unit).slice(0,r),getClosestUnitPositionByPath:(e,t,n)=>{const{map:r}=e.get(),i=A(r,t),[o]=O.getClosestPositionByPath(e,n,i);return o},getClosestUnitFromUnit(e,t,n){const{map:r}=e.get(),{pos:i}=t;if(void 0===i)return;const o=v(r,t),s=n.map(e=>v(r,e)),a=o.map(t=>{const n=s.map(n=>{const r=n.map(n=>O.getDistanceByPath(e,t,n));return Math.min(...r)});return Math.min(...n)}),u=o[a.indexOf(Math.min(...a))];return O.getClosestUnitByPath(e,u,n,1)[0]},getCreepEdges:(e,t)=>{const{creepEdges:n}=O;if(n.length>0)return n;const{map:r,units:i}=e.get();for(let n=0;n<10;n++){const r=I(e,t,n);if(r.length>0)return r}return 0===[].length?r.getCreep().filter(e=>{const[t]=i.getClosest(e,i.getById(u));if(t){const{pos:n}=t;if(void 0===n)return!1;const i=S(e,n),o=C(r,e);return i<12.75&&o}}):void 0},getDistanceByPath:(e,t,n)=>{const{map:r}=e.get();try{const e=function(e,t,n=0){const r=[];if(p(e,t))return[e];const{x:i,y:o}=e,{x:s,y:a}=t;if(void 0===i||void 0===o||void 0===s||void 0===a)return[e];const u=s-i,l=a-o;n=0===n?Math.max(Math.abs(u),Math.abs(l)):n;for(let e=0;e<n;e++){const t=i+u/n*e,s=o+l/n*e;r.push({x:t,y:s})}return r}(t,n);let i=0;if(e.every((t,n)=>{if(n>0){const i=e[n-1];if(r.getHeight(t)-r.getHeight(i)>1)return!1}const[i]=b(r,t);return void 0!==i&&r.isPathable(i)}))return S(t,n);{let e=R(r,t,n);const o=T(e);i=o.reduce((e,t,n)=>{if(0===n)return e;const r=o[n-1];return e+S(r,t)},0);const s=0===e.length,a=!!(s&&S(t,n)<=2),u=!(!s||a);return a?0:u?1/0:i}}catch(e){return 1/0}},getTrainingUnitTypes:e=>{const{units:t}=e.get(),n=new Set,i=[...a,r.QUEEN];return t.getAlive(s.SELF).filter(e=>void 0!==e.orders&&e.orders.length>0).forEach(e=>{const{orders:t}=e;if(void 0===t)return!1;t.map(e=>e.abilityId).forEach(e=>{if(void 0===e)return!1;const t=m.unitTypeTrainingAbilities.get(e);void 0!==t&&i.includes(t)&&n.add(t)})}),[...n]}};function _(e,t){return e.some(e=>{const{x:n,y:r}=t,{x:i,y:o}=e;if(void 0===n||void 0===r||void 0===i||void 0===o)return!1;return(.5===Math.abs(n-i)||.5===Math.abs(r-o))&&S(t,e)<=1})}function I(e,t,n){const{map:r}=e.get(),{getDistanceByPath:i}=O;return l(t,n).filter(n=>C(r,n)&&i(e,t,n)<=10)}e.exports=O},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";e.exports={createUnitCommand:(e,t,n=!1)=>({abilityId:e,unitTags:t.map(e=>e.tag),queueCommand:n})}},function(e,t,n){"use strict";e.exports={cellsInFootprint:function(e,t,n=!0){return Array.from({length:t.w+1}).reduce((r,i,o)=>(1===o?n&&r.push(e):2===o?(r.push({x:e.x-1,y:e.y}),t.h>=2&&(r.push({x:e.x,y:e.y-1}),r.push({x:e.x-1,y:e.y-1}))):3===o?(r.push({x:e.x+1,y:e.y}),t.h>=2&&r.push({x:e.x+1,y:e.y-1}),t.h>=3&&(r.push({x:e.x-1,y:e.y+1}),r.push({x:e.x,y:e.y+1}),r.push({x:e.x+1,y:e.y+1}))):5===o&&(r.push({x:e.x-2,y:e.y}),r.push({x:e.x+2,y:e.y}),t.h>=5&&(r.push({x:e.x-2,y:e.y-2}),r.push({x:e.x-2,y:e.y-1}),r.push({x:e.x,y:e.y-2}),r.push({x:e.x-1,y:e.y-2}),r.push({x:e.x+1,y:e.y-2}),r.push({x:e.x+2,y:e.y-2}),r.push({x:e.x+2,y:e.y-1}),r.push({x:e.x-2,y:e.y+2}),r.push({x:e.x-2,y:e.y+1}),r.push({x:e.x,y:e.y+2}),r.push({x:e.x-1,y:e.y+2}),r.push({x:e.x+1,y:e.y+2}),r.push({x:e.x+2,y:e.y+2}),r.push({x:e.x+2,y:e.y+1}))),r),[])},circleCenterFromPoints:function(e,t,n){const r=(t.y-e.y)/(t.x-e.x),i=(n.y-t.y)/(n.x-t.x),o={x:(r*i*(e.y-n.y)+i*(e.x+t.x)-r*(t.x+n.x))/(2*(i-r))};return o.y=-1*(o.x-(e.x+t.x)/2)/r+(e.y+t.y)/2,o},distanceAAShapes:function(e,t){const n=Math.max(Math.abs(e.pos.x-t.pos.x)-(e.w/2+t.w/2),0),r=Math.max(Math.abs(e.pos.y-t.pos.y)-(e.h/2+t.h/2),0);return Math.sqrt(n*n+r*r)},distanceAAShapeAndPoint:function(e,t){const n=Math.max(Math.abs(e.pos.x-t.x)-e.w/2,0),r=Math.max(Math.abs(e.pos.y-t.y)-e.h/2,0);return Math.sqrt(n*n+r*r)}}},function(e,t,n){"use strict";const r=n(1),{structureTypes:i,flyingStructureTypes:o,townhallTypes:s,mineralFieldTypes:a}=n(6),u=n(1);r.BUNKER,r.CREEPTUMOR,r.CREEPTUMORBURROWED,r.CREEPTUMORQUEEN,r.GREATERSPIRE,r.KD8CHARGE,r.MISSILETURRET,r.ORACLESTASISTRAP,r.POINTDEFENSEDRONE,r.SPIRE,r.SPINECRAWLER,r.SPINECRAWLERUPROOTED,r.SPORECRAWLER,r.SPORECRAWLERUPROOTED,r.SUPPLYDEPOTLOWERED;const l=[r.AUTOTURRET,r.BANELINGNEST,r.BARRACKSREACTOR,r.BARRACKSTECHLAB,r.DARKSHRINE,r.FACTORYREACTOR,r.FACTORYTECHLAB,r.PHOTONCANNON,r.PYLON,r.REACTOR,r.SENSORTOWER,r.SHIELDBATTERY,r.SPORECRAWLER,r.STARPORTREACTOR,r.STARPORTTECHLAB,r.SUPPLYDEPOT,r.TECHLAB,r.UNBUILDABLEROCKSDESTRUCTIBLE,r.UNBUILDABLEBRICKSDESTRUCTIBLE,r.UNBUILDABLEPLATESDESTRUCTIBLE],c=[u.DESTRUCTIBLEDEBRIS4X4],p=[r.DESTRUCTIBLEDEBRIS6X6];e.exports={MineralField:function(e){return{pos:e,w:2,h:1}},Townhall:function(e){return{pos:e,w:5,h:5}},VespeneGeyser:function(e){return{pos:e,w:3,h:3}},getFootprint:function(e){return o.includes(e)?{h:0,w:0}:s.includes(e)?{w:5,h:5}:a.includes(e)?{w:2,h:1}:l.includes(e)?{w:2,h:2}:c.includes(e)||p.includes(e)?{w:6,h:6}:i.includes(e)?{w:3,h:3}:void 0}}},function(e,t,n){"use strict";var r,i,o=e.exports=n(35),s=n(116);o.codegen=n(212),o.fetch=n(213),o.path=n(214),o.fs=o.inquire("fs"),o.toArray=function(e){if(e){for(var t=Object.keys(e),n=new Array(t.length),r=0;r<t.length;)n[r]=e[t[r++]];return n}return[]},o.toObject=function(e){for(var t={},n=0;n<e.length;){var r=e[n++],i=e[n++];void 0!==i&&(t[r]=i)}return t};var a=/\\/g,u=/"/g;o.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},o.safeProp=function(e){return!/^[$\w_]+$/.test(e)||o.isReserved(e)?'["'+e.replace(a,"\\\\").replace(u,'\\"')+'"]':"."+e},o.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var l=/_([a-z])/g;o.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(l,(function(e,t){return t.toUpperCase()}))},o.compareFieldsById=function(e,t){return e.id-t.id},o.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(o.decorateRoot.remove(e.$type),e.$type.name=t,o.decorateRoot.add(e.$type)),e.$type;r||(r=n(118));var i=new r(t||e.name);return o.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var c=0;o.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=n(36));var t=new i("Enum"+c++,e);return o.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},o.setProperty=function(e,t,n){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,n,r){var i=n.shift();if("__proto__"===i)return t;if(n.length>0)t[i]=e(t[i]||{},n,r);else{var o=t[i];o&&(r=[].concat(o).concat(r)),t[i]=r}return t}(e,t=t.split("."),n)},Object.defineProperty(o,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(n(126)))}})},function(e,t,n){"use strict";e.exports=e=>e[Math.floor(Math.random()*e.length)]},function(e,t,n){"use strict";const{UnitType:r,WarpUnitAbility:i}=n(8),{Alliance:o}=n(0),{distance:s}=n(2),{getTimeInSeconds:a}=n(44),u=n(14),l={unitTypeTrainingAbilities:new Map,addEarmark:(e,t)=>{e.addEarmark({name:`${t.name}_${u.currentStep}`,minerals:t.mineralCost,vespene:t.vespeneCost})},calculateNearSupply:(e,t)=>t.reduce((t,n)=>t+e.getUnitTypeData(n.unitType).foodRequired,0),getAttributeBonusDamageAverage:(e,t,n)=>{const r=n.reduce((n,r)=>{let i=0;return t.damageBonus.forEach(t=>{e.getUnitTypeData(r).attributes.find(e=>e===t.attribute)&&(i+=t.bonus)}),n+i},0);return r>0?r/n.length:0},getBuildTimeElapsed(e,t){const{buildProgress:n}=t,{buildTime:r}=e.getUnitTypeData(t.unitType);return a(r)*n},getSupply:(e,t)=>t.reduce((t,n)=>t+e.getUnitTypeData(n.unitType).foodRequired,0),getUpgradeBonus:(e,t)=>{if(e===o.SELF)return 0;if(e===o.ENEMY){const e=Math.round(t/10);return e>0?e:1}},isTrainingUnit:(e,t)=>t.orders.some(t=>Object.keys(r).some(n=>t.abilityId===e.getUnitTypeData(r[n]).abilityId)),setEnemySupplyPowers:(e,t,n)=>{t.forEach(t=>{t.enemyUnits=n.filter(e=>s(t.pos,e.pos)<=16),t.enemySupply=l.calculateNearSupply(e,t.enemyUnits)})},setSelfSupplyPowers:(e,t)=>{t.forEach(n=>{n.selfUnits=t.filter(e=>s(n.pos,e.pos)<=16),n.selfSupply=l.calculateNearSupply(e,n.selfUnits)})},setUnitTypeTrainingAbilityMapping:e=>{Array.from(Object.values(r)).forEach(t=>{l.unitTypeTrainingAbilities.set(e.getUnitTypeData(t).abilityId,t),i[t]&&l.unitTypeTrainingAbilities.set(i[t],t)})}};e.exports=l},function(e,t,n){"use strict";const r=n(58),{HARVEST_GATHER:i,MOVE:o}=n(3),{Alliance:s,WeaponTargetType:a}=n(0),{ZEALOT:u,ZERGLING:l,ROACH:c}=n(1),{add:p}=n(2),{createUnitCommand:d}=n(18),f={enemyCharge:!1,enemyMetabolicBoost:!1,selfGlialReconstitution:!1,selfArmorUpgradeLevel:0,enemyArmorUpgradeLevel:0,selfAttackUpgradeLevel:0,enemyAttackUpgradeLevel:0,getArmorUpgradeLevel:e=>{let t=0;return e===s.SELF?t=f.selfArmorUpgradeLevel:e===s.ENEMY&&(t=f.enemyArmorUpgradeLevel),t},getAttackUpgradeLevel:e=>{let t=0;return e===s.SELF?t=f.selfAttackUpgradeLevel:e===s.ENEMY&&(t=f.enemyAttackUpgradeLevel),t},getHighestRangeWeapon:(e,t)=>{const{weapons:n}=e.data(),[r]=n.filter(e=>e.type===t||e.type===a.ANY).sort((e,t)=>t.range-e.range);return r},getUnitCornerPosition:e=>p(e.pos,e.radius),getMovementSpeed:e=>{let{movementSpeed:t}=e.data();return e.unitType===c&&e.alliance===s.SELF&&f.selfGlialReconstitution&&(t+=.75),e.unitType===u&&e.alliance===s.ENEMY&&f.enemyCharge&&(t*=1.5),e.unitType===l&&e.alliance===s.ENEMY&&f.enemyMetabolicBoost&&(t*=1.6),e.buffIds.includes(r.STIMPACK)&&(t*=1.5),t},getPendingOrders:e=>e.pendingOrders||[],getWeaponThatCanAttack:(e,t,n)=>{const{weapons:r}=e.getUnitTypeData(t);if(!r)return;return r.find(e=>{const{type:t}=e;return(t!==a.GROUND||!n.isFlying)&&!(t===a.AIR&&!n.isFlying)})},isMoving:e=>{const{orders:t}=e;return void 0!==t&&0!==t.length&&t[0].abilityId===o},mine:(e,t,n=!0)=>{const r=d(i,[e],n);return r.targetUnitTag=t.tag,r},setAttackUpgradeLevel:e=>{e.some(e=>{if(e.alliance===s.SELF){if(e.armorUpgradeLevel>f.selfArmorUpgradeLevel)return f.selfArmorUpgradeLevel=e.armorUpgradeLevel,!0}else if(e.alliance===s.ENEMY&&e.armorUpgradeLevel>f.enemyArmorUpgradeLevel)return f.enemyArmorUpgradeLevel=e.armorUpgradeLevel,!0})},setArmorUpgradeLevel:e=>{e.some(e=>{if(e.alliance===s.SELF){if(e.armorUpgradeLevel>f.selfArmorUpgradeLevel)return f.selfArmorUpgradeLevel=e.armorUpgradeLevel,!0}else if(e.alliance===s.ENEMY&&e.armorUpgradeLevel>f.enemyArmorUpgradeLevel)return f.enemyArmorUpgradeLevel=e.armorUpgradeLevel,!0})}};e.exports=f},function(e,t,n){"use strict";const{MOVE:r}=n(3),{PROBE:i}=n(1),{getEnemyCombatSupply:o}=n(29),s=n(33),a=n(12),u={earlyScout:!0,earlyScoutTime:122,enemyBuildType:"",enemyCombatSupply:0,outsupplied:!1,scoutReport:"",lastSeen:{},setEnemyCombatSupply:e=>{u.enemyCombatSupply=o(e)},setOutsupplied:()=>{u.outsupplied=u.enemyCombatSupply>s.selfCombatSupply},setScout:(e,t,n,o)=>{let[s]=e.getClosest(t,e.getById(n).filter(t=>{const{noQueue:n,orders:o,pos:s,unitType:u}=t;if(void 0===n||void 0===o||void 0===s||void 0===u)return!1;const l=t.isGathering()&&!a.isMining(e,t);return n||o&&o.some(e=>e.abilityId===r)||t.isConstructing()&&u===i||l}));s||([s]=e.getClosest(t,e.getById(n).filter(e=>e.unitType===n&&!e.isConstructing()&&e.isGathering()))),s&&(console.log(s.orders[0]&&s.orders[0].abilityId),s.labels.clear(),s.labels.get(o)||(s.labels.set(o,!0),console.log("Set "+o)))},opponentRace:null};e.exports=u},function(e,t){e.exports={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4}},function(e,t,n){"use strict";var r=n(407);e.exports=function(e){return"symbol"==typeof e?"Symbol":"bigint"==typeof e?"BigInt":r(e)}},function(e,t,n){"use strict";const{UnitType:r}=n(8),{BUILD_REACTOR_STARPORT:i,BUILD_REACTOR_BARRACKS:o,BUILD_TECHLAB_FACTORY:s}=n(3),{COMMANDCENTER:a,COMMANDCENTERFLYING:u,ORBITALCOMMAND:l,ORBITALCOMMANDFLYING:c,SUPPLYDEPOT:p,SUPPLYDEPOTLOWERED:d,BARRACKS:f,BARRACKSFLYING:h,FACTORY:g,FACTORYFLYING:y,STARPORT:E,STARPORTFLYING:m,GATEWAY:A,WARPGATE:v,HATCHERY:R,LAIR:b,BARRACKSREACTOR:C,FACTORYTECHLAB:T,STARPORTREACTOR:S,EGG:O,LARVA:_,BANELINGCOCOON:I,RAVAGER:P,BANELING:w,LURKERMPBURROWED:N,SIEGETANK:L,SIEGETANKSIEGED:D,HELLION:x,HELLIONTANK:F,ROACH:M,HYDRALISK:B,ZERGLING:U,VIKINGFIGHTER:k,VIKINGASSAULT:j,WIDOWMINE:G,WIDOWMINEBURROWED:H,OVERLORD:W,PYLON:V,PLANETARYFORTRESS:Y,REACTOR:$,FACTORYREACTOR:K,TECHLAB:q,BARRACKSTECHLAB:z,STARPORTTECHLAB:Q}=n(1),Z=new Map([[f,[C,z]],[g,[K,T]],[E,[S,Q]]]),J=new Map([[h,f],[y,g],[m,E]]),X=[o,i,s],ee=new Map([[f,[f,h]],[a,[a,u,l,c]],[r.CREEPTUMORQUEEN,[r.CREEPTUMORBURROWED]],[g,[g,y]],[A,[A,v]],[R,[R,b]],[l,[l,c]],[$,[$,C,K,S]],[E,[E,m]],[p,[p,d]],[q,[q,z,T,Q]]]),te=new Map([[a,[l,Y]]]),ne=[O,_],re=new Map([[x,[x,F]],[M,[M,P]],[B,[B,N]],[L,[L,D]],[G,[G,H]],[k,[k,j]],[U,[U,w,I]]]),ie=[W,V,p];e.exports={addOnAbilities:X,addOnTypesMapping:Z,countTypes:ee,flyingTypesMapping:J,larvaOrEgg:ne,morphMapping:re,supplyTypes:ie,upgradeTypes:te}},function(e,t,n){"use strict";const{UnitType:r}=n(8),{Alliance:i}=n(0),{gridsInCircle:o}=n(15),{distance:s}=n(2),{morphMapping:a}=n(28),{existsInMap:u}=n(32),{getSupply:l}=n(23),c={enemyUnits:[],enemySupply:null,mappedEnemyUnits:[],threats:[],get enemyCombatUnits(){return c.enemyUnits.filter(e=>e.isCombatUnit())},addEnemyUnit:e=>{c.enemyUnits.push(e)},addUnmappedUnit:e=>{c.mappedEnemyUnits.push(...e.getAlive(i.ENEMY).filter(e=>!c.mappedEnemyUnits.some(t=>e.tag===t.tag)))},clearOutdatedMappedUnits:e=>{const{map:t,units:n}=e.get();c.mappedEnemyUnits.forEach(e=>{o(e.pos,1,{normalize:!0}).filter(n=>{if(u(t,n))return!!e.isFlying||t.isPathable(e.pos)}).every(e=>t.isVisible(e))&&!n.getByTag(e.tag).isCurrent()&&c.removedMappedUnit(e)})},removeEnemyUnit:e=>{c.enemyUnits=[...c.enemyUnits.filter(t=>t.tag!==e.tag)],c.removedMappedUnit(e)},removedMappedUnit:e=>{c.mappedEnemyUnits=[...c.mappedEnemyUnits.filter(t=>t.tag!==e.tag)]},getEnemyCombatSupply:e=>{const{enemyCombatUnits:t}=c,n=[];Object.keys(a).forEach(e=>n.push(...a[e]));const i=t.filter(e=>n.includes(e.unitType));let o=0;return i.forEach(t=>{const n=Object.keys(a).find(e=>a[e].includes(t.unitType));o+=e.getUnitTypeData(r[n]).foodRequired}),l(e,t)-o},setBaseThreats(e){const{units:t}=e.get(),n=t.getStructures().map(e=>e.pos);c.threats=[],n.forEach(e=>{const n=t.getAlive(i.ENEMY).filter(t=>s(t.pos,e)<16);c.threats.push(...n)})}};e.exports=c},function(e,t,n){"use strict";const{gasMineTypes:r}=n(6),{toDegrees:i}=n(15),{distance:o}=n(2),{getFootprint:s}=n(20),a={getDistance:(e,t)=>o(e,t),getMiddleOfStructure(e,t){if(r.includes(t))return e;let{x:n,y:i}=e;if(void 0===n||void 0===i)return e;const o=s(t);return void 0===o?e:(o.h%2==1&&(n+=.5,i+=.5),{x:n,y:i})},moveAwayPosition(e,t,n=2){const r=i(Math.atan2(e.y-t.y,e.x-t.x))+180;return{x:Math.cos(r*Math.PI/180)*n+t.x,y:Math.sin(r*Math.PI/180)*n+t.y}}};e.exports=a},function(e,t,n){"use strict";const{distance:r}=n(2);e.exports={range:(e,t,n)=>{if(void 0===t&&(t=e,e=0),void 0===n&&(n=1),n>0&&e>=t||n<0&&e<=t)return[];for(var r=[],i=e;n>0?i<t:i>t;i+=n)r.push(i);return r},intersectionOfPoints:(e,t)=>e.filter(e=>t.some(t=>r(e,t)<1)),pointsOverlap:(e,t)=>e.some(e=>t.some(t=>r(e,t)<1)),allPointsWithinGrid:(e,t)=>e.every(e=>t.some(t=>r(e,t)<1)),shuffle:e=>{let t,n=e.length;for(;0!=n;)t=Math.floor(Math.random()*n),n--,[e[n],e[t]]=[e[t],e[n]];return e}}},function(e,t,n){"use strict";const{Alliance:r}=n(0),{avgPoints:i,add:o}=n(2),s=n(22),a={existsInMap:(e,t)=>{const n=e.getSize();return t.x>=0&&t.x<n.x&&t.y>=0&&t.y<n.y},getRallyPointByBases:(e,t)=>{const n=i(t.getBases().map(e=>e.pos));let[o]=t.getClosest(n,t.getBases(r.ENEMY),1),s=o?o.pos:e.getEnemyMain()?e.getEnemyMain().townhallPosition:a.getRandomPoint(e);return i([...t.getBases().map(e=>e.pos),s])},getRandomPoint:e=>({x:Math.floor(Math.random()*Math.floor(e._mapSize.x)),y:Math.floor(Math.random()*Math.floor(e._mapSize.y))}),getRandomPoints:(e,t,n)=>{const r=[];for(let i=0;i<t;i++)r.push(n?s(n):a.getRandomPoint(e));return r},getAcrossTheMap:e=>{const t=e.path(o(e.getNatural().townhallPosition,3),o(e.getEnemyNatural().townhallPosition,3)).map(e=>({x:e[0],y:e[1]})),n=Math.round(t.length/6);return t[t.length-n-1]},getOutInFront:e=>{const t=e.path(o(e.getNatural().townhallPosition,3),o(e.getEnemyNatural().townhallPosition,3)).map(e=>({x:e[0],y:e[1]}));return t[Math.round(t.length/6)-1]}};e.exports=a},function(e,t,n){"use strict";const{Alliance:r}=n(0),{combatTypes:i}=n(6),{morphMapping:o}=n(28),{getSupply:s}=n(23),{getTrainingSupply:a}=n(41),u={previousUnits:[],missingUnits:[],inFieldSelfSupply:0,selfUnits:[],selfCombatSupply:0,checkUnitCount:({data:e,resources:t},n,i)=>{const{units:s}=t.get(),a=[];let l=[];l=o.has(n)?o.get(n):[n];let c=e.getUnitTypeData(n).abilityId;s.withCurrentOrders(c).forEach(e=>{e.orders.forEach(e=>{e.abilityId===c&&a.push(e)})});const p=s.getAlive(r.SELF).filter(e=>e.pendingOrders&&e.pendingOrders.some(e=>e.abilityId===c));return s.getById(l).length+a.length+p.length+u.missingUnits.filter(e=>e.unitType===n).length===i},setSelfCombatSupply:e=>{const{data:t,resources:n}=e;u.inFieldSelfSupply=s(t,n.get().units.getCombatUnits());const{inFieldSelfSupply:r,missingUnits:o}=u;u.selfCombatSupply=r+a(e,i)+o.reduce((e,n)=>n.isCombatUnit()?e+t.getUnitTypeData(n.unitType).foodRequired:e,0)}};e.exports=u},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";var r=t;function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(113),r.base64=n(203),r.EventEmitter=n(204),r.float=n(205),r.inquire=n(114),r.utf8=n(206),r.pool=n(207),r.LongBits=n(208),r.isNode=Boolean("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),r.global=r.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},function(e,t,n){"use strict";e.exports=s;var r=n(55);((s.prototype=Object.create(r.prototype)).constructor=s).className="Enum";var i=n(62),o=n(21);function s(e,t,n,i,o){if(r.call(this,e,n),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=o||{},this.reserved=void 0,t)for(var s=Object.keys(t),a=0;a<s.length;++a)"number"==typeof t[s[a]]&&(this.valuesById[this.values[s[a]]=t[s[a]]]=s[a])}s.fromJSON=function(e,t){var n=new s(e,t.values,t.options,t.comment,t.comments);return n.reserved=t.reserved,n},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},s.prototype.add=function(e,t,n){if(!o.isString(e))throw TypeError("name must be a string");if(!o.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},s.prototype.remove=function(e){if(!o.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},s.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},s.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},function(e,t){e.exports=require("util")},function(e,t,n){"use strict";var r=n(99);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,n){"use strict";const{gridsInCircle:r}=n(15),{distance:i,areEqual:o,getNeighbors:s}=n(2),a=n(32),{getPathCoordinates:u}=n(50),l={creepEdges:[],getClosestPathablePositions(e,t){const{x:n,y:r}=t;if(void 0===n||void 0===r)return[t];const s=[{x:Math.floor(n),y:Math.floor(r)},{x:Math.ceil(n),y:Math.floor(r)},{x:Math.floor(n),y:Math.ceil(r)},{x:Math.ceil(n),y:Math.ceil(r)}].filter((e,t,n)=>n.findIndex(t=>o(t,e))===t).filter(t=>e.isPathable(t)).sort((e,n)=>i(e,t)-i(n,t));return s.filter(e=>i(e,t)===i(s[0],t))},getClosestExpansion:(e,t)=>e.getExpansions().sort((e,n)=>i(e.townhallPosition,t)-i(n.townhallPosition,t)),getMapPath:(e,t,n)=>{const{getClosestPathablePositions:r}=l,[i]=r(e,t),[s]=r(e,n);let a=!1;if(o(t=i||t,n=s||n))return[];{let r=e.path(t,n);if(r=0===r.length?e.path(n,t):r,r.length>0){u(r).some(t=>!e.isPathable(t))&&(a=!0,r=e.path(t,n,{force:a}),r=0===r.length?e.path(n,t,{force:a}):r)}return r}},getPathablePositions:(e,t)=>{let n=[],r=0;const i=l.getClosestPathablePositions(e,t);for(n.push(...i);0===n.length;)n=c(e,t,r).filter(t=>e.isPathable(t)),r+=1;return n},getPathablePositionsForStructure:(e,t)=>{const{pos:n}=t;if(void 0===n)return[];let i=[],o=1;if(e.isPathable(n))i.push(n);else do{i=r(n,o).filter(t=>e.isPathable(t)),o++}while(0===i.length);return i},getTargetLocation:(e,t)=>e[t]&&e[t]()?e[t]().centroid:a[t](e),isCreep:(e,t)=>{const{x:n,y:r}=t;if(void 0===n||void 0===r)return!1;const i={x:Math.floor(n),y:Math.floor(r)};return e.getCreep().some(e=>o(e,i))},isCreepEdge:(e,t)=>l.isCreep(e,t)&&s(t).some(t=>!e.getCreep().some(e=>o(e,t))&&e.isPlaceable(t))};function c(e,t,n){return r(t,n).filter(t=>{const{x:n,y:r}=t,{x:i,y:o}=e.getSize();return void 0!==n&&void 0!==r&&void 0!==i&&void 0!==o&&(n>=0&&n<i&&r>=0&&r<o)})}e.exports=l},function(e,t,n){"use strict";const{distance:r}=n(2),i={getClosestPosition:(e,t,n=1)=>t.map(t=>({location:t,distance:r(e,t)})).sort((e,t)=>e.distance-t.distance).map(e=>e.location).slice(0,n)};e.exports=i},function(e,t,n){"use strict";const{Alliance:r}=n(0),{constructionAbilities:i}=n(6),{ZERGLING:o}=n(1),s={isPendingContructing:e=>e.pendingOrders&&e.pendingOrders.some(e=>i.includes(e.abilityId)),getTrainingSupply:(e,t)=>{const{data:n,resources:r}=e,{units:i}=r.get(),s=[];return t.forEach(e=>{let t=n.getUnitTypeData(e).abilityId;s.push(...i.withCurrentOrders(t).map(()=>e))}),s.reduce((e,t)=>e+(t===o?1:n.getUnitTypeData(t).foodRequired),0)},removePendingOrders:e=>{e.getAlive(r.SELF).forEach(e=>{e.pendingOrders&&e.pendingOrders.length>0&&(e.pendingOrders=[])})},removePendingOrderBySystemName:(e,t)=>{e.getAlive(r.SELF).forEach(e=>{e.pendingOrders&&e.pendingOrders.length>0&&(e.pendingOrders=e.pendingOrders.filter(e=>e.system!==t))})},setPendingOrderBySystemName:(e,t)=>{e.getAlive().forEach(e=>{e.pendingOrders&&e.pendingOrders.length>0&&e.pendingOrders.forEach(e=>e.system=t)})}};e.exports=s},function(e,t,n){"use strict";const{distance:r,avgPoints:i,getNeighbors:o}=n(2),{frontOfGrid:s}=n(102),{UnitType:a}=n(8),{flyingTypesMapping:u}=n(28),{PYLON:l}=n(1),{gridsInCircle:c}=n(15),{getClosestPosition:p}=n(40),d=n(22),f=n(68),h={getMineralLines:e=>{const{map:t,units:n}=e.get(),r=t.getOccupiedExpansions(),o=[];return r.forEach(e=>{const[t]=n.getClosest(e.townhallPosition,n.getBases());t&&o.push(...c(i([...e.cluster.mineralFields.map(e=>e.pos),t.pos,t.pos]),.6))}),o},findPosition:async(e,t,n)=>{const{actions:r,map:i,units:o}=e.get();u.has(t)&&(t=u.get(t));const s=n.map(e=>({pos:e,rand:Math.random()})).sort((e,t)=>e.rand-t.rand).map(e=>e.pos).slice(0,20);let c=await r.canPlace(t,s);const p=Object.keys(a).find(e=>a[e]===t);if(!c){const[e]=o.getById(l);e&&e.buildProgress<1&&(c=d(n.filter(e=>i.isPlaceableAt(t,e))))}return c?console.log("Found position for "+p,c):console.log("Could not find position for "+p),c},getCandidatePositions:async(e,t,n=null)=>"string"==typeof t?await h["get"+t](e,n):t,getByMainRamp:async e=>{const{map:t}=e.get(),n=t.getMain().areas.areaFill.filter(e=>o(e).some(e=>t.isRamp(e)));return t.getMain().areas.areaFill.filter(e=>t.isPathable(e)&&r(i(n),e)<=8)},getMiddleOfNaturalWall:async(e,t)=>{const{actions:n,map:r}=e.get(),o=r.getNatural().getWall()||f.wall;let s=[];if(o){const e=h.getPlaceableAtPositions(o,r,t),a=p(i(e),e,2);s=[await n.canPlace(t,a)]}return s},getNaturalWallPylon:e=>{const{map:t}=e.get();let n=[];const i=f.wall.length>0?f.wall:t.getNatural().getWall();if(i){const o=t.getNatural().townhallPosition;n=f.pylonPlacement?[f.pylonPlacement]:[],0===n.length&&(n=s(e,t.getNatural().areas.areaFill).filter(e=>i.every(t=>r(o,e)>4.5&&r(t,e)<=6.5&&r(t,e)>=3&&r(t,o)>r(e,o)))),0===n.length&&(n=s(e,t.getNatural().areas.areaFill).map(e=>(e.coverage=i.filter(t=>r(t,e)<=6.5&&r(t,e)>=1&&r(t,o)>r(e,o)).length,e)).sort((e,t)=>t.coverage-e.coverage).filter((e,t,n)=>e.coverage===n[0].coverage))}return n},getPlaceableAtPositions:(e,t,n)=>{const r=e.filter(e=>t.isPlaceableAt(n,e));if(0===r.length){let r=[];return e.forEach(e=>{r.push(e,...o(e)),r=r.filter((e,t,n)=>n.findIndex(t=>t.x===e.x&&t.y===e.y)===t)}),r.length>0?h.getPlaceableAtPositions(r,t,n):[]}return r},getInTheMain:async(e,t)=>{const{actions:n,map:r}=e.get(),i=r.getMain().areas.areaFill;return[await n.canPlace(t,i)]}};e.exports=h},function(e,t,n){"use strict";var r,i,o=n(47),s=o.freeze,a=n(11),u=a.inherits,l=a.notEnumerableProp;function c(e,t){function n(r){if(!(this instanceof n))return new n(r);l(this,"message","string"==typeof r?r:t),l(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return u(n,Error),n}var p=c("Warning","warning"),d=c("CancellationError","cancellation error"),f=c("TimeoutError","timeout error"),h=c("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(e){r=c("TypeError","type error"),i=c("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<g.length;++y)"function"==typeof Array.prototype[g[y]]&&(h.prototype[g[y]]=Array.prototype[g[y]]);o.defineProperty(h.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),h.prototype.isOperational=!0;var E=0;function m(e){if(!(this instanceof m))return new m(e);l(this,"name","OperationalError"),l(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(l(this,"message",e.message),l(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}h.prototype.toString=function(){var e=Array(4*E+1).join(" "),t="\n"+e+"AggregateError of:\n";E++,e=Array(4*E+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];t+=(r=i.join("\n"))+"\n"}return E--,t},u(m,Error);var A=Error.__BluebirdErrorTypes__;A||(A=s({CancellationError:d,TimeoutError:f,OperationalError:m,RejectionError:m,AggregateError:h}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:A,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:A.CancellationError,OperationalError:A.OperationalError,TimeoutError:A.TimeoutError,AggregateError:A.AggregateError,Warning:p}},function(e,t,n){"use strict";const{getMovementSpeed:r}=n(24),i={getTimeInSeconds:e=>e/22.4,getTravelDistancePerStep:e=>1.4*r(e)*(8/22.4)};e.exports=i},function(e,t,n){"use strict";const{Alliance:r}=n(0),{gatheringAbilities:i,mineralFieldTypes:o,gasMineTypes:s}=n(6),{COMMANDCENTER:a,MULE:u}=n(1),l=n(22),{gasMineCheckAndBuild:c}=n(462),{upgradeTypes:p}=n(28),{createUnitCommand:d}=n(18),{gather:f}=n(16),{mine:h,getPendingOrders:g}=n(24),{setPendingOrders:y}=n(12),E=n(7)("sc2:silly:WorkerBalance"),m={balanceResources:async(e,t=16/6)=>{const{agent:n,data:a,resources:u}=e,{minerals:p,vespene:d}=n;if(void 0===p||void 0===d)return;const{actions:f,units:g}=u.get();t=t===1/0||d>512&&p<512?32/6:t;const m=v(g),{mineralMinerCount:R,vespeneMinerCount:b}=A(g),C=R/b,T={buildProgress:1,alliance:r.SELF},S=g.getBases(T).find(e=>e.assignedHarvesters<e.idealHarvesters+2);if(C>t){if((C+(R-1)/(b+1))/2>t)if(m.length>0){const e=g.getBases(T);E("possible ths",e.map(e=>e.tag));const t=l(m),{pos:n}=t;if(void 0===n)return;const[r]=g.getClosest(n,e),s=g.getWorkers().filter(e=>e.orders.some(e=>[...i].includes(e.abilityId)&&e.targetUnitTag&&o.includes(g.getByTag(e.targetUnitTag).unitType)));if(E("possible doners",s.map(e=>e.tag)),r&&s.length>0){E("chosen closest th",r.tag);const[e]=g.getClosest(r.pos,s);E("chosen worker",e.tag),await f.mine([e],t,!1),y(e,h(e,t,!1))}}else c({agent:n,data:a,resources:u})}else{if(C===t)return;if(S&&C<t){if((C+(R+1)/(b-1))/2<t){const e=g.getAlive(T).filter(e=>e.isGasMine()),[t]=g.getClosest(S.pos,e),n=g.getWorkers().filter(e=>e.orders.some(e=>[...i].includes(e.abilityId)&&e.targetUnitTag&&s.includes(g.getByTag(e.targetUnitTag).unitType)));if(t&&n.length>0){E("chosen closest th",t.tag);const[e]=g.getClosest(t.pos,n);E("chosen worker",e.tag),await f.gather(e,null,!1)}}}}},gatherOrMine(e,t,n=null){const{units:i}=e.get();if(i.getBases(r.SELF).filter(e=>e.buildProgress>=1).length>0){const r=v(i),o=l(r),{mineralMinerCount:s,vespeneMinerCount:a}=A(i);return o&&s/a>16/6?[h(t,o,!1)]:f(e,t,n,!1)}return[]},getResourceDemand(e,t){let n=0,r=0;return t.forEach(t=>{if("UnitType"===t.orderType){let{mineralCost:i,vespeneCost:o}=e.getUnitTypeData(t.unitType),{adjustMineralCost:s,adjustVespeneCost:u}=function(e,t){const n={adjustMineralCost:0,adjustVespeneCost:0};if(p.get(a).includes(t)){const t=e.getUnitTypeData(a);n.adjustMineralCost=t.mineralCost,n.adjustVespeneCost=t.vespeneCost}return n}(e,t.unitType);n+=i-s,r+=o-u}else if("Upgrade"===t.orderType){let{mineralCost:i,vespeneCost:o}=e.getUpgradeData(t.upgrade);n+=i,r+=o}}),{totalMineralCost:n,totalVespeneCost:r}}};function A(e){const t={buildProgress:1,alliance:r.SELF};let n=e.getBases(t).reduce((e,t)=>e+t.assignedHarvesters,0);n+=e.getById(u).filter(e=>e.isHarvesting()).length*(3+2/3);return{mineralMinerCount:n,vespeneMinerCount:e.getGasMines(t).reduce((e,t)=>e+t.assignedHarvesters,0)}}function v(e){const t={buildProgress:1,alliance:r.SELF};return e.getGasMines(t).filter(t=>{const{assignedHarvesters:n,idealHarvesters:r}=t;if(void 0===n||void 0===r)return!1;return n+e.getWorkers().filter(e=>g(e).some(e=>{const{abilityId:n,targetUnitTag:r}=e;return void 0!==n&&void 0!==r&&([...i].includes(n)&&r===t.tag)})).length<r})}e.exports=m},function(e,t,n){"use strict";const r={creeptumorQueenSteps:[],executedSteps:[],getStringNameOfConstant:(e,t)=>""+Object.keys(e).find(n=>e[n]===t),logoutStepsExecuted:()=>{r.executedSteps.forEach(e=>console.log(e))},formatToMinutesAndSeconds:e=>{const t=Math.floor(e/60),n=e%60,{str_pad_left:i}=r;return`${t}:${i(n,"0",2)}`},str_pad_left:(e,t,n)=>(new Array(n+1).join(t)+e).slice(-n)};e.exports=r},function(e,t){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var r={}.hasOwnProperty,i={}.toString,o={}.constructor.prototype,s=function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t};e.exports={isArray:function(e){try{return"[object Array]"===i.call(e)}catch(e){return!1}},keys:s,names:s,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return o}},isES5:n,propertyIsWritable:function(){return!0}}}},function(e,t){function n(e){for(var t=[[e.x,e.y]];e.parent;)e=e.parent,t.push([e.x,e.y]);return t.reverse()}function r(e,t,n,r){var i,o,s,a,u,l,c=Math.abs,p=[];for(i=e<n?1:-1,o=t<r?1:-1,u=(s=c(n-e))-(a=c(r-t));p.push([e,t]),e!==n||t!==r;)(l=2*u)>-a&&(u-=a,e+=i),l<s&&(u+=s,t+=o);return p}t.backtrace=n,t.biBacktrace=function(e,t){var r=n(e),i=n(t);return r.concat(i.reverse())},t.pathLength=function(e){var t,n,r,i,o,s=0;for(t=1;t<e.length;++t)n=e[t-1],r=e[t],i=n[0]-r[0],o=n[1]-r[1],s+=Math.sqrt(i*i+o*o);return s},t.interpolate=r,t.expandPath=function(e){var t,n,i,o,s,a,u=[],l=e.length;if(l<2)return u;for(s=0;s<l-1;++s)for(t=e[s],n=e[s+1],o=(i=r(t[0],t[1],n[0],n[1])).length,a=0;a<o-1;++a)u.push(i[a]);return u.push(e[l-1]),u},t.smoothenPath=function(e,t){var n,i,o,s,a,u,l,c,p,d=t.length,f=t[0][0],h=t[0][1],g=t[d-1][0],y=t[d-1][1];for(o=[[n=f,i=h]],s=2;s<d;++s){for(l=r(n,i,(u=t[s])[0],u[1]),p=!1,a=1;a<l.length;++a)if(c=l[a],!e.isWalkableAt(c[0],c[1])){p=!0;break}p&&(lastValidCoord=t[s-1],o.push(lastValidCoord),n=lastValidCoord[0],i=lastValidCoord[1])}return o.push([g,y]),o},t.compressPath=function(e){if(e.length<3)return e;var t,n,r,i,o,s,a=[],u=e[0][0],l=e[0][1],c=e[1][0],p=e[1][1],d=c-u,f=p-l;for(d/=o=Math.sqrt(d*d+f*f),f/=o,a.push([u,l]),s=2;s<e.length;s++)t=c,n=p,r=d,i=f,d=(c=e[s][0])-t,f=(p=e[s][1])-n,f/=o=Math.sqrt(d*d+f*f),(d/=o)===r&&f===i||a.push([t,n]);return a.push([c,p]),a}},function(e,t,n){"use strict";var r=n(9),i=n(167),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&o(e,".prototype.")>-1?i(n):n}},function(e,t,n){"use strict";const r={getPathCoordinates:e=>e.map(e=>({x:e[0],y:e[1]}))};e.exports=r},function(e,t,n){"use strict";const{townhallTypes:r}=n(6),{distance:i}=n(2),{Alliance:o}=n(0),{TownhallRace:s}=n(13),{cellsInFootprint:a}=n(19),{getFootprint:u}=n(20),{pointsOverlap:l}=n(31),{gridsInCircle:c}=n(15),{getClosestUnitByPath:p}=n(16);e.exports={getAvailableExpansions:e=>{const{map:t,units:n}=e.get(),o=n.getById(r);return t.getExpansions().filter(t=>{const[n]=p(e,t.townhallPosition,o);if(n){const{pos:e}=n;return void 0!==e&&i(t.townhallPosition,e)>1}})},getBase:(e,t)=>{const{units:n}=e.get(),r=n.getBases(),[i]=n.getClosest(t.townhallPosition,r);return i},getOccupiedExpansions:e=>{const{map:t,units:n}=e.get(),r=n.getBases();return t.getExpansions().filter(e=>{const[t]=n.getClosest(e.townhallPosition,r);if(t)return i(e.townhallPosition,t.pos)<1})},getNextSafeExpansion:async(e,t)=>{const{agent:n,resources:r}=e,{map:p,units:d}=r.get(),f=d.getAlive(o.ENEMY),h=s[n.race][0],[g]=t.filter(e=>{const{townhallPosition:t}=e,n=u(h);if(void 0===n)return!1;const r=f.filter(e=>e.pos&&i(e.pos,t)<16).map(e=>{const{pos:t,radius:n,unitType:r}=e;if(void 0===t||void 0===n)return[];if(e.isStructure()){const e=u(r);return void 0===e?[]:a(t,e)}return[t,...c(t,n)]}).flat();return p.isPlaceableAt(h,t)&&!l(r,a(t,n))});return g.townhallPosition}}},function(e,t,n){"use strict";const{REACTOR:r}=n(1),{cellsInFootprint:i}=n(19),{getFootprint:o}=n(20),s={isBuildingAndAddonPlaceable:(e,t,n)=>e.isPlaceableAt(t,n)&&e.isPlaceableAt(r,s.getAddOnPlacement(n)),getBuildingAndAddonGrids:(e,t)=>[...i(e,o(t)),...i(s.getAddOnPlacement(e),o(r))],getAddOnBuildingPosition:e=>({x:e.x-2.5,y:e.y+.5}),getAddOnPosition:e=>({x:e.x+2.5,y:e.y-.5}),getAddOnBuildingPlacement:e=>({x:e.x-3,y:e.y}),getAddOnPlacement:e=>{const{x:t,y:n}=e;return void 0===t?e:{x:t+3,y:n}}};e.exports=s},function(e,t,n){"use strict";const{Ability:r}=n(8),{CloakState:i,Alliance:o}=n(0),{BARRACKS:s,FACTORY:a,STARPORT:u}=n(1),{createUnitCommand:l}=n(18),{getDistance:c,moveAwayPosition:p}=n(30),{getClosestUnitByPath:d,getCombatRally:f}=n(16),h={canAttack(e,t,n,r=!0){const{map:o}=e.get(),{cloak:s,isFlying:a,pos:u}=n;if(void 0===s||void 0===a||void 0===u)return!1;return[a&&t.canShootUp()||!a&&t.canShootGround(),s!==i.CLOAKED,!r||o.isVisible(u)].every(e=>e)},getCombatPoint:(e,t,n)=>{const r=t.find(e=>e.labels.get("combatPoint"));if(r){let i=!1;if(r.orders[0]){const e=r.orders.filter(e=>!!e.targetWorldSpacePos)[0];i=e&&Math.round(2*e.targetWorldSpacePos.x)/2===n.pos.x&&Math.round(2*e.targetWorldSpacePos.y)/2===n.pos.y}return i?r:(r.labels.delete("combatPoint"),h.setCombatPoint(e,t,n))}return h.setCombatPoint(e,t,n)},setCombatBuildingsRallies:e=>{const{units:t}=e.get(),n=[];return t.getById([s,a,u]).forEach(i=>{const{pos:s}=i;if(void 0===s)return[];const a=i.availableAbilities().find(e=>e===r.RALLY_BUILDING);if(a){const r=l(a,[i]);let u=f(e);const[d]=t.getClosest(s,t.getAlive(o.ENEMY)).filter(e=>e.pos&&c(e.pos,s)<16);if(d&&i.selfDPSHealth<d.selfDPSHealth){const{pos:e}=d;if(void 0===e)return[];u=p(e,s)}r.targetWorldSpacePos=u,n.push(r)}}),n},setCombatPoint:(e,t,n)=>{const[r]=d(e,n.pos,t);return r.labels.set("combatPoint",!0),r}};e.exports=h},function(e,t,n){"use strict";const{WarpUnitAbility:r}=n(8),{WARPGATE:i,TECHLAB:o}=n(1),s={selectedTypeToBuild:null,canTrainNow:(e,t,n)=>{const{data:r,resources:i}=e,{units:s}=i.get(),a=[t.noQueue||t.hasReactor()&&t.orders.length<2],{techRequirement:u}=r.getUnitTypeData(n);return u&&(u===o?a.push(t.hasTechLab()):a.push(s.getById(u).some(e=>e.buildProgress>=1))),a.every(e=>e)},haveAvailableProductionUnitsFor:(e,t)=>{const{resources:n}=e,{units:o}=n.get(),a=r[t];return o.getById(i).some(e=>e.abilityAvailable(a))||o.getProductionUnits(t).some(n=>s.canTrainNow(e,n,t)&&n.buildProgress>=1&&!n.isEnemy())},workersTrainingTendedTo:!1};e.exports=s},function(e,t,n){"use strict";e.exports=o,o.className="ReflectionObject";var r,i=n(21);function o(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(o.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof r&&t._handleAdd(this)},o.prototype.onRemove=function(e){var t=e.root;t instanceof r&&t._handleRemove(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},o.prototype.getOption=function(e){if(this.options)return this.options[e]},o.prototype.setOption=function(e,t,n){return n&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},o.prototype.setParsedOption=function(e,t,n){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(n){var o=r.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(o){var s=o[e];i.setProperty(s,n,t)}else(o={})[e]=i.setProperty({},n,t),r.push(o)}else{var a={};a[e]=t,r.push(a)}return this},o.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),r=0;r<n.length;++r)this.setOption(n[r],e[n[r]],t);return this},o.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},o._configure=function(e){r=e}},function(e,t,n){"use strict";e.exports=l;var r=n(55);((l.prototype=Object.create(r.prototype)).constructor=l).className="Field";var i,o=n(36),s=n(63),a=n(21),u=/^required|optional|repeated$/;function l(e,t,n,i,o,l,c){if(a.isObject(i)?(c=o,l=i,i=o=void 0):a.isObject(o)&&(c=l,l=o,o=void 0),r.call(this,e,l),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(n))throw TypeError("type must be a string");if(void 0!==i&&!u.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==o&&!a.isString(o))throw TypeError("extend must be a string");"proto3_optional"===i&&(i="optional"),this.rule=i&&"optional"!==i?i:void 0,this.type=n,this.id=t,this.extend=o||void 0,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==s.long[n],this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=c}l.fromJSON=function(e,t){return new l(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(l.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),l.prototype.setOption=function(e,t,n){return"packed"===e&&(this._packed=null),r.prototype.setOption.call(this,e,t,n)},l.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},l.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=s.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof i?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},l.d=function(e,t,n,r){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(i,o){a.decorateType(i.constructor).add(new l(o,e,t,n,{default:r}))}},l._configure=function(e){i=e}},function(e,t,n){"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},function(e,t,n){"use strict";e.exports={RADAR25:1,TAUNTB:2,DISABLEABILS:3,TRANSIENTMORPH:4,GRAVITONBEAM:5,GHOSTCLOAK:6,BANSHEECLOAK:7,POWERUSERWARPABLE:8,VORTEXBEHAVIORENEMY:9,CORRUPTION:10,QUEENSPAWNLARVATIMER:11,GHOSTHOLDFIRE:12,GHOSTHOLDFIREB:13,LEECH:14,LEECHDISABLEABILITIES:15,EMPDECLOAK:16,FUNGALGROWTH:17,GUARDIANSHIELD:18,SEEKERMISSILETIMEOUT:19,TIMEWARPPRODUCTION:20,ETHEREAL:21,NEURALPARASITE:22,NEURALPARASITEWAIT:23,STIMPACKMARAUDER:24,SUPPLYDROP:25,TWOHUNDREDANDFIFTYMMSTRIKECANNONS:26,STIMPACK:27,PSISTORM:28,CLOAKFIELDEFFECT:29,CHARGING:30,AIDANGERBUFF:31,VORTEXBEHAVIOR:32,SLOW:33,TEMPORALRIFTUNIT:34,SHEEPBUSY:35,CONTAMINATED:36,TIMESCALECONVERSIONBEHAVIOR:37,BLINDINGCLOUDSTRUCTURE:38,COLLAPSIBLEROCKTOWERCONJOINEDSEARCH:39,COLLAPSIBLEROCKTOWERRAMPDIAGONALCONJOINEDSEARCH:40,COLLAPSIBLETERRANTOWERCONJOINEDSEARCH:41,COLLAPSIBLETERRANTOWERRAMPDIAGONALCONJOINEDSEARCH:42,DIGESTERCREEPSPRAYVISION:43,INVULNERABILITYSHIELD:44,MINEDRONECOUNTDOWN:45,MOTHERSHIPSTASIS:46,MOTHERSHIPSTASISCASTER:47,MOTHERSHIPCOREENERGIZEVISUAL:48,ORACLEREVELATION:49,GHOSTSNIPEDOT:50,NEXUSPHASESHIFT:51,NEXUSINVULNERABILITY:52,ROUGHTERRAINSEARCH:53,ROUGHTERRAINSLOW:54,ORACLECLOAKFIELD:55,ORACLECLOAKFIELDEFFECT:56,SCRYERFRIENDLY:57,SPECTRESHIELD:58,VIPERCONSUMESTRUCTURE:59,RESTORESHIELDS:60,MERCENARYCYCLONEMISSILES:61,MERCENARYSENSORDISH:62,MERCENARYSHIELD:63,SCRYER:64,STUNROUNDINITIALBEHAVIOR:65,BUILDINGSHIELD:66,LASERSIGHT:67,PROTECTIVEBARRIER:68,CORRUPTORGROUNDATTACKDEBUFF:69,BATTLECRUISERANTIAIRDISABLE:70,BUILDINGSTASIS:71,STASIS:72,RESOURCESTUN:73,MAXIMUMTHRUST:74,CHARGEUP:75,CLOAKUNIT:76,NULLFIELD:77,RESCUE:78,BENIGN:79,LASERTARGETING:80,ENGAGE:81,CAPRESOURCE:82,BLINDINGCLOUD:83,DOOMDAMAGEDELAY:84,EYESTALK:85,BURROWCHARGE:86,HIDDEN:87,MINEDRONEDOT:88,MEDIVACSPEEDBOOST:89,EXTENDBRIDGEEXTENDINGBRIDGENEWIDE8OUT:90,EXTENDBRIDGEEXTENDINGBRIDGENWWIDE8OUT:91,EXTENDBRIDGEEXTENDINGBRIDGENEWIDE10OUT:92,EXTENDBRIDGEEXTENDINGBRIDGENWWIDE10OUT:93,EXTENDBRIDGEEXTENDINGBRIDGENEWIDE12OUT:94,EXTENDBRIDGEEXTENDINGBRIDGENWWIDE12OUT:95,PHASESHIELD:96,PURIFY:97,VOIDSIPHON:98,ORACLEWEAPON:99,ANTIAIRWEAPONSWITCHCOOLDOWN:100,ARBITERMPSTASISFIELD:101,IMMORTALOVERLOAD:102,CLOAKINGFIELDTARGETED:103,LIGHTNINGBOMB:104,ORACLEPHASESHIFT:105,RELEASEINTERCEPTORSCOOLDOWN:106,RELEASEINTERCEPTORSTIMEDLIFEWARNING:107,RELEASEINTERCEPTORSWANDERDELAY:108,RELEASEINTERCEPTORSBEACON:109,ARBITERMPCLOAKFIELDEFFECT:110,PURIFICATIONNOVA:111,CORRUPTIONBOMBDAMAGE:112,CORSAIRMPDISRUPTIONWEB:113,DISRUPTORPUSH:114,LIGHTOFAIUR:115,LOCKON:116,OVERCHARGE:117,OVERCHARGEDAMAGE:118,OVERCHARGESPEEDBOOST:119,SEEKERMISSILE:120,TEMPORALFIELD:121,VOIDRAYSWARMDAMAGEBOOST:122,VOIDMPIMMORTALREVIVESUPRESSED:123,DEVOURERMPACIDSPORES:124,DEFILERMPCONSUME:125,DEFILERMPDARKSWARM:126,DEFILERMPPLAGUE:127,QUEENMPENSNARE:128,ORACLESTASISTRAPTARGET:129,SELFREPAIR:130,AGGRESSIVEMUTATION:131,PARASITICBOMB:132,PARASITICBOMBUNITKU:133,PARASITICBOMBSECONDARYUNITSEARCH:134,ADEPTDEATHCHECK:135,LURKERHOLDFIRE:136,LURKERHOLDFIREB:137,TIMESTOPSTUN:138,SLAYNELEMENTALGRABSTUN:139,PURIFICATIONNOVAPOST:140,DISABLEINTERCEPTORS:141,BYPASSARMORDEBUFFONE:142,BYPASSARMORDEBUFFTWO:143,BYPASSARMORDEBUFFTHREE:144,CHANNELSNIPECOMBAT:145,TEMPESTDISRUPTIONBLASTSTUNBEHAVIOR:146,GRAVITONPRISON:147,INFESTORDISEASE:148,CARRYMINERALFIELDMINERALS:271,CARRYHIGHYIELDMINERALFIELDMINERALS:272,CARRYHARVESTABLEVESPENEGEYSERGAS:273,CARRYHARVESTABLEVESPENEGEYSERGASPROTOSS:274,CARRYHARVESTABLEVESPENEGEYSERGASZERG:275,PERMANENTLYCLOAKED:276,RAVENSCRAMBLERMISSILE:277,RAVENSHREDDERMISSILETIMEOUT:278,RAVENSHREDDERMISSILETINT:279,RAVENSHREDDERMISSILEARMORREDUCTION:280,CHRONOBOOSTENERGYCOST:281,NEXUSSHIELDRECHARGEONPYLONBEHAVIOR:282,NEXUSSHIELDRECHARGEONPYLONBEHAVIORSECONDARYONTARGET:283,INFESTORENSNARE:284,INFESTORENSNAREMAKEPRECURSORREHEIGHTSOURCE:285,NEXUSSHIELDOVERCHARGE:286,PARASITICBOMBDELAYTIMEDLIFE:287,TRANSFUSION:288,ACCELERATIONZONETEMPORALFIELD:289,ACCELERATIONZONEFLYINGTEMPORALFIELD:290,INHIBITORZONEFLYINGTEMPORALFIELD:291,DUMMYBUFF000:292,INHIBITORZONETEMPORALFIELD:293,RESONATINGGLAIVESPHASESHIFT:294,NEURALPARASITECHILDREN:295,AMORPHOUSARMORCLOUD:296,RAVENSHREDDERMISSILEARMORREDUCTIONUISUBTRUCT:297,BATTERYOVERCHARGE:298,LOADOUTSPRAYATTRACKER:299,DUMMYBUFF002:300,DUMMYBUFF001:301}},function(e,t,n){"use strict";e.exports=function(e){return"string"==typeof e||"symbol"==typeof e}},function(e,t,n){"use strict";const{Alliance:r}=n(0),{distance:i}=n(2),{getOccupiedExpansions:o,getBase:s}=n(51),a=n(22),{WorkerRace:u}=n(13),{getInRangeUnits:l,calculateHealthAdjustedSupply:c}=n(67),{filterLabels:p}=n(104),d=n(3),{larvaOrEgg:f}=n(28),{isRepairing:h,setPendingOrders:g,isMining:y}=n(12),{createUnitCommand:E}=n(18),{shadowEnemy:m}=n(105),{getDistance:A}=n(30),{retreat:v,pullWorkersToDefend:R,calculateNearDPSHealth:b,getUnitsInRangeOfPosition:C}=n(4),{canAttack:T}=n(53),{getTimeInSeconds:S}=n(44),{UnitType:O}=n(8),{getCombatRally:_}=n(16);function I(e,t,n,r,o,s){const a=[];if(!e.isEnemy()){const u={};(">"===n&&i(e.pos,t)>r||"<"===n&&i(e.pos,t)<r)&&(u.abilityId=o,u.unitTags=[e.tag]),"target"===s&&(u.targetWorldSpacePos=t),a.push(u)}return a}e.exports={orbitalCommandCenterBehavior:(e,t)=>{const{EFFECT_CALLDOWNMULE:n,EFFECT_SCAN:i}=d,{units:u}=e.get(),l=[],c=u.getById(O.ORBITALCOMMAND).find(e=>e.energy>50);if(c){const p=o(e).filter(t=>s(e,t).buildProgress>=1);if(p.length>=0){const e=a(p);if(e&&t===n){const[t]=u.getClosest(e.townhallPosition,u.getMineralFields());if(t){const e={abilityId:n,targetUnitTag:t.tag,unitTags:[c.tag]};l.push(e)}}}const d=u.getAlive(r.ENEMY).filter(e=>e.isCloaked()),f=d[Math.floor(Math.random()*d.length)];if(f){const e={abilityId:i,targetWorldSpacePos:f.pos,unitTags:[c.tag]};l.push(e)}}return l},liberatorBehavior:e=>{const{MORPH_LIBERATORAAMODE:t,MORPH_LIBERATORAGMODE:n}=d,{units:i}=e.get(),o=[],s=i.getAlive(r.ENEMY).filter(e=>!f.includes(e.unitType)&&!e.isStructure());return i.getByType(O.LIBERATOR).filter(e=>{let[t]=i.getClosest(e.pos,s,1);t&&!t.isFlying&&o.push(...I(e,t.pos,"<",10,n,"target"))}),i.getByType(O.LIBERATORAG).filter(e=>{let[n]=i.getClosest(e.pos,s,1);if(n&&!n.isFlying)o.push(...I(e,n.pos,">",10,t));else if(!n){const n={abilityId:t,unitTags:[e.tag]};o.push(n)}}),o},marineBehavior:e=>{const{units:t}=e.get(),{EFFECT_STIM_MARINE:n}=d,i=[],o=t.getAlive(r.ENEMY).filter(e=>!f.includes(e.unitType));return t.getByType(O.MARINE).filter(e=>{let[r]=t.getClosest(e.pos,o,1);r&&e.health/e.healthMax==1&&e.abilityAvailable(n)&&i.push(...I(e,r.pos,"<",5,n))}),i},marauderBehavior:e=>{const{units:t}=e.get(),{EFFECT_STIM_MARINE:n}=d,i=[],o=t.getAlive(r.ENEMY).filter(e=>!f.includes(e.unitType));return t.getByType(O.MARAUDER).filter(e=>{let[r]=t.getClosest(e.pos,o,1);r&&e.health/e.healthMax==1&&e.abilityAvailable(n)&&i.push(...I(e,r.pos,"<",6,n))}),i},muleBehavior:e=>{const{SMART:t}=d,{units:n}=e.get(),r=[];return n.getByType(O.MULE).filter(e=>e.isGathering()&&!y(n,e)).forEach(e=>{const{buffDurationRemain:i,orders:o,pos:s}=e;if(void 0===i||void 0===o||void 0===s)return;const u=o.find(e=>void 0!==e.targetUnitTag);if(void 0===u)return;const{targetUnitTag:l}=u;if(void 0===l)return;const c=n.getByTag(l);if(void 0===c)return;const{pos:p}=c;if(void 0!==p&&S(i)<5.59&&A(s,p)<16){const i=n.getMineralFields(),o=a(i.filter(e=>e.pos&&A(s,e.pos)>16)),u=E(t,[e]);u.targetUnitTag=o.tag,r.push(u)}}),r},observerBehavior:e=>{const t=[],{units:n}=e.resources.get();return t.push(...m(e,n.getById(O.OBSERVER))),t},overlordBehavior:e=>{const t=[],{units:n}=e.resources.get(),{OVERLORD:r,OVERSEER:i}=O;return t.push(...m(e,n.getById([r,i]))),t},supplyDepotBehavior:e=>{const{MORPH_SUPPLYDEPOT_LOWER:t,MORPH_SUPPLYDEPOT_RAISE:n}=d,{units:o}=e.get(),s=[],a=o.getAlive(r.ENEMY),{SUPPLYDEPOT:u,SUPPLYDEPOTLOWERED:l}=O;return o.getById([u,l]).filter(e=>{let[r]=o.getClosest(e.pos,a.filter(e=>!e.isFlying),1);r&&i(r.pos,e.pos)<8?s.push(E(n,[e])):s.push(E(t,[e]))}),s},tankBehavior:(e,t)=>{const n=[],{MORPH_SIEGEMODE:i,MORPH_UNSIEGE:o}=d,{SIEGETANK:s,SIEGETANKSIEGED:a}=O;if(t)e.getByType(s).filter(e=>{n.push(...I(e,t,"<",4,i))}),e.getByType(a).filter(e=>{n.push(...I(e,t,">",4,o))});else{const t=e.getAlive(r.ENEMY).filter(e=>!f.includes(e.unitType));e.getByType(s).filter(r=>{let[o]=e.getClosest(r.pos,t,1);o&&n.push(...I(r,o.pos,"<",13,i))}),e.getById(a).filter(r=>{let[i]=e.getClosest(r.pos,t,1);i&&n.push(...I(r,i.pos,">",13,o))})}return n},workerBehavior:async e=>{const{MOVE:t}=d,{agent:n,resources:o}=e,{frame:s,units:a}=o.get(),y=[],E=a.getAlive(r.ENEMY).filter(e=>!f.includes(e.unitType)),m=a.getById(u[n.race]).filter(e=>p(e,["scoutEnemyMain","scoutEnemyNatural","clearFromEnemy"])&&!h(e));if(E.length>0)for(const n of m){let[u]=a.getClosest(n.pos,E.filter(e=>!e.isStructure()),1);u||([u]=a.getClosest(n.pos,a.getStructures(r.ENEMY),1));if(i(n.pos,u.pos)<16){const p=l(n,a.getCombatUnits(r.SELF)),f=c(e,p),h=l(u,a.getCombatUnits(r.SELF)),A=c(e,h);u.inRangeUnits=l(u,E);const S=c(e,u.inRangeUnits);if(S>(f>A?f:A)){const r=l(n,m);if(S>c(e,r)){n.labels.set("retreating");const r={abilityId:t};if(void 0===n.pendingOrders||0===n.pendingOrders.length){const[t]=a.getClosest(n.pos,E.filter(e=>e.data().weapons.some(e=>e.range>0))),[s]=a.getClosest(n.pos,E.filter(e=>T(o,n,e))),l=C(e,_(o)),c=b(e,l,u.inRangeUnits.map(e=>e.unitType))>b(e,u.inRangeUnits,l.map(e=>e.unitType));r.targetWorldSpacePos=v(e,n,t||s,c),r.unitTags=m.filter(e=>i(e.pos,n.pos)<=1).map(e=>(g(e,r),e.tag)),y.push(r)}}else if(n.labels.get("builder")){const r=0===n.orders.length||n.isGathering()||n.isConstructing(),o=n.orders.find(e=>e.abilityId===t),a=r?n.pos:o?o.targetWorldSpacePos:n.pos;if(0===n.orders.length?console.log(s.timeInSeconds(),"No Orders"):n.orders.forEach(e=>console.log(s.timeInSeconds(),`Builder Ability: ${Object.keys(d).find(t=>d[t]===e.abilityId)}, worker.tag: ${n.tag}`)),(r||o)&&i(a,u.pos)>3){console.log("Ignore out of build range enemy.");continue}y.push(...await R(e,n,u,E))}}}}return y}}},function(e,t,n){"use strict";const{WarpUnitAbility:r,UnitType:i,UnitTypeId:o,UpgradeId:s}=n(8),{Alliance:a,Attribute:u,Race:l}=n(0),{addonTypes:c,techLabTypes:p}=n(6),{GasMineRace:d,TownhallRace:f,WorkerRace:h}=n(13),{WARPGATE:g,TECHLAB:y,BARRACKS:E,GREATERSPIRE:m}=n(1),{distance:A}=n(2),{getAvailableExpansions:v,getNextSafeExpansion:R}=n(51),{countTypes:b}=n(28),{getInTheMain:C}=n(42),{getAddOnBuildingPosition:T}=n(52),{warpIn:S}=n(110),{addAddOn:O}=n(81),_=n(4),I=n(14),{balanceResources:P}=n(45),{checkUnitCount:w}=n(33),N=n(54),{checkBuildingCount:L,findAndPlaceBuilding:D,unpauseAndLog:x,premoveBuilderToPosition:F,canBuild:M,assignAndSendWorkerToBuild:B,getFoodUsed:U}=n(4),{addEarmark:k,isTrainingUnit:j}=n(23),G=n(22),{createUnitCommand:H}=n(18),{CANCEL_QUEUE5:W}=n(3),{setPendingOrders:V}=n(12),Y={ability:async(e,t)=>{const n=[],{data:r,resources:i}=e,{units:o}=i.get();let s=r.findUnitTypesWithAbility(t);0===s.length&&(s=o.getAlive(a.SELF).map(e=>e.unitType));const u=o.getByType(s).filter(e=>e.alliance===a.SELF);if(u.length>0)if(u.filter(e=>e.abilityAvailable(t)).length>0){let e=u[Math.floor(Math.random()*u.length)];const r={abilityId:t,unitTags:[e.tag]};n.push(r)}else u[Math.floor(Math.random()*u.length)],I.pausePlan=!0,I.continueBuild=!1;return n},build:async(e,t,n=null,r=[],i=!1)=>{const o=[],{agent:s,data:a,resources:u}=e,{actions:p,units:d}=u.get();if(L(e,t,n)||null===n){const{race:g}=s;switch(i&&k(a,a.getUnitTypeData(h[g])),!0){case f[g].includes(t):if(0===f[g].indexOf(t))if(2==d.getBases().length&&s.race===l.TERRAN)r=await C(u,t),o.push(...await D(e,t,r,i));else{const n=v(u);r=n.length>0?[await R(e,n)]:[],o.push(...await D(e,t,r,i))}else i||o.push(...await $(e,t));break;case c.includes(t):{const r=_.getAbilityIdsForAddons(a,t),o=_.getUnitTypesWithAbilities(a,r),s=d.getById(o),u=function(e,t){const{data:n,resources:r}=e,{units:i}=r.get(),o=_.getAbilityIdsForAddons(n,t),s=_.getUnitTypesWithAbilities(n,o),a=i.getById(s),u=i.withLabel("addAddOn").filter(e=>o.some(t=>e.abilityAvailable(t))),l=a.filter(e=>o.some(t=>e.abilityAvailable(t)&&!e.labels.has("reposition")));return u.length>0?u:l}(e,t),l=u.length>0?u:function(e){return e.every(e=>e.buildProgress&&(e.buildProgress>=1||e.buildProgress<.5))?e.filter(e=>(e.hasReactor()||e.hasTechLab())&&e.isIdle()):[]}(s);if(l.length>0){let n=l[Math.floor(Math.random()*l.length)];await O(e,n,t,i)}else{const r=s.filter(e=>"0"===e.addOnTag).filter(e=>j(a,e)),i=G(r);if(void 0===i||void 0===i.orders)return;if(console.log(_.outpowered,i.orders[0].progress),!_.outpowered&&i&&i.orders[0].progress<=.5)await p.sendAction(H(W,[i]));else{const{mineralCost:r,vespeneCost:i}=a.getUnitTypeData(t);await P(e,r/i),null!==n&&(I.pausePlan=!0,I.continueBuild=!1)}}break}default:i||t!==m?o.push(...await D(e,t,r,i)):o.push(...await $(e,t))}}await p.sendAction(o)},buildGasMine:async(e,t,n,r)=>{const{agent:i,data:o,resources:s}=e,{actions:a,map:u}=s.get(),l=[];try{if(u.freeGasGeysers().length>0){const[n]=u.freeGasGeysers(),{pos:s}=n;if(void 0===s)return l;if(i.canAfford(t)&&!r)await a.sendAction(B(e,t,s)),I.pausePlan=!1;else if(l.push(...F(e,s,t,r)),!r){const{mineralCost:n,vespeneCost:r}=o.getUnitTypeData(t);await P(e,n/r),I.pausePlan=!0,I.continueBuild=!1}}}catch(e){console.log(e),null!==n&&(I.pausePlan=!0,I.continueBuild=!1)}return l},train:async(e,t,n=null)=>{const{agent:s,data:a,resources:u}=e,{actions:l,units:c}=u.get();let p=a.getUnitTypeData(t),{abilityId:d}=p;if(w(e,t,n)||null===n)if(M(e,t)){const s=function(e,t){const{data:n,resources:r}=e,{units:i}=r.get();let o=n.getUnitTypeData(t),{abilityId:s}=o;return i.getProductionUnits(t).find(e=>{const{orders:t}=e;if(void 0===s||void 0===t)return!1;return(e.isIdle()||e.hasReactor()&&t.length<2)&&e.abilityAvailable(s)&&!e.labels.has("reposition")})}(e,t);if(s){const n={abilityId:d,unitTags:[s.tag]};V(s,n),x(e,o[t]),await l.sendAction([n])}else{d=r[t];if(!(c.getById(g).filter(e=>e.abilityAvailable(d)).length>0))return void(null!==n&&(I.pausePlan=!0));x(e,o[t]),await S(u,this,t)}k(a,a.getUnitTypeData(t)),console.log("Training "+Object.keys(i).find(e=>i[e]===t)),N.selectedTypeToBuild=null}else{if(!s.canAfford(t)){console.log(`${s.foodUsed}: Cannot afford ${Object.keys(i).find(e=>i[e]===t)}`,I.isPlanPaused);const{mineralCost:n,vespeneCost:r}=a.getUnitTypeData(t);await P(e,n/r)}null!==n&&(I.pausePlan=!0,I.continueBuild=!1)}},upgrade:async(e,t)=>{const{agent:n,data:r,resources:i}=e,{actions:o,units:u}=i.get(),l=u.getUpgradeFacilities(t).filter(e=>e.alliance===a.SELF);if(l.length>0){const i=r.getUpgradeData(t),{abilityId:a}=i,u=l.find(e=>e.orders.find(e=>e.abilityId===a));if(!n.upgradeIds.includes(t)&&void 0===u){const n=l.find(e=>e.noQueue&&e.abilityAvailable(a));if(n){const u={abilityId:a,unitTags:[n.tag]};await o.sendAction([u]),x(e,s[t]),k(r,i)}else{const{mineralCost:n,vespeneCost:i}=r.getUpgradeData(t);await P(e,n/i),I.pausePlan=!0,I.continueBuild=!1}}}else{const e=u.getAlive(a.SELF).filter(e=>p.includes(e.unitType)),t=e.filter(e=>e.unitType===y);if(t.length>0){let e=u.getById(b.get(E)).filter(e=>e.buildProgress>=1),n=e.filter(e=>e.noQueue);const i=n.length>0?n:e.filter(e=>j(r,e)&&e.orders[0].progress<=.5);if(i.length>0){let e=[];if(i.forEach(n=>{t.forEach(t=>{const r=T(t.pos);e=e.length>0?A(n.pos,r)<A(e[0].pos,e[1])?[n,r]:e:[n,r]})}),e.length>0){if(j(r,e[0]))for(let t=0;t<e[0].orders.length;t++)await o.sendAction(H(W,[e[0]]));const t="reposition";e[0].labels.set(t,e[1])}}}else{const t=e.filter(e=>e.unitType!==y).map(e=>u.getClosest(T(e.pos),u.getAlive(a.SELF),1)[0]).filter(e=>e.noQueue);let n=[],i=u.getById(b.get(E)).filter(e=>e.buildProgress>=1),s=i.filter(e=>e.noQueue);const l=s.length>0?s:i.filter(e=>j(r,e)&&e.orders[0].progress<=.5);if(l.length>0&&l.forEach(e=>{t.forEach(t=>{n=n.length>0?A(e.pos,t.pos)<A(n[0].pos,n[1].pos)?[e,t]:n:[e,t]})}),n.length>0)if(j(r,n[0]))for(let e=0;e<n[0].orders.length;e++)await o.sendAction(H(W,[n[0]]));else{const e="swapBuilding";n[0].labels.set(e,n[1].pos),n[1].labels.set(e,n[0].pos)}}}},runPlan:async e=>{const{agent:t,data:n}=e;I.continueBuild=!0,I.pausedThisRound=!1;const{plan:r}=I;for(let i=0;i<r.length&&I.continueBuild;i++){I.currentStep=i;const o=r[i],{food:s,orderType:a,unitType:l}=o;if(null==l)break;const{attributes:c}=n.getUnitTypeData(l);if(void 0===c)break;const{candidatePositions:p,targetCount:d}=o;if(U(e)+1>=s){const t=U(e)+1===s;if("UnitType"===a)if(c.includes(u.STRUCTURE))await Y.build(e,l,d,p,t);else{if(t)break;await Y.train(e,l,d)}else if("Upgrade"===a){if(t)break;await Y.upgrade(e,o.upgrade)}}else{let{minerals:r}=t;if(void 0===r)break;if(r-=n.getEarmarkTotals("").minerals,r>I.mineralThreshold){c.includes(u.STRUCTURE)&&await Y.build(e,l,d,o.candidatePositions,!1);break}}}I.pausedThisRound||(I.pausePlan=!1)}};async function $(e,t){const{data:n}=e,r=[],i=await Y.ability(e,n.getUnitTypeData(t).abilityId);return i.length>0&&(x(e,o[t]),k(n,n.getUnitTypeData(t)),r.push(...i)),r}e.exports=Y},function(e,t,n){"use strict";e.exports=p;var r=n(55);((p.prototype=Object.create(r.prototype)).constructor=p).className="Namespace";var i,o,s,a=n(56),u=n(69),l=n(21);function c(e,t){if(e&&e.length){for(var n={},r=0;r<e.length;++r)n[e[r].name]=e[r].toJSON(t);return n}}function p(e,t){r.call(this,e,t),this.nested=void 0,this._nestedArray=null}function d(e){return e._nestedArray=null,e}p.fromJSON=function(e,t){return new p(e,t.options).addJSON(t.nested)},p.arrayToJSON=c,p.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>t)return!0;return!1},p.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(p.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),p.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",c(this.nestedArray,e)])},p.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),r=0;r<n.length;++r)t=e[n[r]],this.add((void 0!==t.fields?i.fromJSON:void 0!==t.values?s.fromJSON:void 0!==t.methods?o.fromJSON:void 0!==t.id?a.fromJSON:p.fromJSON)(n[r],t));return this},p.prototype.get=function(e){return this.nested&&this.nested[e]||null},p.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},p.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof i||e instanceof s||e instanceof o||e instanceof p||e instanceof u))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof p&&e instanceof p)||t instanceof i||t instanceof o)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,r=0;r<n.length;++r)e.add(n[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),d(this)},p.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),d(this)},p.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n=this;e.length>0;){var r=e.shift();if(n.nested&&n.nested[r]){if(!((n=n.nested[r])instanceof p))throw Error("path conflicts with non-namespace objects")}else n.add(n=new p(r))}return t&&n.addJSON(t),n},p.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof p?e[t++].resolveAll():e[t++].resolve();return this.resolve()},p.prototype.lookup=function(e,t,n){if("boolean"==typeof t?(n=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||t.indexOf(r.constructor)>-1)return r}else if(r instanceof p&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof p&&(r=this._nestedArray[i].lookup(e,t,!0)))return r;return null===this.parent||n?null:this.parent.lookup(e,t)},p.prototype.lookupType=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such type: "+e);return t},p.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},p.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[i,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},p.prototype.lookupService=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},p._configure=function(e,t,n){i=e,o=t,s=n}},function(e,t,n){"use strict";var r=t,i=n(21),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function s(e,t){var n=0,r={};for(t|=0;n<e.length;)r[o[n+t]]=e[n++];return r}r.basic=s([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=s([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),r.long=s([0,0,0,1,1],7),r.mapKey=s([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=s([1,5,0,0,0,5,5,0,0,0,1,1,0])},function(e,t){e.exports=require("events")},function(e,t,n){"use strict";const r=n(156),i=r("NodeSc2Error"),o=r(i,"ActionManagerError"),s={data:{},status:0},a=r(o,"BuildError",s),u=r(o,"TrainError",s),l=r(o,"GatherError",s),c=r(i,"MapDecompositionError"),p=r("GameEndedError");e.exports={GameEndedError:p,NodeSC2Error:i,MapDecompositionError:c,ActionManagerError:o,BuildError:a,TrainError:u,GatherError:l}},function(e,t){e.exports={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},octile:function(e,t){var n=Math.SQRT2-1;return e<t?n*e+t:n*t+e},chebyshev:function(e,t){return Math.max(e,t)}}},function(e,t,n){"use strict";const{Alliance:r}=n(0),{distance:i}=n(2),{calculateTotalHealthRatio:o}=n(12);e.exports={calculateHealthAdjustedSupply:(e,t)=>{const{data:n,resources:r}=e;return t.reduce((e,t)=>{const i=n.getUnitTypeData(t.unitType).foodRequired/2;return e+i+i*o(r.get().units,t)},0)},getInRangeUnits:(e,t,n=16)=>t.filter(t=>i(e.pos,t.pos)<n),getInRangeDestructables:(e,t)=>{const n=[364,365,376,373,638,639,640,643],o=e.getAlive(r.NEUTRAL).filter(e=>n.includes(e.unitType)),[s]=e.getClosest(t.pos,o).filter(e=>i(t.pos,e.pos)<16);return s},assessBattleField:(e,t)=>{const n={},r={};e.forEach(e=>{let t=n[e.unitType];t=void 0!==t?n[e.unitType]+1:1,n[e.unitType]=t}),t.forEach(e=>{let t=r[e.unitType];t=void 0!==t?r[e.unitType]+1:1,r[e.unitType]=t});return{selfComposition:n,enemyComposition:r}},decideEngagement:(t,n)=>{let r;const i=t.find((e,t)=>{if(Object.keys(n).every(t=>Object.keys(e[t]).every(r=>!["selfComposition","enemyComposition"].includes(t)||Object.keys(e[t]).length===Object.keys(n[t]).length&&e[t][r]===n[t][r])))return r=t,!0});return i?(t.unshift(t.splice(r,1)[0]),i.hasOwnProperty("attack")||(i.attack=e.exports.selectAttackAction(i.differential)),i.seen++,i.attack):(n.attack=.5>Math.random(),n.differential=0,t.unshift(n),n.seen=1,n.matches=0,n.attack)},selectAttackAction:e=>{if(e>=0)return(e+1)/(e+2)>Math.random();{const t=-1*e;return!((t+1)/(t+2)>Math.random())}}}},function(e,t,n){"use strict";const{GATEWAY:r,PYLON:i,NEXUS:o}=n(1),{gridsInCircle:s}=n(15),{cellsInFootprint:a}=n(19),{getNeighbors:u,avgPoints:l,distance:c}=n(2),{getFootprint:p}=n(20),d=n(22),{getClosestPosition:f}=n(40),{pointsOverlap:h,intersectionOfPoints:g,allPointsWithinGrid:y,shuffle:E}=n(31),{getPathCoordinates:m}=n(50),A={adjacentToRampGrids:[],pylonPlacement:null,threeByThreePositions:[],wall:[],setStructurePlacements:(e,t)=>{const{debug:n,map:s}=e.get();A.threeByThreePositions=[];let b=E(t);const C=p(r);if(void 0!==C)for(let e=0;e<b.length;e++){const t=b[e].path,A=l(t),T=m(s.path(A,s.getNatural().townhallPosition)).filter(e=>{const t=a(e,p(i)),n=a(s.getNatural().townhallPosition,p(o));return s.isPlaceableAt(i,e)&&!h(t,n)});n.setDrawCells("wl2thp",T.map(e=>({pos:e})),{size:1,cube:!1});const S=T.reduce((e,t)=>[...e,...u(t,!0).filter(e=>s.isPlaceableAt(i,e)).filter(e=>!T.some(t=>t.x===e.x&&t.y===e.y))],[]).map(e=>{const o=v(e);let l=[],m=[...t];const A=[];if(0===A.length){const t=m.filter(e=>1===g(u(e,!0,!1),m).length),n=E(t);for(const t of n){const n=u(t,!0).filter(t=>{const n=a(t,C),i=m.filter(e=>!h([e],n)),[l]=f(t,i),p=u(l,!1);return[c(e,s.getNatural().townhallPosition)<c(t,s.getNatural().townhallPosition),s.isPlaceableAt(r,t),h(n,p),g(n,m).length>1,y(n,o)].every(e=>e)}),i=d(n);if(i){l.push(...a(i,C)),A.push(i),m=m.filter(e=>!h([e],l));break}}}if(1===A.length){const t=p(i);if(void 0===t)return;const E=a(e,t);let v=m.filter(e=>1===g(u(e,!0,!1),m).length);const R=A[0],[b]=f(R,v.filter(e=>!u(e,!1).some(e=>h([e],E))));l.push(b),m=m.filter(e=>!h([e],l)),n.setDrawCells("drGrd",[b].map(e=>({pos:e})),{size:1,cube:!1}),v=m.filter(e=>1===g(u(e,!0,!1),m).length);const[T]=f(R,v);if(T){const t=u(T,!1).filter(t=>{const n=a(t,C),i=n.some(e=>g(u(e,!0),l).length>1);return c(e,s.getNatural().townhallPosition)<c(t,s.getNatural().townhallPosition)&&s.isPlaceableAt(r,t)&&!h(l,n)&&!i&&y(n,o)});if(t.length>0){const e=d(t);l.push(...a(e,C)),A.push(e),m=m.filter(e=>!h([e],l))}}}if(2===A.length){const t=m.filter(e=>1===g(u(e,!0,!1),m).length),n=E(t);for(const t of n){const n=u(t,!0).filter(t=>{const n=a(t,C);return c(e,s.getNatural().townhallPosition)<c(t,s.getNatural().townhallPosition)&&s.isPlaceableAt(r,t)&&!h(n,l)&&g(n,m).length>1&&y(n,o)}),i=d(n);if(i){l.push(...a(i,C)),A.push(i),m=m.filter(e=>!h([e],l));break}{const e=o.filter(e=>s.isPlaceableAt(r,e)&&!h(a(e,C),l)),[n]=f(t,e);if(n){l.push(...a(n,C)),A.push(n),m=m.filter(e=>!h([e],l));break}}}}return{point:e,pylonPowerArea:o,threeByThreePositions:A,wallOffGrids:l,workingWall:m}}),O=E(S).sort((e,t)=>e.workingWall.length-t.workingWall.length);if(O.length>0){const{point:e,threeByThreePositions:t}=O[0];if(3===t.length){R(t,e,n);break}R(t,e,n)}}}};function v(e){const t=a(e,p(i));return s(e,7,{normalize:!0}).filter(t=>c(t,e)<=6.5).filter(e=>!h(t,[e]))}function R(e,t,n){const o=p(r);A.threeByThreePositions=e,A.pylonPlacement=t,n.setDrawCells("pylon",a(t,p(i)).map(e=>({pos:e})),{size:1,cube:!1}),console.log("pylon placement",t),A.threeByThreePositions.forEach((e,t)=>{n.setDrawCells("wlOfPs"+t,a(e,o).map(e=>({pos:e})),{size:1,cube:!1})})}e.exports=A},function(e,t,n){"use strict";e.exports=s;var r=n(55);((s.prototype=Object.create(r.prototype)).constructor=s).className="OneOf";var i=n(56),o=n(21);function s(e,t,n,i){if(Array.isArray(t)||(n=t,t=void 0),r.call(this,e,n),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}s.fromJSON=function(e,t){return new s(e,t.oneof,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},s.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},s.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},s.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var n=e.get(this.oneof[t]);n&&!n.partOf&&(n.partOf=this,this.fieldsArray.push(n))}a(this)},s.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},s.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,n){o.decorateType(t.constructor).add(new s(n,e)),Object.defineProperty(t,n,{get:o.oneOfGetter(e),set:o.oneOfSetter(e)})}}},function(e,t){e.exports=require("os")},function(e,t,n){"use strict";function r(e){this.name="YError",this.message=e||"yargs error",Error.captureStackTrace(this,r)}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,e.exports=r},function(e,t){e.exports=require("child_process")},function(e,t,n){"use strict";const r=n(345),i=n(346),o=n(91),{kStatusCode:s,NOOP:a}=n(57),u=Buffer.from([0,0,255,255]),l=Buffer.from([0]),c=Symbol("permessage-deflate"),p=Symbol("total-length"),d=Symbol("callback"),f=Symbol("buffers"),h=Symbol("error");let g;function y(e){this[f].push(e),this[p]+=e.length}function E(e){this[p]+=e.length,this[c]._maxPayload<1||this[p]<=this[c]._maxPayload?this[f].push(e):(this[h]=new RangeError("Max payload size exceeded"),this[h][s]=1009,this.removeListener("data",E),this.reset())}function m(e){this[c]._inflate=null,e[s]=1007,this[d](e)}e.exports=class{constructor(e,t,n){if(this._maxPayload=0|n,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!g){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;g=new r({concurrency:e})}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate&&(this._deflate.close(),this._deflate=null)}acceptAsServer(e){const t=this._options,n=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(n.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?n.client_max_window_bits=t.clientMaxWindowBits:!0!==n.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete n.client_max_window_bits,n}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{var n=e[t];if(n.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(n=n[0],"client_max_window_bits"===t){if(!0!==n){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}else if("server_max_window_bits"===t){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==n)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}e[t]=n})}),e}decompress(e,t,n){g.push(r=>{this._decompress(e,t,(e,t)=>{r(),n(e,t)})})}compress(e,t,n){g.push(r=>{this._compress(e,t,(e,t)=>{r(),n(e,t)})})}_decompress(e,t,n){const r=this._isServer?"client":"server";if(!this._inflate){const e=r+"_max_window_bits",t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=i.createInflateRaw(Object.assign({},this._options.zlibInflateOptions,{windowBits:t})),this._inflate[c]=this,this._inflate[p]=0,this._inflate[f]=[],this._inflate.on("error",m),this._inflate.on("data",E)}this._inflate[d]=n,this._inflate.write(e),t&&this._inflate.write(u),this._inflate.flush(()=>{const e=this._inflate[h];if(e)return this._inflate.close(),this._inflate=null,void n(e);const i=o.concat(this._inflate[f],this._inflate[p]);t&&this.params[r+"_no_context_takeover"]?(this._inflate.close(),this._inflate=null):(this._inflate[p]=0,this._inflate[f]=[]),n(null,i)})}_compress(e,t,n){if(!e||0===e.length)return void process.nextTick(n,null,l);const r=this._isServer?"server":"client";if(!this._deflate){const e=r+"_max_window_bits",t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=i.createDeflateRaw(Object.assign({},this._options.zlibDeflateOptions,{windowBits:t})),this._deflate[p]=0,this._deflate[f]=[],this._deflate.on("error",a),this._deflate.on("data",y)}this._deflate.write(e),this._deflate.flush(i.Z_SYNC_FLUSH,()=>{if(this._deflate){var e=o.concat(this._deflate[f],this._deflate[p]);t&&(e=e.slice(0,e.length-4)),t&&this.params[r+"_no_context_takeover"]?(this._deflate.close(),this._deflate=null):(this._deflate[p]=0,this._deflate[f]=[]),n(null,e)}})}}},function(e,t,n){"use strict";const r=(e,t,n)=>({r:e,g:t,b:n}),i={BLACK:r(0,0,0),GRAY:r(128,128,128),SILVER:r(192,192,192),WHITE:r(255,255,255),YELLOW:r(255,255,0),ORANGE_RED:r(255,69,0),CRIMSON:r(220,20,60),FIREBRICK:r(178,34,34),MAROON:r(128,0,0),RED:r(255,0,0),DARK_GREEN:r(0,100,0),GREEN:r(0,128,0),LIGHT_GREEN:r(28,192,28),LIME_GREEN:r(50,205,50),PALE_GREEN:r(152,251,152),LIME:r(0,255,0),SPRING_GREEN:r(0,255,127),OLIVE:r(128,128,0),NAVY:r(0,0,128),BLUE:r(0,0,255),TEAL:r(0,128,128),AQUA:r(0,255,255),PURPLE:r(128,0,128),HOT_PINK:r(255,105,180),FUCHSIA:r(255,0,255)};e.exports=i},function(e,t,n){"use strict";var r,i,o,s=n(367),a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function u(){o=!1}function l(e){if(e){if(e!==r){if(e.length!==a.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. These characters were not unique: "+t.join(", "));r=e,u()}}else r!==a&&(r=a,u())}function c(){return o||(o=function(){r||l(a);for(var e,t=r.split(""),n=[],i=s.nextValue();t.length>0;)i=s.nextValue(),e=Math.floor(i*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}e.exports={get:function(){return r||a},characters:function(e){return l(e),r},seed:function(e){s.seed(e),i!==e&&(u(),i=e)},lookup:function(e){return c()[e]},shuffled:c}},function(e,t,n){e.exports=n(380)},function(e,t,n){var r=n(76),i=n(48),o=n(66);n(26);function s(e){e=e||{},this.heuristic=e.heuristic||o.manhattan,this.trackJumpRecursion=e.trackJumpRecursion||!1}s.prototype.findPath=function(e,t,n,o,s){var a,u=this.openList=new r((function(e,t){return e.f-t.f})),l=this.startNode=s.getNodeAt(e,t),c=this.endNode=s.getNodeAt(n,o);for(this.grid=s,l.g=0,l.f=0,u.push(l),l.opened=!0;!u.empty();){if((a=u.pop()).closed=!0,a===c)return i.expandPath(i.backtrace(c));this._identifySuccessors(a)}return[]},s.prototype._identifySuccessors=function(e){var t,n,r,i,s,a,u,l,c,p,d=this.grid,f=this.heuristic,h=this.openList,g=this.endNode.x,y=this.endNode.y,E=e.x,m=e.y,A=Math.abs;Math.max;for(i=0,s=(t=this._findNeighbors(e)).length;i<s;++i)if(n=t[i],r=this._jump(n[0],n[1],E,m)){if(a=r[0],u=r[1],(p=d.getNodeAt(a,u)).closed)continue;l=o.octile(A(a-E),A(u-m)),c=e.g+l,c*=n.weight,(!p.opened||c<p.g)&&(p.g=c,p.h=p.h||f(A(a-g),A(u-y)),p.f=p.g+p.h,p.parent=e,p.opened?h.updateItem(p):(h.push(p),p.opened=!0))}},e.exports=s},function(e,t,n){"use strict";var r=n(9)("%TypeError%"),i=n(408),o=n(59),s=n(27);e.exports=function(e,t){if("Object"!==s(e))throw new r("Assertion failed: Type(O) is not Object");if(!o(t))throw new r("Assertion failed: IsPropertyKey(P) is not true, got "+i(t));return e[t]}},function(e,t,n){"use strict";e.exports=n(173)},function(e,t,n){"use strict";const{Alliance:r}=n(0),{getInRangeUnits:i}=n(67),o=n(29),s=n(33),a={stateOfGame:new Map,world:null,clearStateOfGame(){const e=this.stateOfGame.get("enemyUnits");e&&e.clear()},getEnemyUnits(e){const{stateOfGame:t}=a;t.has("enemyUnits")||a.stateOfGame.set("enemyUnits",new Map);const n=t.get("enemyUnits").get(e.tag);if(n)return n;{const{world:t}=a;if(t){const{units:n}=t.resources.get(),u=n.getAlive(e.alliance===r.SELF?r.ENEMY:r.SELF);if(e.alliance===r.ENEMY){const{missingUnits:e}=s;u.push(...e)}else{const{mappedEnemyUnits:e}=o;u.push(...e)}return a.stateOfGame.set("enemyUnits",new Map([[e.tag,i(e,u)]])),u}return[]}}};e.exports=a},function(e,t,n){"use strict";const{UnitType:r,UnitTypeId:i}=n(8),o=n(3),{EFFECT_SCAN:s,CANCEL_QUEUECANCELTOSELECTION:a}=n(3),{liftingAbilities:u,landingAbilities:l,townhallTypes:c,rallyWorkersAbilities:p,addonTypes:d}=n(6),{ORBITALCOMMAND:f}=n(1),{distance:h}=n(2),{checkAddOnPlacement:g}=n(466),{addEarmark:y}=n(23),E=n(14),{setPendingOrders:m}=n(12),{checkBuildingCount:A}=n(4),{getAvailableExpansions:v}=n(51),{getClosestPosition:R}=n(40),{countTypes:b,flyingTypesMapping:C}=n(28),{getAddOnPlacement:T,getAddOnBuildingPosition:S}=n(52),{pointsOverlap:O}=n(31),{cellsInFootprint:_}=n(19),{getFootprint:I}=n(20),P=n(12),w={addAddOn:async(e,t,n,s)=>{const{data:a,resources:c}=e,{actions:p,frame:d,map:f}=c.get();for(const[e,t]of b.entries())if(t.includes(n)){n=e;break}const A=r[`${i[C.get(t.unitType)||t.unitType]}${i[n]}`];let{abilityId:v}=a.getUnitTypeData(A);if(t.noQueue&&!t.labels.has("swapBuilding")){if(t.availableAbilities().some(e=>e===v)){const e={abilityId:v,unitTags:[t.tag]},r=T(t.pos),i=I(n);if(void 0===i)return;const o=f.isPlaceableAt(n,r)&&!O(_(r,i),P.seigeTanksSiegedGrids);if(console.log("map.isPlaceableAt(addOnType, addonPlacement)",f.isPlaceableAt(n,r)),console.log(!O(_(r,i),P.seigeTanksSiegedGrids)),console.log("stepAhead",s),o)return s?void 0:(e.targetWorldSpacePos=t.pos,await p.sendAction(e),E.pausePlan=!1,m(t,e),void y(a,a.getUnitTypeData(n)))}if(t.availableAbilities().find(e=>u.includes(e))&&!t.labels.has("pendingOrders")){const e=t.labels.get("addAddOn");if(e&&h(T(t.pos),e)<1)t.labels.delete("addAddOn");else{const e={abilityId:o.LIFT,unitTags:[t.tag]};await p.sendAction(e),m(t,e)}}if(t.availableAbilities().find(e=>l.includes(e))){const r=await g(e,t,n);if(r){t.labels.set("addAddOn",r);const e={abilityId:v,unitTags:[t.tag],targetWorldSpacePos:r};await p.sendAction(e),E.pausePlan=!1,m(t,e),y(a,a.getUnitTypeData(n))}}}},liftToThird:async e=>{const{actions:t,map:n,units:r}=e.get();let[i]=r.withLabel("liftToThird");if(i){const[s]=v(e).map(e=>({expansion:e,distance:h(i.pos,e.townhallPosition)})).sort((e,t)=>e.distance-t.distance).map(e=>e.expansion.townhallPosition).slice(0,1);if(s){const[e]=R(i.pos,n.getExpansions().map(e=>e.townhallPosition)),c=p.find(e=>i.abilityAvailable(e));if(h(i.pos,e)<1&&c){i.labels.clear();const[e]=r.getClosest(i.pos,r.getMineralFields());await t.sendAction({abilityId:c,targetUnitTag:e.tag,unitTags:[i.tag]})}else if(i.noQueue){if(i.abilityAvailable(a)){const e={abilityId:a,unitTags:[i.tag]};await t.sendAction(e)}i.availableAbilities().find(e=>u.includes(e))&&await t.do(o.LIFT,i.tag),i.availableAbilities().includes(o.MOVE)&&await t.move([i],s,!0),i.availableAbilities().find(e=>l.includes(e))&&await t.do(o.LAND,i.tag,{target:s,queue:!0})}}}else[i]=r.getById(c).filter(e=>{const[t]=R(e.pos,n.getExpansions().map(e=>e.townhallPosition));return h(e.pos,t)>1||e.isFlying}),i&&i.labels.set("liftToThird")},scanCloakedEnemy:(e,t,n)=>{const r=[];if(1===t.cloak){let i=null;if(1===t.cloak){const[o]=e.getClosest(t.pos,n);h(o.pos,t.pos)<8&&(i=t.pos);const a=e.getById(f).find(e=>e.energy>50);if(i&&a){const e={abilityId:s,targetWorldSpacePos:i,unitTags:[a.tag]};r.push(e)}}}return r},swapBuildings:async(e,t=[])=>{const{units:n}=e.resources.get(),r="swapBuilding";let i=[...t].map((t,i)=>{const o="addOn"+i,s=t[0];let[a]=n.withLabel(r).filter(e=>e.labels.get(r)===i);if(!A(e,s,t[1])&&!a)return;let[u]=n.withLabel(r).filter(e=>e.labels.get(r)===o);if(a)return a;if(d.includes(s)){[u]=u?[u]:n.getById(s).filter(e=>e.buildProgress>=1);const[e]=u?n.getClosest(S(u.pos),n.getStructures()):[];if(u&&e)return u.labels.set(r,o),e}else{const[e]=n.getById(b.get(s)).filter(e=>e.noQueue&&("0"===e.addOnTag||0===parseInt(e.addOnTag))&&e.buildProgress>=1);if(e)return e}});i.every(e=>e)&&(i[0].labels.set(r,i[1].pos),i[1].labels.set(r,i[0].pos))},removeLabelsWhenInTargetRange:(e,t)=>{e.forEach(e=>{if(e.orders.length>0){const n=e.orders.find(e=>l.includes(e.abilityId));n&&n.targetWorldSpacePos&&h(e.pos,n.targetWorldSpacePos)<1&&(console.log("remove label",t),e.labels.delete(t))}})}};e.exports=w},function(e,t,n){"use strict";const{ATTACK_ATTACK:r,MOVE:i,ATTACK:o}=n(3),{workerTypes:s}=n(6),{SIEGETANKSIEGED:a,BUNKER:u,QUEEN:l}=n(1),{distance:c}=n(2),{getInRangeUnits:p,getInRangeDestructables:d}=n(67),{tankBehavior:f}=n(60),{createUnitCommand:h}=(n(12),n(18)),{calculateNearSupply:g}=n(23),{moveAwayPosition:y,getDistance:E}=n(30),{getWeaponThatCanAttack:m}=n(24),{retreat:A}=n(4),v={attackingInRange:[],defenseMode:!1,attackWithArmy:(e,t,n)=>{const i=[],s=n.combatPoint.unitType,u=t.getById(s),l=n.selfCombatUnits.filter(e=>!(e.unitType===s)),p=u.map(e=>e.tag),d=l.map(e=>e.tag),h=Math.max.apply(Math,e.getUnitTypeData(a).weapons.map(e=>e.range)),g=c(n.combatPoint.pos,n.enemyTarget.pos)>h?n.combatPoint.pos:n.enemyTarget.pos;let y={abilityId:r,targetWorldSpacePos:g,unitTags:[...p,...d]};i.push(y);if([13,14,15,16].includes(n.enemyTarget.unitType)){const e={abilityId:o,targetUnitTag:n.enemyTarget.tag,unitTags:[...p]};i.push(e)}else y={abilityId:r,targetWorldSpacePos:n.enemyTarget.pos,unitTags:[n.combatPoint.tag]},i.push(y);return i.push(...f(t)),i},calculateSupplyPower:(e,t,n)=>g(e,p(t,n)),engageOrRetreat:(e,t,n,o,a=!0)=>{const{data:f,resources:R}=e,{units:b}=R.get(),C=[];return v.attackingInRange=t.filter(e=>{if(e.isAttacking()){const{orders:t,pos:n,radius:i,unitType:o}=e;if(void 0===t||void 0===n||void 0===i||void 0===o)return!1;const s=t.find(e=>e.abilityId===r);if(void 0===s)return!1;const{targetUnitTag:a}=s;if(void 0===a)return!1;const u=b.getByTag(a);if(void 0===u)return!1;const{pos:l,radius:p}=u;if(void 0===l||void 0===p)return!1;const d=m(f,o,u);if(void 0===d)return!1;const{range:h}=d;if(void 0===h)return!1;const g=h+i+p;return c(n,l)<g}}),t.forEach(R=>{let T=o;if(!s.includes(R.unitType)){const[o]=b.getClosest(R.pos,n.filter(e=>c(R.pos,e.pos)<16));if(o){o.inRangeUnits=p(o,n);const s=g(f,o.inRangeUnits);o.inRangeSelfUnits=p(o,t),o.inRangeSelfSupply=g(f,o.inRangeSelfUnits);const a=p(R,t);R.selfSupply=g(f,a);const l=R.selfSupply>o.inRangeSelfSupply?R.selfSupply:o.inRangeSelfSupply,c=0===b.getById(u).length;if(s>l&&c){let t;if(t=R.isFlying?y(o,R):A(e,R,o),t){const e={abilityId:i,targetWorldSpacePos:t,unitTags:[R.tag]};C.push(e)}}else{const e={abilityId:r,targetUnitTag:o.tag,unitTags:[R.tag]};C.push(e)}}else if(R.unitType!==l){const e={abilityId:r,unitTags:[R.tag]},t=d(b,R);if(t&&a){const{pos:n,radius:r}=t;if(void 0===n||void 0===r)return;const{pos:o,radius:s,unitType:a}=R;if(void 0===o||void 0===s||void 0===a)return;const u=m(f,a,t);if(void 0===u)return;const{range:l}=u;if(void 0===l)return;const c=r+s+l,p=function(e,t){const n=[];for(let r=0;r<360;r+=10){const{x:i,y:o}=e;if(void 0===i||void 0===o)return[];const s=r*Math.PI/180,a=i+t*Math.cos(s),u=o+t*Math.sin(s);n.push({x:a,y:u})}return n}(n,c).filter(e=>v.attackingInRange.every(t=>{const{pos:n,radius:r}=t;if(void 0===n||void 0===r)return!1;return E(e,n)>r+s})).sort((e,t)=>E(e,o)-E(t,o));if(p.length>0&&E(n,o)>c+1){T=p[0];const t=h(i,[R]);t.targetWorldSpacePos=T,C.push(t),e.queueCommand=!0}e.targetUnitTag=t.tag}else(function(e,t){const{orders:n,pos:r}=e;if(void 0===n||void 0===r)return!1;return!n.some(e=>{const{targetWorldSpacePos:n}=e;return void 0!==n&&E(n,t)<12})&&E(r,t)>12})(R,T)&&(e.targetWorldSpacePos=T);C.push(e)}}}),C}};e.exports=v},function(e,t,n){"use strict";e.exports=n(201)},function(e,t,n){"use strict";e.exports=p;var r,i=n(35),o=i.LongBits,s=i.base64,a=i.utf8;function u(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function l(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function p(){this.len=0,this.head=new u(l,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(p.create=function(){return new r})()}:function(){return new p}};function f(e,t,n){t[n]=255&e}function h(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function y(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}p.create=d(),p.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(p.alloc=i.pool(p.alloc,i.Array.prototype.subarray)),p.prototype._push=function(e,t,n){return this.tail=this.tail.next=new u(e,t,n),this.len+=t,this},h.prototype=Object.create(u.prototype),h.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},p.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new h((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},p.prototype.int32=function(e){return e<0?this._push(g,10,o.fromNumber(e)):this.uint32(e)},p.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},p.prototype.uint64=function(e){var t=o.from(e);return this._push(g,t.length(),t)},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(g,t.length(),t)},p.prototype.bool=function(e){return this._push(f,1,e?1:0)},p.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(e){var t=o.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},p.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var E=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};p.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(i.isString(e)){var n=p.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(E,t,e)},p.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(f,1,0)},p.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new u(l,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(l,0,0),this.len=0),this},p.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},p.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},p._configure=function(e){r=e,p.create=d(),r._configure()}},function(e,t,n){"use strict";e.exports=u;var r,i=n(35),o=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}var l,c="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")},p=function(){return i.Buffer?function(e){return(u.create=function(e){return i.Buffer.isBuffer(e)?new r(e):c(e)})(e)}:c};function d(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function f(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw a(this,8);return new o(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}u.create=p(),u.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,u.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},u.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},u.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u._configure=function(e){r=e,u.create=p(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(u.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},function(e,t,n){"use strict";e.exports=i;var r=n(35);function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},function(e,t){e.exports=require("tty")},function(e,t,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var i=n(224)();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(e){}return i},e.exports=i},function(e,t,n){"use strict";e.exports=function(e,t){const n={};return t=t||((e,t)=>!0),Object.keys(e||{}).forEach(r=>{t(r,e[r])&&(n[r]=e[r])}),n}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=90},function(e,t,n){"use strict";const{EMPTY_BUFFER:r}=n(57);function i(e,t){if(0===e.length)return r;if(1===e.length)return e[0];const n=Buffer.allocUnsafe(t);for(var i=0,o=0;o<e.length;o++){const t=e[o];t.copy(n,i),i+=t.length}return n}function o(e,t,n,r,i){for(var o=0;o<i;o++)n[r+o]=e[o]^t[3&o]}function s(e,t){const n=e.length;for(var r=0;r<n;r++)e[r]^=t[3&r]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function u(e){return u.readOnly=!0,Buffer.isBuffer(e)?e:(e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=function(e){const t=Buffer.from(e.buffer);if(e.byteLength!==e.buffer.byteLength)return t.slice(e.byteOffset,e.byteOffset+e.byteLength);return t}(e):(t=Buffer.from(e),u.readOnly=!1),t);var t}try{const t=n(347),r=t.BufferUtil||t;e.exports={concat:i,mask(e,t,n,i,s){s<48?o(e,t,n,i,s):r.mask(e,t,n,i,s)},toArrayBuffer:a,toBuffer:u,unmask(e,t){e.length<32?s(e,t):r.unmask(e,t)}}}catch(t){e.exports={concat:i,mask:o,toArrayBuffer:a,toBuffer:u,unmask:s}}},function(e,t,n){"use strict";e.exports={NULL:0,CARRIERLAUNCHSPEEDUPGRADE:1,GLIALRECONSTITUTION:2,TUNNELINGCLAWS:3,CHITINOUSPLATING:4,HISECAUTOTRACKING:5,TERRANBUILDINGARMOR:6,TERRANINFANTRYWEAPONSLEVEL1:7,TERRANINFANTRYWEAPONSLEVEL2:8,TERRANINFANTRYWEAPONSLEVEL3:9,NEOSTEELFRAME:10,TERRANINFANTRYARMORSLEVEL1:11,TERRANINFANTRYARMORSLEVEL2:12,TERRANINFANTRYARMORSLEVEL3:13,REAPERSPEED:14,STIMPACK:15,SHIELDWALL:16,PUNISHERGRENADES:17,SIEGETECH:18,HIGHCAPACITYBARRELS:19,BANSHEECLOAK:20,MEDIVACCADUCEUSREACTOR:21,RAVENCORVIDREACTOR:22,HUNTERSEEKER:23,DURABLEMATERIALS:24,PERSONALCLOAKING:25,GHOSTMOEBIUSREACTOR:26,TERRANVEHICLEARMORSLEVEL1:27,TERRANVEHICLEARMORSLEVEL2:28,TERRANVEHICLEARMORSLEVEL3:29,TERRANVEHICLEWEAPONSLEVEL1:30,TERRANVEHICLEWEAPONSLEVEL2:31,TERRANVEHICLEWEAPONSLEVEL3:32,TERRANSHIPARMORSLEVEL1:33,TERRANSHIPARMORSLEVEL2:34,TERRANSHIPARMORSLEVEL3:35,TERRANSHIPWEAPONSLEVEL1:36,TERRANSHIPWEAPONSLEVEL2:37,TERRANSHIPWEAPONSLEVEL3:38,PROTOSSGROUNDWEAPONSLEVEL1:39,PROTOSSGROUNDWEAPONSLEVEL2:40,PROTOSSGROUNDWEAPONSLEVEL3:41,PROTOSSGROUNDARMORSLEVEL1:42,PROTOSSGROUNDARMORSLEVEL2:43,PROTOSSGROUNDARMORSLEVEL3:44,PROTOSSSHIELDSLEVEL1:45,PROTOSSSHIELDSLEVEL2:46,PROTOSSSHIELDSLEVEL3:47,OBSERVERGRAVITICBOOSTER:48,GRAVITICDRIVE:49,EXTENDEDTHERMALLANCE:50,HIGHTEMPLARKHAYDARINAMULET:51,PSISTORMTECH:52,ZERGMELEEWEAPONSLEVEL1:53,ZERGMELEEWEAPONSLEVEL2:54,ZERGMELEEWEAPONSLEVEL3:55,ZERGGROUNDARMORSLEVEL1:56,ZERGGROUNDARMORSLEVEL2:57,ZERGGROUNDARMORSLEVEL3:58,ZERGMISSILEWEAPONSLEVEL1:59,ZERGMISSILEWEAPONSLEVEL2:60,ZERGMISSILEWEAPONSLEVEL3:61,OVERLORDSPEED:62,OVERLORDTRANSPORT:63,BURROW:64,ZERGLINGATTACKSPEED:65,ZERGLINGMOVEMENTSPEED:66,HYDRALISKSPEED:67,ZERGFLYERWEAPONSLEVEL1:68,ZERGFLYERWEAPONSLEVEL2:69,ZERGFLYERWEAPONSLEVEL3:70,ZERGFLYERARMORSLEVEL1:71,ZERGFLYERARMORSLEVEL2:72,ZERGFLYERARMORSLEVEL3:73,INFESTORENERGYUPGRADE:74,CENTRIFICALHOOKS:75,BATTLECRUISERENABLESPECIALIZATIONS:76,BATTLECRUISERBEHEMOTHREACTOR:77,PROTOSSAIRWEAPONSLEVEL1:78,PROTOSSAIRWEAPONSLEVEL2:79,PROTOSSAIRWEAPONSLEVEL3:80,PROTOSSAIRARMORSLEVEL1:81,PROTOSSAIRARMORSLEVEL2:82,PROTOSSAIRARMORSLEVEL3:83,WARPGATERESEARCH:84,HALTECH:85,CHARGE:86,BLINKTECH:87,ANABOLICSYNTHESIS:88,OBVERSEINCUBATION:89,VIKINGJOTUNBOOSTERS:90,ORGANICCARAPACE:91,INFESTORPERISTALSIS:92,ABDOMINALFORTITUDE:93,HYDRALISKSPEEDUPGRADE:94,BANELINGBURROWMOVE:95,COMBATDRUGS:96,STRIKECANNONS:97,TRANSFORMATIONSERVOS:98,PHOENIXRANGEUPGRADE:99,TEMPESTRANGEUPGRADE:100,NEURALPARASITE:101,LOCUSTLIFETIMEINCREASE:102,ULTRALISKBURROWCHARGEUPGRADE:103,ORACLEENERGYUPGRADE:104,RESTORESHIELDS:105,PROTOSSHEROSHIPWEAPON:106,PROTOSSHEROSHIPDETECTOR:107,PROTOSSHEROSHIPSPELL:108,REAPERJUMP:109,INCREASEDRANGE:110,ZERGBURROWMOVE:111,ANIONPULSECRYSTALS:112,TERRANVEHICLEANDSHIPWEAPONSLEVEL1:113,TERRANVEHICLEANDSHIPWEAPONSLEVEL2:114,TERRANVEHICLEANDSHIPWEAPONSLEVEL3:115,TERRANVEHICLEANDSHIPARMORSLEVEL1:116,TERRANVEHICLEANDSHIPARMORSLEVEL2:117,TERRANVEHICLEANDSHIPARMORSLEVEL3:118,FLYINGLOCUSTS:119,ROACHSUPPLY:120,IMMORTALREVIVE:121,DRILLCLAWS:122,CYCLONELOCKONRANGEUPGRADE:123,CYCLONEAIRUPGRADE:124,LIBERATORMORPH:125,ADEPTSHIELDUPGRADE:126,LURKERRANGE:127,IMMORTALBARRIER:128,ADEPTKILLBOUNCE:129,ADEPTPIERCINGATTACK:130,CINEMATICMODE:131,CURSORDEBUG:132,MAGFIELDLAUNCHERS:133,EVOLVEGROOVEDSPINES:134,EVOLVEMUSCULARAUGMENTS:135,BANSHEESPEED:136,MEDIVACRAPIDDEPLOYMENT:137,RAVENRECALIBRATEDEXPLOSIVES:138,MEDIVACINCREASESPEEDBOOST:139,LIBERATORAGRANGEUPGRADE:140,DARKTEMPLARBLINKUPGRADE:141,RAVAGERRANGE:142,RAVENDAMAGEUPGRADE:143,CYCLONELOCKONDAMAGEUPGRADE:144,ARESCLASSWEAPONSSYSTEMVIKING:145,AUTOHARVESTER:146,HYBRIDCPLASMAUPGRADEHARD:147,HYBRIDCPLASMAUPGRADEINSANE:148,INTERCEPTORLIMIT4:149,INTERCEPTORLIMIT6:150,_330MMBARRAGECANNONS:151,NOTPOSSIBLESIEGEMODE:152,NEOSTEELFRAME_2:153,NEOSTEELANDSHRIKETURRETICONUPGRADE:154,OCULARIMPLANTS:155,CROSSSPECTRUMDAMPENERS:156,ORBITALSTRIKE:157,CLUSTERBOMB:158,SHAPEDHULL:159,SPECTRETOOLTIPUPGRADE:160,ULTRACAPACITORS:161,VANADIUMPLATING:162,COMMANDCENTERREACTOR:163,REGENERATIVEBIOSTEEL:164,CELLULARREACTORS:165,BANSHEECLOAKEDDAMAGE:166,DISTORTIONBLASTERS:167,EMPTOWER:168,SUPPLYDEPOTDROP:169,HIVEMINDEMULATOR:170,FORTIFIEDBUNKERCARAPACE:171,PREDATOR:172,SCIENCEVESSEL:173,DUALFUSIONWELDERS:174,ADVANCEDCONSTRUCTION:175,ADVANCEDMEDICTRAINING:176,PROJECTILEACCELERATORS:177,REINFORCEDSUPERSTRUCTURE:178,MULE:179,ORBITALRELAY:180,RAZORWIRE:181,ADVANCEDHEALINGAI:182,TWINLINKEDFLAMETHROWERS:183,NANOCONSTRUCTOR:184,CERBERUSMINES:185,HYPERFLUXOR:186,TRILITHIUMPOWERCELLS:187,PERMANENTCLOAKGHOST:188,PERMANENTCLOAKSPECTRE:189,ULTRASONICPULSE:190,SURVIVALPODS:191,ENERGYSTORAGE:192,FULLBORECANISTERAMMO:193,CAMPAIGNJOTUNBOOSTERS:194,MICROFILTERING:195,PARTICLECANNONAIR:196,VULTUREAUTOREPAIR:197,PSIDISRUPTOR:198,SCIENCEVESSELENERGYMANIPULATION:199,SCIENCEVESSELPLASMAWEAPONRY:200,SHOWGATLINGGUN:201,TECHREACTOR:202,TECHREACTORAI:203,TERRANDEFENSERANGEBONUS:204,X88TNAPALMUPGRADE:205,HURRICANEMISSILES:206,MECHANICALREBIRTH:207,MARINESTIMPACK:208,DARKTEMPLARTACTICS:209,CLUSTERWARHEADS:210,CLOAKDISTORTIONFIELD:211,DEVASTATORMISSILES:212,DISTORTIONTHRUSTERS:213,DYNAMICPOWERROUTING:214,IMPALERROUNDS:215,KINETICFIELDS:216,BURSTCAPACITORS:217,HAILSTORMMISSILEPODS:218,RAPIDDEPLOYMENT:219,REAPERSTIMPACK:220,REAPERD8CHARGE:221,TYCHUS05BATTLECRUISERPENETRATION:222,VIRALPLASMA:223,FIREBATJUGGERNAUTPLATING:224,MULTILOCKTARGETINGSYSTEMS:225,TURBOCHARGEDENGINES:226,DISTORTIONSENSORS:227,INFERNALPREIGNITERS:228,HELLIONCAMPAIGNINFERNALPREIGNITER:229,NAPALMFUELTANKS:230,AUXILIARYMEDBOTS:231,JUGGERNAUTPLATING:232,MARAUDERLIFEBOOST:233,COMBATSHIELD:234,REAPERU238ROUNDS:235,MAELSTROMROUNDS:236,SIEGETANKSHAPEDBLAST:237,TUNGSTENSPIKES:238,BEARCLAWNOZZLES:239,NANOBOTINJECTORS:240,STABILIZERMEDPACKS:241,HALOROCKETS:242,SCAVENGINGSYSTEMS:243,EXTRAMINES:244,ARESCLASSWEAPONSSYSTEM:245,WHITENAPALM:246,VIRALMUNITIONS:247,JACKHAMMERCONCUSSIONGRENADES:248,FIRESUPPRESSIONSYSTEMS:249,FLARERESEARCH:250,MODULARCONSTRUCTION:251,EXPANDEDHULL:252,SHRIKETURRET:253,MICROFUSIONREACTORS:254,WRAITHCLOAK:255,SINGULARITYCHARGE:256,GRAVITICTHRUSTERS:257,YAMATOCANNON:258,DEFENSIVEMATRIX:259,DARKPROTOSS:260,TERRANINFANTRYWEAPONSULTRACAPACITORSLEVEL1:261,TERRANINFANTRYWEAPONSULTRACAPACITORSLEVEL2:262,TERRANINFANTRYWEAPONSULTRACAPACITORSLEVEL3:263,TERRANINFANTRYARMORSVANADIUMPLATINGLEVEL1:264,TERRANINFANTRYARMORSVANADIUMPLATINGLEVEL2:265,TERRANINFANTRYARMORSVANADIUMPLATINGLEVEL3:266,TERRANVEHICLEWEAPONSULTRACAPACITORSLEVEL1:267,TERRANVEHICLEWEAPONSULTRACAPACITORSLEVEL2:268,TERRANVEHICLEWEAPONSULTRACAPACITORSLEVEL3:269,TERRANVEHICLEARMORSVANADIUMPLATINGLEVEL1:270,TERRANVEHICLEARMORSVANADIUMPLATINGLEVEL2:271,TERRANVEHICLEARMORSVANADIUMPLATINGLEVEL3:272,TERRANSHIPWEAPONSULTRACAPACITORSLEVEL1:273,TERRANSHIPWEAPONSULTRACAPACITORSLEVEL2:274,TERRANSHIPWEAPONSULTRACAPACITORSLEVEL3:275,TERRANSHIPARMORSVANADIUMPLATINGLEVEL1:276,TERRANSHIPARMORSVANADIUMPLATINGLEVEL2:277,TERRANSHIPARMORSVANADIUMPLATINGLEVEL3:278,HIREKELMORIANMINERSPH:279,HIREDEVILDOGSPH:280,HIRESPARTANCOMPANYPH:281,HIREHAMMERSECURITIESPH:282,HIRESIEGEBREAKERSPH:283,HIREHELSANGELSPH:284,HIREDUSKWINGPH:285,HIREDUKESREVENGE:286,TOSHEASYMODE:287,VOIDRAYSPEEDUPGRADE:288,SMARTSERVOS:289,ARMORPIERCINGROCKETS:290,CYCLONERAPIDFIRELAUNCHERS:291,RAVENENHANCEDMUNITIONS:292,DIGGINGCLAWS:293}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=function(e,t,n,r){this.x=e,this.y=t,this.walkable=void 0===n||n,this.weight=void 0===r?1:r}},function(e,t,n){var r=n(76),i=n(48),o=n(66),s=n(26);function a(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||o.manhattan,this.weight=e.weight||1,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never),this.diagonalMovement===s.Never?this.heuristic=e.heuristic||o.manhattan:this.heuristic=e.heuristic||o.octile}a.prototype.findPath=function(e,t,n,o,s){var a,u,l,c,p,d,f,h,g=new r((function(e,t){return e.f-t.f})),y=s.getNodeAt(e,t),E=s.getNodeAt(n,o),m=this.heuristic,A=this.diagonalMovement,v=this.weight,R=Math.abs,b=Math.SQRT2;for(y.g=0,y.f=0,g.push(y),y.opened=!0;!g.empty();){if((a=g.pop()).closed=!0,a===E)return i.backtrace(E);for(c=0,p=(u=s.getNeighbors(a,A)).length;c<p;++c)(l=u[c]).closed||(d=l.x,f=l.y,h=a.g+(d-a.x==0||f-a.y==0?1:b),h*=l.weight,(!l.opened||h<l.g)&&(l.g=h,l.h=l.h||v*m(R(d-n),R(f-o)),l.f=l.g+l.h,l.parent=a,l.opened?g.updateItem(l):(g.push(l),l.opened=!0)))}return[]},e.exports=a},function(e,t,n){var r=n(76),i=n(48),o=n(66),s=n(26);function a(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||o.manhattan,this.weight=e.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never),this.diagonalMovement===s.Never?this.heuristic=e.heuristic||o.manhattan:this.heuristic=e.heuristic||o.octile}a.prototype.findPath=function(e,t,n,o,s){var a,u,l,c,p,d,f,h,g=function(e,t){return e.f-t.f},y=new r(g),E=new r(g),m=s.getNodeAt(e,t),A=s.getNodeAt(n,o),v=this.heuristic,R=this.diagonalMovement,b=this.weight,C=Math.abs,T=Math.SQRT2;for(m.g=0,m.f=0,y.push(m),m.opened=1,A.g=0,A.f=0,E.push(A),A.opened=2;!y.empty()&&!E.empty();){for((a=y.pop()).closed=!0,c=0,p=(u=s.getNeighbors(a,R)).length;c<p;++c)if(!(l=u[c]).closed){if(2===l.opened)return i.biBacktrace(a,l);d=l.x,f=l.y,h=a.g+(d-a.x==0||f-a.y==0?1:T),h*=l.weight,(!l.opened||h<l.g)&&(l.g=h,l.h=l.h||b*v(C(d-n),C(f-o)),l.f=l.g+l.h,l.parent=a,l.opened?y.updateItem(l):(y.push(l),l.opened=1))}for((a=E.pop()).closed=!0,c=0,p=(u=s.getNeighbors(a,R)).length;c<p;++c)if(!(l=u[c]).closed){if(1===l.opened)return i.biBacktrace(l,a);d=l.x,f=l.y,h=a.g+(d-a.x==0||f-a.y==0?1:T),(!l.opened||h<l.g)&&(l.g=h,l.h=l.h||b*v(C(d-e),C(f-t)),l.f=l.g+l.h,l.parent=a,l.opened?E.updateItem(l):(E.push(l),l.opened=2))}}return[]},e.exports=a},function(e,t,n){"use strict";const r=n(7)("sc2:debug:system"),i=n(7)("sc2:silly:system"),o=n(145),s=n(397),{builderPlugin:a}=n(160),{NodeSC2Error:u,GameEndedError:l}=n(65),c=()=>{};e.exports=function(e,t={}){const n={...e.defaultOptions,...t},{stepIncrement:p=("agent"===e.type?8:2)}=n,d=Symbol("pause"),f={type:"agent",...e,[d]:!1,pause(){this[d]=!0},unpause(){this[d]=!1},setup:e.setup||(()=>{}),state:n.state||{},setState:function(e){this.state="function"==typeof e?e(this.state):{...this.state,...e}}};let h={stepIncrement:p,lastRan:null,currentFrame:null};const g=function(e){h={...h,...e}};async function y(e){const{frame:t,events:n}=e.resources.get(),s=n.read(f.readerId).filter(e=>f["on"+o(e.name)]);if(f[d])return f.onStepPaused?f.onStepPaused(e):c;const a=s.length>0?s.map(n=>"step"===n.name?(g({currentFrame:t.getGameLoop()}),"agent"===f.type&&h.lastRan&&h.currentFrame-h.lastRan<h.stepIncrement?void i(`skipping system ${f.name}: current loop frame: ${h.currentFrame}, last ran: ${h.lastRan}`):(g({lastRan:h.currentFrame}),f["on"+o(n.name)](e,n.data,n).catch(e=>{if(e instanceof l)throw e;e instanceof u?i(`System onStep error: on${o(n.name)} in ${f.name}: `,e):(r(`System onStep error: on${o(n.name)} in ${f.name}: `),r(e.message),r(e.stack))}))):f["on"+o(n.name)](e,n.data,n).catch(e=>{if(e instanceof l)throw e;e instanceof u?i(`Event handler error: on${o(n.name)} in ${f.name}: `,e):(r(`Event handler error: on${o(n.name)} in ${f.name}: `),r(e.message),r(e.stack))})):[];return Promise.all(a)}return y.setup=function(e,t=!1){const{events:n}=e.resources.get();return f.readerId=n.createReader(f.type),i(`readerId ${f.readerId} registered for initialized system ${y.name}`),"build"===f.type&&f.buildOrder?a(f):"unit"===f.type&&s(f),t?(f.setup&&f.setup(e),f.onGameStart?f.onGameStart(e):f.readerId):f.setup?f.setup(e):f.readerId},Object.defineProperty(y,"name",{value:f.name+"Wrapper",configurable:!0}),y._system=f,y}},function(e,t,n){"use strict";const r=n(97);e.exports=r},function(e,t,n){"use strict";var r=n(404);e.exports=Function.prototype.bind||r},function(e,t,n){"use strict";e.exports=Number.isNaN||function(e){return e!=e}},function(e,t,n){"use strict";var r=n(9),i=r("%TypeError%"),o=r("%SyntaxError%"),s=n(38),a={"Property Descriptor":function(e){var t={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in e)if(s(e,n)&&!t[n])return!1;var r=s(e,"[[Value]]"),o=s(e,"[[Get]]")||s(e,"[[Set]]");if(r&&o)throw new i("Property Descriptors may not be both accessor and data descriptors");return!0},"Match Record":n(414)};e.exports=function(e,t,n,r){var s=a[t];if("function"!=typeof s)throw new o("unknown record type: "+t);if("Object"!==e(r)||!s(r))throw new i(n+" must be a "+t)}},function(e,t,n){"use strict";const r=n(7)("sc2:debug:RegionUtil");let i;e.exports={frontOfNatural:function(e){const t=e.getNatural();if(!t)return r("Current map has no definable natural, can not calculate"),[];let n=e.getEnemyNatural();return n||(r("We do not know where our enemy nat is (yet?), defaulting to their main"),n=e.getEnemyMain()),i=i||t.areas.areaFill.map(t=>({...t,d:e.path(t,n.townhallPosition).length})).sort((e,t)=>e.d-t.d),i.slice(0,Math.floor(i.length/3))},frontOfGrid:function(e,t){const{map:n}=e.get(),r=n.getCenter(!0),i=t.map(e=>({...e,distance:n.path(e,r).length})).sort((e,t)=>e.distance-t.distance);return i.slice(0,Math.floor(i.length/3))}}},function(e,t,n){"use strict";const{Alliance:r}=n(0),{LARVA:i,QUEEN:o,BUNKER:s,SIEGETANKSIEGED:a,ADEPTPHASESHIFT:u}=n(1),{MOVE:l,ATTACK_ATTACK:c,ATTACK:p,SMART:d,LOAD_BUNKER:f,STOP:h}=n(3),{getRandomPoint:g}=n(32),{tankBehavior:y}=n(60),{distance:E,avgPoints:m}=n(2),{filterLabels:A}=n(104),{scanCloakedEnemy:v}=n(81),{workerTypes:R,changelingTypes:b}=n(6),{WorkerRace:C}=n(13),{isRepairing:T,setPendingOrders:S}=n(12),{createUnitCommand:O}=n(18),{getCombatPoint:_,canAttack:I}=n(53),P=n(22),{microRangedUnit:w,defendWithUnit:N,getDPSHealth:L,retreat:D}=n(4),{micro:x}=n(109),F=n(29),{moveAwayPosition:M}=n(30),{getMovementSpeed:B,getWeaponThatCanAttack:U}=n(24),k=n(4),{getTravelDistancePerStep:j}=n(44),{getClosestUnitByPath:G,getCombatRally:H}=(n(189),n(16)),W={attack:(e,t,n)=>{const{resources:o}=e,{units:s}=o.get(),a=[];let[u]=G(o,H(o),s.getBases(r.ENEMY),1);const l=s.getAlive(r.ENEMY).filter(e=>!(e.unitType===i)),[c,p]=V(s,t,n),d=m(c.map(e=>e.pos));let[f]=s.getClosest(d,l,1);if(u||f){const t=u||f,n=_(o,c,t);if(n){const r={combatPoint:n,combatUnits:c,supportUnits:p,enemyTarget:t};a.push(...W.attackWithArmy(e,r,l))}a.push(...v(s,t,c))}else a.push(...W.searchAndDestroy(o,c,p));return a},defend:async(e,t,n,i)=>{const{agent:s,resources:a}=e,{units:u}=a.get(),l=[],d=u.getAlive(r.ENEMY),f=H(a);if(f){let[r]=G(a,f,i);if(r){const[i,h]=V(u,t,n);l.push(...v(u,r,i));const[g]=G(a,r.pos,i,1),y=u.getById(C[s.race]).filter(e=>A(e,["scoutEnemyMain","scoutEnemyNatural","clearFromEnemy"])&&!T(e));if(g){let t=[...i,...h],n=t.reduce((t,n)=>t+L(e,n,d.map(e=>e.unitType)),0);if(n>r.selfDPSHealth){if(console.log("Defend",n,r.selfDPSHealth),r.isFlying){i.find(e=>e.canShootUp())||i.push(...u.getById(o))}const t=_(a,i,r);if(t){const n={combatPoint:t,combatUnits:i,supportUnits:h,enemyTarget:r};l.push(...W.attackWithArmy(e,n,d))}}else{let i=[];const s=u.getClosest(r.pos,y,y.length).filter(e=>E(e.pos,r.pos)<=16);for(const t of s)if(i.push(t),n+=L(e,t,d.map(e=>e.unitType)),n>r.selfDPSHealth){i.forEach(e=>e.labels.set("defending"));break}i=n>r.selfDPSHealth?i:[],t=[...t,...u.getById(o),...i],l.push(...W.engageOrRetreat(e,t,d,f))}}else{const t=[];for(const n of y){const i=E(n.pos,r.pos);r.isWorker()&&1===r.selfUnits.length&&i>8||(N(e,n,r)?(t.push(n),n.labels.set("defending")):Y(n,r,[p,c])&&(n.labels.has("defending")&&n.labels.delete("defending"),l.push(...$(n))))}console.log(`Pulling ${t.length} to defend with.`),l.push(...W.engageOrRetreat(e,t,d,f))}}}return l},getInRangeDestructables:(e,t)=>{let n=null;const i=[364,365,376,377,373,638,639,640,643],o=e.getAlive(r.NEUTRAL).filter(e=>i.includes(e.unitType)),[s]=e.getClosest(t.pos,o).filter(e=>E(t.pos,e.pos)<16);return s&&(n=s.tag),n},engageOrRetreat:(e,t,n,r,i=!0)=>{const{data:a,resources:p}=e,{units:h}=p.get(),g=[],y=P(t);return t.forEach(m=>{let A=r;if(!R.includes(m.unitType)||m.labels.has("defending")){const[r]=h.getClosest(m.pos,n.filter(e=>I(p,m,e))),v=r?r.pos:null;if(r&&E(m.pos,r.pos)<16){const i=m.selfDPSHealth>r.enemyDPSHealth?m.selfDPSHealth:r.enemyDPSHealth;if(m.tag===y.tag&&function(e,t,n){const r=`${Math.round(n)}/${Math.round(t.selfDPSHealth)}`;if(void 0===e.pos||void 0===t.pos)return;const i=E(e.pos,t.pos),o=`${e.unitType}/${t.unitType}`;console.log(r,i,o)}(m,r,i),r.selfDPSHealth>i)if(B(m)<B(r)&&r.unitType!==u)if(m.isMelee())g.push(...x(h,m,r,n));else{if(function(e,t,n){const{pos:r,radius:i,unitType:o}=t;if(!(r&&i&&o&&n.pos&&n.radius))return!1;const s=U(e,o,n);return!(!s||!s.range)&&s.range>=E(r,n.pos)+i+n.radius}(a,m,r))g.push(...w(e,m,r));else{const t=O(l,[m]);t.targetWorldSpacePos=D(e,m,r),g.push(t)}}else{const i=O(l,[m]);if(m.isFlying)i.targetWorldSpacePos=M(v,m.pos);else{if(void 0!==m.pendingOrders&&0!==m.pendingOrders.length)return;{const o=function(e,t,n){let r=Number.MAX_VALUE;return n.reduce((n,i)=>{const o=U(e,i.unitType,t);if(o){const e=o.range+t.radius+i.radius+j(i),s=E(t.pos,i.pos)-e;s<r&&(r=s,n=i)}return n})}(a,m,n);if(m.isMelee())i.targetWorldSpacePos=D(e,m,o||r);else{const n=U(a,o.unitType,m);if(!n)return void g.push(...w(e,m,o||r));if(n.range+m.radius+o.radius+j(o)+j(m)<E(m.pos,o.pos))return void g.push(...w(e,m,o));i.targetWorldSpacePos=D(e,m,o||r),i.unitTags=t.filter(e=>E(e.pos,m.pos)<=1).map(e=>(S(e,i),e.tag))}}}g.push(i)}else if(function(e,t){e.selfUnits.forEach(e=>{if(E(e.pos,t)>16){if(e.isWorker()&&(e.isHarvesting()||e.isConstructing()||e.labels.has("retreating")))return;e.labels.set("recruitToBattle",t)}})}(m,v),I(p,m,r))if(m.isMelee()){const[e]=h.getClosest(m.pos,m.selfUnits.filter(e=>e.data().weapons.some(e=>e.range>1)&&void 0!==U(a,e.unitType,r)));if(e){const t=E(m.pos,e.pos),n=E(e.pos,r.pos)-e.radius-r.radius,i=U(a,e.unitType,r).range+m.radius;if(t<16&&n>i+j(e)){const t=O(l,[m]);t.targetWorldSpacePos=e.pos,g.push(t)}else{const e=O(c,[m]);e.targetWorldSpacePos=v,g.push(e)}}else{const e=O(c,[m]);e.targetWorldSpacePos=v,g.push(e)}}else g.push(...w(e,m,r));else g.push({abilityId:c,targetWorldSpacePos:v,unitTags:[m.tag]})}else if(m.unitType!==o){const e={abilityId:c,unitTags:[m.tag]},t=W.getInRangeDestructables(h,m);if(t&&i&&!k.outpowered)e.targetUnitTag=t;else{const[t]=h.getClosest(m.pos,h.getById(s).filter(e=>e.buildProgress>=1));t&&t.abilityAvailable(f)?(e.abilityId=d,e.targetUnitTag=t.tag):e.targetWorldSpacePos=A}g.push(e)}}}),g},attackWithArmy:(e,t,n)=>{const{resources:r}=e,{units:i}=r.get(),o=[],s=t.combatPoint.unitType,u=i.getById(s),d=t.combatUnits.filter(e=>!(e.unitType===s)&&0===e.labels.size),f=u.map(e=>e.tag);if(b.includes(t.enemyTarget.unitType)){const e={abilityId:p,targetUnitTag:t.enemyTarget.tag,unitTags:[...f]};o.push(e)}else{const r=Math.max.apply(Math,e.data.getUnitTypeData(a).weapons.map(e=>e.range)),s=E(t.combatPoint.pos,t.enemyTarget.pos)>r?t.combatPoint.pos:t.enemyTarget.pos;if([...u,...d].forEach(r=>{const[a]=i.getClosest(r.pos,n.filter(e=>E(r.pos,e.pos)<16));if(!r.isMelee()&&a)o.push(...w(e,r,a));else{const e=O(c,[r]);r.labels.get("combatPoint")?e.targetWorldSpacePos=t.enemyTarget.pos:e.targetWorldSpacePos=s,o.push(e)}}),t.supportUnits.length>0){const e=t.supportUnits.map(e=>e.tag);let n={abilityId:l,targetWorldSpacePos:t.combatPoint.pos,unitTags:[...e]};o.push(n)}}return o.push(...y(i)),o},push:(e,t,n)=>{const{resources:i}=e,{units:o}=i.get(),s=[];let[a]=G(i,H(i),o.getBases(r.ENEMY),1);const{mappedEnemyUnits:u}=F,[l,c]=V(o,t,n),p=m(l.map(e=>e.pos)),d=a||G(i,p,u,1)[0];if(d){const{pos:r}=d;if(void 0===r)return[];const[a,l]=V(o,t,n);s.push(...v(o,d,a));const[c]=G(i,r,a,1);if(c){let t=[...a,...l,...o.getWorkers().filter(e=>e.isAttacking())],n=t.reduce((t,n)=>t+L(e,n,u.map(e=>e.unitType)),0);console.log("Push",n,d.selfDPSHealth),s.push(...W.engageOrRetreat(e,t,u,r,!1))}s.push(...v(o,d,a))}else s.push(...W.searchAndDestroy(i,l,c));return s},searchAndDestroy:(e,t,n)=>{const{map:r,units:i}=e.get(),o=[],s=t.find(e=>e.labels.get("combatPoint"));s&&s.labels.set("combatPoint",!1);const a=[...r.getAvailableExpansions(),...r.getOccupiedExpansions(4)],u=i.getCombatUnits().filter(e=>e.noQueue),p=a[Math.floor(Math.random()*a.length)],d=p?p.townhallPosition:g(r);if(d){if(n.length>1){const e=n.map(e=>e.tag);let t={abilityId:l,targetWorldSpacePos:d,unitTags:[...e]};o.push(t)}const e=u.map(e=>e.tag);let t={abilityId:c,targetWorldSpacePos:d,unitTags:[...e]};o.push(t)}return o}};function V(e,t,n){const r=[];t.forEach(t=>{r.push(...e.getById(t).filter(e=>A(e,["scout","harasser"])))});const i=[];return n.forEach(t=>{i.push(...e.getById(t).filter(e=>!e.labels.get("scout")&&!e.labels.get("creeper")&&!e.labels.get("injector")))}),[r,i]}function Y(e,t,n){return e.orders.some(e=>{if(n.includes(e.abilityId)){if(e.targetUnitTag===t.tag)return!0;if(e.targetWorldSpacePos&&E(e.targetWorldSpacePos,t.pos)<1)return!0}return!1})}function $(e){const t=[];return t.push(O(h,[e])),t}e.exports=W},function(e,t,n){"use strict";e.exports={filterLabels:(e,t)=>t.every(t=>!e.labels.get(t))}},function(e,t,n){"use strict";const{MOVE:r}=n(3),{Alliance:i}=n(0),{OVERLORD:o,COLOSSUS:s}=n(1),{gridsInCircle:a}=n(15),{distance:u,avgPoints:l}=n(2),{getInRangeUnits:c}=n(67),{getClosestPosition:p}=n(40),{existsInMap:d}=n(32),{getTimeInSeconds:f}=n(44),{moveAwayPosition:h,getDistance:g}=n(30),{getMovementSpeed:y}=n(24),{retreat:E,getDPSOfInRangeAntiAirUnits:m}=n(4),{isWorker:A}=n(12),v={moveAway(e,t,n=2){const i=h(t.pos,e.pos,n);return{abilityId:r,targetWorldSpacePos:i,unitTags:[e.tag]}},shadowEnemy(e,t){const{data:n,resources:r}=e,{units:s}=r.get(),a=[],l=s.getAlive(i.ENEMY);return t.forEach(i=>{const p=l.filter(e=>u(i.pos,e.pos)<i.data().sightRange),[d]=s.getClosest(i.pos,p),[h]=p.filter(e=>e.canShootUp()).sort((e,t)=>{const r=Math.max.apply(Math,n.getUnitTypeData(e.unitType).weapons.map(e=>e.range)),o=u(e.pos,i.pos)-r,s=Math.max.apply(Math,n.getUnitTypeData(t.unitType).weapons.map(e=>e.range));return o-(u(t.pos,i.pos)-s)}),y=h||d||null;if(y&&function(e,t,n,r){const{frame:i,map:o,units:s}=e.get(),{centroid:a}=o.getEnemyNatural();if(void 0===a)return!1;const[u]=s.getClosest(a,n),l=u&&t.tag===u.tag,{pos:c}=r;if(void 0===c)return!1;const p=A(r)&&g(c,a)>16,d=f(i.getGameLoop())>=131,h=l&&d&&[p,!A(r)].some(e=>e);return[h,!l].some(e=>e)}(r,i,t,y))if(h)u(i.pos,h.pos)>h.data().sightRange+i.radius+h.radius?a.push(b(i,h)):a.push(R(e,i,h,c(i,l,16)));else if(d){if(function(e,t,n,r){const{map:i,units:s}=e.get(),[a]=s.getClosest(i.getEnemyNatural().centroid,t),l=A(r)&&u(r.pos,i.getEnemyNatural().centroid)>16;if(a&&n.tag===a.tag&&(l||r.unitType===o))return!0}(r,t,i,d))return;p.every(e=>u(i.pos,e.pos)>e.data().sightRange)?a.push(b(i,d)):a.push(R(e,i,d,l))}}),a}};function R(e,t,n,o){const{resources:c}=e,{map:f,units:g}=c.get();let A;if(t.isFlying){const r=t.data().sightRange,i=a(t.pos,r).filter(e=>{if(d(f,e)){const r=o.filter(n=>u(n.pos,e)<n.data().sightRange+t.radius+n.radius);try{const i=f.getHeight(e),o=a(e,t.radius).filter(n=>d(f,n)&&u(n,e)<=t.radius),l=Math.round(n.pos.z),c=r.some(e=>{const{pos:t}=e;if(void 0===t)return!0;const{z:n}=t;return void 0===n||(e.isFlying||e.unitType===s||Math.round(n)+2>i)});return[i-l>=2,!c,o.every(e=>f.getHeight(e)>=i)].every(e=>e)}catch(e){return console.log("error",e),!1}}}),[c]=p(t.pos,i);if(c){const n=m(e,t);(t.health+t.shield)/n>u(t.pos,c)/y(t)&&(A=c)}const g=l(o.map(e=>e.pos));A=A||h(g,t.pos)}else{const r=g.getAlive(i.ENEMY);n.inRangeUnits=r.filter(e=>u(n.pos,e.pos)<8),A=E(e,t,n)}return{abilityId:r,targetWorldSpacePos:A,unitTags:[t.tag]}}function b(e,t){if(e.health/e.healthMax>.5)return{abilityId:r,targetUnitTag:t.tag,unitTags:[e.tag]}}e.exports=v},function(e,t,n){"use strict";const{SUPPLYDEPOT:r}=n(1),i={adjacentToRampGrids:[],findWallOffPlacement:e=>e===r?i.supplyWallOffPositions:[i.barracksWallOffPosition],barracksWallOffPosition:null,supplyWallOffPositions:[]};e.exports=i},function(e,t,n){"use strict";e.exports={minimumAmountToAttackWith:0}},function(e,t,n){"use strict";const{TECHLAB:r,REACTOR:i,PYLON:o}=n(1),{cellsInFootprint:s}=n(19),{createPoint2D:a}=n(2),{getAddOnBuildingPlacement:u}=n(52),l={keepPosition:(e,t,n)=>{const{map:r,units:i}=e.get(),[s]=i.getById(o);return[s&&s.buildProgress<1,r.isPlaceableAt(t,n)].every(e=>e)},getBuildingFootprintOfOrphanAddons:e=>{const t=e.getById([r,i]),n=[];return t.forEach(e=>{n.push(...s(a(u(e.pos)),{w:3,h:3}))}),n}};e.exports=l},function(e,t,n){"use strict";const{ATTACK_ATTACK:r,HARVEST_GATHER:i,MOVE:o}=n(3),{mineralFieldTypes:s}=n(6),{ADEPTPHASESHIFT:a,ZEALOT:u,SCV:l}=n(1),{toDegrees:c}=n(15),{distance:p}=n(2),{createUnitCommand:d}=n(18),{moveAwayPosition:f}=n(30),h={isFacing:(e,t,n=7,r=!1)=>{const i=c(e.facing),{pos:o}=e;if(void 0===o)return!1;const{pos:s}=t;if(void 0===s)return!1;const{x:a,y:l}=o;if(void 0===a||void 0===l)return!1;const{x:p,y:d}=s;if(void 0===p||void 0===d)return!1;const f=c(Math.atan2(d-l,p-a)),h=Math.abs(i-f),g=Math.abs(i-f+360),y=Math.abs(i-f-360),E=Math.min(h,g,y);return r&&e.unitType===u&&(console.log("targetFacingDegrees",i),console.log("positionOfUnitDegrees",f),console.log("facingDifference",h),console.log("facingDifference2",g),console.log("facingDifference3",y),console.log("facingDifferenceMin",E)),E<n},micro:(e,t,n,u)=>{const l=[],c=d(o,[t]);if(t.isWorker()){const r=e.getByType(s).filter(e=>p(t.pos,e.pos)<p(n.pos,e.pos)),[o]=e.getClosest(t.pos,r);if(void 0===o)return l;c.abilityId=i,c.targetUnitTag=o.tag}else c.targetWorldSpacePos=f(n.pos,t.pos);const g=[n.isMelee(),p(t.pos,n.pos)+.05-(t.radius+n.radius)<.5,h.isFacing(n,t)];if([...g,t.weaponCooldown>8].every(e=>e)||[...g,t.health+t.shield<n.health+n.shield].every(e=>e))console.log("unit.weaponCooldown",t.weaponCooldown),console.log("distance(unit.pos, targetUnit.pos)",p(t.pos,n.pos)),l.push(c);else{const e=u.filter(e=>e.isMelee()&&p(t.pos,e.pos)+.05-(t.radius+e.radius)<.25),[i]=e.sort((e,t)=>e.health+e.shield-(t.health+t.shield));n=i||n;const o={abilityId:r,unitTags:[t.tag]};n.unitType===a?o.targetWorldSpacePos=n.pos:o.targetUnitTag=n.tag,l.push(o)}return l}};e.exports=h},function(e,t,n){"use strict";const{Alliance:r}=n(0),{PYLON:i,NEXUS:o,ASSIMILATOR:s}=n(1),{gridsInCircle:a}=n(15),{distance:u}=n(2),l=n(22),{getCombatRally:c}=n(16),{assignAndSendWorkerToBuild:p}=n(4),d=n(25),{getOccupiedExpansions:f}=n(51),{findPosition:h}=n(42);e.exports={findWarpInLocations:e=>{const{units:t}=e.get(),n=t.getById(i).filter(e=>e.buildProgress>=1).filter(t=>{const[n]=f(e).map(e=>e.getBase());if(n)return u(t.pos,n.pos)<6.89}).filter(e=>{const[n]=t.getClosest(e.pos,t.getCombatUnits(r.ENEMY));if(n)return u(e.pos,n.pos)>16});let o;if(n.length>0)return[o]=t.getClosest(c(e),n),o.pos;{const n=t.getById(i).filter(e=>e.buildProgress>=1).filter(e=>{const[n]=t.getClosest(e.pos,t.getCombatUnits(r.ENEMY));if(n)return u(e.pos,n.pos)>16});if(n&&([o]=t.getClosest(c(e),n),o))return o.pos}},restorePower:async e=>{const{resources:t}=e,{units:n}=t.get(),r=[],c=[o,i,s],d=l(n.getStructures().filter(e=>{const[t]=n.getClosest(e.pos,n.getById(i));return[!e.isPowered,!c.includes(e.unitType),e.buildProgress>=1,!t||u(e.pos,t.pos)>6.5].every(e=>e)}));if(d){const n=a(d.pos,6.5-d.radius),o=await h(t,d.unitType,n);o&&r.push(...p(e,i,o))}return r},warpIn:async(t,n,r)=>{const{actions:i}=t.get();let o;n&&n.state&&n.state.defenseMode&&d.outsupplied?o=e.exports.findWarpInLocations(t):(o=c(t),console.log("nearPosition",o));try{await i.warpIn(r,{nearPosition:o})}catch(e){console.log(e)}}}},function(e,t,n){"use strict";const{MOVE:r}=n(3),{Alliance:i}=n(0),{TownhallRace:o}=n(13),{OVERLORD:s}=n(1),{getMiddleOfStructure:a}=n(30);e.exports={cancelEarlyScout:e=>{const t=e.getAlive(i.SELF).filter(e=>e.labels.has("scoutEnemyMain")||e.labels.has("scoutEnemyNatural"));t.length>0&&t.forEach(e=>{e.labels.clear(),e.labels.set("clearFromEnemy",!0)})},generalScouting:async(e,t)=>{const{agent:n,resources:i}=e,{actions:u,map:l,units:c}=i.get(),p=[];if(t.unitType===s){const e={abilityId:r,unitTags:[t.tag]},i=o[n.race][0];if(1===c.getById(s).length)a(l.getEnemyNatural().townhallPosition,o[n.race][0]),e.targetWorldSpacePos=a(l.getEnemyNatural().townhallPosition,i);else if(2===c.getById(s).length){e.queueCommand=!0,e.targetWorldSpacePos=a(l.getNatural().townhallPosition,i),p.push(e),await u.sendAction(e);const t=l.getThirds();e.targetWorldSpacePos=a(t[Math.floor(Math.random()*t.length)].townhallPosition,i)}else e.targetWorldSpacePos=function(e){return{x:Math.floor(Math.random()*Math.floor(e._mapSize.x)),y:Math.floor(Math.random()*Math.floor(e._mapSize.y))}}(l);p.push(e),await u.sendAction(e)}}}},function(e,t,n){"use strict";const{MOVE:r,ATTACK_ATTACK:i,BUILD_CREEPTUMOR_QUEEN:o}=n(3),{Race:s,Alliance:a}=n(0),{PHOTONCANNON:u,LARVA:l,CREEPTUMORBURROWED:c}=n(1),{distance:p}=n(2),{createUnitCommand:d}=n(18),{getTravelDistancePerStep:f}=n(44),{getPathablePositions:h,isCreepEdge:g}=n(39),{isFacing:y}=n(109),{getDistance:E}=n(30),m=n(16),{getClosestUnitByPath:A,getDistanceByPath:v,getClosestPositionByPath:R,getCombatRally:b,getClosestPathablePositionsBetweenPositions:C,getCreepEdges:T}=n(16),{getWeaponThatCanAttack:S}=n(24),{retreat:O,getDamageDealingUnits:_,getUnitsInRangeOfPosition:I,calculateNearDPSHealth:P,getUnitTypeCount:w}=n(4),N=n(29),{gatherOrMine:L}=n(45),D=n(25),x=n(80),{calculateTotalHealthRatio:F}=n(12),{getRandomPoints:M,getAcrossTheMap:B}=n(32),{engageOrRetreat:U}=n(103);e.exports={acrossTheMapBehavior:e=>{const{resources:t}=e,{map:n,units:r}=t.get(),o=[],[s]=r.withLabel("scoutAcrossTheMap");if(s){const a=N.mappedEnemyUnits.filter(e=>!(s.unitType===l)&&p(e.pos,s.pos)<16),u=r.getCombatUnits().filter(e=>{if(e.tag===s.tag)return!0;if(e.isAttacking()){const t=e.orders.find(e=>e.abilityId===i&&r.getByTag(e.targetUnitTag)),n=t?r.getByTag(t.targetUnitTag).pos:e.orders.find(e=>e.abilityId===i).targetWorldSpacePos;if(n)return p(n,s.pos)<16}});if(a.length>0){const[n]=A(t,s.pos,a);o.push(...U(e,u,a,n.pos))}else{const e=d(i,[s]);e.targetWorldSpacePos=B(n),o.push(e)}}return o},clearFromEnemyBehavior:e=>{const{resources:t}=e,{map:n,units:i}=t.get(),o=[],s=b(t),[u]=i.withLabel("clearFromEnemy");if(u){const{pos:l}=u;if(void 0===l)return[];let[c]=i.getClosest(u.pos,_(e,u,N.mappedEnemyUnits),1);if(!c||p(u.pos,s)<2)u.labels.clear(),console.log("clear!"),o.push(...L(t,u));else{const[f]=i.getClosest(s,i.getAlive(a.SELF).filter(e=>p(e.pos,s)<=16));if(f&&f.selfDPSHealth>c.selfDPSHealth)o.push({abilityId:r,targetWorldSpacePos:s,unitTags:[u.tag]});else{const i=d(r,[u]),a=v(t,c.pos,s),p=v(t,l,s);if(a>16&&p>=a){i.targetWorldSpacePos=O(e,u,c,!1);const[r]=R(t,l,h(n,i.targetWorldSpacePos));console.log("retreat!",i.targetWorldSpacePos,v(t,l,r))}else{const r=I(e,b(t));c.inRangeUnits=c.inRangeUnits||I(e,c.pos);const o=P(e,r,c.inRangeUnits.map(e=>e.unitType))>P(e,c.inRangeUnits,r.map(e=>e.unitType));i.targetWorldSpacePos=O(e,u,c,o);const[s]=R(t,l,h(n,i.targetWorldSpacePos));console.log("rally!",o,i.targetWorldSpacePos,v(t,l,s))}o.push(i)}}}return o},creeperBehavior:e=>{const{resources:t}=e,{map:n,units:i}=t.get(),s=[];m.creepEdges=[];return i.withLabel("creeper").filter(e=>e.isIdle()).forEach(i=>{let a;const{pos:u}=i;if(void 0===u)return s;if(w(e,c)<=3){const e=n.getOccupiedExpansions().map(e=>e.getBase()),{townhallPosition:r}=n.getEnemyNatural(),[i]=A(t,r,e).map(e=>e.pos);if(void 0===i)return s;const o=C(t,i,r),{pathCoordinates:l}=o;let c=l.filter(e=>g(n,e));if(c.length>0){const e=c.filter(e=>E(u,e)<=10&&v(t,u,e)<=10);e.length>0&&(c=e);a=R(t,i,c,c.length)[c.length-1]}}else{let e=T(t,u);const n=T(t,u).filter(e=>E(u,e)<=10&&v(t,u,e)<=10);n.length>0&&(e=n);const[r]=R(t,u,e);r&&(a=r)}if(a){const e={abilityId:i.abilityAvailable(o)?o:r,targetWorldSpacePos:a,unitTags:[i.tag]};s.push(e)}}),s},recruitToBattleBehavior:e=>{const t="recruitToBattle",n=[];return e.withLabel(t).forEach(e=>{const r=e.labels.get(t);if(p(e.pos,r)<16)e.labels.delete(t);else{const t=d(i,[e]);t.targetWorldSpacePos=r,n.push(t)}}),n},scoutEnemyMainBehavior:async e=>{const{data:t,resources:n}=e,{actions:i,map:o,units:u}=n.get(),[l]=u.withLabel("scoutEnemyMain"),c=[];if(l){const{pos:i}=l;if(void 0===i)return;const h=function(e,t){const{pos:n,radius:r}=t;if(void 0===n||void 0===r)return[];const i=t.enemyUnits||x.getEnemyUnits(t);return i&&i.filter(i=>{const{pos:o,radius:s,unitType:a}=i;if(void 0===o||void 0===s||void 0===a)return!1;const u=E(n,o),l=S(e,a,t);if(l){const{range:e}=l;if(void 0===e)return!1;const n=e+r+s+f(i)+f(t),o=!i.isMelee()||y(i,t,24);return u<=n&&o}})||[]}(t,l);if(F(u,l)>.5)if(h.length>0){l.labels.set("Threatened",!0);let t=function(e,t,n){const{data:r}=e,{pos:i,radius:o}=t;if(void 0===i||void 0===o)return;const s=n.reduce((e,n)=>{const{pos:s,radius:a,unitType:u}=n;if(void 0===s||void 0===a||void 0===u)return e;const l=E(i,s),c=S(r,u,t);if(c){const{range:r}=c;if(void 0===r)return e;if(l<=r+o+a+f(n)+f(t))return e&&e.distance<l?e:{distance:l,unit:n}}return e},void 0);return s&&s.unit}(e,l,h);if(t){const{pos:o}=t;if(void 0===o)return;const s=function(e){const{map:t,units:n}=e.get();return t.getExpansions().filter(e=>{const t=n.getAlive({alliance:a.ENEMY}).filter(t=>p(t.pos,e.centroid)<16),r=n.getAlive({alliance:a.SELF}).filter(t=>p(t.pos,e.centroid)<16);return 0===t.length&&0===r.length})}(n),[u]=s.filter(e=>{const{centroid:t}=e;if(void 0!==t)return v(n,i,t)<v(n,o,t)});if(u){const e=d(r,[l]);e.targetWorldSpacePos=u.centroid,c.push(e)}else{const n=d(r,[l]);n.targetWorldSpacePos=O(e,l,t,!1),c.push(n)}}}else{let e=!0;l.labels.has("Threatened")&&(l.labels.delete("Threatened"),e=!1);const{areas:t}=o.getEnemyMain();if(void 0===t)return[];const n=t.areaFill.filter(e=>o.isPathable(e)),i=[...M(o,3,n)];if(D.opponentRace===s.ZERG){const{townhallPosition:e}=o.getEnemyNatural();o.isPathable(e)&&i.push(e)}const{orders:a}=l;if(void 0===a)return[];if(a.some(e=>{if(e.abilityId===r){const{targetWorldSpacePos:t}=e;if(void 0===t)return!1;if(!o.isPathable(t))return!0}return!1})){const e=d(r,[l]);e.targetWorldSpacePos=i[0],e.queueCommand=!1,c.push(e)}else i.length>a.length&&(l.isGathering()&&(e=!1),i.forEach(t=>{const n={abilityId:r,unitTags:[l.tag],queueCommand:e,targetWorldSpacePos:t};c.push(n),e=!0}))}else if(h.length>0){let[t]=u.getClosest(i,h,1);const o=d(r,[l]);if(t){o.targetWorldSpacePos=O(e,l,t,!1);const{targetWorldSpacePos:r}=o;if(void 0===r)return;console.log("retreat!",i,r,v(n,i,r))}else{o.targetWorldSpacePos=b(n);const{targetWorldSpacePos:e}=o;console.log("rally!",i,e,v(n,i,e))}c.push(o)}}c.length>0&&await i.sendAction(c)},scoutEnemyNaturalBehavior:async e=>{const{actions:t,map:n,units:i}=e.get(),[o]=i.withLabel("scoutEnemyNatural"),s=[];if(o){const[t]=i.getById(u,a.ENEMY).filter(e=>p(e.pos,o.pos)<16);if(F(i,o)>.5&&!t){const e=n.getEnemyNatural(),t=[...M(n,3,e.areas.areaFill)];t.length>o.orders.length&&t.forEach(e=>{const t={abilityId:r,unitTags:[o.tag],queueCommand:!0,targetWorldSpacePos:e};s.push(t)})}else{const t={abilityId:r,unitTags:[o.tag],targetWorldSpacePos:b(e)};s.push(t)}}s.length>0&&await t.sendAction(s)}}},function(e,t,n){"use strict";e.exports=function(e,t){var n=new Array(arguments.length-1),r=0,i=2,o=!0;for(;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,s(e))}}))}},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,n){"use strict";t.Service=n(211)},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";e.exports=function(e){for(var t,n=o.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(o.compareFieldsById),u=0;u<a.length;++u){var l=a[u].resolve(),c=e._fieldsArray.indexOf(l),p=l.resolvedType instanceof r?"int32":l.type,d=i.basic[p];t="m"+o.safeProp(l.name),l.map?(n("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|i.mapKey[l.keyType],l.keyType),void 0===d?n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",c,t):n(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,p,t),n("}")("}")):l.repeated?(n("if(%s!=null&&%s.length){",t,t),l.packed&&void 0!==i.packed[p]?n("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",p,t)("w.ldelim()"):(n("for(var i=0;i<%s.length;++i)",t),void 0===d?s(n,l,c,t+"[i]"):n("w.uint32(%i).%s(%s[i])",(l.id<<3|d)>>>0,p,t)),n("}")):(l.optional&&n("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,l.name),void 0===d?s(n,l,c,t):n("w.uint32(%i).%s(%s)",(l.id<<3|d)>>>0,p,t))}return n("return w")};var r=n(36),i=n(63),o=n(21);function s(e,t,n,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(t.id<<3|2)>>>0)}},function(e,t,n){"use strict";e.exports=m;var r=n(62);((m.prototype=Object.create(r.prototype)).constructor=m).className="Type";var i=n(36),o=n(69),s=n(56),a=n(119),u=n(120),l=n(86),c=n(85),p=n(84),d=n(21),f=n(117),h=n(122),g=n(123),y=n(124),E=n(125);function m(e,t){r.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function A(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(m.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=m.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof l||((e.prototype=new l).constructor=e,d.merge(e.prototype,t)),e.$type=e.prototype.$type=this,d.merge(e,l,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var r={};for(n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:d.oneOfGetter(this._oneofsArray[n].oneof),set:d.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,r)}}}),m.generateConstructor=function(e){for(var t,n=d.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?n("this%s={}",d.safeProp(t.name)):t.repeated&&n("this%s=[]",d.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},m.fromJSON=function(e,t){var n=new m(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var l=Object.keys(t.fields),c=0;c<l.length;++c)n.add((void 0!==t.fields[l[c]].keyType?a.fromJSON:s.fromJSON)(l[c],t.fields[l[c]]));if(t.oneofs)for(l=Object.keys(t.oneofs),c=0;c<l.length;++c)n.add(o.fromJSON(l[c],t.oneofs[l[c]]));if(t.nested)for(l=Object.keys(t.nested),c=0;c<l.length;++c){var p=t.nested[l[c]];n.add((void 0!==p.id?s.fromJSON:void 0!==p.fields?m.fromJSON:void 0!==p.values?i.fromJSON:void 0!==p.methods?u.fromJSON:r.fromJSON)(l[c],p))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n},m.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return d.toObject(["options",t&&t.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},m.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var n=this.oneofsArray;for(t=0;t<n.length;)n[t++].resolve();return r.prototype.resolveAll.call(this)},m.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},m.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof s&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),A(this)}return e instanceof o?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),A(this)):r.prototype.add.call(this,e)},m.prototype.remove=function(e){if(e instanceof s&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),A(this)}if(e instanceof o){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),A(this)}return r.prototype.remove.call(this,e)},m.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},m.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},m.prototype.create=function(e){return new this.ctor(e)},m.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=f(this)({Writer:p,types:t,util:d}),this.decode=h(this)({Reader:c,types:t,util:d}),this.verify=g(this)({types:t,util:d}),this.fromObject=y.fromObject(this)({types:t,util:d}),this.toObject=y.toObject(this)({types:t,util:d});var r=E[e];if(r){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(i),i.toObject=this.toObject,this.toObject=r.toObject.bind(i)}return this},m.prototype.encode=function(e,t){return this.setup().encode(e,t)},m.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},m.prototype.decode=function(e,t){return this.setup().decode(e,t)},m.prototype.decodeDelimited=function(e){return e instanceof c||(e=c.create(e)),this.decode(e,e.uint32())},m.prototype.verify=function(e){return this.setup().verify(e)},m.prototype.fromObject=function(e){return this.setup().fromObject(e)},m.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},m.d=function(e){return function(t){d.decorateType(t,e)}}},function(e,t,n){"use strict";e.exports=s;var r=n(56);((s.prototype=Object.create(r.prototype)).constructor=s).className="MapField";var i=n(63),o=n(21);function s(e,t,n,i,s,a){if(r.call(this,e,t,i,void 0,void 0,s,a),!o.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(e,t){return new s(e,t.id,t.keyType,t.type,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},s.d=function(e,t,n){return"function"==typeof n?n=o.decorateType(n).name:n&&"object"==typeof n&&(n=o.decorateEnum(n).name),function(r,i){o.decorateType(r.constructor).add(new s(i,e,t,n))}}},function(e,t,n){"use strict";e.exports=a;var r=n(62);((a.prototype=Object.create(r.prototype)).constructor=a).className="Service";var i=n(121),o=n(21),s=n(115);function a(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function u(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var n=new a(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),o=0;o<r.length;++o)n.add(i.fromJSON(r[o],t.methods[r[o]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},a.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return o.toObject(["options",t&&t.options||void 0,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=o.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,u(this)):r.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,u(this)}return r.prototype.remove.call(this,e)},a.prototype.create=function(e,t,n){for(var r,i=new s.Service(e,t,n),a=0;a<this.methodsArray.length;++a){var u=o.lcFirst((r=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");i[u]=o.codegen(["r","c"],o.isReserved(u)?u+"_":u)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return i}},function(e,t,n){"use strict";e.exports=o;var r=n(55);((o.prototype=Object.create(r.prototype)).constructor=o).className="Method";var i=n(21);function o(e,t,n,o,s,a,u,l,c){if(i.isObject(s)?(u=s,s=a=void 0):i.isObject(a)&&(u=a,a=void 0),void 0!==t&&!i.isString(t))throw TypeError("type must be a string");if(!i.isString(n))throw TypeError("requestType must be a string");if(!i.isString(o))throw TypeError("responseType must be a string");r.call(this,e,u),this.type=t||"rpc",this.requestType=n,this.requestStream=!!s||void 0,this.responseType=o,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=l,this.parsedOptions=c}o.fromJSON=function(e,t){return new o(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},o.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},function(e,t,n){"use strict";e.exports=function(e){var t=o.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var n=0;n<e.fieldsArray.length;++n){var a=e._fieldsArray[n].resolve(),u=a.resolvedType instanceof r?"int32":a.type,l="m"+o.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos"),void 0!==i.defaults[a.keyType]?t("k=%j",i.defaults[a.keyType]):t("k=null"),void 0!==i.defaults[u]?t("value=%j",i.defaults[u]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===i.basic[u]?t("value=types[%i].decode(r,r.uint32())",n):t("value=r.%s()",u),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==i.long[a.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',l):t("%s[k]=value",l)):a.repeated?(t("if(!(%s&&%s.length))",l,l)("%s=[]",l),void 0!==i.packed[u]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,u)("}else"),void 0===i.basic[u]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,n):t("%s.push(r.%s())",l,u)):void 0===i.basic[u]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,n):t("%s=r.%s()",l,u),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<e._fieldsArray.length;++n){var c=e._fieldsArray[n];c.required&&t("if(!m.hasOwnProperty(%j))",c.name)("throw util.ProtocolError(%j,{instance:m})",s(c))}return t("return m")};var r=n(36),i=n(63),o=n(21);function s(e){return"missing required '"+e.name+"'"}},function(e,t,n){"use strict";e.exports=function(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n=e.oneofsArray,r={};n.length&&t("var p={}");for(var u=0;u<e.fieldsArray.length;++u){var l=e._fieldsArray[u].resolve(),c="m"+i.safeProp(l.name);if(l.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",c,l.name),l.map)t("if(!util.isObject(%s))",c)("return%j",o(l,"object"))("var k=Object.keys(%s)",c)("for(var i=0;i<k.length;++i){"),a(t,l,"k[i]"),s(t,l,u,c+"[k[i]]")("}");else if(l.repeated)t("if(!Array.isArray(%s))",c)("return%j",o(l,"array"))("for(var i=0;i<%s.length;++i){",c),s(t,l,u,c+"[i]")("}");else{if(l.partOf){var p=i.safeProp(l.partOf.name);1===r[l.partOf.name]&&t("if(p%s===1)",p)("return%j",l.partOf.name+": multiple values"),r[l.partOf.name]=1,t("p%s=1",p)}s(t,l,u,c)}l.optional&&t("}")}return t("return null")};var r=n(36),i=n(21);function o(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function s(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",i)("default:")("return%j",o(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),a=0;a<s.length;++a)e("case %i:",t.resolvedType.values[s[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",o(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",o(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",o(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",o(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",o(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",o(t,"buffer"))}return e}function a(e,t,n){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",n)("return%j",o(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",n)("return%j",o(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",n)("return%j",o(t,"boolean key"))}return e}},function(e,t,n){"use strict";var r=t,i=n(36),o=n(21);function s(e,t,n,r){if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",r);for(var o=t.resolvedType.values,s=Object.keys(o),a=0;a<s.length;++a)t.repeated&&o[s[a]]===t.typeDefault&&e("default:"),e("case%j:",s[a])("case %i:",o[s[a]])("m%s=%j",r,o[s[a]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,n,r);else{var u=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,u)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,u?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function a(e,t,n,r){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,n,r,r):e("d%s=types[%i].toObject(m%s,o)",r,n,r);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,o?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}r.fromObject=function(e){var t=e.fieldsArray,n=o.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var r=0;r<t.length;++r){var a=t[r].resolve(),u=o.safeProp(a.name);a.map?(n("if(d%s){",u)('if(typeof d%s!=="object")',u)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",u)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",u),s(n,a,r,u+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",u)("if(!Array.isArray(d%s))",u)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",u)("for(var i=0;i<d%s.length;++i){",u),s(n,a,r,u+"[i]")("}")("}")):(a.resolvedType instanceof i||n("if(d%s!=null){",u),s(n,a,r,u),a.resolvedType instanceof i||n("}"))}return n("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(o.compareFieldsById);if(!t.length)return o.codegen()("return {}");for(var n=o.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],s=[],u=[],l=0;l<t.length;++l)t[l].partOf||(t[l].resolve().repeated?r:t[l].map?s:u).push(t[l]);if(r.length){for(n("if(o.arrays||o.defaults){"),l=0;l<r.length;++l)n("d%s=[]",o.safeProp(r[l].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),l=0;l<s.length;++l)n("d%s={}",o.safeProp(s[l].name));n("}")}if(u.length){for(n("if(o.defaults){"),l=0;l<u.length;++l){var c=u[l],p=o.safeProp(c.name);if(c.resolvedType instanceof i)n("d%s=o.enums===String?%j:%j",p,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",p)("}else")("d%s=o.longs===String?%j:%i",p,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var d="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",p,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",p,d)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",p,p)("}")}else n("d%s=%j",p,c.typeDefault)}n("}")}var f=!1;for(l=0;l<t.length;++l){c=t[l];var h=e._fieldsArray.indexOf(c);p=o.safeProp(c.name);c.map?(f||(f=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",p,p)("d%s={}",p)("for(var j=0;j<ks2.length;++j){"),a(n,c,h,p+"[ks2[j]]")("}")):c.repeated?(n("if(m%s&&m%s.length){",p,p)("d%s=[]",p)("for(var j=0;j<m%s.length;++j){",p),a(n,c,h,p+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",p,c.name),a(n,c,h,p),c.partOf&&n("if(o.oneofs)")("d%s=%j",o.safeProp(c.partOf.name),c.name)),n("}")}return n("return d")}},function(e,t,n){"use strict";var r=t,i=n(86);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),n=this.lookup(t);if(n){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:n.encode(n.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var n="",r="";if(t&&t.json&&e.type_url&&e.value){r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(r);o&&(e=o.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var s=e.$type.toObject(e,t);return""===n&&(n="type.googleapis.com/"),r=n+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),s["@type"]=r,s}return this.toObject(e,t)}}},function(e,t,n){"use strict";e.exports=p;var r=n(62);((p.prototype=Object.create(r.prototype)).constructor=p).className="Root";var i,o,s,a=n(56),u=n(36),l=n(69),c=n(21);function p(e){r.call(this,"",e),this.deferred=[],this.files=[]}function d(){}p.fromJSON=function(e,t){return t||(t=new p),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},p.prototype.resolvePath=c.path.resolve,p.prototype.fetch=c.fetch,p.prototype.load=function e(t,n,r){"function"==typeof n&&(r=n,n=void 0);var i=this;if(!r)return c.asPromise(e,i,t,n);var a=r===d;function u(e,t){if(r){var n=r;if(r=null,a)throw e;n(e,t)}}function l(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var n=e.substring(t);if(n in s)return n}return null}function p(e,t){try{if(c.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),c.isString(t)){o.filename=e;var r,s=o(t,i,n),p=0;if(s.imports)for(;p<s.imports.length;++p)(r=l(s.imports[p])||i.resolvePath(e,s.imports[p]))&&f(r);if(s.weakImports)for(p=0;p<s.weakImports.length;++p)(r=l(s.weakImports[p])||i.resolvePath(e,s.weakImports[p]))&&f(r,!0)}else i.setOptions(t.options).addJSON(t.nested)}catch(e){u(e)}a||h||u(null,i)}function f(e,t){if(!(i.files.indexOf(e)>-1))if(i.files.push(e),e in s)a?p(e,s[e]):(++h,setTimeout((function(){--h,p(e,s[e])})));else if(a){var n;try{n=c.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||u(e))}p(e,n)}else++h,i.fetch(e,(function(n,o){--h,r&&(n?t?h||u(null,i):u(n):p(e,o))}))}var h=0;c.isString(t)&&(t=[t]);for(var g,y=0;y<t.length;++y)(g=i.resolvePath("",t[y]))&&f(g);if(a)return i;h||u(null,i)},p.prototype.loadSync=function(e,t){if(!c.isNode)throw Error("not supported");return this.load(e,t,d)},p.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function h(e,t){var n=t.parent.lookup(t.extend);if(n){var r=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return r.declaringField=t,t.extensionField=r,n.add(r),!0}return!1}p.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||h(0,e)||this.deferred.push(e);else if(e instanceof u)f.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof i)for(var t=0;t<this.deferred.length;)h(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);f.test(e.name)&&(e.parent[e.name]=e)}},p.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof u)f.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);f.test(e.name)&&delete e.parent[e.name]}},p._configure=function(e,t,n){i=e,o=t,s=n}},function(e,t,n){"use strict";var r=n(83),i=(r.roots.default||(r.roots.default=new r.Root)).addJSON({SC2APIProtocol:{nested:{AvailableAbility:{fields:{abilityId:{type:"int32",id:1},requiresPoint:{type:"bool",id:2}}},ImageData:{fields:{bitsPerPixel:{type:"int32",id:1},size:{type:"Size2DI",id:2},data:{type:"bytes",id:3}}},PointI:{fields:{x:{type:"int32",id:1},y:{type:"int32",id:2}}},RectangleI:{fields:{p0:{type:"PointI",id:1},p1:{type:"PointI",id:2}}},Point2D:{fields:{x:{type:"float",id:1},y:{type:"float",id:2}}},Point:{fields:{x:{type:"float",id:1},y:{type:"float",id:2},z:{type:"float",id:3}}},Size2DI:{fields:{x:{type:"int32",id:1},y:{type:"int32",id:2}}},Race:{values:{NoRace:0,Terran:1,Zerg:2,Protoss:3,Random:4}},AbilityData:{fields:{abilityId:{type:"uint32",id:1},linkName:{type:"string",id:2},linkIndex:{type:"uint32",id:3},buttonName:{type:"string",id:4},friendlyName:{type:"string",id:5},hotkey:{type:"string",id:6},remapsToAbilityId:{type:"uint32",id:7},available:{type:"bool",id:8},target:{type:"Target",id:9},allowMinimap:{type:"bool",id:10},allowAutocast:{type:"bool",id:11},isBuilding:{type:"bool",id:12},footprintRadius:{type:"float",id:13},isInstantPlacement:{type:"bool",id:14},castRange:{type:"float",id:15}},nested:{Target:{values:{None:1,Point:2,Unit:3,PointOrUnit:4,PointOrNone:5}}}},Attribute:{values:{Light:1,Armored:2,Biological:3,Mechanical:4,Robotic:5,Psionic:6,Massive:7,Structure:8,Hover:9,Heroic:10,Summoned:11}},DamageBonus:{fields:{attribute:{type:"Attribute",id:1},bonus:{type:"float",id:2}}},Weapon:{fields:{type:{type:"TargetType",id:1},damage:{type:"float",id:2},damageBonus:{rule:"repeated",type:"DamageBonus",id:3},attacks:{type:"uint32",id:4},range:{type:"float",id:5},speed:{type:"float",id:6}},nested:{TargetType:{values:{Ground:1,Air:2,Any:3}}}},UnitTypeData:{fields:{unitId:{type:"uint32",id:1},name:{type:"string",id:2},available:{type:"bool",id:3},cargoSize:{type:"uint32",id:4},mineralCost:{type:"uint32",id:12},vespeneCost:{type:"uint32",id:13},foodRequired:{type:"float",id:14},foodProvided:{type:"float",id:18},abilityId:{type:"uint32",id:15},race:{type:"Race",id:16},buildTime:{type:"float",id:17},hasVespene:{type:"bool",id:19},hasMinerals:{type:"bool",id:20},sightRange:{type:"float",id:25},techAlias:{rule:"repeated",type:"uint32",id:21,options:{packed:!1}},unitAlias:{type:"uint32",id:22},techRequirement:{type:"uint32",id:23},requireAttached:{type:"bool",id:24},attributes:{rule:"repeated",type:"Attribute",id:8,options:{packed:!1}},movementSpeed:{type:"float",id:9},armor:{type:"float",id:10},weapons:{rule:"repeated",type:"Weapon",id:11}}},UpgradeData:{fields:{upgradeId:{type:"uint32",id:1},name:{type:"string",id:2},mineralCost:{type:"uint32",id:3},vespeneCost:{type:"uint32",id:4},researchTime:{type:"float",id:5},abilityId:{type:"uint32",id:6}}},BuffData:{fields:{buffId:{type:"uint32",id:1},name:{type:"string",id:2}}},EffectData:{fields:{effectId:{type:"uint32",id:1},name:{type:"string",id:2},friendlyName:{type:"string",id:3},radius:{type:"float",id:4}}},DebugCommand:{oneofs:{command:{oneof:["draw","gameState","createUnit","killUnit","testProcess","score","endGame","unitValue"]}},fields:{draw:{type:"DebugDraw",id:1},gameState:{type:"DebugGameState",id:2},createUnit:{type:"DebugCreateUnit",id:3},killUnit:{type:"DebugKillUnit",id:4},testProcess:{type:"DebugTestProcess",id:5},score:{type:"DebugSetScore",id:6},endGame:{type:"DebugEndGame",id:7},unitValue:{type:"DebugSetUnitValue",id:8}}},DebugDraw:{fields:{text:{rule:"repeated",type:"DebugText",id:1},lines:{rule:"repeated",type:"DebugLine",id:2},boxes:{rule:"repeated",type:"DebugBox",id:3},spheres:{rule:"repeated",type:"DebugSphere",id:4}}},Line:{fields:{p0:{type:"Point",id:1},p1:{type:"Point",id:2}}},Color:{fields:{r:{type:"uint32",id:1},g:{type:"uint32",id:2},b:{type:"uint32",id:3}}},DebugText:{fields:{color:{type:"Color",id:1},text:{type:"string",id:2},virtualPos:{type:"Point",id:3},worldPos:{type:"Point",id:4},size:{type:"uint32",id:5}}},DebugLine:{fields:{color:{type:"Color",id:1},line:{type:"Line",id:2}}},DebugBox:{fields:{color:{type:"Color",id:1},min:{type:"Point",id:2},max:{type:"Point",id:3}}},DebugSphere:{fields:{color:{type:"Color",id:1},p:{type:"Point",id:2},r:{type:"float",id:3}}},DebugGameState:{values:{show_map:1,control_enemy:2,food:3,free:4,all_resources:5,god:6,minerals:7,gas:8,cooldown:9,tech_tree:10,upgrade:11,fast_build:12}},DebugCreateUnit:{fields:{unitType:{type:"uint32",id:1},owner:{type:"int32",id:2},pos:{type:"Point2D",id:3},quantity:{type:"uint32",id:4}}},DebugKillUnit:{fields:{tag:{rule:"repeated",type:"uint64",id:1,options:{packed:!1}}}},DebugTestProcess:{fields:{test:{type:"Test",id:1},delayMs:{type:"int32",id:2}},nested:{Test:{values:{hang:1,crash:2,exit:3}}}},DebugSetScore:{fields:{score:{type:"float",id:1}}},DebugEndGame:{fields:{endResult:{type:"EndResult",id:1}},nested:{EndResult:{values:{Surrender:1,DeclareVictory:2}}}},DebugSetUnitValue:{fields:{unitValue:{type:"UnitValue",id:1},value:{type:"float",id:2},unitTag:{type:"uint64",id:3}},nested:{UnitValue:{values:{Energy:1,Life:2,Shields:3}}}},ActionResult:{values:{Success:1,NotSupported:2,Error:3,CantQueueThatOrder:4,Retry:5,Cooldown:6,QueueIsFull:7,RallyQueueIsFull:8,NotEnoughMinerals:9,NotEnoughVespene:10,NotEnoughTerrazine:11,NotEnoughCustom:12,NotEnoughFood:13,FoodUsageImpossible:14,NotEnoughLife:15,NotEnoughShields:16,NotEnoughEnergy:17,LifeSuppressed:18,ShieldsSuppressed:19,EnergySuppressed:20,NotEnoughCharges:21,CantAddMoreCharges:22,TooMuchMinerals:23,TooMuchVespene:24,TooMuchTerrazine:25,TooMuchCustom:26,TooMuchFood:27,TooMuchLife:28,TooMuchShields:29,TooMuchEnergy:30,MustTargetUnitWithLife:31,MustTargetUnitWithShields:32,MustTargetUnitWithEnergy:33,CantTrade:34,CantSpend:35,CantTargetThatUnit:36,CouldntAllocateUnit:37,UnitCantMove:38,TransportIsHoldingPosition:39,BuildTechRequirementsNotMet:40,CantFindPlacementLocation:41,CantBuildOnThat:42,CantBuildTooCloseToDropOff:43,CantBuildLocationInvalid:44,CantSeeBuildLocation:45,CantBuildTooCloseToCreepSource:46,CantBuildTooCloseToResources:47,CantBuildTooFarFromWater:48,CantBuildTooFarFromCreepSource:49,CantBuildTooFarFromBuildPowerSource:50,CantBuildOnDenseTerrain:51,CantTrainTooFarFromTrainPowerSource:52,CantLandLocationInvalid:53,CantSeeLandLocation:54,CantLandTooCloseToCreepSource:55,CantLandTooCloseToResources:56,CantLandTooFarFromWater:57,CantLandTooFarFromCreepSource:58,CantLandTooFarFromBuildPowerSource:59,CantLandTooFarFromTrainPowerSource:60,CantLandOnDenseTerrain:61,AddOnTooFarFromBuilding:62,MustBuildRefineryFirst:63,BuildingIsUnderConstruction:64,CantFindDropOff:65,CantLoadOtherPlayersUnits:66,NotEnoughRoomToLoadUnit:67,CantUnloadUnitsThere:68,CantWarpInUnitsThere:69,CantLoadImmobileUnits:70,CantRechargeImmobileUnits:71,CantRechargeUnderConstructionUnits:72,CantLoadThatUnit:73,NoCargoToUnload:74,LoadAllNoTargetsFound:75,NotWhileOccupied:76,CantAttackWithoutAmmo:77,CantHoldAnyMoreAmmo:78,TechRequirementsNotMet:79,MustLockdownUnitFirst:80,MustTargetUnit:81,MustTargetInventory:82,MustTargetVisibleUnit:83,MustTargetVisibleLocation:84,MustTargetWalkableLocation:85,MustTargetPawnableUnit:86,YouCantControlThatUnit:87,YouCantIssueCommandsToThatUnit:88,MustTargetResources:89,RequiresHealTarget:90,RequiresRepairTarget:91,NoItemsToDrop:92,CantHoldAnyMoreItems:93,CantHoldThat:94,TargetHasNoInventory:95,CantDropThisItem:96,CantMoveThisItem:97,CantPawnThisUnit:98,MustTargetCaster:99,CantTargetCaster:100,MustTargetOuter:101,CantTargetOuter:102,MustTargetYourOwnUnits:103,CantTargetYourOwnUnits:104,MustTargetFriendlyUnits:105,CantTargetFriendlyUnits:106,MustTargetNeutralUnits:107,CantTargetNeutralUnits:108,MustTargetEnemyUnits:109,CantTargetEnemyUnits:110,MustTargetAirUnits:111,CantTargetAirUnits:112,MustTargetGroundUnits:113,CantTargetGroundUnits:114,MustTargetStructures:115,CantTargetStructures:116,MustTargetLightUnits:117,CantTargetLightUnits:118,MustTargetArmoredUnits:119,CantTargetArmoredUnits:120,MustTargetBiologicalUnits:121,CantTargetBiologicalUnits:122,MustTargetHeroicUnits:123,CantTargetHeroicUnits:124,MustTargetRoboticUnits:125,CantTargetRoboticUnits:126,MustTargetMechanicalUnits:127,CantTargetMechanicalUnits:128,MustTargetPsionicUnits:129,CantTargetPsionicUnits:130,MustTargetMassiveUnits:131,CantTargetMassiveUnits:132,MustTargetMissile:133,CantTargetMissile:134,MustTargetWorkerUnits:135,CantTargetWorkerUnits:136,MustTargetEnergyCapableUnits:137,CantTargetEnergyCapableUnits:138,MustTargetShieldCapableUnits:139,CantTargetShieldCapableUnits:140,MustTargetFlyers:141,CantTargetFlyers:142,MustTargetBuriedUnits:143,CantTargetBuriedUnits:144,MustTargetCloakedUnits:145,CantTargetCloakedUnits:146,MustTargetUnitsInAStasisField:147,CantTargetUnitsInAStasisField:148,MustTargetUnderConstructionUnits:149,CantTargetUnderConstructionUnits:150,MustTargetDeadUnits:151,CantTargetDeadUnits:152,MustTargetRevivableUnits:153,CantTargetRevivableUnits:154,MustTargetHiddenUnits:155,CantTargetHiddenUnits:156,CantRechargeOtherPlayersUnits:157,MustTargetHallucinations:158,CantTargetHallucinations:159,MustTargetInvulnerableUnits:160,CantTargetInvulnerableUnits:161,MustTargetDetectedUnits:162,CantTargetDetectedUnits:163,CantTargetUnitWithEnergy:164,CantTargetUnitWithShields:165,MustTargetUncommandableUnits:166,CantTargetUncommandableUnits:167,MustTargetPreventDefeatUnits:168,CantTargetPreventDefeatUnits:169,MustTargetPreventRevealUnits:170,CantTargetPreventRevealUnits:171,MustTargetPassiveUnits:172,CantTargetPassiveUnits:173,MustTargetStunnedUnits:174,CantTargetStunnedUnits:175,MustTargetSummonedUnits:176,CantTargetSummonedUnits:177,MustTargetUser1:178,CantTargetUser1:179,MustTargetUnstoppableUnits:180,CantTargetUnstoppableUnits:181,MustTargetResistantUnits:182,CantTargetResistantUnits:183,MustTargetDazedUnits:184,CantTargetDazedUnits:185,CantLockdown:186,CantMindControl:187,MustTargetDestructibles:188,CantTargetDestructibles:189,MustTargetItems:190,CantTargetItems:191,NoCalldownAvailable:192,WaypointListFull:193,MustTargetRace:194,CantTargetRace:195,MustTargetSimilarUnits:196,CantTargetSimilarUnits:197,CantFindEnoughTargets:198,AlreadySpawningLarva:199,CantTargetExhaustedResources:200,CantUseMinimap:201,CantUseInfoPanel:202,OrderQueueIsFull:203,CantHarvestThatResource:204,HarvestersNotRequired:205,AlreadyTargeted:206,CantAttackWeaponsDisabled:207,CouldntReachTarget:208,TargetIsOutOfRange:209,TargetIsTooClose:210,TargetIsOutOfArc:211,CantFindTeleportLocation:212,InvalidItemClass:213,CantFindCancelOrder:214}},RequestQuery:{fields:{pathing:{rule:"repeated",type:"RequestQueryPathing",id:1},abilities:{rule:"repeated",type:"RequestQueryAvailableAbilities",id:2},placements:{rule:"repeated",type:"RequestQueryBuildingPlacement",id:3},ignoreResourceRequirements:{type:"bool",id:4}}},ResponseQuery:{fields:{pathing:{rule:"repeated",type:"ResponseQueryPathing",id:1},abilities:{rule:"repeated",type:"ResponseQueryAvailableAbilities",id:2},placements:{rule:"repeated",type:"ResponseQueryBuildingPlacement",id:3}}},RequestQueryPathing:{oneofs:{start:{oneof:["startPos","unitTag"]}},fields:{startPos:{type:"Point2D",id:1},unitTag:{type:"uint64",id:2},endPos:{type:"Point2D",id:3}}},ResponseQueryPathing:{fields:{distance:{type:"float",id:1}}},RequestQueryAvailableAbilities:{fields:{unitTag:{type:"uint64",id:1}}},ResponseQueryAvailableAbilities:{fields:{abilities:{rule:"repeated",type:"AvailableAbility",id:1},unitTag:{type:"uint64",id:2},unitTypeId:{type:"uint32",id:3}}},RequestQueryBuildingPlacement:{fields:{abilityId:{type:"int32",id:1},targetPos:{type:"Point2D",id:2},placingUnitTag:{type:"uint64",id:3}}},ResponseQueryBuildingPlacement:{fields:{result:{type:"ActionResult",id:1}}},StartRaw:{fields:{mapSize:{type:"Size2DI",id:1},pathingGrid:{type:"ImageData",id:2},terrainHeight:{type:"ImageData",id:3},placementGrid:{type:"ImageData",id:4},playableArea:{type:"RectangleI",id:5},startLocations:{rule:"repeated",type:"Point2D",id:6}}},ObservationRaw:{fields:{player:{type:"PlayerRaw",id:1},units:{rule:"repeated",type:"Unit",id:2},mapState:{type:"MapState",id:3},event:{type:"Event",id:4},effects:{rule:"repeated",type:"Effect",id:5},radar:{rule:"repeated",type:"RadarRing",id:6}}},RadarRing:{fields:{pos:{type:"Point",id:1},radius:{type:"float",id:2}}},PowerSource:{fields:{pos:{type:"Point",id:1},radius:{type:"float",id:2},tag:{type:"uint64",id:3}}},PlayerRaw:{fields:{powerSources:{rule:"repeated",type:"PowerSource",id:1},camera:{type:"Point",id:2},upgradeIds:{rule:"repeated",type:"uint32",id:3,options:{packed:!1}}}},UnitOrder:{oneofs:{target:{oneof:["targetWorldSpacePos","targetUnitTag"]}},fields:{abilityId:{type:"uint32",id:1},targetWorldSpacePos:{type:"Point",id:2},targetUnitTag:{type:"uint64",id:3},progress:{type:"float",id:4}}},DisplayType:{values:{Visible:1,Snapshot:2,Hidden:3,Placeholder:4}},Alliance:{values:{Self:1,Ally:2,Neutral:3,Enemy:4}},CloakState:{values:{CloakedUnknown:0,Cloaked:1,CloakedDetected:2,NotCloaked:3,CloakedAllied:4}},PassengerUnit:{fields:{tag:{type:"uint64",id:1},health:{type:"float",id:2},healthMax:{type:"float",id:3},shield:{type:"float",id:4},shieldMax:{type:"float",id:7},energy:{type:"float",id:5},energyMax:{type:"float",id:8},unitType:{type:"uint32",id:6}}},RallyTarget:{fields:{point:{type:"Point",id:1},tag:{type:"uint64",id:2}}},Unit:{fields:{displayType:{type:"DisplayType",id:1},alliance:{type:"Alliance",id:2},tag:{type:"uint64",id:3},unitType:{type:"uint32",id:4},owner:{type:"int32",id:5},pos:{type:"Point",id:6},facing:{type:"float",id:7},radius:{type:"float",id:8},buildProgress:{type:"float",id:9},cloak:{type:"CloakState",id:10},buffIds:{rule:"repeated",type:"uint32",id:27,options:{packed:!1}},detectRange:{type:"float",id:31},radarRange:{type:"float",id:32},isSelected:{type:"bool",id:11},isOnScreen:{type:"bool",id:12},isBlip:{type:"bool",id:13},isPowered:{type:"bool",id:35},isActive:{type:"bool",id:39},attackUpgradeLevel:{type:"int32",id:40},armorUpgradeLevel:{type:"int32",id:41},shieldUpgradeLevel:{type:"int32",id:42},health:{type:"float",id:14},healthMax:{type:"float",id:15},shield:{type:"float",id:16},shieldMax:{type:"float",id:36},energy:{type:"float",id:17},energyMax:{type:"float",id:37},mineralContents:{type:"int32",id:18},vespeneContents:{type:"int32",id:19},isFlying:{type:"bool",id:20},isBurrowed:{type:"bool",id:21},isHallucination:{type:"bool",id:38},orders:{rule:"repeated",type:"UnitOrder",id:22},addOnTag:{type:"uint64",id:23},passengers:{rule:"repeated",type:"PassengerUnit",id:24},cargoSpaceTaken:{type:"int32",id:25},cargoSpaceMax:{type:"int32",id:26},assignedHarvesters:{type:"int32",id:28},idealHarvesters:{type:"int32",id:29},weaponCooldown:{type:"float",id:30},engagedTargetTag:{type:"uint64",id:34},buffDurationRemain:{type:"int32",id:43},buffDurationMax:{type:"int32",id:44},rallyTargets:{rule:"repeated",type:"RallyTarget",id:45}}},MapState:{fields:{visibility:{type:"ImageData",id:1},creep:{type:"ImageData",id:2}}},Event:{fields:{deadUnits:{rule:"repeated",type:"uint64",id:1,options:{packed:!1}}}},Effect:{fields:{effectId:{type:"uint32",id:1},pos:{rule:"repeated",type:"Point2D",id:2},alliance:{type:"Alliance",id:3},owner:{type:"int32",id:4},radius:{type:"float",id:5}}},ActionRaw:{oneofs:{action:{oneof:["unitCommand","cameraMove","toggleAutocast"]}},fields:{unitCommand:{type:"ActionRawUnitCommand",id:1},cameraMove:{type:"ActionRawCameraMove",id:2},toggleAutocast:{type:"ActionRawToggleAutocast",id:3}}},ActionRawUnitCommand:{oneofs:{target:{oneof:["targetWorldSpacePos","targetUnitTag"]}},fields:{abilityId:{type:"int32",id:1},targetWorldSpacePos:{type:"Point2D",id:2},targetUnitTag:{type:"uint64",id:3},unitTags:{rule:"repeated",type:"uint64",id:4,options:{packed:!1}},queueCommand:{type:"bool",id:5}}},ActionRawCameraMove:{fields:{centerWorldSpace:{type:"Point",id:1}}},ActionRawToggleAutocast:{fields:{abilityId:{type:"int32",id:1},unitTags:{rule:"repeated",type:"uint64",id:2,options:{packed:!1}}}},Request:{oneofs:{request:{oneof:["createGame","joinGame","restartGame","startReplay","leaveGame","quickSave","quickLoad","quit","gameInfo","observation","action","obsAction","step","data","query","saveReplay","mapCommand","replayInfo","availableMaps","saveMap","ping","debug"]}},fields:{createGame:{type:"RequestCreateGame",id:1},joinGame:{type:"RequestJoinGame",id:2},restartGame:{type:"RequestRestartGame",id:3},startReplay:{type:"RequestStartReplay",id:4},leaveGame:{type:"RequestLeaveGame",id:5},quickSave:{type:"RequestQuickSave",id:6},quickLoad:{type:"RequestQuickLoad",id:7},quit:{type:"RequestQuit",id:8},gameInfo:{type:"RequestGameInfo",id:9},observation:{type:"RequestObservation",id:10},action:{type:"RequestAction",id:11},obsAction:{type:"RequestObserverAction",id:21},step:{type:"RequestStep",id:12},data:{type:"RequestData",id:13},query:{type:"RequestQuery",id:14},saveReplay:{type:"RequestSaveReplay",id:15},mapCommand:{type:"RequestMapCommand",id:22},replayInfo:{type:"RequestReplayInfo",id:16},availableMaps:{type:"RequestAvailableMaps",id:17},saveMap:{type:"RequestSaveMap",id:18},ping:{type:"RequestPing",id:19},debug:{type:"RequestDebug",id:20},id:{type:"uint32",id:97}}},Response:{oneofs:{response:{oneof:["createGame","joinGame","restartGame","startReplay","leaveGame","quickSave","quickLoad","quit","gameInfo","observation","action","obsAction","step","data","query","saveReplay","replayInfo","availableMaps","saveMap","mapCommand","ping","debug"]}},fields:{createGame:{type:"ResponseCreateGame",id:1},joinGame:{type:"ResponseJoinGame",id:2},restartGame:{type:"ResponseRestartGame",id:3},startReplay:{type:"ResponseStartReplay",id:4},leaveGame:{type:"ResponseLeaveGame",id:5},quickSave:{type:"ResponseQuickSave",id:6},quickLoad:{type:"ResponseQuickLoad",id:7},quit:{type:"ResponseQuit",id:8},gameInfo:{type:"ResponseGameInfo",id:9},observation:{type:"ResponseObservation",id:10},action:{type:"ResponseAction",id:11},obsAction:{type:"ResponseObserverAction",id:21},step:{type:"ResponseStep",id:12},data:{type:"ResponseData",id:13},query:{type:"ResponseQuery",id:14},saveReplay:{type:"ResponseSaveReplay",id:15},replayInfo:{type:"ResponseReplayInfo",id:16},availableMaps:{type:"ResponseAvailableMaps",id:17},saveMap:{type:"ResponseSaveMap",id:18},mapCommand:{type:"ResponseMapCommand",id:22},ping:{type:"ResponsePing",id:19},debug:{type:"ResponseDebug",id:20},id:{type:"uint32",id:97},error:{rule:"repeated",type:"string",id:98},status:{type:"Status",id:99}}},Status:{values:{launched:1,init_game:2,in_game:3,in_replay:4,ended:5,quit:6,unknown:99}},RequestCreateGame:{oneofs:{Map:{oneof:["localMap","battlenetMapName"]}},fields:{localMap:{type:"LocalMap",id:1},battlenetMapName:{type:"string",id:2},playerSetup:{rule:"repeated",type:"PlayerSetup",id:3},disableFog:{type:"bool",id:4},randomSeed:{type:"uint32",id:5},realtime:{type:"bool",id:6}}},LocalMap:{fields:{mapPath:{type:"string",id:1},mapData:{type:"bytes",id:7}}},ResponseCreateGame:{fields:{error:{type:"Error",id:1},errorDetails:{type:"string",id:2}},nested:{Error:{values:{MissingMap:1,InvalidMapPath:2,InvalidMapData:3,InvalidMapName:4,InvalidMapHandle:5,MissingPlayerSetup:6,InvalidPlayerSetup:7,MultiplayerUnsupported:8}}}},RequestJoinGame:{oneofs:{participation:{oneof:["race","observedPlayerId"]}},fields:{race:{type:"Race",id:1},observedPlayerId:{type:"uint32",id:2},options:{type:"InterfaceOptions",id:3},serverPorts:{type:"PortSet",id:4},clientPorts:{rule:"repeated",type:"PortSet",id:5},sharedPort:{type:"int32",id:6},playerName:{type:"string",id:7},hostIp:{type:"string",id:8}}},PortSet:{fields:{gamePort:{type:"int32",id:1},basePort:{type:"int32",id:2}}},ResponseJoinGame:{fields:{playerId:{type:"uint32",id:1},error:{type:"Error",id:2},errorDetails:{type:"string",id:3}},nested:{Error:{values:{MissingParticipation:1,InvalidObservedPlayerId:2,MissingOptions:3,MissingPorts:4,GameFull:5,LaunchError:6,FeatureUnsupported:7,NoSpaceForUser:8,MapDoesNotExist:9,CannotOpenMap:10,ChecksumError:11,NetworkError:12,OtherError:13}}}},RequestRestartGame:{fields:{}},ResponseRestartGame:{fields:{error:{type:"Error",id:1},errorDetails:{type:"string",id:2},needHardReset:{type:"bool",id:3}},nested:{Error:{values:{LaunchError:1}}}},RequestStartReplay:{oneofs:{replay:{oneof:["replayPath","replayData"]}},fields:{replayPath:{type:"string",id:1},replayData:{type:"bytes",id:5},mapData:{type:"bytes",id:6},observedPlayerId:{type:"int32",id:2},options:{type:"InterfaceOptions",id:3},disableFog:{type:"bool",id:4},realtime:{type:"bool",id:7},recordReplay:{type:"bool",id:8}}},ResponseStartReplay:{fields:{error:{type:"Error",id:1},errorDetails:{type:"string",id:2}},nested:{Error:{values:{MissingReplay:1,InvalidReplayPath:2,InvalidReplayData:3,InvalidMapData:4,InvalidObservedPlayerId:5,MissingOptions:6,LaunchError:7}}}},RequestMapCommand:{fields:{triggerCmd:{type:"string",id:1}}},ResponseMapCommand:{fields:{error:{type:"Error",id:1},errorDetails:{type:"string",id:2}},nested:{Error:{values:{NoTriggerError:1}}}},RequestLeaveGame:{fields:{}},ResponseLeaveGame:{fields:{}},RequestQuickSave:{fields:{}},ResponseQuickSave:{fields:{}},RequestQuickLoad:{fields:{}},ResponseQuickLoad:{fields:{}},RequestQuit:{fields:{}},ResponseQuit:{fields:{}},RequestGameInfo:{fields:{}},ResponseGameInfo:{fields:{mapName:{type:"string",id:1},modNames:{rule:"repeated",type:"string",id:6},localMapPath:{type:"string",id:2},playerInfo:{rule:"repeated",type:"PlayerInfo",id:3},startRaw:{type:"StartRaw",id:4},options:{type:"InterfaceOptions",id:5}}},RequestObservation:{fields:{disableFog:{type:"bool",id:1},gameLoop:{type:"uint32",id:2}}},ResponseObservation:{fields:{actions:{rule:"repeated",type:"Action",id:1},actionErrors:{rule:"repeated",type:"ActionError",id:2},observation:{type:"Observation",id:3},playerResult:{rule:"repeated",type:"PlayerResult",id:4},chat:{rule:"repeated",type:"ChatReceived",id:5}}},ChatReceived:{fields:{playerId:{type:"uint32",id:1},message:{type:"string",id:2}}},RequestAction:{fields:{actions:{rule:"repeated",type:"Action",id:1}}},ResponseAction:{fields:{result:{rule:"repeated",type:"ActionResult",id:1,options:{packed:!1}}}},RequestObserverAction:{fields:{actions:{rule:"repeated",type:"ObserverAction",id:1}}},ResponseObserverAction:{fields:{}},RequestStep:{fields:{count:{type:"uint32",id:1}}},ResponseStep:{fields:{simulationLoop:{type:"uint32",id:1}}},RequestData:{fields:{abilityId:{type:"bool",id:1},unitTypeId:{type:"bool",id:2},upgradeId:{type:"bool",id:3},buffId:{type:"bool",id:4},effectId:{type:"bool",id:5}}},ResponseData:{fields:{abilities:{rule:"repeated",type:"AbilityData",id:1},units:{rule:"repeated",type:"UnitTypeData",id:2},upgrades:{rule:"repeated",type:"UpgradeData",id:3},buffs:{rule:"repeated",type:"BuffData",id:4},effects:{rule:"repeated",type:"EffectData",id:5}}},RequestSaveReplay:{fields:{}},ResponseSaveReplay:{fields:{data:{type:"bytes",id:1}}},RequestReplayInfo:{oneofs:{replay:{oneof:["replayPath","replayData"]}},fields:{replayPath:{type:"string",id:1},replayData:{type:"bytes",id:2},downloadData:{type:"bool",id:3}}},PlayerInfoExtra:{fields:{playerInfo:{type:"PlayerInfo",id:1},playerResult:{type:"PlayerResult",id:2},playerMmr:{type:"int32",id:3},playerApm:{type:"int32",id:4}}},ResponseReplayInfo:{fields:{mapName:{type:"string",id:1},localMapPath:{type:"string",id:2},playerInfo:{rule:"repeated",type:"PlayerInfoExtra",id:3},gameDurationLoops:{type:"uint32",id:4},gameDurationSeconds:{type:"float",id:5},gameVersion:{type:"string",id:6},dataVersion:{type:"string",id:11},dataBuild:{type:"uint32",id:7},baseBuild:{type:"uint32",id:8},error:{type:"Error",id:9},errorDetails:{type:"string",id:10}},nested:{Error:{values:{MissingReplay:1,InvalidReplayPath:2,InvalidReplayData:3,ParsingError:4,DownloadError:5}}}},RequestAvailableMaps:{fields:{}},ResponseAvailableMaps:{fields:{localMapPaths:{rule:"repeated",type:"string",id:1},battlenetMapNames:{rule:"repeated",type:"string",id:2}}},RequestSaveMap:{fields:{mapPath:{type:"string",id:1},mapData:{type:"bytes",id:2}}},ResponseSaveMap:{fields:{error:{type:"Error",id:1}},nested:{Error:{values:{InvalidMapData:1}}}},RequestPing:{fields:{}},ResponsePing:{fields:{gameVersion:{type:"string",id:1},dataVersion:{type:"string",id:2},dataBuild:{type:"uint32",id:3},baseBuild:{type:"uint32",id:4}}},RequestDebug:{fields:{debug:{rule:"repeated",type:"DebugCommand",id:1}}},ResponseDebug:{fields:{}},Difficulty:{values:{VeryEasy:1,Easy:2,Medium:3,MediumHard:4,Hard:5,Harder:6,VeryHard:7,CheatVision:8,CheatMoney:9,CheatInsane:10}},PlayerType:{values:{Participant:1,Computer:2,Observer:3}},AIBuild:{values:{RandomBuild:1,Rush:2,Timing:3,Power:4,Macro:5,Air:6}},PlayerSetup:{fields:{type:{type:"PlayerType",id:1},race:{type:"Race",id:2},difficulty:{type:"Difficulty",id:3},playerName:{type:"string",id:4},aiBuild:{type:"AIBuild",id:5}}},SpatialCameraSetup:{fields:{resolution:{type:"Size2DI",id:2},minimapResolution:{type:"Size2DI",id:3},width:{type:"float",id:1},cropToPlayableArea:{type:"bool",id:4},allowCheatingLayers:{type:"bool",id:5}}},InterfaceOptions:{fields:{raw:{type:"bool",id:1},score:{type:"bool",id:2},featureLayer:{type:"SpatialCameraSetup",id:3},render:{type:"SpatialCameraSetup",id:4},showCloaked:{type:"bool",id:5},showBurrowedShadows:{type:"bool",id:9},showPlaceholders:{type:"bool",id:8},rawAffectsSelection:{type:"bool",id:6},rawCropToPlayableArea:{type:"bool",id:7}}},PlayerInfo:{fields:{playerId:{type:"uint32",id:1},type:{type:"PlayerType",id:2},raceRequested:{type:"Race",id:3},raceActual:{type:"Race",id:4},difficulty:{type:"Difficulty",id:5},aiBuild:{type:"AIBuild",id:7},playerName:{type:"string",id:6}}},PlayerCommon:{fields:{playerId:{type:"uint32",id:1},minerals:{type:"uint32",id:2},vespene:{type:"uint32",id:3},foodCap:{type:"uint32",id:4},foodUsed:{type:"uint32",id:5},foodArmy:{type:"uint32",id:6},foodWorkers:{type:"uint32",id:7},idleWorkerCount:{type:"uint32",id:8},armyCount:{type:"uint32",id:9},warpGateCount:{type:"uint32",id:10},larvaCount:{type:"uint32",id:11}}},Observation:{fields:{gameLoop:{type:"uint32",id:9},playerCommon:{type:"PlayerCommon",id:1},alerts:{rule:"repeated",type:"Alert",id:10,options:{packed:!1}},abilities:{rule:"repeated",type:"AvailableAbility",id:3},score:{type:"Score",id:4},rawData:{type:"ObservationRaw",id:5},featureLayerData:{type:"ObservationFeatureLayer",id:6},renderData:{type:"ObservationRender",id:7},uiData:{type:"ObservationUI",id:8}}},Action:{fields:{actionRaw:{type:"ActionRaw",id:1},actionFeatureLayer:{type:"ActionSpatial",id:2},actionRender:{type:"ActionSpatial",id:3},actionUi:{type:"ActionUI",id:4},actionChat:{type:"ActionChat",id:6},gameLoop:{type:"uint32",id:7}}},ActionChat:{fields:{channel:{type:"Channel",id:1},message:{type:"string",id:2}},nested:{Channel:{values:{Broadcast:1,Team:2}}}},ActionError:{fields:{unitTag:{type:"uint64",id:1},abilityId:{type:"uint64",id:2},result:{type:"ActionResult",id:3}}},ObserverAction:{oneofs:{action:{oneof:["playerPerspective","cameraMove","cameraFollowPlayer","cameraFollowUnits"]}},fields:{playerPerspective:{type:"ActionObserverPlayerPerspective",id:1},cameraMove:{type:"ActionObserverCameraMove",id:2},cameraFollowPlayer:{type:"ActionObserverCameraFollowPlayer",id:3},cameraFollowUnits:{type:"ActionObserverCameraFollowUnits",id:4}}},ActionObserverPlayerPerspective:{fields:{playerId:{type:"uint32",id:1}}},ActionObserverCameraMove:{fields:{worldPos:{type:"Point2D",id:1},distance:{type:"float",id:2}}},ActionObserverCameraFollowPlayer:{fields:{playerId:{type:"uint32",id:1}}},ActionObserverCameraFollowUnits:{fields:{unitTags:{rule:"repeated",type:"uint64",id:1,options:{packed:!1}}}},Alert:{values:{AlertError:3,AddOnComplete:4,BuildingComplete:5,BuildingUnderAttack:6,LarvaHatched:7,MergeComplete:8,MineralsExhausted:9,MorphComplete:10,MothershipComplete:11,MULEExpired:12,NuclearLaunchDetected:1,NukeComplete:13,NydusWormDetected:2,ResearchComplete:14,TrainError:15,TrainUnitComplete:16,TrainWorkerComplete:17,TransformationComplete:18,UnitUnderAttack:19,UpgradeComplete:20,VespeneExhausted:21,WarpInComplete:22}},Result:{values:{Victory:1,Defeat:2,Tie:3,Undecided:4}},PlayerResult:{fields:{playerId:{type:"uint32",id:1},result:{type:"Result",id:2}}},Score:{fields:{scoreType:{type:"ScoreType",id:6},score:{type:"int32",id:7},scoreDetails:{type:"ScoreDetails",id:8}},nested:{ScoreType:{values:{Curriculum:1,Melee:2}}}},CategoryScoreDetails:{fields:{none:{type:"float",id:1},army:{type:"float",id:2},economy:{type:"float",id:3},technology:{type:"float",id:4},upgrade:{type:"float",id:5}}},VitalScoreDetails:{fields:{life:{type:"float",id:1},shields:{type:"float",id:2},energy:{type:"float",id:3}}},ScoreDetails:{fields:{idleProductionTime:{type:"float",id:1},idleWorkerTime:{type:"float",id:2},totalValueUnits:{type:"float",id:3},totalValueStructures:{type:"float",id:4},killedValueUnits:{type:"float",id:5},killedValueStructures:{type:"float",id:6},collectedMinerals:{type:"float",id:7},collectedVespene:{type:"float",id:8},collectionRateMinerals:{type:"float",id:9},collectionRateVespene:{type:"float",id:10},spentMinerals:{type:"float",id:11},spentVespene:{type:"float",id:12},foodUsed:{type:"CategoryScoreDetails",id:13},killedMinerals:{type:"CategoryScoreDetails",id:14},killedVespene:{type:"CategoryScoreDetails",id:15},lostMinerals:{type:"CategoryScoreDetails",id:16},lostVespene:{type:"CategoryScoreDetails",id:17},friendlyFireMinerals:{type:"CategoryScoreDetails",id:18},friendlyFireVespene:{type:"CategoryScoreDetails",id:19},usedMinerals:{type:"CategoryScoreDetails",id:20},usedVespene:{type:"CategoryScoreDetails",id:21},totalUsedMinerals:{type:"CategoryScoreDetails",id:22},totalUsedVespene:{type:"CategoryScoreDetails",id:23},totalDamageDealt:{type:"VitalScoreDetails",id:24},totalDamageTaken:{type:"VitalScoreDetails",id:25},totalHealed:{type:"VitalScoreDetails",id:26},currentApm:{type:"float",id:27},currentEffectiveApm:{type:"float",id:28}}},ObservationFeatureLayer:{fields:{renders:{type:"FeatureLayers",id:1},minimapRenders:{type:"FeatureLayersMinimap",id:2}}},FeatureLayers:{fields:{heightMap:{type:"ImageData",id:1},visibilityMap:{type:"ImageData",id:2},creep:{type:"ImageData",id:3},power:{type:"ImageData",id:4},playerId:{type:"ImageData",id:5},unitType:{type:"ImageData",id:6},selected:{type:"ImageData",id:7},unitHitPoints:{type:"ImageData",id:8},unitHitPointsRatio:{type:"ImageData",id:17},unitEnergy:{type:"ImageData",id:9},unitEnergyRatio:{type:"ImageData",id:18},unitShields:{type:"ImageData",id:10},unitShieldsRatio:{type:"ImageData",id:19},playerRelative:{type:"ImageData",id:11},unitDensityAa:{type:"ImageData",id:14},unitDensity:{type:"ImageData",id:15},effects:{type:"ImageData",id:20},hallucinations:{type:"ImageData",id:21},cloaked:{type:"ImageData",id:22},blip:{type:"ImageData",id:23},buffs:{type:"ImageData",id:24},buffDuration:{type:"ImageData",id:26},active:{type:"ImageData",id:25},buildProgress:{type:"ImageData",id:27},buildable:{type:"ImageData",id:28},pathable:{type:"ImageData",id:29},placeholder:{type:"ImageData",id:30}}},FeatureLayersMinimap:{fields:{heightMap:{type:"ImageData",id:1},visibilityMap:{type:"ImageData",id:2},creep:{type:"ImageData",id:3},camera:{type:"ImageData",id:4},playerId:{type:"ImageData",id:5},playerRelative:{type:"ImageData",id:6},selected:{type:"ImageData",id:7},alerts:{type:"ImageData",id:9},buildable:{type:"ImageData",id:10},pathable:{type:"ImageData",id:11},unitType:{type:"ImageData",id:8}}},ObservationRender:{fields:{map:{type:"ImageData",id:1},minimap:{type:"ImageData",id:2}}},ActionSpatial:{oneofs:{action:{oneof:["unitCommand","cameraMove","unitSelectionPoint","unitSelectionRect"]}},fields:{unitCommand:{type:"ActionSpatialUnitCommand",id:1},cameraMove:{type:"ActionSpatialCameraMove",id:2},unitSelectionPoint:{type:"ActionSpatialUnitSelectionPoint",id:3},unitSelectionRect:{type:"ActionSpatialUnitSelectionRect",id:4}}},ActionSpatialUnitCommand:{oneofs:{target:{oneof:["targetScreenCoord","targetMinimapCoord"]}},fields:{abilityId:{type:"int32",id:1},targetScreenCoord:{type:"PointI",id:2},targetMinimapCoord:{type:"PointI",id:3},queueCommand:{type:"bool",id:4}}},ActionSpatialCameraMove:{fields:{centerMinimap:{type:"PointI",id:1}}},ActionSpatialUnitSelectionPoint:{fields:{selectionScreenCoord:{type:"PointI",id:1},type:{type:"Type",id:2}},nested:{Type:{values:{Select:1,Toggle:2,AllType:3,AddAllType:4}}}},ActionSpatialUnitSelectionRect:{fields:{selectionScreenCoord:{rule:"repeated",type:"RectangleI",id:1},selectionAdd:{type:"bool",id:2}}},ObservationUI:{oneofs:{panel:{oneof:["single","multi","cargo","production"]}},fields:{groups:{rule:"repeated",type:"ControlGroup",id:1},single:{type:"SinglePanel",id:2},multi:{type:"MultiPanel",id:3},cargo:{type:"CargoPanel",id:4},production:{type:"ProductionPanel",id:5}}},ControlGroup:{fields:{controlGroupIndex:{type:"uint32",id:1},leaderUnitType:{type:"uint32",id:2},count:{type:"uint32",id:3}}},UnitInfo:{fields:{unitType:{type:"uint32",id:1},playerRelative:{type:"uint32",id:2},health:{type:"int32",id:3},shields:{type:"int32",id:4},energy:{type:"int32",id:5},transportSlotsTaken:{type:"int32",id:6},buildProgress:{type:"float",id:7},addOn:{type:"UnitInfo",id:8},maxHealth:{type:"int32",id:9},maxShields:{type:"int32",id:10},maxEnergy:{type:"int32",id:11}}},SinglePanel:{fields:{unit:{type:"UnitInfo",id:1},attackUpgradeLevel:{type:"int32",id:2},armorUpgradeLevel:{type:"int32",id:3},shieldUpgradeLevel:{type:"int32",id:4},buffs:{rule:"repeated",type:"int32",id:5,options:{packed:!1}}}},MultiPanel:{fields:{units:{rule:"repeated",type:"UnitInfo",id:1}}},CargoPanel:{fields:{unit:{type:"UnitInfo",id:1},passengers:{rule:"repeated",type:"UnitInfo",id:2},slotsAvailable:{type:"int32",id:3}}},BuildItem:{fields:{abilityId:{type:"uint32",id:1},buildProgress:{type:"float",id:2}}},ProductionPanel:{fields:{unit:{type:"UnitInfo",id:1},buildQueue:{rule:"repeated",type:"UnitInfo",id:2},productionQueue:{rule:"repeated",type:"BuildItem",id:3}}},ActionUI:{oneofs:{action:{oneof:["controlGroup","selectArmy","selectWarpGates","selectLarva","selectIdleWorker","multiPanel","cargoPanel","productionPanel","toggleAutocast"]}},fields:{controlGroup:{type:"ActionControlGroup",id:1},selectArmy:{type:"ActionSelectArmy",id:2},selectWarpGates:{type:"ActionSelectWarpGates",id:3},selectLarva:{type:"ActionSelectLarva",id:4},selectIdleWorker:{type:"ActionSelectIdleWorker",id:5},multiPanel:{type:"ActionMultiPanel",id:6},cargoPanel:{type:"ActionCargoPanelUnload",id:7},productionPanel:{type:"ActionProductionPanelRemoveFromQueue",id:8},toggleAutocast:{type:"ActionToggleAutocast",id:9}}},ActionControlGroup:{fields:{action:{type:"ControlGroupAction",id:1},controlGroupIndex:{type:"uint32",id:2}},nested:{ControlGroupAction:{values:{Recall:1,Set:2,Append:3,SetAndSteal:4,AppendAndSteal:5}}}},ActionSelectArmy:{fields:{selectionAdd:{type:"bool",id:1}}},ActionSelectWarpGates:{fields:{selectionAdd:{type:"bool",id:1}}},ActionSelectLarva:{fields:{}},ActionSelectIdleWorker:{fields:{type:{type:"Type",id:1}},nested:{Type:{values:{Set:1,Add:2,All:3,AddAll:4}}}},ActionMultiPanel:{fields:{type:{type:"Type",id:1},unitIndex:{type:"int32",id:2}},nested:{Type:{values:{SingleSelect:1,DeselectUnit:2,SelectAllOfType:3,DeselectAllOfType:4}}}},ActionCargoPanelUnload:{fields:{unitIndex:{type:"int32",id:1}}},ActionProductionPanelRemoveFromQueue:{fields:{unitIndex:{type:"int32",id:1}}},ActionToggleAutocast:{fields:{abilityId:{type:"int32",id:1}}}}}});e.exports=i},function(e,t,n){e.exports=function(e){function t(e){let n,i,o,s=null;function a(...e){if(!a.enabled)return;const r=a,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];n=o.call(r,t),e.splice(s,1),s--}return n}),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(218),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},function(e,t,n){"use strict";const r=n(70),i=n(87),o=n(220),{env:s}=process;let a;function u(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function l(e,t){if(0===a)return 0;if(o("color=16m")||o("color=full")||o("color=truecolor"))return 3;if(o("color=256"))return 2;if(e&&!t&&void 0===a)return 0;const n=a||0;if("dumb"===s.TERM)return n;if("win32"===process.platform){const e=r.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(e=>e in s)||"codeship"===s.CI_NAME?1:n;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if("truecolor"===s.COLORTERM)return 3;if("TERM_PROGRAM"in s){const e=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:n}o("no-color")||o("no-colors")||o("color=false")||o("color=never")?a=0:(o("color")||o("colors")||o("color=true")||o("color=always"))&&(a=1),"FORCE_COLOR"in s&&(a="true"===s.FORCE_COLOR?1:"false"===s.FORCE_COLOR?0:0===s.FORCE_COLOR.length?1:Math.min(parseInt(s.FORCE_COLOR,10),3)),e.exports={supportsColor:function(e){return u(l(e,e&&e.isTTY))},stdout:u(l(!0,i.isatty(1))),stderr:u(l(!0,i.isatty(2)))}},function(e,t){e.exports=require("async_hooks")},function(e,t,n){"use strict";e.exports=function(e){var t=n(11),r=n(47).keys,i=t.tryCatch,o=t.errorObj;return function(n,s,a){return function(u){var l=a._boundValue();e:for(var c=0;c<n.length;++c){var p=n[c];if(p===Error||null!=p&&p.prototype instanceof Error){if(u instanceof p)return i(s).call(l,u)}else if("function"==typeof p){var d=i(p).call(l,u);if(d===o)return d;if(d)return i(s).call(l,u)}else if(t.isObject(u)){for(var f=r(p),h=0;h<f.length;++h){var g=f[h];if(p[g]!=u[g])continue e}return i(s).call(l,u)}}return e}}}},function(e,t,n){"use strict";var r=n(11),i=r.maybeWrapAsError,o=n(43).OperationalError,s=n(47);var a=/^(?:name|message|stack|cause)$/;function u(e){var t;if(function(e){return e instanceof Error&&s.getPrototypeOf(e)===Error.prototype}(e)){(t=new o(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var n=s.keys(e),i=0;i<n.length;++i){var u=n[i];a.test(u)||(t[u]=e[u])}return t}return r.markAsOriginatingFromRejection(e),e}e.exports=function(e,t){return function(n,r){if(null!==e){if(n){var o=u(i(n));e._attachExtraTrace(o),e._reject(o)}else if(t){for(var s=arguments.length,a=new Array(Math.max(s-1,0)),l=1;l<s;++l)a[l-1]=arguments[l];e._fulfill(a)}else e._fulfill(r);e=null}}}},function(e,t,n){"use strict";const r=n(134)(),i=n(71),o=["first","second","third","fourth","fifth","sixth"];function s(e){return Array.isArray(e)?"array":null===e?"null":typeof e}function a(e,t,n,r){throw new i(`Invalid ${o[n]||"manyith"} argument. Expected ${t.join(" or ")} but received ${e}.`)}e.exports=function(e,t,n){try{let o=0,u={demanded:[],optional:[]};"object"==typeof e?(n=t,t=e):u=r.parseCommand("cmd "+e);const l=[].slice.call(t);for(;l.length&&void 0===l[l.length-1];)l.pop();if((n=n||l.length)<u.demanded.length)throw new i(`Not enough arguments provided. Expected ${u.demanded.length} but received ${l.length}.`);const c=u.demanded.length+u.optional.length;if(n>c)throw new i(`Too many arguments provided. Expected max ${c} but received ${n}.`);u.demanded.forEach(e=>{const t=s(l.shift());0===e.cmd.filter(e=>e===t||"*"===e).length&&a(t,e.cmd,o,!1),o+=1}),u.optional.forEach(e=>{if(0===l.length)return;const t=s(l.shift());0===e.cmd.filter(e=>e===t||"*"===e).length&&a(t,e.cmd,o,!0),o+=1})}catch(e){console.warn(e.stack)}}},function(e,t,n){"use strict";const r=n(37).inspect,i=n(10),o=n(135),s=/(^\*)|(^\$0)/;e.exports=function(e,t,a,u){const l={};let c,p,d={},f={};function h(e){return!e.getUsageInstance().getUsageDisabled()&&0===e.getUsageInstance().getUsage().length}function g(e,t){const n=s.test(t.original)?t.original.replace(s,"").trim():t.original,r=e.filter(e=>!s.test(e));return r.push(n),"$0 "+r.join(" ")}function y(e,t,n,r){const i=e.cmd[0];e.variadic?n[i]=t._.splice(0).map(String):t._.length&&(n[i]=[String(t._.shift())])}function E(t,n,r){const i=Object.assign({},e.getOptions());i.default=Object.assign(r.default,i.default),i.alias=Object.assign(r.alias,i.alias),i.array=i.array.concat(r.array),delete i.config;const s=[];if(Object.keys(n).forEach(e=>{n[e].map(t=>{s.push("--"+e),s.push(t)})}),!s.length)return;const a=o.detailed(s,i);if(a.error)e.getUsageInstance().fail(a.error.message,a.error);else{const e=Object.keys(n);Object.keys(n).forEach(t=>{[].push.apply(e,a.aliases[t])}),Object.keys(a.argv).forEach(r=>{-1!==e.indexOf(r)&&(n[r]||(n[r]=a.argv[r]),t[r]=a.argv[r])})}}return u=u||[],l.addHandler=function(e,o,a,p,h){let g=[];if(p=p||(()=>{}),h=h||[],u.push(...h),h=u,Array.isArray(e))g=e.slice(1),e=e[0];else if("object"==typeof e){let t=Array.isArray(e.command)||"string"==typeof e.command?e.command:function(e){const t=n(260)(e);if(!t)throw new Error("No command name given for module: "+r(e));return o=t.filename,i.basename(o,i.extname(o));var o}(e);return e.aliases&&(t=[].concat(t).concat(e.aliases)),void l.addHandler(t,function(e){for(let t,n=["describe","description","desc"],r=0,i=n.length;r<i;r++)if(t=e[n[r]],"string"==typeof t||"boolean"==typeof t)return t;return!1}(e),e.builder,e.handler,e.middlewares)}if("object"==typeof a&&a.builder&&"function"==typeof a.handler)return void l.addHandler([e].concat(g),o,a.builder,a.handler,a.middlewares);const y=l.parseCommand(e);g=g.map(e=>l.parseCommand(e).cmd);let E=!1;const m=[y.cmd].concat(g).filter(e=>!s.test(e)||(E=!0,!1));0===m.length&&E&&m.push("$0"),E&&(y.cmd=m[0],g=m.slice(1),e=e.replace(s,y.cmd)),g.forEach(e=>{f[e]=y.cmd}),!1!==o&&t.command(e,o,E,g),d[y.cmd]={original:e,description:o,handler:p,builder:a||{},middlewares:h||[],demanded:y.demanded,optional:y.optional},E&&(c=d[y.cmd])},l.addDirectory=function(e,t,r,i,o){"boolean"!=typeof(o=o||{}).recurse&&(o.recurse=!1),Array.isArray(o.extensions)||(o.extensions=["js"]);const s="function"==typeof o.visit?o.visit:e=>e;o.visit=function(e,n,r){const i=s(e,n,r);if(i){if(~t.files.indexOf(n))return i;t.files.push(n),l.addHandler(i)}return i},n(259)({require:r,filename:i},e,o)},l.parseCommand=function(e){const t=e.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,r={cmd:t.shift().replace(n,""),demanded:[],optional:[]};return t.forEach((e,i)=>{let o=!1;e=e.replace(/\s/g,""),/\.+[\]>]/.test(e)&&i===t.length-1&&(o=!0),/^\[/.test(e)?r.optional.push({cmd:e.replace(n,"").split("|"),variadic:o}):r.demanded.push({cmd:e.replace(n,"").split("|"),variadic:o})}),r},l.getCommands=()=>Object.keys(d).concat(Object.keys(f)),l.getCommandHandlers=()=>d,l.hasDefaultCommand=()=>!!c,l.runCommand=function(e,t,n,r){let i=n.aliases;const o=d[e]||d[f[e]]||c,s=t.getContext();let u=s.files.length;const p=s.commands.slice();let m=n.argv,A=null,v={};if(e&&(s.commands.push(e),s.fullCommands.push(o.original)),"function"==typeof o.builder?(A=o.builder(t.reset(n.aliases)),!1===t.parsed?(h(t)&&t.getUsageInstance().usage(g(p,o),o.description),m=A?A._parseArgs(null,null,!0,r):t._parseArgs(null,null,!0,r)):m=t.parsed.argv,i=A&&!1===t.parsed?A.parsed.aliases:t.parsed.aliases):"object"==typeof o.builder&&(A=t.reset(n.aliases),h(A)&&A.getUsageInstance().usage(g(p,o),o.description),Object.keys(o.builder).forEach(e=>{A.option(e,o.builder[e])}),m=A._parseArgs(null,null,!0,r),i=A.parsed.aliases),t._hasOutput()||(v=function(e,t,n,r){t._=t._.slice(n.commands.length);const i=e.demanded.slice(0),o=e.optional.slice(0),s={};a.positionalCount(i.length,t._.length);for(;i.length;){y(i.shift(),t,s)}for(;o.length;){y(o.shift(),t,s)}return t._=n.commands.concat(t._),E(t,s,l.cmdToParseOptions(e.original)),s}(o,m,s)),t._hasOutput()||t._runValidation(m,i,v,t.parsed.error),o.handler&&!t._hasOutput()){if(t._setHasOutput(),o.middlewares.length>0){const e=o.middlewares.reduce((function(e,t){return Object.assign(e,t(m))}),{});Object.assign(m,e)}const e=o.handler(m);e&&"function"==typeof e.then&&e.then(null,e=>t.getUsageInstance().fail(null,e))}return e&&(s.commands.pop(),s.fullCommands.pop()),u=s.files.length-u,u>0&&s.files.splice(-1*u,u),m},l.runDefaultBuilderOn=function(e){if(h(e)){const t=s.test(c.original)?c.original:c.original.replace(/^[^[\]<>]*/,"$0 ");e.getUsageInstance().usage(t,c.description)}const t=c.builder;"function"==typeof t?t(e):Object.keys(t).forEach(n=>{e.option(n,t[n])})},l.cmdToParseOptions=function(e){const t={array:[],default:{},alias:{},demand:{}},n=l.parseCommand(e);return n.demanded.forEach(e=>{const n=e.cmd.slice(0),r=n.shift();e.variadic&&(t.array.push(r),t.default[r]=[]),n.forEach(e=>{t.alias[r]=e}),t.demand[r]=!0}),n.optional.forEach(e=>{const n=e.cmd.slice(0),r=n.shift();e.variadic&&(t.array.push(r),t.default[r]=[]),n.forEach(e=>{t.alias[r]=e})}),t},l.reset=()=>(d={},f={},c=void 0,l),l.freeze=()=>{p={},p.handlers=d,p.aliasMap=f,p.defaultCommand=c},l.unfreeze=()=>{d=p.handlers,f=p.aliasMap,c=p.defaultCommand,p=void 0},l}},function(e,t,n){var r=n(256),i=n(136),o=n(10),s=n(257),a=n(37);function u(e,t){t||(t={}),e=s(e);var u=function(e){var t=[],n=!0,r={};Object.keys(e).forEach((function(n){t.push([].concat(e[n],n))}));for(;n;){n=!1;for(var i=0;i<t.length;i++)for(var o=i+1;o<t.length;o++){if(t[i].filter((function(e){return-1!==t[o].indexOf(e)})).length){t[i]=t[i].concat(t[o]),t.splice(o,1),n=!0;break}}}return t.forEach((function(e){e=e.filter((function(e,t,n){return n.indexOf(e)===t})),r[e.pop()]=e})),r}(t.alias||{}),c=function(e,t){var n={};return t=t||{},Object.keys(e).forEach((function(t){n[t]=e[t]})),Object.keys(t).forEach((function(e){n[e]=t[e]})),n}({"short-option-groups":!0,"camel-case-expansion":!0,"dot-notation":!0,"parse-numbers":!0,"boolean-negation":!0,"negation-prefix":"no-","duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"populate--":!1,"combine-arrays":!1,"set-placeholder-key":!1,"halt-at-non-option":!1},t.configuration),p=t.default||{},d=t.configObjects||[],f=t.envPrefix,h=c["populate--"],g=h?"--":"_",y={},E=t.__||function(e){return a.format.apply(a,Array.prototype.slice.call(arguments))},m=null,A={aliases:{},arrays:{},bools:{},strings:{},numbers:{},counts:{},normalize:{},configs:{},defaulted:{},nargs:{},coercions:{},keys:[]},v=/^-[0-9]+(\.[0-9]+)?/,R=new RegExp("^--"+c["negation-prefix"]+"(.+)");[].concat(t.array).filter(Boolean).forEach((function(e){var t=e.key||e;const n=Object.keys(e).map((function(e){return{boolean:"bools",string:"strings",number:"numbers"}[e]})).filter(Boolean).pop();n&&(A[n][t]=!0),A.arrays[t]=!0,A.keys.push(t)})),[].concat(t.boolean).filter(Boolean).forEach((function(e){A.bools[e]=!0,A.keys.push(e)})),[].concat(t.string).filter(Boolean).forEach((function(e){A.strings[e]=!0,A.keys.push(e)})),[].concat(t.number).filter(Boolean).forEach((function(e){A.numbers[e]=!0,A.keys.push(e)})),[].concat(t.count).filter(Boolean).forEach((function(e){A.counts[e]=!0,A.keys.push(e)})),[].concat(t.normalize).filter(Boolean).forEach((function(e){A.normalize[e]=!0,A.keys.push(e)})),Object.keys(t.narg||{}).forEach((function(e){A.nargs[e]=t.narg[e],A.keys.push(e)})),Object.keys(t.coerce||{}).forEach((function(e){A.coercions[e]=t.coerce[e],A.keys.push(e)})),Array.isArray(t.config)||"string"==typeof t.config?[].concat(t.config).filter(Boolean).forEach((function(e){A.configs[e]=!0})):Object.keys(t.config||{}).forEach((function(e){A.configs[e]=t.config[e]})),function(){Array.prototype.slice.call(arguments).forEach((function(e){Object.keys(e||{}).forEach((function(e){A.aliases[e]||(A.aliases[e]=[].concat(u[e]||[]),A.aliases[e].concat(e).forEach((function(t){if(/-/.test(t)&&c["camel-case-expansion"]){var n=r(t);n!==e&&-1===A.aliases[e].indexOf(n)&&(A.aliases[e].push(n),y[n]=!0)}})),A.aliases[e].concat(e).forEach((function(t){if(t.length>1&&/[A-Z]/.test(t)&&c["camel-case-expansion"]){var n=i(t,"-");n!==e&&-1===A.aliases[e].indexOf(n)&&(A.aliases[e].push(n),y[n]=!0)}})),A.aliases[e].forEach((function(t){A.aliases[t]=[e].concat(A.aliases[e].filter((function(e){return t!==e})))})))}))}))}(t.key,u,t.default,A.arrays),Object.keys(p).forEach((function(e){(A.aliases[e]||[]).forEach((function(t){p[t]=p[e]}))}));var b={_:[]};Object.keys(A.bools).forEach((function(e){Object.prototype.hasOwnProperty.call(p,e)&&(F(e,p[e]),function(e){[].concat(A.aliases[e]||[],e).forEach((function(e){A.defaulted[e]=!0}))}(e))}));for(var C=[],T=0;T<e.length;T++){var S,O,_,I,P,w,N=e[T];if(N.match(/^--.+=/)||!c["short-option-groups"]&&N.match(/^-.+=/))W((I=N.match(/^--?([^=]+)=([\s\S]*)$/))[1],A.nargs)?(e.splice(T+1,0,I[2]),T=D(T,I[1],e)):W(I[1],A.arrays)&&e.length>T+1?(e.splice(T+1,0,I[2]),T=x(T,I[1],e)):F(I[1],I[2]);else if(N.match(R)&&c["boolean-negation"])F(O=N.match(R)[1],!1);else if(N.match(/^--.+/)||!c["short-option-groups"]&&N.match(/^-.+/))W(O=N.match(/^--?(.+)/)[1],A.nargs)?T=D(T,O,e):W(O,A.arrays)&&e.length>T+1?T=x(T,O,e):void 0===(P=e[T+1])||P.match(/^-/)&&!P.match(v)||W(O,A.bools)||W(O,A.counts)?/^(true|false)$/.test(P)?(F(O,P),T++):F(O,V(Y(O,A))):(F(O,P),T++);else if(N.match(/^-.\..+=/))F((I=N.match(/^-([^=]+)=([\s\S]*)$/))[1],I[2]);else if(N.match(/^-.\..+/))P=e[T+1],O=N.match(/^-(.\..+)/)[1],void 0===P||P.match(/^-/)||W(O,A.bools)||W(O,A.counts)?F(O,V(Y(O,A))):(F(O,P),T++);else if(N.match(/^-[^-]+/)&&!N.match(v)){_=N.slice(1,-1).split(""),S=!1;for(var L=0;L<_.length;L++){if(P=N.slice(L+2),_[L+1]&&"="===_[L+1]){w=N.slice(L+3),W(O=_[L],A.nargs)?(e.splice(T+1,0,w),T=D(T,O,e)):W(O,A.arrays)&&e.length>T+1?(e.splice(T+1,0,w),T=x(T,O,e)):F(O,w),S=!0;break}if("-"!==P){if(/[A-Za-z]/.test(_[L])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(P)){F(_[L],P),S=!0;break}if(_[L+1]&&_[L+1].match(/\W/)){F(_[L],P),S=!0;break}F(_[L],V(Y(_[L],A)))}else F(_[L],P)}O=N.slice(-1)[0],S||"-"===O||(W(O,A.nargs)?T=D(T,O,e):W(O,A.arrays)&&e.length>T+1?T=x(T,O,e):void 0===(P=e[T+1])||/^(-|--)[^-]/.test(P)&&!P.match(v)||W(O,A.bools)||W(O,A.counts)?/^(true|false)$/.test(P)?(F(O,P),T++):F(O,V(Y(O,A))):(F(O,P),T++))}else{if("--"===N){C=e.slice(T+1);break}if(c["halt-at-non-option"]){C=e.slice(T);break}b._.push(B("_",N))}}function D(e,t,n){var r;const i=W(t,A.nargs);var o=0;for(r=e+1;r<n.length&&!n[r].match(/^-[^0-9]/);r++)o++;o<i&&(m=Error(E("Not enough arguments following: %s",t)));const s=Math.min(o,i);for(r=e+1;r<s+e+1;r++)F(t,n[r]);return e+s}function x(e,t,n){for(var r=e+1,i=[],o=e>0,s=e+1;s<n.length;s++){if(/^-/.test(n[s])&&!v.test(n[s])){s===r&&F(t,V("array")),o=!0;break}e=s,i.push(n[s])}return o?F(t,i.map((function(e){return M(t,e)}))):i.forEach((function(e){F(t,e)})),e}function F(e,t){if(function(e){[].concat(A.aliases[e]||[],e).forEach((function(e){delete A.defaulted[e]}))}(e),/-/.test(e)&&c["camel-case-expansion"]){var n=e.split(".").map((function(e){return r(e)})).join(".");!function e(t,n){A.aliases[t]&&A.aliases[t].length||(A.aliases[t]=[n],y[n]=!0);A.aliases[n]&&A.aliases[n].length||e(n,t)}(e,n)}var i=M(e,t),s=e.split(".");(H(b,s,i),A.aliases[e]&&A.aliases[e].forEach((function(e){e=e.split("."),H(b,e,i)})),s.length>1&&c["dot-notation"]&&(A.aliases[s[0]]||[]).forEach((function(e){e=e.split(".");var t=[].concat(s);t.shift(),e=e.concat(t),H(b,e,i)})),W(e,A.normalize)&&!W(e,A.arrays))&&[e].concat(A.aliases[e]||[]).forEach((function(e){b.__defineSetter__(e,(function(e){t=o.normalize(e)})),b.__defineGetter__(e,(function(){return"string"==typeof t?o.normalize(t):t}))}))}function M(e,t){(W(e,A.bools)||W(e,A.counts))&&"string"==typeof t&&(t="true"===t);var n=B(e,t);return W(e,A.counts)&&($(n)||"boolean"==typeof n)&&(n=l),W(e,A.normalize)&&W(e,A.arrays)&&(n=Array.isArray(t)?t.map(o.normalize):o.normalize(t)),n}function B(e,t){if(!W(e,A.strings)&&!W(e,A.coercions)){(("number"==typeof(n=t)||!!/^0x[0-9a-f]+$/i.test(n)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(n))&&c["parse-numbers"]&&Number.isSafeInteger(Math.floor(t))||!$(t)&&W(e,A.numbers))&&(t=Number(t))}var n;return t}function U(e,t){Object.keys(e).forEach((function(n){var r=e[n],i=t?t+"."+n:n;"object"==typeof r&&null!==r&&!Array.isArray(r)&&c["dot-notation"]?U(r,i):(!G(b,i.split("."))||A.defaulted[i]||A.arrays[i]&&c["combine-arrays"])&&F(i,r)}))}function k(e,t){if(void 0!==f){var n="string"==typeof f?f:"";Object.keys(process.env).forEach((function(i){if(""===n||0===i.lastIndexOf(n,0)){var o=i.split("__").map((function(e,t){return 0===t&&(e=e.substring(n.length)),r(e)}));!(t&&A.configs[o.join(".")]||!t)||G(e,o)&&!A.defaulted[o.join(".")]||F(o.join("."),process.env[i])}}))}}function j(e,t,n){Object.keys(n).forEach((function(r){G(e,r.split("."))||(H(e,r.split("."),n[r]),(t[r]||[]).forEach((function(t){G(e,t.split("."))||H(e,t.split("."),n[r])})))}))}function G(e,t){var n=e;c["dot-notation"]||(t=[t.join(".")]),t.slice(0,-1).forEach((function(e){n=n[e]||{}}));var r=t[t.length-1];return"object"==typeof n&&r in n}function H(e,t,n){var r=e;c["dot-notation"]||(t=[t.join(".")]),t.slice(0,-1).forEach((function(e,t){"object"==typeof r&&void 0===r[e]&&(r[e]={}),"object"!=typeof r[e]||Array.isArray(r[e])?(Array.isArray(r[e])?r[e].push({}):r[e]=[r[e],{}],r=r[e][r[e].length-1]):r=r[e]}));var i=t[t.length-1],o=W(t.join("."),A.arrays),s=Array.isArray(n),a=c["duplicate-arguments-array"];n===l?r[i]=l(r[i]):Array.isArray(r[i])?a&&o&&s?r[i]=c["flatten-duplicate-arrays"]?r[i].concat(n):(Array.isArray(r[i][0])?r[i]:[r[i]]).concat([n]):a||Boolean(o)!==Boolean(s)?r[i]=r[i].concat([n]):r[i]=n:void 0===r[i]&&o?r[i]=s?n:[n]:a&&!(void 0===r[i]||W(i,A.bools)||W(t.join("."),A.bools)||W(i,A.counts))?r[i]=[r[i],n]:r[i]=n}function W(e,t){var n=!1;return[].concat(A.aliases[e]||[],e).forEach((function(e){t[e]&&(n=t[e])})),n}function V(e){return{boolean:!0,string:"",number:void 0,array:[]}[e]}function Y(e,t){var n="boolean";return W(e,t.strings)?n="string":W(e,t.numbers)?n="number":W(e,t.arrays)&&(n="array"),n}function $(e){return void 0===e}return k(b,!0),k(b,!1),function(e){var t={};j(t,A.aliases,p),Object.keys(A.configs).forEach((function(r){var i=e[r]||t[r];if(i)try{var s=null,a=o.resolve(process.cwd(),i);if("function"==typeof A.configs[r]){try{s=A.configs[r](a)}catch(e){s=e}if(s instanceof Error)return void(m=s)}else s=n(258)(a);U(s)}catch(t){e[r]&&(m=Error(E("Invalid JSON config file: %s",i)))}}))}(b),function(){if(void 0===d)return;d.forEach((function(e){U(e)}))}(),j(b,A.aliases,p),function(e){var t,n={};Object.keys(e).forEach((function(r){if(!n.hasOwnProperty(r)&&"function"==typeof(t=W(r,A.coercions)))try{var i=t(e[r]);[].concat(A.aliases[r]||[],r).forEach(t=>{n[t]=e[t]=i})}catch(e){m=e}}))}(b),c["set-placeholder-key"]&&function(e){A.keys.forEach(t=>{~t.indexOf(".")||void 0===e[t]&&(e[t]=void 0)})}(b),Object.keys(A.counts).forEach((function(e){G(b,e.split("."))||F(e,0)})),h&&C.length&&(b[g]=[]),C.forEach((function(e){b[g].push(e)})),{argv:b,error:m,aliases:A.aliases,newAliases:y,configuration:c}}function l(e){return void 0!==e?e+1:1}function c(e,t){return u(e.slice(),t).argv}c.detailed=function(e,t){return u(e.slice(),t)},e.exports=c},function(e,t,n){"use strict";e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");return t=void 0===t?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}},function(e,t,n){"use strict";const r=n(138),i=n(264);e.exports=e=>{if("string"!=typeof e||0===e.length)return 0;e=r(e);let t=0;for(let n=0;n<e.length;n++){const r=e.codePointAt(n);r<=31||r>=127&&r<=159||(r>=768&&r<=879||(r>65535&&n++,t+=i(r)?2:1))}return t}},function(e,t,n){"use strict";const r=n(263);e.exports=e=>"string"==typeof e?e.replace(r(),""):e},function(e,t){e.exports=function(e){[process.stdout,process.stderr].forEach((function(t){t._handle&&t.isTTY&&"function"==typeof t._handle.setBlocking&&t._handle.setBlocking(e)}))}},function(e,t,n){"use strict";var r=n(268)();e.exports=function(e){return"string"==typeof e?e.replace(r,""):e}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=141},function(e,t,n){"use strict";e.exports=e=>{const t=(e=e||{}).env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).find(e=>"PATH"===e.toUpperCase())||"Path"}},function(e,t,n){var r=n(307);function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=r(i),e.exports.strict=r(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},function(e,t){e.exports=require("stream")},function(e,t,n){var r=n(324),i=n(330);e.exports=function(e,t,n){return i(r(e,t,n),t)}},function(e,t){var n={tr:{regexp:/[\u0069]/g,map:{i:"İ"}},az:{regexp:/[\u0069]/g,map:{i:"İ"}},lt:{regexp:/[\u0069\u006A\u012F]\u0307|\u0069\u0307[\u0300\u0301\u0303]/g,map:{"i̇":"I","j̇":"J","į̇":"Į","i̇̀":"Ì","i̇́":"Í","i̇̃":"Ĩ"}}};e.exports=function(e,t){var r=n[t];return e=null==e?"":String(e),r&&(e=e.replace(r.regexp,(function(e){return r.map[e]}))),e.toUpperCase()}},function(e,t,n){"use strict";const r=n(72),i={exec(e,t){r.exec(e,{maxBuffer:2097152,windowsHide:!0},t)},spawn:(e,t,n)=>r.spawn(e,t,n),stripLine(e,t){let n=0;for(;t-- >0;){const t=e.indexOf("\n",n);t>=0&&(n=t+1)}return n>0?e.substring(n):e},split(e,t){const n=e.trim().split(/\s+/);return n.length>t&&(n[t-1]=n.slice(t-1).join(" ")),n},extractColumns(e,t,n){const r=e.split(/(\r\n|\n|\r)/),o=[];return n||(n=Math.max.apply(null,t)+1),r.forEach(e=>{const r=i.split(e,n),s=[];t.forEach(e=>{s.push(r[e]||"")}),o.push(s)}),o},parseTable(e){const t=e.split(/(\r\n\r\n|\r\n\n|\n\r\n)|\n\n/).filter(e=>e.trim().length>0).map(e=>e.split(/(\r\n|\n|\r)/).filter(e=>e.trim().length>0));return t.forEach(e=>{for(let t=0;e[t];){const n=e[t];n.startsWith(" ")?(e[t-1]+=n.trimLeft(),e.splice(t,1)):t+=1}}),t.map(e=>{const t={};return e.forEach(e=>{const n=e.indexOf(":"),r=e.slice(0,n).trim();t[r]=e.slice(n+1).trim()}),t})}};e.exports=i},function(e,t,n){"use strict";const r=n(64),i=n(34),o=n(342),s=n(149),a=n(150),u=n(343),l=n(344),c=n(73),p=n(349),d=n(152),f=n(153),h=n(155),{BINARY_TYPES:g,EMPTY_BUFFER:y,GUID:E,kStatusCode:m,kWebSocket:A,NOOP:v}=n(57),R=["CONNECTING","OPEN","CLOSING","CLOSED"],b=[8,13];class C extends r{constructor(e,t,n){super(),this.readyState=C.CONNECTING,this.protocol="",this._binaryType=g[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(n=t,t=void 0),function e(t,n,r,a){const u=Object.assign({protocolVersion:b[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10},a,{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0});if(!b.includes(u.protocolVersion))throw new RangeError(`Unsupported protocol version: ${u.protocolVersion} (supported versions: ${b.join(", ")})`);var p;"object"==typeof n&&void 0!==n.href?(p=n,t.url=n.href):(p=l.URL?new l.URL(n):l.parse(n),t.url=n);const f="ws+unix:"===p.protocol;if(!(p.host||f&&p.pathname))throw new Error("Invalid URL: "+t.url);const h="wss:"===p.protocol||"https:"===p.protocol,g=h?443:80,y=i.randomBytes(16).toString("base64"),m=h?o.get:s.get,A=p.search?`${p.pathname||"/"}${p.search}`:p.pathname||"/";var v;u.createConnection=h?S:T,u.defaultPort=u.defaultPort||g,u.port=p.port||g,u.host=p.hostname.startsWith("[")?p.hostname.slice(1,-1):p.hostname,u.headers=Object.assign({"Sec-WebSocket-Version":u.protocolVersion,"Sec-WebSocket-Key":y,Connection:"Upgrade",Upgrade:"websocket"},u.headers),u.path=A,u.timeout=u.handshakeTimeout,u.perMessageDeflate&&(v=new c(!0!==u.perMessageDeflate?u.perMessageDeflate:{},!1,u.maxPayload),u.headers["Sec-WebSocket-Extensions"]=d.format({[c.extensionName]:v.offer()}));r&&(u.headers["Sec-WebSocket-Protocol"]=r);u.origin&&(u.protocolVersion<13?u.headers["Sec-WebSocket-Origin"]=u.origin:u.headers.Origin=u.origin);p.auth?u.auth=p.auth:(p.username||p.password)&&(u.auth=`${p.username}:${p.password}`);if(f){const e=A.split(":");u.socketPath=e[0],u.path=e[1]}var R=t._req=m(u);u.timeout&&R.on("timeout",()=>{O(t,R,"Opening handshake has timed out")});R.on("error",e=>{t._req.aborted||(R=t._req=null,t.readyState=C.CLOSING,t.emit("error",e),t.emitClose())}),R.on("response",i=>{const o=i.headers.location,s=i.statusCode;if(o&&u.followRedirects&&s>=300&&s<400){if(++t._redirects>u.maxRedirects)return void O(t,R,"Maximum redirects exceeded");R.abort();const i=l.URL?new l.URL(o,n):l.resolve(n,o);e(t,i,r,a)}else t.emit("unexpected-response",R,i)||O(t,R,"Unexpected server response: "+i.statusCode)}),R.on("upgrade",(e,n,o)=>{if(t.emit("upgrade",e),t.readyState!==C.CONNECTING)return;R=t._req=null;const s=i.createHash("sha1").update(y+E).digest("base64");if(e.headers["sec-websocket-accept"]!==s)return void O(t,n,"Invalid Sec-WebSocket-Accept header");const a=e.headers["sec-websocket-protocol"],l=(r||"").split(/, */);var p;if(!r&&a?p="Server sent a subprotocol but none was requested":r&&!a?p="Server sent no subprotocol":a&&!l.includes(a)&&(p="Server sent an invalid subprotocol"),p)O(t,n,p);else{if(a&&(t.protocol=a),v)try{const n=d.parse(e.headers["sec-websocket-extensions"]);n[c.extensionName]&&(v.accept(n[c.extensionName]),t._extensions[c.extensionName]=v)}catch(e){return void O(t,n,"Invalid Sec-WebSocket-Extensions header")}t.setSocket(n,o,u.maxPayload)}})}(this,e,t,n)):this._isServer=!0}get CONNECTING(){return C.CONNECTING}get CLOSING(){return C.CLOSING}get CLOSED(){return C.CLOSED}get OPEN(){return C.OPEN}get binaryType(){return this._binaryType}set binaryType(e){g.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:0}get extensions(){return Object.keys(this._extensions).join()}setSocket(e,t,n){const r=new f(this._binaryType,this._extensions,n);this._sender=new h(e,this._extensions),this._receiver=r,this._socket=e,r[A]=this,e[A]=this,r.on("conclude",_),r.on("drain",I),r.on("error",P),r.on("message",N),r.on("ping",L),r.on("pong",D),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",x),e.on("data",F),e.on("end",M),e.on("error",B),this.readyState=C.OPEN,this.emit("open")}emitClose(){this.readyState=C.CLOSED,this._socket?(this._extensions[c.extensionName]&&this._extensions[c.extensionName].cleanup(),this._receiver.removeAllListeners(),this.emit("close",this._closeCode,this._closeMessage)):this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==C.CLOSED){if(this.readyState===C.CONNECTING){const e="WebSocket was closed before the connection was established";return O(this,this._req,e)}this.readyState!==C.CLOSING?(this.readyState=C.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._closeFrameReceived&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,n){if("function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),this.readyState!==C.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} (${R[this.readyState]})`);if(n)return n(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.ping(e||y,t,n)}pong(e,t,n){if("function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),this.readyState!==C.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} (${R[this.readyState]})`);if(n)return n(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.pong(e||y,t,n)}send(e,t,n){if("function"==typeof t&&(n=t,t={}),this.readyState!==C.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} (${R[this.readyState]})`);if(n)return n(e);throw e}"number"==typeof e&&(e=e.toString());const r=Object.assign({binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[c.extensionName]||(r.compress=!1),this._sender.send(e||y,r,n)}terminate(){if(this.readyState!==C.CLOSED){if(this.readyState===C.CONNECTING){const e="WebSocket was closed before the connection was established";return O(this,this._req,e)}this._socket&&(this.readyState=C.CLOSING,this._socket.destroy())}}}function T(e){return e.protocolVersion&&(e.path=e.socketPath),a.connect(e)}function S(e){return e.path=void 0,e.servername=e.servername||e.host,u.connect(e)}function O(e,t,n){e.readyState=C.CLOSING;const r=new Error(n);Error.captureStackTrace(r,O),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",r)):(t.destroy(r),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function _(e,t){const n=this[A];n._socket.removeListener("data",F),n._socket.resume(),n._closeFrameReceived=!0,n._closeMessage=t,n._closeCode=e,1005===e?n.close():n.close(e,t)}function I(){this[A]._socket.resume()}function P(e){const t=this[A];t._socket.removeListener("data",F),t.readyState=C.CLOSING,t._closeCode=e[m],t.emit("error",e),t._socket.destroy()}function w(){this[A].emitClose()}function N(e){this[A].emit("message",e)}function L(e){const t=this[A];t.pong(e,!t._isServer,v),t.emit("ping",e)}function D(e){this[A].emit("pong",e)}function x(){const e=this[A];this.removeListener("close",x),this.removeListener("end",M),e.readyState=C.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",F),this[A]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",w),e._receiver.on("finish",w))}function F(e){this[A]._receiver.write(e)||this.pause()}function M(){const e=this[A];e.readyState=C.CLOSING,e._receiver.end(),this.end()}function B(){const e=this[A];this.removeListener("error",B),this.on("error",v),e.readyState=C.CLOSING,this.destroy()}R.forEach((e,t)=>{C[e]=t}),["open","error","close","message"].forEach(e=>{Object.defineProperty(C.prototype,"on"+e,{get(){const t=this.listeners(e);for(var n=0;n<t.length;n++)if(t[n]._listener)return t[n]._listener},set(t){const n=this.listeners(e);for(var r=0;r<n.length;r++)n[r]._listener&&this.removeListener(e,n[r]);this.addEventListener(e,t)}})}),C.prototype.addEventListener=p.addEventListener,C.prototype.removeEventListener=p.removeEventListener,e.exports=C},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("net")},function(e,t,n){var r=n(17),i=n(10),o=n(70),s=require,a=process.config&&process.config.variables||{},u=!!process.env.PREBUILDS_ONLY,l=process.versions.modules,c=!(!process.versions||!process.versions.electron)||!!process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":process.versions&&process.versions.nw?"node-webkit":"node",p=process.env.npm_config_arch||o.arch(),d=process.env.npm_config_platform||o.platform(),f=process.env.LIBC||(function(e){return"linux"===e&&r.existsSync("/etc/alpine-release")}(d)?"musl":"glibc"),h=process.env.ARM_VERSION||("arm64"===p?"8":a.arm_version)||"",g=(process.versions.uv||"").split(".")[0];function y(e){return s(y.path(e))}function E(e){try{return r.readdirSync(e)}catch(e){return[]}}function m(e,t){var n=E(e).filter(t);return n[0]&&i.join(e,n[0])}function A(e){return/\.node$/.test(e)}function v(e){var t=e.split("-");if(2===t.length){var n=t[0],r=t[1].split("+");if(n&&r.length&&r.every(Boolean))return{name:e,platform:n,architectures:r}}}function R(e,t){return function(n){return null!=n&&(n.platform===e&&n.architectures.includes(t))}}function b(e,t){return e.architectures.length-t.architectures.length}function C(e){var t=e.split("."),n={file:e,specificity:0};if("node"===t.pop()){for(var r=0;r<t.length;r++){var i=t[r];if("node"===i||"electron"===i||"node-webkit"===i)n.runtime=i;else if("napi"===i)n.napi=!0;else if("abi"===i.slice(0,3))n.abi=i.slice(3);else if("uv"===i.slice(0,2))n.uv=i.slice(2);else if("armv"===i.slice(0,4))n.armv=i.slice(4);else{if("glibc"!==i&&"musl"!==i)continue;n.libc=i}n.specificity++}return n}}function T(e,t){return function(n){return null!=n&&(!(n.runtime!==e&&!function(e){return"node"===e.runtime&&e.napi}(n))&&(!(n.abi!==t&&!n.napi)&&((!n.uv||n.uv===g)&&((!n.armv||n.armv===h)&&(!n.libc||n.libc===f)))))}}function S(e){return function(t,n){return t.runtime!==n.runtime?t.runtime===e?-1:1:t.abi!==n.abi?t.abi?-1:1:t.specificity!==n.specificity?t.specificity>n.specificity?-1:1:0}}e.exports=y,y.path=function(e){e=i.resolve(e||".");try{var t=s(i.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}if(!u){var n=m(i.join(e,"build/Release"),A);if(n)return n;var r=m(i.join(e,"build/Debug"),A);if(r)return r}var o=O(e);if(o)return o;var a=O(i.dirname(process.execPath));if(a)return a;var y=["platform="+d,"arch="+p,"runtime="+c,"abi="+l,"uv="+g,h?"armv="+h:"","libc="+f,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ");throw new Error("No native build was found for "+y+"\n    loaded from: "+e+"\n");function O(e){var t=E(i.join(e,"prebuilds")).map(v).filter(R(d,p)).sort(b)[0];if(t){var n=i.join(e,"prebuilds",t.name),r=E(n).map(C).filter(T(c,l)).sort(S(c))[0];return r?i.join(n,r.file):void 0}}},y.parseTags=C,y.matchTags=T,y.compareTags=S,y.parseTuple=v,y.matchTuple=R,y.compareTuples=b},function(e,t,n){"use strict";const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function i(e,t,n){Object.prototype.hasOwnProperty.call(e,t)?e[t].push(n):e[t]=[n]}e.exports={format:function(e){return Object.keys(e).map(t=>{var n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>[t].concat(Object.keys(e).map(t=>{var n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){const t={};if(void 0===e||""===e)return t;for(var n,o,s={},a=!1,u=!1,l=!1,c=-1,p=-1,d=0;d<e.length;d++){const h=e.charCodeAt(d);if(void 0===n)if(-1===p&&1===r[h])-1===c&&(c=d);else if(32===h||9===h)-1===p&&-1!==c&&(p=d);else{if(59!==h&&44!==h)throw new SyntaxError("Unexpected character at index "+d);{if(-1===c)throw new SyntaxError("Unexpected character at index "+d);-1===p&&(p=d);const r=e.slice(c,p);44===h?(i(t,r,s),s={}):n=r,c=p=-1}}else if(void 0===o)if(-1===p&&1===r[h])-1===c&&(c=d);else if(32===h||9===h)-1===p&&-1!==c&&(p=d);else if(59===h||44===h){if(-1===c)throw new SyntaxError("Unexpected character at index "+d);-1===p&&(p=d),i(s,e.slice(c,p),!0),44===h&&(i(t,n,s),s={},n=void 0),c=p=-1}else{if(61!==h||-1===c||-1!==p)throw new SyntaxError("Unexpected character at index "+d);o=e.slice(c,d),c=p=-1}else if(u){if(1!==r[h])throw new SyntaxError("Unexpected character at index "+d);-1===c?c=d:a||(a=!0),u=!1}else if(l)if(1===r[h])-1===c&&(c=d);else if(34===h&&-1!==c)l=!1,p=d;else{if(92!==h)throw new SyntaxError("Unexpected character at index "+d);u=!0}else if(34===h&&61===e.charCodeAt(d-1))l=!0;else if(-1===p&&1===r[h])-1===c&&(c=d);else if(-1===c||32!==h&&9!==h){if(59!==h&&44!==h)throw new SyntaxError("Unexpected character at index "+d);if(-1===c)throw new SyntaxError("Unexpected character at index "+d);-1===p&&(p=d);var f=e.slice(c,p);a&&(f=f.replace(/\\/g,""),a=!1),i(s,o,f),44===h&&(i(t,n,s),s={},n=void 0),o=void 0,c=p=-1}else-1===p&&(p=d)}if(-1===c||l)throw new SyntaxError("Unexpected end of input");-1===p&&(p=d);const h=e.slice(c,p);return void 0===n?i(t,h,{}):(void 0===o?i(s,h,!0):i(s,o,a?h.replace(/\\/g,""):h),i(t,n,s)),t}}},function(e,t,n){"use strict";const{Writable:r}=n(144),i=n(73),{BINARY_TYPES:o,EMPTY_BUFFER:s,kStatusCode:a,kWebSocket:u}=n(57),{concat:l,toArrayBuffer:c,unmask:p}=n(91),{isValidStatusCode:d,isValidUTF8:f}=n(154);function h(e,t,n,r){const i=new e(n?"Invalid WebSocket frame: "+t:t);return Error.captureStackTrace(i,h),i[a]=r,i}e.exports=class extends r{constructor(e,t,n){super(),this._binaryType=e||o[0],this[u]=void 0,this._extensions=t||{},this._maxPayload=0|n,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,n){if(8===this._opcode&&0==this._state)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const n=this._buffers[0];e>=n.length?this._buffers.shift().copy(t,t.length-e):(n.copy(t,t.length-e,0,e),this._buffers[0]=n.slice(e)),e-=n.length}while(e>0);return t}startLoop(e){var t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,h(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[i.extensionName])return this._loop=!1,h(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,h(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,h(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,h(RangeError,"invalid opcode "+this._opcode,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,h(RangeError,"invalid opcode "+this._opcode,!0,1002);if(!this._fin)return this._loop=!1,h(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,h(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,h(RangeError,"invalid payload length "+this._payloadLength,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,h(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,h(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){var t=s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&p(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[i.extensionName].decompress(e,this._fin,(e,n)=>{if(e)return t(e);if(n.length){if(this._messageLength+=n.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(h(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(n)}const r=this.dataMessage();if(r)return t(r);this.startLoop(t)})}dataMessage(){if(this._fin){const t=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){var e;e="nodebuffer"===this._binaryType?l(n,t):"arraybuffer"===this._binaryType?c(l(n,t)):n,this.emit("message",e)}else{const e=l(n,t);if(!f(e))return this._loop=!1,h(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",e.toString())}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return h(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!d(t))return h(RangeError,"invalid status code "+t,!0,1002);const n=e.slice(2);if(!f(n))return h(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,n.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},function(e,t,n){"use strict";try{const e=n(350);t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=()=>!0}t.isValidStatusCode=e=>e>=1e3&&e<=1013&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},function(e,t,n){"use strict";const{randomBytes:r}=n(34),i=n(73),{EMPTY_BUFFER:o}=n(57),{isValidStatusCode:s}=n(154),{mask:a,toBuffer:u}=n(91);class l{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const n=t.mask&&t.readOnly;var i=t.mask?6:2,o=e.length;e.length>=65536?(i+=8,o=127):e.length>125&&(i+=2,o=126);const s=Buffer.allocUnsafe(n?e.length+i:i);if(s[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(s[0]|=64),s[1]=o,126===o?s.writeUInt16BE(e.length,2):127===o&&(s.writeUInt32BE(0,2),s.writeUInt32BE(e.length,6)),!t.mask)return[s,e];const u=r(4);return s[1]|=128,s[i-4]=u[0],s[i-3]=u[1],s[i-2]=u[2],s[i-1]=u[3],n?(a(e,u,s,i,e.length),[s]):(a(e,u,e,0,e.length),[s,e])}close(e,t,n,r){var i;if(void 0===e)i=o;else{if("number"!=typeof e||!s(e))throw new TypeError("First argument must be a valid error code number");void 0===t||""===t?(i=Buffer.allocUnsafe(2)).writeUInt16BE(e,0):((i=Buffer.allocUnsafe(2+Buffer.byteLength(t))).writeUInt16BE(e,0),i.write(t,2))}this._deflating?this.enqueue([this.doClose,i,n,r]):this.doClose(i,n,r)}doClose(e,t,n){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),n)}ping(e,t,n){const r=u(e);this._deflating?this.enqueue([this.doPing,r,t,u.readOnly,n]):this.doPing(r,t,u.readOnly,n)}doPing(e,t,n,r){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:n}),r)}pong(e,t,n){const r=u(e);this._deflating?this.enqueue([this.doPong,r,t,u.readOnly,n]):this.doPong(r,t,u.readOnly,n)}doPong(e,t,n,r){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:n}),r)}send(e,t,n){const r=u(e),o=this._extensions[i.extensionName];var s=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&o&&(a=r.length>=o._threshold),this._compress=a):(a=!1,s=0),t.fin&&(this._firstFragment=!0),o){const e={fin:t.fin,rsv1:a,opcode:s,mask:t.mask,readOnly:u.readOnly};this._deflating?this.enqueue([this.dispatch,r,this._compress,e,n]):this.dispatch(r,this._compress,e,n)}else this.sendFrame(l.frame(r,{fin:t.fin,rsv1:!1,opcode:s,mask:t.mask,readOnly:u.readOnly}),n)}dispatch(e,t,n,r){if(!t)return void this.sendFrame(l.frame(e,n),r);const o=this._extensions[i.extensionName];this._deflating=!0,o.compress(e,n.fin,(e,t)=>{this._deflating=!1,n.readOnly=!1,this.sendFrame(l.frame(t,n),r),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,e[0].apply(this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=l},function(e,t,n){var r,i;!function(o){"use strict";void 0===(i="function"==typeof(r=function(){var e=Object.prototype.toString;return function(){for(var e=new Array(arguments.length),i=0;i<e.length;++i)e[i]=arguments[i];var s=t(e),a=n(e),u=r(e);function l(e,t){o(this,u),o(this,t),this.message=e||this.message,e instanceof Error?(this.message=e.message,this.stack=e.stack):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}function c(){this.constructor=l}return c.prototype=a.prototype,l.prototype=new c,l.prototype.name=""+s||"CustomError",l};function t(e){return 0===e.length?"":i(e[0])?e[1]||"":e[0]}function n(e){return 0===e.length?Error:i(e[0])?e[0]:Error}function r(e){return 0===e.length?null:i(e[0])?e[2]:e[1]}function i(e){return"function"==typeof e}function o(t,n){if((a=n)&&"object"==typeof a&&"[object Object]"===e.call(a))for(var r=function(e){var t=[];for(var n in e)t.push(n);return t}(n),i=0,o=r.length;i<o;++i)t[r[i]]=s(n[r[i]]);var a}function s(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor?e.constructor():Object.create(null);for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}})?r.call(t,n,t,e):r)||(e.exports=i)}()},function(e,t,n){"undefined"!=typeof process&&"renderer"===process.type?e.exports=n(356):e.exports=n(358)},function(e,t,n){var r;function i(e){function n(){if(n.enabled){var e=n,i=+new Date,o=i-(r||i);e.diff=o,e.prev=r,e.curr=i,r=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;u++;var i=t.formatters[r];if("function"==typeof i){var o=s[u];n=i.call(e,o),s.splice(u,1),u--}return n})),t.formatArgs.call(e,s);var l=n.log||t.log||console.log.bind(console);l.apply(e,s)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(357),t.names=[],t.skips=[],t.formatters={}},function(e,t,n){"use strict";e.exports={1:[],4:[1,16,17,18,3665,3674],5:[],6:[],7:[1,16,17,18,3661,3665,3674],8:[1,3671,3673],9:[1,16,17,18,42,2081,2082,3661,3665,3674],10:[1,16,17,18,2162,2244,3665,3674,3686],11:[],12:[1,16,17,18,3665,3674],13:[1,16,17,18,3665,3674],14:[1,16,17,18,3665,3674],15:[1,16,17,18,3665,3674],16:[1,16,17,18,3665,3674],17:[1,16,17,18,3665,3674],18:[1,524,1450,1516,3659,3660,3663,3664,3671,3679,3690],19:[556,3659,3660],20:[3659,3660],21:[1,421,422,560,561,562,563,3659,3660,3671,3673,3679,3682,3683],22:[650,651,655,3659,3660,3671,3697,3698],23:[1,3659,3660,3665,3674],24:[1,32,3659,3660,3664,3665,3668,3673,3674,3675],25:[3659,3660],26:[710,820,3659,3660,3671],27:[1,454,455,591,594,595,596,597,614,3659,3660,3671,3673,3679,3682,3683],28:[1,487,488,620,621,622,623,624,626,3659,3660,3671,3673,3679,3682,3683],29:[3659,3660,3671,3699,3700,3701],30:[1532,3659,3660,3671],31:[1,3665,3674],32:[1,390,3665,3674],33:[1,16,17,18,388,3665,3674],34:[1,16,17,18,405,3665,3674],35:[1,16,17,18,403,3665,3674],36:[1,16,17,18,3663,3664,3665,3678],37:[730,731,732,3659,3671],38:[3659],39:[761,764,768,766,3659,3671],40:[3659],41:[790,793,806,799,803,804,805,3659,3671],42:[3659],43:[1,16,17,18,454,3665,3678,3682,3683],44:[1,16,17,18,487,488,3665,3678,3682,3683],45:[1,16,17,18,318,319,320,321,322,323,324,326,327,328,329,331,333,3660,3665,3666,3667,3674,3684,3685],46:[1,16,17,18,421,422,3665,3678,3682,3683],47:[558],48:[1,16,17,18,3665,3674,3675],49:[1,16,17,18,2588,3665,3674],50:[1,16,17,18,1622,1628,2714,3659,3665,3674,3676,3677,3688,3689],51:[1,16,17,18,3665,3674,3675],52:[1,16,17,18,2362,3665,3674],53:[1,16,17,18,1998,3665,3674],54:[1,16,17,18,386,2116,3665,3668,3669,3674],55:[1,16,17,18,3665,3674,3676,3677],56:[1,16,17,18,144,169,1764,3665,3674],57:[1,16,17,18,401,2358,3665,3674],58:[],59:[1,261,1006,110,3659,3671,3690,3755],60:[3659],61:[3659],62:[1,916,917,919,920,921,922,1518,3659,3671,3673],63:[3659,3671,3694,3695,3696],64:[44,46,3659,3671],65:[1592,1593,1594,3659,3671],66:[1,3659,3665,3674],67:[1,946,948,950,954,955,3659,3671,3673],68:[1126,3659,3671],69:[2720,3659,3671],70:[1093,1094,1097,3659,3671],71:[1,976,977,978,979,994,3659,3671,3673],72:[1568,3659,3671,3692,3693],73:[1,16,17,18,1819,3665,3673,3674],74:[1,16,17,18,3665,3673,3674,3687],75:[1,16,17,18,140,1036,3665,3673,3674],76:[1,16,17,18,3665,3673,3674,3687],77:[1,16,17,18,76,146,148,150,152,154,156,158,160,162,164,1526,2114,2389,2391,3665,3673,367],78:[1,16,17,18,173,3659,3665,3674],79:[1,16,17,18,1042,3665,3671,3674],80:[1,16,17,18,2393,3665,3674],81:[1,16,17,18,1528,3665,3668,3669,3674],82:[1,16,17,18,3665,3674],83:[1,16,17,18,2328,3665,3674],84:[1,16,17,18,880,881,882,883,884,885,886,887,895,889,890,891,892,893,894,3665,3666,3667,3674,3684],85:[1,16,17,18,3665,3674],86:[1,1216,1223,1225,1632,3659,3671,3673,3690],87:[3659],88:[3659],89:[1252,1253,3659,3671],90:[3659,3671,3704,3705,3706],91:[1282,1283,2112,3659,3671],92:[1220,3659,3671,3702,3703],93:[265,3659,3671],94:[1454,1455,3659,3671],95:[1,1768,3659,3664,3665,3668,3673],96:[1482,3659,3671],97:[216,217,3659,3671],98:[1,3659,3665,3674,3681],99:[1,3659,3665,3674,3681],100:[1,1218,1223,1225,1632,3659,3671,3673,3690],101:[1,1223,1225,1632,3671,3673,3690],102:[3671,3702,3703],103:[1,3671,3673],104:[1,16,17,18,1152,1154,1155,1156,1157,1158,1159,1160,1161,1162,1165,1166,1167,3661,3665,3666,3667,3674,3684],105:[1,16,17,18,80,3661,3665,3674],106:[1,16,17,18,1448,1692,1693,2708,3659,3665,3674],107:[1,16,17,18,2332,3661,3665,3674],108:[1,16,17,18,3665,3674],109:[1,16,17,18,3661,3665,3674],110:[1,16,17,18,2330,3661,3665,3674],111:[1,16,17,18,74,247,249,3659,3661,3665,3674],112:[1,16,17,18,1372,2324,3665,3674],113:[1,16,17,18,3659],114:[1,16,17,18,3665,3674],115:[42,3662],116:[3662],117:[3662],118:[1,16,17,18,3662,3665,3674],119:[3662],125:[3662],126:[1,16,17,18,251,1664,3661,3665,3674,3691],127:[1,16,17,18,74,247,249,3659,3662,3665,3674],128:[1,16,17,18,3659],129:[1,16,17,18,181,1825,3665,3674],130:[1,524,3663,3665,3671,3674,3690],132:[1,171,255,399,524,3671,3679,3690],133:[1,1413,1414,1416,1417,1418,1419,1520],134:[1,16,17,18,3665,3678],135:[],136:[1,1530,3665,3668,3669],137:[1,3659,3691],138:[3659],139:[1,16,17,18,3659,3665,3674,3680],140:[1,16,17,18,3659,3665,3674,3680],141:[1,16,17,18,3665,3673,3674],142:[1,3664,3665,3668,3673],146:[],147:[],149:[],150:[1,16,17,18],151:[1342,1343,1344,1345,1346,1348,1351,1352,1353,1354,1356],268:[1,16,17,18,3665,3666,3667,3674,3685],289:[1,16,17,18,3665,3674],311:[1,16,17,18,2544,3659,3665,3673,3674],324:[],330:[],335:[],341:[],342:[],343:[],344:[],365:[],371:[],376:[],377:[],473:[],474:[],483:[],484:[1,16,17,18,1978,3665,3674],485:[],486:[],487:[],488:[1,16,17,18,1847,2162,2244,3659,3665,3674,3686],489:[1,16,17,18,3665,3674],490:[],493:[1,2704,3662],494:[1,16,17,18,2704,3661,3665,3674],495:[1,16,17,18,2146,2375,2376,2505,3659,3665,3674],496:[1,16,17,18,2698,3659,3665,3674],498:[1,16,17,18,3661,3665,3674],499:[1,16,17,18,2063,2067,2073,2542,3665,3674],500:[1,2099,3662],501:[1,3659,3673],502:[1,16,17,18,3661,3665,3674],503:[1,3662,3665,3674,3688,3689],504:[1282,1283,3671],559:[],560:[],561:[],562:[],588:[],589:[],590:[],591:[],608:[],641:[],665:[],666:[],687:[1,3659,3673],688:[1,16,17,18,2338,3661,3665,3674],689:[1,16,17,18,2558,3665,3674],691:[1,16,17,18,2364,3659,3665,3674],692:[1,16,17,18,2350,3659,3665,3674],693:[1,16,17,18,2387,3665,3674],694:[1,16,17,18,2346,3665,3674],732:[3659],733:[1,16,17,18,3665,3674],734:[1,2560,3665,3674],796:[],797:[],801:[1,16,17,18,3659,3665,3674],824:[],830:[],880:[],881:[],884:[],885:[],886:[],887:[],892:[1,16,17,18,3659],893:[1,16,17,18,1448,1692,1693,3665,3668,3669,3674],894:[1,3665,3674],1910:[1,3765]}},function(e,t,n){"use strict";const r=n(7)("sc2:debug:build"),i=n(7)("sc2:DrawDebug"),o=n(7)("sc2:silly:build"),{distance:s,distanceX:a,distanceY:u}=n(2),l=n(22),{Alliance:c,BuildOrder:p,BuildOrderId:d,BuildResult:f,Race:h}=n(0),{BUILD_REACTOR:g,BUILD_TECHLAB:y}=n(3),{WorkerRace:E}=n(13),{gasMineTypes:m,townhallTypes:A,addonTypes:v}=n(6),{Upgrade:R,UnitType:b,UnitTypeId:C,AbilityId:T,UpgradeId:S,Color:O}=n(8),{PYLON:_}=b,I=()=>{};e.exports={builderPlugin:function(e){const t=Symbol("build"),n=Symbol("complete");e.buildOptions={paused:!1,earmarks:1e3,...e.BuildOptions},e.pauseBuild=function(){e.buildOptions.paused=!0},e.resumeBuild=function(){e.buildOptions.paused=!1},e.earmarkDelay=function(t){e.buildOptions.earmarks=t};const b={ability:Symbol("ability"),build:Symbol("build"),train:Symbol("train"),upgrade:Symbol("upgrade"),attack:Symbol("attack"),worker:Symbol("worker")},P=e.onGameStart?e.onGameStart.bind(e):I,w=e.onStep?e.onStep.bind(e):I,N=e.buildComplete?e.buildComplete.bind(e):I;function L(e,t,n){return{...e,index:t,touched:!1,supply:n||null,status:p.NOT_STARTED,started:null,earmarked:!1}}const D={type:"worker",qty:1};function x({agent:e,data:t},n,r,i){const o=e.race===h.ZERG;"train"===i.type?n.supply=r+t.getUnitTypeData(i.id).foodRequired*i.qty:"build"===i.type?n.supply=o?n.supply-1:r:n.supply=r}function F(e,t){return Array.isArray(t[0])?t.reduce((t,[n,r])=>t.supply>=n?(t.buildOrder.push(L(r,t.reducerIndex)),x(e,t,n,r),t.reducerIndex++,t):(Array.from({length:n-t.supply}).forEach(()=>{t.buildOrder.push(L(D,t.reducerIndex,n)),t.supply=t.supply+1,t.reducerIndex++}),t.buildOrder.push(L(r,t.reducerIndex)),t.reducerIndex++,x(e,t,n,r),t),{supply:12,buildOrder:[],reducerIndex:0}).buildOrder:t.map((e,t)=>L(e,t))}e.onGameStart=async function(n){return this.setState({[t]:F(n,e.buildOrder)}),P(n)},e.onStep=async function(o,s){if(e.buildOptions.paused)return w(o,s);const a=this.state[t].find(e=>e.status===p.COMMAND_GIVEN||e.status===p.IN_PROGRESS||e.status===p.NOT_STARTED);if(!a)return this.state[n]?w(o,s):(this.setState({[n]:!0}),N(o,s));const u=this.state[t][a.index];if(a.opts&&a.opts.skip&&e.state[a.opts.skip])return u.status=p.SKIPPED,w(o,s,this.state[t][a.index],f.SKIPPED);if(!1===u.touched){const e="ability"===u.type?T[u.id]:"upgrade"===u.type?S[u.id]:C[u.id];r(`starting new build task: ${u.type} ${e}`),u.started=s,u.touched=!0}if(i.enabled&&o.resources.get().debug.setDrawTextScreen("buildOrder",[{pos:{x:.85,y:.1},text:"Build:\n\n"+this.state[t].map((e,t)=>{let n;return n="build"===e.type||"train"===e.type?C[e.id]:"ability"===e.type?T[e.id]:"upgrade"===e.type?S[e.id]:C[E[o.agent.race]],`${String(t).padStart(2,"0")} ${d[e.status]}: ${e.type} - ${n}`}).join("\n"),color:O.YELLOW}]),this.buildOptions.earmarks&&u.status!==p.COMMAND_GIVEN&&s-u.started>=this.buildOptions.earmarks){let e;switch(u.type){case"train":case"build":e=o.data.getUnitTypeData(u.id);break;case"upgrade":e=o.data.getUpgradeData(u.id);break;case"ability":o.data.get("units").find(e=>e.available&&e.abilityId===u.id)&&(e=o.data.getUnitTypeData(u.id));break}e&&!o.agent.canAfford(u.id)&&(o.data.addEarmark({name:"task"+u.index,minerals:e.mineralCost,vespene:e.vespeneCost}),u.earmarked=!0)}u.status===p.COMMAND_GIVEN&&s-u.commanded>=250&&(u.status=p.NOT_STARTED);const l=await this[b[a.type]](o,a);switch(l){case f.SUCCESS:a.qty>1?(u.qty-=1,u.status=p.IN_PROGRESS):1===a.qty&&(u.qty=0,u.status=p.COMPLETE);break;case f.COMMAND_SENT:u.commanded=s,u.status=p.COMMAND_GIVEN;break;case f.CANNOT_SATISFY:case f.ERROR:}return w(o,s,this.state[t][a.index],l)};const M={async[h.PROTOSS]({agent:e,resources:t},n){const{actions:r,map:i,units:o}=t.get(),[a,u]=i.getExpansions(),l=a.areas.mineralLine;let p;if(n.id===_)p=[...a.areas.placementGrid,...u.areas.placementGrid].filter(e=>s(u.townhallPosition,e)>4.5&&l.every(t=>s(t,e)>1.5)&&u.areas.hull.every(t=>s(t,e)>3)&&o.getStructures({alliance:c.SELF}).map(e=>e.pos).every(t=>s(t,e)>3));else{const e=o.getById(_).filter(e=>e.buildProgress>=1).filter(e=>s(e.pos,a.townhallPosition)<50);if(e.length<=0)return f.CANNOT_SATISFY;p=[...a.areas.placementGrid,...u.areas.placementGrid].filter(t=>s(u.townhallPosition,t)>4.5&&e.some(e=>s(e.pos,t)<6.5)&&l.every(e=>s(e,t)>1.5)&&u.areas.hull.every(e=>s(e,t)>2)&&o.getStructures({alliance:c.SELF}).map(e=>e.pos).every(e=>s(e,t)>3))}if(p.length<=0)return f.CANNOT_SATISFY;const d=await r.canPlace(n.id,p);if(!d)return f.CANNOT_SATISFY;if(!e.canAfford(n.id))return f.CANNOT_SATISFY;try{return await r.build(n.id,d),f.COMMAND_SENT}catch(e){return f.ERROR}},async[h.TERRAN]({resources:e},t){const{actions:n,map:i,units:o}=e.get();if(v.includes(t.id)){let e;if(t.opts.on){if([e]=o.getById(t.opts.on).filter(e=>e.isFinished()&&e.noQueue&&"0"===e.addOnTag),r("no available units to build addon"),!e)return f.CANNOT_SATISFY}else if([e]=o.getProductionUnits(t.id).filter(e=>e.isFinished()&&e.noQueue&&"0"===e.addOnTag),!e)return f.CANNOT_SATISFY;try{return await n.build(t.id,null,e),f.COMMAND_SENT}catch(e){return f.ERROR}}const[l]=i.getExpansions(),p=l.areas.mineralLine;let d,h=l.areas.placementGrid;if(t.opts&&t.opts.near){d=!0;const[e]=o.getById(t.opts.near);h=l.areas.placementGrid.filter(t=>s(t,e.pos)<10),h.length<=0&&(d=!1,h=l.areas.placementGrid)}const g=e=>e.filter(e=>p.every(t=>a(t,e)>=5||u(t,e)>=1.5)&&l.areas.hull.every(t=>a(t,e)>=3.5||u(t,e)>=1.5)&&o.getStructures({alliance:c.SELF}).map(e=>e.pos).every(t=>a(t,e)>=5||u(t,e)>=3)),y=g(h),E=await(async()=>{let e=await n.canPlace(t.id,y);return!e&&d&&(e=await n.canPlace(t.id,g(l.areas.placementGrid))),e})();if(!E)return f.CANNOT_SATISFY;try{return await n.build(t.id,E),f.COMMAND_SENT}catch(e){return f.ERROR}},async[h.ZERG]({resources:e},t){const{actions:n,map:r,units:i,debug:o}=e.get(),[a]=r.getExpansions(),u=a.areas.mineralLine,l=r.getCreep().filter(e=>u.every(t=>s(t,e)>1.5)&&i.getStructures({alliance:c.SELF}).map(e=>e.pos).every(t=>s(t,e)>3));if(l.length<=0)return f.CANNOT_SATISFY;const p=await n.canPlace(t.id,l);if(!p)return f.CANNOT_SATISFY;try{return await n.build(t.id,p),f.COMMAND_SENT}catch(e){return console.log(e),f.ERROR}}};e[b.build]=async function(e,t){const{agent:n,resources:r}=e,{units:i}=r.get();if(t.status===p.COMMAND_GIVEN){const[e]=i.getById(t.id).filter(e=>!e.isFinished());return e?f.SUCCESS:f.CANNOT_SATISFY}if(!n.canAfford(t.id,t.earmarked?"task"+t.index:null))return f.CANNOT_SATISFY;const{actions:o,map:s,placer:a}=r.get();if(m.includes(t.id))try{return await o.buildGasMine(),f.COMMAND_SENT}catch(e){return f.ERROR}else if(A.includes(t.id)){const e=s.getAvailableExpansions()[0].townhallPosition,n=await o.canPlace(t.id,[e]);if(!n)return f.CANNOT_SATISFY;try{return await o.build(t.id,n),f.COMMAND_SENT}catch(e){return f.ERROR}}else{if(!a||!a.place)return M[n.race](e,t);{const r=a.place(e,t.id);if(!r||r.length<=0)return M[n.race](e,t);const i=await o.canPlace(t.id,r);if(!i)return M[n.race](e,t);if(!n.canAfford(t.id))return f.CANNOT_SATISFY;try{return await o.build(t.id,i),f.COMMAND_SENT}catch(e){return f.ERROR}}}},e[b.train]=async function({agent:e,resources:t},n){const{actions:r}=t.get();let i;i=Array.isArray(n.id)?l(n.id):n.id;try{if(e.upgradeIds.includes(R.WARPGATERESEARCH))try{await r.warpIn(i)}catch(e){await r.train(i)}else await r.train(i);return f.SUCCESS}catch(e){return o("BUILD TRAIN ERR:",e),f.ERROR}},e[b.worker]=async function({agent:e,resources:t}){const{actions:n}=t.get(),r=E[e.race];try{return await n.train(r),f.SUCCESS}catch(e){return o("BUILD WORKER ERR:",e),f.ERROR}},e[b.upgrade]=async function({agent:e,resources:t},n){const{actions:r,units:i}=t.get();if(!e.canAffordUpgrade(n.id,n.earmarked?"task"+n.index:null))return f.CANNOT_SATISFY;const s=i.getUpgradeFacilities(n.id);if(s.length<=0)return f.CANNOT_SATISFY;const a=s.find(e=>e.noQueue);if(!a)return f.CANNOT_SATISFY;try{return await r.upgrade(n.id,a),f.SUCCESS}catch(e){return o("BUILD UPGRADE ERR:",e),f.ERROR}},e[b.ability]=async function({data:e,resources:t},n){const{actions:i,units:o}=t.get(),s=e.findUnitTypesWithAbility(n.id);let a,u=o.getByType(s).filter(e=>e.abilityAvailable(n.id));if([g,y].includes(n.id)&&(u=u.filter(e=>"0"===e.addOnTag&&e.noQueue)),u.length<=0)return f.CANNOT_SATISFY;if(n.opts.target&&(a=l(o.getById(n.opts.target).filter(e=>e.isFinished())),!a))return f.CANNOT_SATISFY;try{return await i.do(n.id,[u[0].tag],{target:a}),f.SUCCESS}catch(e){return r("BUILD ABILITY ERR:",e),f.ERROR}}},taskFunctions:{ability:(e,t={})=>({type:"ability",id:e,qty:1,opts:t}),build:(e,t=1,n={})=>({type:"build",id:e,qty:t,opts:n}),train:(e,t=1,n={})=>({type:"train",id:e,qty:t,opts:n}),upgrade:e=>({type:"upgrade",id:e,qty:1})}}},function(e,t,n){"use strict";var r=n(162),i=n(167),o=n(168),s=n(186),a=s(),u=n(441),l=i(a);r(l,{getPolyfill:s,implementation:o,shim:u}),e.exports=l},function(e,t,n){"use strict";var r=n(402),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=Object.defineProperty,u=n(164)(),l=a&&u,c=function(e,t,n,r){var i;(!(t in e)||"function"==typeof(i=r)&&"[object Function]"===o.call(i)&&r())&&(l?a(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},p=function(e,t){var n=arguments.length>2?arguments[2]:{},o=r(t);i&&(o=s.call(o,Object.getOwnPropertySymbols(t)));for(var a=0;a<o.length;a+=1)c(e,o[a],t[o[a]],n[o[a]])};p.supportsDescriptors=!!l,e.exports=p},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},function(e,t,n){"use strict";var r=n(9)("%Object.defineProperty%",!0),i=function(){if(r)try{return r({},"a",{value:1}),!0}catch(e){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==r([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},function(e,t,n){"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(166);e.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},function(e,t,n){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},function(e,t,n){"use strict";var r=n(99),i=n(9),o=i("%Function.prototype.apply%"),s=i("%Function.prototype.call%"),a=i("%Reflect.apply%",!0)||r.call(s,o),u=i("%Object.getOwnPropertyDescriptor%",!0),l=i("%Object.defineProperty%",!0),c=i("%Math.max%");if(l)try{l({},"a",{value:1})}catch(e){l=null}e.exports=function(e){var t=a(r,s,arguments);if(u&&l){var n=u(t,"length");n.configurable&&l(t,"length",{value:1+c(0,e.length-(arguments.length-1))})}return t};var p=function(){return a(r,o,arguments)};l?l(e.exports,"apply",{value:p}):e.exports.apply=p},function(e,t,n){"use strict";var r=n(405),i=n(418),o=n(78),s=n(185),a=n(184),u=n(438);e.exports=function(){var e=u(this),t=a(o(e,"length")),n=1;arguments.length>0&&void 0!==arguments[0]&&(n=s(arguments[0]));var l=r(e,0);return i(l,e,t,0,n),l}},function(e,t,n){"use strict";var r=n(170),i=n(171),o=n(27),s=n(100),a=n(172);e.exports=function(e){if("Number"!==o(e)||s(e)||!a(e))return!1;var t=r(e);return i(t)===t}},function(e,t,n){"use strict";var r=n(9)("%Math.abs%");e.exports=function(e){return r(e)}},function(e,t,n){"use strict";var r=Math.floor;e.exports=function(e){return r(e)}},function(e,t,n){"use strict";var r=Number.isNaN||function(e){return e!=e};e.exports=Number.isFinite||function(e){return"number"==typeof e&&!r(e)&&e!==1/0&&e!==-1/0}},function(e,t,n){"use strict";var r=n(9)("%Array%"),i=!r.isArray&&n(49)("Object.prototype.toString");e.exports=r.isArray||function(e){return"[object Array]"===i(e)}},function(e,t,n){"use strict";var r=n(164),i=n(9),o=r()&&i("%Object.defineProperty%",!0),s=r.hasArrayLengthDefineBug(),a=s&&n(173),u=n(49)("Object.prototype.propertyIsEnumerable");e.exports=function(e,t,n,r,i,l){if(!o){if(!e(l))return!1;if(!l["[[Configurable]]"]||!l["[[Writable]]"])return!1;if(i in r&&u(r,i)!==!!l["[[Enumerable]]"])return!1;var c=l["[[Value]]"];return r[i]=c,t(r[i],c)}return s&&"length"===i&&"[[Value]]"in l&&a(r)&&r.length!==l["[[Value]]"]?(r.length=l["[[Value]]"],r.length===l["[[Value]]"]):(o(r,i,n(l)),!0)}},function(e,t,n){"use strict";var r=n(101),i=n(415),o=n(27);e.exports=function(e){return void 0!==e&&r(o,"Property Descriptor","Desc",e),i(e)}},function(e,t,n){"use strict";var r=n(38),i=n(101),o=n(27);e.exports=function(e){return void 0!==e&&(i(o,"Property Descriptor","Desc",e),!(!r(e,"[[Value]]")&&!r(e,"[[Writable]]")))}},function(e,t,n){"use strict";var r=n(100);e.exports=function(e,t){return e===t?0!==e||1/e==1/t:r(e)&&r(t)}},function(e,t,n){"use strict";var r=n(38),i=n(9)("%TypeError%"),o=n(27),s=n(179),a=n(417);e.exports=function(e){if("Object"!==o(e))throw new i("ToPropertyDescriptor requires an object");var t={};if(r(e,"enumerable")&&(t["[[Enumerable]]"]=s(e.enumerable)),r(e,"configurable")&&(t["[[Configurable]]"]=s(e.configurable)),r(e,"value")&&(t["[[Value]]"]=e.value),r(e,"writable")&&(t["[[Writable]]"]=s(e.writable)),r(e,"get")){var n=e.get;if(void 0!==n&&!a(n))throw new i("getter must be a function");t["[[Get]]"]=n}if(r(e,"set")){var u=e.set;if(void 0!==u&&!a(u))throw new i("setter must be a function");t["[[Set]]"]=u}if((r(t,"[[Get]]")||r(t,"[[Set]]"))&&(r(t,"[[Value]]")||r(t,"[[Writable]]")))throw new i("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t}},function(e,t,n){"use strict";e.exports=function(e){return!!e}},function(e,t,n){"use strict";var r,i,o=Function.prototype.toString,s="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof s&&"function"==typeof Object.defineProperty)try{r=Object.defineProperty({},"length",{get:function(){throw i}}),i={},s((function(){throw 42}),null,r)}catch(e){e!==i&&(s=null)}else s=null;var a=/^\s*class\b/,u=function(e){try{var t=o.call(e);return a.test(t)}catch(e){return!1}},l=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,p="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};e.exports=s?function(e){if(e===p)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;try{s(e,null,r)}catch(e){if(e!==i)return!1}return!u(e)}:function(e){if(e===p)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(c)return function(e){try{return!u(e)&&(o.call(e),!0)}catch(e){return!1}}(e);if(u(e))return!1;var t=l.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},function(e,t,n){"use strict";var r=n(9),i=r("%Math%"),o=r("%Number%");e.exports=o.MAX_SAFE_INTEGER||i.pow(2,53)-1},function(e,t,n){"use strict";var r=n(166);e.exports=function(){return r()&&!!Symbol.toStringTag}},function(e,t,n){"use strict";e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}},function(e,t,n){"use strict";var r=n(181),i=n(185);e.exports=function(e){var t=i(e);return t<=0?0:t>r?r:t}},function(e,t,n){"use strict";var r=n(170),i=n(171),o=n(429),s=n(100),a=n(172),u=n(436);e.exports=function(e){var t=o(e);return s(t)||0===t?0:a(t)?u(t)*i(r(t)):t}},function(e,t,n){"use strict";var r=n(168);e.exports=function(){return Array.prototype.flat||r}},function(e,t){e.exports=function(e,t,n,r,i){if(!i){var o=[];i=function(e,t){o.push({x:e,y:t})}}var s=n-e,a=r-t,u=Math.abs(s),l=Math.abs(a),c=0,p=s>0?1:-1,d=a>0?1:-1;if(u>l)for(var f=e,h=t;p<0?f>=n:f<=n;f+=p)i(f,h),(c+=l)<<1>=u&&(h+=d,c-=u);else for(f=e,h=t;d<0?h>=r:h<=r;h+=d)i(f,h),(c+=u)<<1>=l&&(f+=p,c-=l);return o}},function(e,t,n){const r=n(452),i={};for(const e of Object.keys(r))i[r[e]]=e;const o={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};e.exports=o;for(const e of Object.keys(o)){if(!("channels"in o[e]))throw new Error("missing channels property: "+e);if(!("labels"in o[e]))throw new Error("missing channel labels property: "+e);if(o[e].labels.length!==o[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=o[e];delete o[e].channels,delete o[e].labels,Object.defineProperty(o[e],"channels",{value:t}),Object.defineProperty(o[e],"labels",{value:n})}o.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=o-i;let a,u;o===i?a=0:t===o?a=(n-r)/s:n===o?a=2+(r-t)/s:r===o&&(a=4+(t-n)/s),a=Math.min(60*a,360),a<0&&(a+=360);const l=(i+o)/2;return u=o===i?0:l<=.5?s/(o+i):s/(2-o-i),[a,100*u,100*l]},o.rgb.hsv=function(e){let t,n,r,i,o;const s=e[0]/255,a=e[1]/255,u=e[2]/255,l=Math.max(s,a,u),c=l-Math.min(s,a,u),p=function(e){return(l-e)/6/c+.5};return 0===c?(i=0,o=0):(o=c/l,t=p(s),n=p(a),r=p(u),s===l?i=r-n:a===l?i=1/3+t-r:u===l&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*l]},o.rgb.hwb=function(e){const t=e[0],n=e[1];let r=e[2];const i=o.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[i,100*s,100*r]},o.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(1-t,1-n,1-r);return[100*((1-t-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*i]},o.rgb.keyword=function(e){const t=i[e];if(t)return t;let n,o=1/0;for(const t of Object.keys(r)){const i=r[t],u=(a=i,((s=e)[0]-a[0])**2+(s[1]-a[1])**2+(s[2]-a[2])**2);u<o&&(o=u,n=t)}var s,a;return n},o.keyword.rgb=function(e){return r[e]},o.rgb.xyz=function(e){let t=e[0]/255,n=e[1]/255,r=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;return[100*(.4124*t+.3576*n+.1805*r),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},o.rgb.lab=function(e){const t=o.rgb.xyz(e);let n=t[0],r=t[1],i=t[2];n/=95.047,r/=100,i/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;return[116*r-16,500*(n-r),200*(r-i)]},o.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let i,o,s;if(0===n)return s=255*r,[s,s,s];i=r<.5?r*(1+n):r+n-r*n;const a=2*r-i,u=[0,0,0];for(let e=0;e<3;e++)o=t+1/3*-(e-1),o<0&&o++,o>1&&o--,s=6*o<1?a+6*(i-a)*o:2*o<1?i:3*o<2?a+(i-a)*(2/3-o)*6:a,u[e]=255*s;return u},o.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,i=n;const o=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,i*=o<=1?o:2-o;return[t,100*(0===r?2*i/(o+i):2*n/(r+n)),100*((r+n)/2)]},o.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const i=Math.floor(t)%6,o=t-Math.floor(t),s=255*r*(1-n),a=255*r*(1-n*o),u=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,u,s];case 1:return[a,r,s];case 2:return[s,r,u];case 3:return[s,a,r];case 4:return[u,s,r];case 5:return[r,s,a]}},o.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,i=Math.max(r,.01);let o,s;s=(2-n)*r;const a=(2-n)*i;return o=n*i,o/=a<=1?a:2-a,o=o||0,s/=2,[t,100*o,100*s]},o.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const i=n+r;let o;i>1&&(n/=i,r/=i);const s=Math.floor(6*t),a=1-r;o=6*t-s,0!=(1&s)&&(o=1-o);const u=n+o*(a-n);let l,c,p;switch(s){default:case 6:case 0:l=a,c=u,p=n;break;case 1:l=u,c=a,p=n;break;case 2:l=n,c=a,p=u;break;case 3:l=n,c=u,p=a;break;case 4:l=u,c=n,p=a;break;case 5:l=a,c=n,p=u}return[255*l,255*c,255*p]},o.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},o.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let i,o,s;return i=3.2406*t+-1.5372*n+-.4986*r,o=-.9689*t+1.8758*n+.0415*r,s=.0557*t+-.204*n+1.057*r,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[255*i,255*o,255*s]},o.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;return[116*n-16,500*(t-n),200*(n-r)]},o.lab.xyz=function(e){let t,n,r;n=(e[0]+16)/116,t=e[1]/500+n,r=n-e[2]/200;const i=n**3,o=t**3,s=r**3;return n=i>.008856?i:(n-16/116)/7.787,t=o>.008856?o:(t-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,t*=95.047,n*=100,r*=108.883,[t,n,r]},o.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let i;i=360*Math.atan2(r,n)/2/Math.PI,i<0&&(i+=360);return[t,Math.sqrt(n*n+r*r),i]},o.lch.lab=function(e){const t=e[0],n=e[1],r=e[2]/360*2*Math.PI;return[t,n*Math.cos(r),n*Math.sin(r)]},o.rgb.ansi16=function(e,t=null){const[n,r,i]=e;let s=null===t?o.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),0===s)return 30;let a=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return 2===s&&(a+=60),a},o.hsv.ansi16=function(e){return o.rgb.ansi16(o.hsv.rgb(e),e[2])},o.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];if(t===n&&n===r)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;return 16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},o.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},o.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;e-=16;return[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},o.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},o.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let n=t[0];3===t[0].length&&(n=n.split("").map(e=>e+e).join(""));const r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},o.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(Math.max(t,n),r),o=Math.min(Math.min(t,n),r),s=i-o;let a,u;return a=s<1?o/(1-s):0,u=s<=0?0:i===t?(n-r)/s%6:i===n?2+(r-t)/s:4+(t-n)/s,u/=6,u%=1,[360*u,100*s,100*a]},o.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let i=0;return r<1&&(i=(n-.5*r)/(1-r)),[e[0],100*r,100*i]},o.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},o.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];const i=[0,0,0],o=t%1*6,s=o%1,a=1-s;let u=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return u=(1-n)*r,[255*(n*i[0]+u),255*(n*i[1]+u),255*(n*i[2]+u)]},o.hcg.hsv=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);let r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},o.hcg.hsl=function(e){const t=e[1]/100,n=e[2]/100*(1-t)+.5*t;let r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},o.hcg.hwb=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},o.hwb.hcg=function(e){const t=e[1]/100,n=1-e[2]/100,r=n-t;let i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},o.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},o.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},o.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},o.gray.hsl=function(e){return[0,0,e[0]]},o.gray.hsv=o.gray.hsl,o.gray.hwb=function(e){return[0,100,e[0]]},o.gray.cmyk=function(e){return[0,0,0,e[0]]},o.gray.lab=function(e){return[e[0],0,0]},o.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},o.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},function(e,t,n){"use strict";const{Alliance:r}=n(0),i={alliedHealthDifference:{[r.SELF]:{},[r.ENEMY]:{}},dPSOfUnits:{[r.SELF]:[],[r.ENEMY]:[]},healthDifference:{[r.SELF]:[],[r.ENEMY]:[]},healthOfUnits:{[r.SELF]:{},[r.ENEMY]:{}}};e.exports=i},function(e,t,n){"use strict";const{EFFECT_SALVAGE:r,UNLOADALL_BUNKER:i}=n(3),{BUNKER:o}=n(1);e.exports={salvageBunker:e=>{const t=[],[n]=e.getByType(o);if(n){let e=[r];n.abilityAvailable(i)&&e.push(i),e.forEach(e=>{const r={abilityId:e,unitTags:[n.tag]};t.push(r)})}return t}}},function(e,t,n){"use strict";e.exports={COMBATSHIELD:"SHIELDWALL",TERRANINFANTRYARMORLEVEL1:"TERRANINFANTRYARMORSLEVEL1",VIKING:"VIKINGFIGHTER"}},function(e,t,n){"use strict";e.exports={harassFinished:null,harassOn:null}},function(e,t,n){"use strict";const{UnitType:r,Upgrade:i}=n(8),{Race:o}=n(0),{workerTypes:s}=n(6),{TownhallRace:a}=n(13),u=n(14),l=n(191),c={convertPlan:(e,t)=>{const n=[],o=new Map;e.orders.forEach(e=>{const p=[];e[1].split(",").forEach(e=>{const t=e.trim().split(" ");let n=1,r="";"x"===t[t.length-1].charAt(0)?(n=parseInt(t[t.length-1].substring(1)),r=c.isAddOnOrder(t.slice(1,t.length-1))?t.slice(1,t.length-1).join("").toUpperCase():t.slice(0,t.length-1).join("").toUpperCase()):r=c.isAddOnOrder(t.slice(1))?t.slice(1).join(" ").replace(/ /g,"").toUpperCase():e.replace(/ /g,"").toUpperCase();for(let e=1;e<=n;e++)p.push(r)}),p.forEach(u=>{const c={};let p=r[u]?u:l[u],d=i[u]?u:l[u];if(r[p]){c.orderType="UnitType";const e=r[p];o.set(e,o.has(e)?o.get(e)+1:0===a[t].indexOf(e)?1:0),c.unitType=e,c.targetCount=o.get(e)+(s.includes(e)?12:0)}else i[d]&&(c.orderType="Upgrade",u=i[u]?u:l[u],c.upgrade=i[d]);c.food=e[0],c.candidatePositions=e[2]?e[2]:[],n.push(c)}),u.trainingTypes=Array.from(o.keys())}),u.setPlan(n)},isAddOnOrder:e=>{const t=e.join(" ").replace(/ /g,"").toUpperCase();return r[t]}};e.exports=c},function(e,t,n){"use strict";const{EFFECT_CHRONOBOOSTENERGYCOST:r,MORPH_ORBITALCOMMAND:i,MORPH_OVERSEER:o,RESEARCH_MUSCULARAUGMENTS:s,MORPH_HIVE:a,EFFECT_CALLDOWNMULE:u}=n(3),{NEXUS:l,PYLON:c,STALKER:p,GATEWAY:d,COLOSSUS:f,IMMORTAL:h,OBSERVER:g,WARPPRISM:y,ROBOTICSFACILITY:E,OVERLORD:m,ZERGLING:A,ROACH:v,HYDRALISK:R,OVERSEER:b,CYCLONE:C,MARINE:T,MARAUDER:S,SIEGETANK:O,SIEGETANKSIEGED:_,LIBERATOR:I,MEDIVAC:P,VIKINGFIGHTER:w,SCV:N,PROBE:L,QUEEN:D,BUNKER:x,SHIELDBATTERY:F,LAIR:M,HIVE:B,ORBITALCOMMAND:U,STARPORTREACTOR:k,STARPORT:j,BARRACKS:G,SPINECRAWLER:H,OVERLORDCOCOON:W,ZEALOT:V,MINERALFIELD:Y,SUPPLYDEPOT:$,REFINERY:K,COMMANDCENTER:q,FACTORY:z,ENGINEERINGBAY:Q,ARMORY:Z,MISSILETURRET:J,HATCHERY:X,EXTRACTOR:ee,SPAWNINGPOOL:te,ROACHWARREN:ne,EVOLUTIONCHAMBER:re,HYDRALISKDEN:ie,INFESTATIONPIT:oe,SPORECRAWLER:se,ASSIMILATOR:ae,CYBERNETICSCORE:ue,FORGE:le,TWILIGHTCOUNCIL:ce,PHOTONCANNON:pe,TEMPLARARCHIVE:de,ROBOTICSBAY:fe,REACTOR:he,TECHLAB:ge,RAVEN:ye}=n(1),{WARPGATERESEARCH:Ee,EXTENDEDTHERMALLANCE:me,PROTOSSGROUNDWEAPONSLEVEL1:Ae,CHARGE:ve,PROTOSSGROUNDWEAPONSLEVEL2:Re,GLIALRECONSTITUTION:be,ZERGMISSILEWEAPONSLEVEL2:Ce,ZERGMISSILEWEAPONSLEVEL1:Te,ZERGGROUNDARMORSLEVEL1:Se,ZERGGROUNDARMORSLEVEL2:Oe,TERRANINFANTRYWEAPONSLEVEL1:_e,TERRANINFANTRYARMORSLEVEL1:Ie,TERRANINFANTRYWEAPONSLEVEL2:Pe,TERRANINFANTRYARMORSLEVEL2:we,ZERGLINGMOVEMENTSPEED:Ne,STIMPACK:Le,EVOLVEGROOVEDSPINES:De,COMBATSHIELD:xe}=n(92),{countTypes:Fe}=n(28),{range:Me}=n(31),Be={1:{138658:{buildType:"two variable",orders:[[14,"Supply Depot"],[14,"Refinery"],[16,"Barracks"],[19,"Orbital Command, Reaper"],[20,"Command Center"],[20,"Factory"],[21,"Barracks Reactor"],[22,"Supply Depot"],[22,"Refinery"],[23,"Factory Tech Lab"],[24,"Marine x2"],[27,"Orbital Command"],[27,"Cyclone"],[27,"Marine x2"],[33,"Starport"],[36,"Siege Tank"],[41,"Refinery, Supply Depot"],[41,"Marine x2"],[41,"Starport Tech Lab"],[45,"Supply Depot"],[48,"Raven"],[50,"Command Center"],[52,"Supply Depot"],[52,"Siege Tank"],[55,"Marine x2"],[59,"Marine x2"],[63,"Raven"],[63,"Siege Tank"],[70,"Refinery"],[74,"Barracks x2"],[76,"Siege Tank"],[81,"Engineering Bay x2"],[81,"Stimpack, Starport Reactor"],[83,"Orbital Command"],[85,"Siege Tank"],[90,"Terran Infantry Weapons Level 1, Terran Infantry Armor Level 1"],[92,"Starport Reactor"],[103,"Siege Tank"],[103,"Barracks x2"],[107,"Refinery x2"],[109,"Medivac x2"],[118,"Siege Tank"],[118,"Sensor Tower"],[121,"Armory"],[126,"Combat Shield"],[126,"Barracks Reactor x2"],[126,"Viking x2"],[140,"Command Center"],[140,"Missile Turret x3"],[140,"Siege Tank"],[140,"Viking x2"]],rallies:[{conditionStart:{food:0},conditionEnd:{unitType:C,count:1},location:"ByMainRamp"}],scouts:[{start:{food:17},end:{time:99},unitType:"SCV",targetLocation:"EnemyMain"}],unitMax:{RAVEN:2},wallOff:!0}},2:{lingRoachHydra:{unitTypes:{defenseTypes:[A,v,R],defenseStructures:[H],mainCombatTypes:[A,v,R],supportUnitTypes:[b,D]},orders:[[13,"train",m,1],[17,"build",X,1],[17,"build",ee,0],[18,"build",te,0],[21,"train",m,2],[21,"train",D,0],[21,"train",D,1],[25,"upgrade",Ne],[25,"train",A,0],[25,"train",A,1],[[...Me(26,200)],"continuouslyBuild",[A,v,R]],[[...Me(32,33)],"scout",A,"AcrossTheMap"],[32,"train",m,3],[34,"build",M,0],[34,"train",D,2],[36,"build",ne,0],[35,"train",m,4],[35,"build",re,0],[38,"train",m,5],[[...Me(39,200)],"manageSupply"],[40,"build",se,0,"MineralLines"],[39,"build",se,1,"MineralLines"],[42,"upgrade",Te],[42,"upgrade",be],[42,"build",ee,1],[41,"build",ee,2],[42,"train",v,0],[45,"train",v,1],[45,"train",v,2],[45,"train",v,3],[45,"train",v,4],[45,"train",v,5],[55,"build",X,2],[58,"train",v,6],[58,"train",v,7],[58,"train",v,8],[58,"train",v,9],[68,"build",re,1],[[...Me(71,200)],"push"],[74,"build",ee,3],[78,"upgrade",Ce],[78,"upgrade",Se],[78,"build",ie,0],[87,"build",ee,4],[87,"build",ee,5],[97,"train",R,0],[97,"train",R,1],[101,"ability",o,{targetCount:0,countType:[b,W]}],[101,"train",R,2],[101,"train",R,3],[101,"train",R,4],[101,"train",R,5],[105,"train",R,6],[105,"train",R,7],[113,"train",R,8],[113,"train",R,9],[119,"upgrade",De],[129,"build",X,3],[138,"build",ie,1],[149,"upgrade",Oe],[149,"ability",s],[165,"build",oe,0],[164,"build",X,4],[200,"ability",a,{targetCount:0,countType:B}]]}},3:{economicStalkerColossi:{unitTypes:{defenseStructures:[F],defenseTypes:[p,h],mainCombatTypes:[p,f,h,V],supportUnitTypes:[g,y]},orders:[[14,"build",c,0,"NaturalWallPylon"],[[...Me(14,19)],"scout",L,"EnemyMain",{unitType:c,unitCount:1,scoutType:"earlyScout"}],[15,"build",d,0],[16,"ability",r,{targetType:l,continuous:!1}],[17,"build",ae,0],[18,"build",ae,1],[19,"build",d,1],[20,"build",ue,0],[20,"build",c,1],[[...Me(20,26)],"scout",L,"EnemyNatural",{scoutType:"earlyScout"}],[23,"train",p,0],[23,"ability",r,{targetType:d,continuous:!1}],[23,"train",p,1],[27,"ability",r,{targetType:d,continuous:!1}],[27,"upgrade",Ee],[[...Me(27,180)],"continuouslyBuild",[p,f]],[27,"train",p,2],[27,"train",p,3],[31,"harass"],[31,"build",c,2],[31,"build",l,1],[31,"harass",p,4],[32,"build",E,0],[33,"build",c,3],[35,"build",d,2],[36,"train",g,0],[36,"ability",r,{targetType:E,continuous:!0}],[37,"build",fe,0],[37,"train",p,4],[[...Me(37,44)],"scout",g,"EnemyNatural"],[39,"train",p,5],[45,"train",h,0],[51,"build",ae,2],[51,"build",ae,3],[53,"train",f,0],[61,"upgrade",me],[61,"build",c,4],[[...Me(61,200)],"manageSupply"],[64,"build",l,2],[66,"train",f,1],[74,"build",le,0],[76,"train",p,6],[78,"train",p,7],[80,"build",d,3],[80,"upgrade",Ae],[80,"train",f,2],[91,"build",ce,0],[94,"train",p,8],[96,"train",p,9],[101,"build",pe,0],[101,"build",pe,1],[101,"train",f,3],[110,"upgrade",ve],[110,"build",d,4],[110,"build",d,5],[110,"build",d,6],[120,"train",g,1],[126,"upgrade",Re],[126,"train",f,4],[132,"build",l,3],[151,"train",y,0],[151,"build",d,7],[151,"build",de,0],[151,"build",d,8],[151,"build",d,9],[151,"build",d,5],[[...Me(180,200)],"continuouslyBuild",[p,f,V]]]}}};e.exports=Be},function(e,t,n){"use strict";const{Race:r}=n(0);n(17),n(10);e.exports={getRace:(e,t)=>Object.keys(r).find(n=>r[n]===e.getUnitTypeData(parseInt(t)).race),getFileName:(t,n,r)=>`${e.exports.getRace(t,n)}vs${e.exports.getRace(t,r)}.json`}},function(e,t,n){"use strict";e.exports={difficulty:null}},function(e,t,n){"use strict";const r=n(17),i=n(10),o=n(497),{getFileName:s}=n(195);e.exports={readUnitTypeData:()=>o,saveUnitTypeData:e=>{r.writeFileSync(i.join(__dirname,"data","unit-type-data.json"),JSON.stringify(e))},readFromMatchup:(e,t,n,o)=>{try{e.compositions=JSON.parse(r.readFileSync(i.join(__dirname,"data",s(t,n.unitType,o.unitType))).toString())}catch(a){console.log("error",a),r.writeFileSync(i.join(__dirname,"data",s(t,n.unitType,o.unitType)),JSON.stringify(e.compositions))}},writeToCurrent:e=>{try{r.writeFileSync(i.join(__dirname,"data","current.json"),JSON.stringify(e.compositions))}catch(e){console.log("error",e)}}}},function(e,t,n){e.exports=n(199)},function(e,t,n){"use strict";n(17),n(10);const{createAgent:r,createEngine:i,createPlayer:o}=n(5),{AIBuild:s,Difficulty:a,PlayerType:u,Race:l}=n(0),c=n(460),{getFileName:p}=(n(461),n(463),n(195)),{logoutStepsExecuted:d}=(n(474),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484),n(486),n(487),n(488),n(489),n(490),n(491),n(492),n(46)),{saveReplay:f,saveExecutedStepsLog:h}=n(493),g=n(196),{saveUnitTypeData:y}=(n(494),n(495),n(496),n(197)),E=n(12),{saveBuildOrder:m}=(n(498),n(499),n(500),n(501),n(4));n(502),n(503),n(504);g.difficulty=a.MEDIUM;const A=i();try{(async()=>{const e=await A.connect();console.log("responsePing",e);for(let e=0;e<1;e++){console.log("game",e+1);const t=await v();await R(t)}console.log("end loop")})()}catch(e){console.log("connect error",e.message)}async function v(){console.log("__dirname",__dirname);const e=s.RandomBuild,t={type:u.PARTICIPANT,race:l.RANDOM},n=l.RANDOM,i=c[Math.floor(Math.random()*c.length)];console.log("map",i);const a={settings:t,interface:{raw:!0,rawCropToPlayableArea:!0,score:!0,showBurrowedShadows:!0,showCloaked:!0}};console.log("blueprint",a);const p=r(a),d=[o({race:t.race},p),o({race:n,difficulty:g.difficulty,aiBuild:e})],f=d.find(e=>!!e.agent);f.agent.settings.race=f.race;return await A.createGame(i,d,!1,null),A.joinGame(f.agent)}async function R(e){const[t,n]=e;console.log("GAME RESULTS: ",n),d();const{agent:r,resources:i}=t,{actions:o,frame:s}=i.get();y(E.unitTypeData),h(r,s.getGameInfo().mapName);const a=n.find(e=>e.playerId===r.playerId);m(t,a);const u=await o._client.saveReplay();f(u),o._client.close()}},function(e,t,n){"use strict";const r=n(83).Root.fromJSON(n(127));e.exports=r},function(e,t,n){"use strict";var r=e.exports=n(202);r.build="light",r.load=function(e,t,n){return"function"==typeof t?(n=t,t=new r.Root):t||(t=new r.Root),t.load(e,n)},r.loadSync=function(e,t){return t||(t=new r.Root),t.loadSync(e)},r.encoder=n(117),r.decoder=n(122),r.verifier=n(123),r.converter=n(124),r.ReflectionObject=n(55),r.Namespace=n(62),r.Root=n(126),r.Enum=n(36),r.Type=n(118),r.Field=n(56),r.OneOf=n(69),r.MapField=n(119),r.Service=n(120),r.Method=n(121),r.Message=n(86),r.wrappers=n(125),r.types=n(63),r.util=n(21),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},function(e,t,n){"use strict";var r=t;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(84),r.BufferWriter=n(209),r.Reader=n(85),r.BufferReader=n(210),r.util=n(35),r.rpc=n(115),r.roots=n(116),r.configure=i,i()},function(e,t,n){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var i=new Array(64),o=new Array(123),s=0;s<64;)o[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,n){for(var r,o=null,s=[],a=0,u=0;t<n;){var l=e[t++];switch(u){case 0:s[a++]=i[l>>2],r=(3&l)<<4,u=1;break;case 1:s[a++]=i[r|l>>4],r=(15&l)<<2,u=2;break;case 2:s[a++]=i[r|l>>6],s[a++]=i[63&l],u=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=i[r],s[a++]=61,1===u&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};r.decode=function(e,t,n){for(var r,i=n,s=0,a=0;a<e.length;){var u=e.charCodeAt(a++);if(61===u&&s>1)break;if(void 0===(u=o[u]))throw Error("invalid encoding");switch(s){case 0:r=u,s=1;break;case 1:t[n++]=r<<2|(48&u)>>4,r=u,s=2;break;case 2:t[n++]=(15&r)<<4|(60&u)>>2,r=u,s=3;break;case 3:t[n++]=(3&r)<<6|u,s=0}}if(1===s)throw Error("invalid encoding");return n-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,n){"use strict";function r(){this._listeners={}}e.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},function(e,t,n){"use strict";function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?s:a,e.readFloatBE=r?a:s}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,o),e.readFloatLE=n.bind(null,s),e.readFloatBE=n.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?s:a,e.readDoubleBE=r?a:s}():function(){function t(e,t,n,r,i,o){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((s<<31|2146435072)>>>0,i,o+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,i,o+t),e((s<<31|a/4294967296)>>>0,i,o+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(a=r*Math.pow(2,-u))>>>0,i,o+t),e((s<<31|u+1023<<20|1048576*a&1048575)>>>0,i,o+n)}}}function n(e,t,n,r,i){var o=e(r,i+t),s=e(r,i+n),a=2*(s>>31)+1,u=s>>>20&2047,l=4294967296*(1048575&s)+o;return 2047===u?l?NaN:a*(1/0):0===u?5e-324*a*l:a*Math.pow(2,u-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=n.bind(null,s,0,4),e.readDoubleBE=n.bind(null,a,4,0)}(),e}function i(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function o(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=r(r)},function(e,t,n){"use strict";var r=t;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],s=0;t<n;)(r=e[t++])<128?o[s++]=r:r>191&&r<224?o[s++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(e,t,n){for(var r,i,o=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){if(n<1||n>i)return e(n);s+n>r&&(o=e(r),s=0);var a=t.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},function(e,t,n){"use strict";e.exports=i;var r=n(35);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===s?o:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){"use strict";e.exports=o;var r=n(84);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(35);function o(){r.call(this)}function s(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},function(e,t,n){"use strict";e.exports=o;var r=n(85);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(35);function o(e){r.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},function(e,t,n){"use strict";e.exports=i;var r=n(35);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,i,o);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){"use strict";function r(e,t){"string"==typeof e&&(t=e,e=void 0);var n=[];function i(e){if("string"!=typeof e){var t=o();if(r.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var s=Object.keys(e),a=new Array(s.length+1),u=new Array(s.length),l=0;l<s.length;)a[l]=s[l],u[l]=e[s[l++]];return a[l]=t,Function.apply(null,a).apply(null,u)}return Function(t)()}for(var c=new Array(arguments.length-1),p=0;p<c.length;)c[p]=arguments[++p];if(p=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var n=c[p++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"})),p!==c.length)throw Error("parameter count mismatch");return n.push(e),i}function o(r){return"function "+(r||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return i.toString=o,i}e.exports=r,r.verbose=!1},function(e,t,n){"use strict";e.exports=o;var r=n(113),i=n(114)("fs");function o(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&i&&i.readFile?i.readFile(e,(function(r,i){return r&&"undefined"!=typeof XMLHttpRequest?o.xhr(e,t,n):r?n(r):n(null,t.binary?i:i.toString("utf8"))})):o.xhr(e,t,n):r(o,this,e,t)}o.xhr=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(0!==r.status&&200!==r.status)return n(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var i=0;i<r.responseText.length;++i)e.push(255&r.responseText.charCodeAt(i))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,r.responseText)}},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}},function(e,t,n){"use strict";var r=t,i=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},o=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=i(e),r="";n&&(r=t.shift()+"/");for(var o=0;o<t.length;)".."===t[o]?o>0&&".."!==t[o-1]?t.splice(--o,2):n?t.splice(o,1):++o:"."===t[o]?t.splice(o,1):++o;return r+t.join("/")};r.resolve=function(e,t,n){return n||(t=o(t)),i(t)?t:(n||(e=o(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?o(e+"/"+t):t)}},function(e,t,n){"use strict";const r=n(216);e.exports=r},function(e,t,n){"use strict";const r=n(7)("sc2:debug:Bot"),i=n(221),{Race:o,PlayerType:s}=n(0),a=()=>{};e.exports=function(e={}){return r("new bot created with options:",e),{...e,_world:null,inGame:!1,systems:[],use(e){const t=e=>{this.systems.push(e),this.inGame&&e.setup(this._world,!0)};Array.isArray(e)?e.forEach(e=>t(e)):t(e)},settings:{type:s.PARTICIPANT,race:o.RANDOM,...e.settings},interface:e.interface||{raw:!0,rawCropToPlayableArea:!0},canAfford(e,t){const{data:n}=this._world,{minerals:r,vespene:i}=this,o=n.getEarmarkTotals(t),s=n.getUnitTypeData(e);return!!(r-o.minerals>=s.mineralCost&&(!s.vespeneCost||i-o.vespene>=s.vespeneCost))&&(t&&n.settleEarmark(t),!0)},canAffordN(e,t=1){const{data:n}=this._world,{minerals:r,vespene:i}=this,o=n.getUnitTypeData(e);for(let e=t;e>0;e-=1)if(s=e,r>=o.mineralCost*s&&(!o.vespeneCost||i>=o.vespeneCost*s))return e;var s;return 0},canAffordUpgrade(e,t){const{data:n}=this._world,{minerals:r,vespene:i}=this,o=n.getEarmarkTotals(t),s=n.getUpgradeData(e);return!!(r-o.minerals>=s.mineralCost&&(!s.vespeneCost||i-o.vespene>=s.vespeneCost))&&(t&&n.settleEarmark(t),!0)},hasTechFor(e){const{data:t,resources:n}=this._world,{units:r}=n.get(),{techRequirement:i}=t.getUnitTypeData(e),{techAlias:o}=t.getUnitTypeData(i),s=[i,...o];if(0===i||s.length<=0)return!0;return s.reduce((e,n)=>{const r=t.get("units").filter(e=>e.techAlias.includes(n));if(r.length>0){const t=r.map(e=>e.unitId);e=e.concat([n,...t])}else e=e.concat([n]);return e},[]).some(e=>r.getById(e,{buildProgress:1}).length>0)},setup(t){this._world=t;const{events:n}=t.resources.get();return this.readerId=n.createReader("agent"),e.setup?e.setup(t):this.readerId},async onStep(t){const{frame:n,events:r}=t.resources.get(),o=n.getObservation(),s=i(o.rawData.player.upgradeIds,this.upgradeIds);return s&&s.forEach(e=>{r.write({name:"upgradeComplete",data:e})}),Object.assign(this,o.rawData.player,o.playerCommon),e.onStep?e.onStep(t):a},async onGameStart(t){this.inGame=!0;const{frame:n}=t.resources.get(),r=n.getGameInfo(),i=r.playerInfo.find(e=>e.playerId===this.playerId),s=r.playerInfo.find(e=>e.playerId!==this.playerId),u=n.getObservation();return Object.assign(this,u.rawData.player,u.playerCommon),i&&(this.race=i.raceActual),s&&(this.opponent={race:s.raceRequested!==o.RANDOM?s.raceRequested:o.NORACE}),e.onGameStart?e.onGameStart(t):a}}}},function(e,t,n){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))}),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(128)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var n=1e3,r=6e4,i=60*r,o=24*i;function s(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return s(e,t,o,"day");if(t>=i)return s(e,t,i,"hour");if(t>=r)return s(e,t,r,"minute");if(t>=n)return s(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){const r=n(87),i=n(37);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(...e){return process.stderr.write(i.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:r,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${r} [0m`;n[0]=o+n[0].split("\n").join("\n"+o),n.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.destroy=i.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=n(129);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e},{}),e.exports=n(128)(t);const{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},function(e,t,n){"use strict";e.exports=(e,t=process.argv)=>{const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return-1!==r&&(-1===i||r<i)}},function(e,t){var n=/^\[object .+?Constructor\]$/,r="object"==typeof global&&global&&global.Object===Object&&global,i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();function s(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function a(e,t){return!!(e?e.length:0)&&function(e,t,n){if(t!=t)return function(e,t,n,r){var i=e.length,o=n+(r?1:-1);for(;r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,c,n);var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,0)>-1}function u(e,t,n){for(var r=-1,i=e?e.length:0;++r<i;)if(n(t,e[r]))return!0;return!1}function l(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function c(e){return e!=e}function p(e,t){return e.has(t)}function d(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var f,h=Array.prototype,g=Function.prototype,y=Object.prototype,E=o["__core-js_shared__"],m=(f=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"",A=g.toString,v=y.hasOwnProperty,R=y.toString,b=RegExp("^"+A.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),C=h.splice,T=Math.max,S=U(o,"Map"),O=U(o,"Set"),_=U(Object,"create");function I(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function P(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function w(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function N(e){var t=-1,n=e?e.length:0;for(this.__data__=new w;++t<n;)this.add(e[t])}function L(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!=n&&r!=r)return i;return-1}function D(e,t,n,r){var i,o=-1,s=a,l=!0,c=e.length,d=[],f=t.length;if(!c)return d;n&&(t=function(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(t,(i=n,function(e){return i(e)}))),r?(s=u,l=!1):t.length>=200&&(s=p,l=!1,t=new N(t));e:for(;++o<c;){var h=e[o],g=n?n(h):h;if(h=r||0!==h?h:0,l&&g==g){for(var y=f;y--;)if(t[y]===g)continue e;d.push(h)}else s(t,g,r)||d.push(h)}return d}function x(e){return!(!Y(e)||(t=e,m&&m in t))&&(V(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?b:n).test(function(e){if(null!=e){try{return A.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function F(e,t,n){for(var r=-1,i=e.length;++r<i;)var o=o?l(D(o,e[r],t,n),D(e[r],o,t,n)):e[r];return o&&o.length?function(e,t,n){var r=-1,i=a,o=e.length,s=!0,l=[],c=l;if(n)s=!1,i=u;else if(o>=200){var f=t?null:M(e);if(f)return d(f);s=!1,i=p,c=new N}else c=t?[]:l;e:for(;++r<o;){var h=e[r],g=t?t(h):h;if(h=n||0!==h?h:0,s&&g==g){for(var y=c.length;y--;)if(c[y]===g)continue e;t&&c.push(g),l.push(h)}else i(c,g,n)||(c!==l&&c.push(g),l.push(h))}return l}(o,t,n):[]}I.prototype.clear=function(){this.__data__=_?_(null):{}},I.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},I.prototype.get=function(e){var t=this.__data__;if(_){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return v.call(t,e)?t[e]:void 0},I.prototype.has=function(e){var t=this.__data__;return _?void 0!==t[e]:v.call(t,e)},I.prototype.set=function(e,t){return this.__data__[e]=_&&void 0===t?"__lodash_hash_undefined__":t,this},P.prototype.clear=function(){this.__data__=[]},P.prototype.delete=function(e){var t=this.__data__,n=L(t,e);return!(n<0)&&(n==t.length-1?t.pop():C.call(t,n,1),!0)},P.prototype.get=function(e){var t=this.__data__,n=L(t,e);return n<0?void 0:t[n][1]},P.prototype.has=function(e){return L(this.__data__,e)>-1},P.prototype.set=function(e,t){var n=this.__data__,r=L(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},w.prototype.clear=function(){this.__data__={hash:new I,map:new(S||P),string:new I}},w.prototype.delete=function(e){return B(this,e).delete(e)},w.prototype.get=function(e){return B(this,e).get(e)},w.prototype.has=function(e){return B(this,e).has(e)},w.prototype.set=function(e,t){return B(this,e).set(e,t),this},N.prototype.add=N.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},N.prototype.has=function(e){return this.__data__.has(e)};var M=O&&1/d(new O([,-0]))[1]==1/0?function(e){return new O(e)}:function(){};function B(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function U(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return x(n)?n:void 0}var k,j,G=(k=function(e){return F(function(e,t){for(var n=-1,r=e?e.length:0,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}(e,W))},j=T(void 0===j?k.length-1:j,0),function(){for(var e=arguments,t=-1,n=T(e.length-j,0),r=Array(n);++t<n;)r[t]=e[j+t];t=-1;for(var i=Array(j+1);++t<j;)i[t]=e[t];return i[j]=r,s(k,this,i)});function H(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!V(e)}function W(e){return function(e){return!!e&&"object"==typeof e}(e)&&H(e)}function V(e){var t=Y(e)?R.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function Y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=G},function(e,t,n){"use strict";const r=n(223);e.exports=r},function(e,t,n){"use strict";const r=n(7)("sc2:debug:engine"),i=n(7)("sc2:silly:engine"),o=n(88),s=n(254).number("StartPort").number("GamePort").string("LadderServer").string("OpponentId").argv,a=n(145),u=n(331),{launcher:l,findMap:c}=n(332),p=n(337),d=n(396),f=n(398),h=n(399),g=n(401),{Race:y,StatusId:E}=n(0),{NodeSC2Error:m,GameEndedError:A}=n(65),v=parseInt(process.env.STEP_COUNT,10)||20,R=()=>{};e.exports=function(e={}){const t=s.GamePort||s.StartPort||s.LadderServer,n={port:5e3,host:"127.0.0.1",launch:!0,...e};t&&(n.port=s.GamePort,n.host=s.LadderServer),n.onGameEnd=n.onGameEnd||R;const b=p(),{actions:{_client:C}}=b.resources.get(),T={getWorld:()=>b,_totalLoopDelay:0,_gameLeft:!1,launcher:l,use(e){Array.isArray(e)?e.forEach(e=>this.systems.push(e)):this.systems.push(e)},systems:[],async connect(){n.launch&&!t&&await l(n);const e=await C.connect(n);return C._ws.on("error",e=>{r("Received error from transport layer:",e)}),C._ws.on("leftGame",()=>{this._gameLeft=!0}),e},async runGame(e="",t=[]){const n=t.find(e=>!!e.agent);return n.agent.settings.race=n.race,await this.createGame(e,t),this.joinGame(n.agent)},async createGame(e="",n=[],i=!1,o=null){if(t)return void r("Engine tried to create a game, but is being managed by a ladder manager - skipping...");if(1!==C.status&&5!==C.status)return void console.warn('cannot create a game unless in "launched" or "ended" status, current status is '+E[C.status]);let s,a;if(e.includes("SC2Map"))s=e;else try{s=await c(e)}catch(t){a=e}const u={realtime:i,playerSetup:n};return s?u.localMap={mapPath:s}:u.battlenetMapName=a,o&&(u.randomSeed=o),r("CREATE GAME REQUEST: ",u),C.createGame(u)},async joinGame(e,n={}){if(b.agent=e,!e.interface.raw)throw new Error("`raw` is currently the only interface supported by this engine.");switch(C.status){case 1:case 2:{let i={race:e.settings&&e.settings.race||y.RANDOM,options:e.interface,...n};if(t){let e=s.StartPort+1;i={...i,sharedPort:e++,serverPorts:{gamePort:e++,basePort:e++},clientPorts:[{gamePort:e++,basePort:e++},{gamePort:e++,basePort:e++}]}}const o=await C.joinGame(i);return r("JOIN GAME RES: ",o),e.playerId=o.playerId,this.firstRun()}case 3:return console.warn("cannot join lobby for a game already in progress, attemping to resync to existing game..."),e.playerId=1,this.firstRun();default:throw new Error('cannot join a game this engine didn\'t create unless in "launched" status, current status is '+E[C.status])}},async firstRun(){const{data:e,resources:n,agent:r}=b;t&&(r.opponent=r.opponent||{},r.opponent.id=s.OpponentId);const i=await C.data({abilityId:!0,unitTypeId:!0,upgradeId:!0,buffId:!0,effectId:!0});["abilities","units","upgrades","buffs","effects"].forEach(t=>{i[t]&&e.set(t,i[t])}),[...this.systems,...r.systems,r,d].forEach(e=>e.setup(b));const{events:o}=n.get();return o.write({name:"gameStart",type:"all"}),await this.dispatch(),this.runLoop()},onGameEnd(e){return(!e||e.length<=0)&&console.warn("The game ended but there is no result data"),r("Average step delay for this game: "+this._totalLoopDelay/b.resources.get().frame.getGameLoop()),[b,e]},async runLoop(){const{events:e,frame:t}=b.resources.get();if(3!==C.status)throw r("exiting loop, status no longer in game"),this.onGameEnd(t._result),new A("Status no longer in game");this._lastRequest&&(this._loopDelay=u(process.hrtime(this._lastRequest)).milliseconds,this._loopDelay,this._totalLoopDelay+=this._loopDelay/v),this._lastRequest=process.hrtime(),process.env.DELAY&&await o.delay(parseInt(process.env.DELAY,10)),await C.step({count:v}),e.write({name:"step",type:"all",data:t.getGameLoop()+v});try{await this.dispatch()}catch(e){if(e instanceof A)return this.onGameEnd(e.data);throw console.warn("An error of an unknown type has propegated up to the game loop",e),e}return this.runLoop()},async dispatch(){const e=this.systems;await o.mapSeries(e,e=>e(b));const{agent:t,resources:n}=b,{events:s}=n.get(),u=s.read(t.readerId).filter(e=>t["on"+a(e.name)]),l=u.length>0?u.map(e=>t["on"+a(e.name)](b,e.data,e).catch(t=>{t instanceof m?i(`Agent handler error: on${a(e.name)}: `,t):(console.warn(`Agent handler error: on${a(e.name)}: `),r(t.message),r(t.stack))})):[];await o.all(l);const{agent:{systems:c}}=b;return await o.map(c,e=>e(b)),d(b)},shutdown(){b.resources.get().actions._client.close()},_lastRequest:null};return T.use([f,h,g]),T}},function(e,t,n){"use strict";e.exports=function(){var t=function(){return new E("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},r=function(){return new L.PromiseInspection(this._target())},i=function(e){return L.reject(new E(e))};function o(){}var s={},a=n(11);a.setReflectHandler(r);var u=function(){var e=process.domain;return void 0===e?null:e},l=function(){return{domain:u(),async:null}},c=a.isNode&&a.nodeSupportsAsyncResource?n(130).AsyncResource:null,p=function(){return{domain:u(),async:new c("Bluebird::Promise")}},d=a.isNode?l:function(){return null};a.notEnumerableProp(L,"_getContext",d);var f=n(47),h=n(225),g=new h;f.defineProperty(L,"_async",{value:g});var y=n(43),E=L.TypeError=y.TypeError;L.RangeError=y.RangeError;var m=L.CancellationError=y.CancellationError;L.TimeoutError=y.TimeoutError,L.OperationalError=y.OperationalError,L.RejectionError=y.OperationalError,L.AggregateError=y.AggregateError;var A=function(){},v={},R={},b=n(228)(L,A),C=n(229)(L,A,b,i,o),T=n(230)(L),S=T.create,O=n(231)(L,T,(function(){d=p,a.notEnumerableProp(L,"_getContext",p)}),(function(){d=l,a.notEnumerableProp(L,"_getContext",l)})),_=(O.CapturedTrace,n(232)(L,b,R)),I=n(131)(R),P=n(132),w=a.errorObj,N=a.tryCatch;function L(e){e!==A&&function(e,t){if(null==e||e.constructor!==L)throw new E("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new E("expecting a function but got "+a.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function D(e){this.promise._resolveCallback(e)}function x(e){this.promise._rejectCallback(e,!1)}function F(e){var t=new L(A);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return L.prototype.toString=function(){return"[object Promise]"},L.prototype.caught=L.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),o=0;for(n=0;n<t-1;++n){var s=arguments[n];if(!a.isObject(s))return i("Catch statement predicate: expecting an object but got "+a.classString(s));r[o++]=s}if(r.length=o,"function"!=typeof(e=arguments[n]))throw new E("The last argument to .catch() must be a function, got "+a.toString(e));return this.then(void 0,I(r,e,this))}return this.then(void 0,e)},L.prototype.reflect=function(){return this._then(r,r,void 0,this,void 0)},L.prototype.then=function(e,t){if(O.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+a.classString(e);arguments.length>1&&(n+=", "+a.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},L.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},L.prototype.spread=function(e){return"function"!=typeof e?i("expecting a function but got "+a.classString(e)):this.all()._then(e,void 0,void 0,v,void 0)},L.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},L.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new C(this).promise()},L.prototype.error=function(e){return this.caught(a.originatesFromRejection,e)},L.getNewLibraryCopy=e.exports,L.is=function(e){return e instanceof L},L.fromNode=L.fromCallback=function(e){var t=new L(A);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=N(e)(P(t,n));return r===w&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},L.all=function(e){return new C(e).promise()},L.cast=function(e){var t=b(e);return t instanceof L||((t=new L(A))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},L.resolve=L.fulfilled=L.cast,L.reject=L.rejected=function(e){var t=new L(A);return t._captureStackTrace(),t._rejectCallback(e,!0),t},L.setScheduler=function(e){if("function"!=typeof e)throw new E("expecting a function but got "+a.classString(e));return g.setScheduler(e)},L.prototype._then=function(e,t,n,r,i){var o=void 0!==i,s=o?i:new L(A),u=this._target(),l=u._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var c=d();if(0!=(50397184&l)){var p,f,h=u._settlePromiseCtx;0!=(33554432&l)?(f=u._rejectionHandler0,p=e):0!=(16777216&l)?(f=u._fulfillmentHandler0,p=t,u._unsetRejectionIsUnhandled()):(h=u._settlePromiseLateCancellationObserver,f=new m("late cancellation observer"),u._attachExtraTrace(f),p=t),g.invoke(h,u,{handler:a.contextBind(c,p),promise:s,receiver:r,value:f})}else u._addCallbacks(e,t,s,r,c);return s},L.prototype._length=function(){return 65535&this._bitField},L.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},L.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},L.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},L.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},L.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},L.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},L.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},L.prototype._isFinal=function(){return(4194304&this._bitField)>0},L.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},L.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},L.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},L.prototype._setAsyncGuaranteed=function(){if(!g.hasCustomScheduler()){var e=this._bitField;this._bitField=e|(536870912&e)>>2^134217728}},L.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},L.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==s)return void 0===t&&this._isBound()?this._boundValue():t},L.prototype._promiseAt=function(e){return this[4*e-4+2]},L.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},L.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},L.prototype._boundValue=function(){},L.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=s),this._addCallbacks(t,n,r,i,null)},L.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=s),this._addCallbacks(n,r,i,o,null)},L.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=a.contextBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=a.contextBind(i,t));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof e&&(this[s+0]=a.contextBind(i,e)),"function"==typeof t&&(this[s+1]=a.contextBind(i,t))}return this._setLength(o+1),o},L.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},L.prototype._resolveCallback=function(e,n){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(t(),!1);var r=b(e,this);if(!(r instanceof L))return this._fulfill(e);n&&this._propagateFrom(r,2);var i=r._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var s=this._length();s>0&&i._migrateCallback0(this);for(var a=1;a<s;++a)i._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var u=new m("late cancellation observer");i._attachExtraTrace(u),this._reject(u)}}else this._reject(t())}},L.prototype._rejectCallback=function(e,t,n){var r=a.ensureErrorObject(e),i=r===e;if(!i&&!n&&O.warnings()){var o="a promise was rejected with a non-error: "+a.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},L.prototype._resolveFromExecutor=function(e){if(e!==A){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,(function(e){t._resolveCallback(e)}),(function(e){t._rejectCallback(e,n)}));n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},L.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),t===v?n&&"number"==typeof n.length?o=N(e).apply(this._boundValue(),n):(o=w).e=new E("cannot .spread() a non-array: "+a.classString(n)):o=N(e).call(t,n);var s=r._popContext();0==(65536&(i=r._bitField))&&(o===R?r._reject(n):o===w?r._rejectCallback(o.e,!1):(O.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},L.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},L.prototype._followee=function(){return this._rejectionHandler0},L.prototype._setFollowee=function(e){this._rejectionHandler0=e},L.prototype._settlePromise=function(e,t,n,i){var s=e instanceof L,a=this._bitField,u=0!=(134217728&a);0!=(65536&a)?(s&&e._invokeInternalOnCancel(),n instanceof _&&n.isFinallyHandler()?(n.cancelPromise=e,N(t).call(n,i)===w&&e._reject(w.e)):t===r?e._fulfill(r.call(n)):n instanceof o?n._promiseCancelled(e):s||e instanceof C?e._cancel():n.cancel()):"function"==typeof t?s?(u&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,i,e)):t.call(n,i,e):n instanceof o?n._isResolved()||(0!=(33554432&a)?n._promiseFulfilled(i,e):n._promiseRejected(i,e)):s&&(u&&e._setAsyncGuaranteed(),0!=(33554432&a)?e._fulfill(i):e._reject(i))},L.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;"function"==typeof t?n instanceof L?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof L&&n._reject(i)},L.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},L.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},L.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},L.prototype._fulfill=function(e){var n=this._bitField;if(!((117506048&n)>>>16)){if(e===this){var r=t();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=e,(65535&n)>0&&(0!=(134217728&n)?this._settlePromises():g.settlePromises(this),this._dereferenceTrace())}},L.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return g.fatalError(e,a.isNode);(65535&t)>0?g.settlePromises(this):this._ensurePossibleRejectionHandled()}},L.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},L.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},L.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},L.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&f.defineProperty(L.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),L.defer=L.pending=function(){return O.deprecated("Promise.defer","new Promise"),{promise:new L(A),resolve:D,reject:x}},a.notEnumerableProp(L,"_makeSelfResolutionError",t),n(233)(L,A,b,i,O),n(234)(L,A,b,O),n(235)(L,C,i,O),n(236)(L),n(237)(L),n(238)(L,C,b,A,g),L.Promise=L,L.version="3.7.2",n(239)(L),n(240)(L,i,A,b,o,O),n(241)(L,C,i,b,A,O),n(242)(L),n(243)(L,A),n(244)(L,C,b,i),n(245)(L,A,b,i),n(246)(L,C,i,b,A,O),n(247)(L,C,O),n(248)(L,C,i),n(249)(L,A,O),n(250)(L,i,b,S,A,O),n(251)(L),n(252)(L,A),n(253)(L,A),a.toFastProperties(L),a.toFastProperties(L.prototype),F({a:1}),F({b:2}),F({c:3}),F(1),F((function(){})),F(void 0),F(!1),F(new L(A)),O.setBounds(h.firstLineError,a.lastLineError),L}},function(e,t,n){"use strict";var r;try{throw new Error}catch(e){r=e}var i=n(226),o=n(227);function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new o(16),this._normalQueue=new o(16),this._haveDrainedQueues=!1;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=i}function a(e){for(;e.length()>0;)u(e)}function u(e){var t=e.shift();if("function"!=typeof t)t._settlePromises();else{var n=e.shift(),r=e.shift();t.call(n,r)}}s.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(e,t){t?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),process.exit(2)):this.throwLater(e)},s.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout((function(){e(t)}),0);else try{this._schedule((function(){e(t)}))}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},s.prototype.invokeLater=function(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()},s.prototype.invoke=function(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()},s.prototype.settlePromises=function(e){this._normalQueue._pushOne(e),this._queueTick()},s.prototype._drainQueues=function(){a(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,a(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},e.exports=s,e.exports.firstLineError=r},function(e,t,n){"use strict";var r,i=n(11),o=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var s=global.setImmediate,a=process.nextTick;r=i.isRecentNode?function(e){s.call(global,e)}:function(e){a.call(process,e)}}else if("function"==typeof o&&"function"==typeof o.resolve){var u=o.resolve();r=function(e){u.then(e)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)||!("classList"in document.documentElement)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div");new MutationObserver((function(){e.classList.toggle("foo"),n=!1})).observe(r,t);return function(i){var o=new MutationObserver((function(){o.disconnect(),i()}));o.observe(e,t),n||(n=!0,r.classList.toggle("foo"))}}();e.exports=r},function(e,t,n){"use strict";function r(e){this._capacity=e,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e},r.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},r.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,n,r,i){for(var o=0;o<i;++o)n[o+r]=e[o+t],e[o+t]=void 0}(this,0,this,t,this._front+this._length&t-1)},e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t){var r=n(11),i=r.errorObj,o=r.isObject;var s={}.hasOwnProperty;return function(n,a){if(o(n)){if(n instanceof e)return n;var u=function(e){try{return function(e){return e.then}(e)}catch(e){return i.e=e,i}}(n);if(u===i){a&&a._pushContext();var l=e.reject(u.e);return a&&a._popContext(),l}if("function"==typeof u){if(function(e){try{return s.call(e,"_promise0")}catch(e){return!1}}(n)){l=new e(t);return n._then(l._fulfill,l._reject,void 0,l,null),l}return function(n,o,s){var a=new e(t),u=a;s&&s._pushContext();a._captureStackTrace(),s&&s._popContext();var l=r.tryCatch(o).call(n,(function(e){if(!a)return;a._resolveCallback(e),a=null}),(function(e){if(!a)return;a._rejectCallback(e,!1,!0),a=null}));!1,a&&l===i&&(a._rejectCallback(l.e,!0,!0),a=null);return u}(n,u,a)}}return n}}},function(e,t,n){"use strict";e.exports=function(e,t,r,i,o){var s=n(11);s.isArray;function a(n){var r=this._promise=new e(t);n instanceof e&&(r._propagateFrom(n,3),n.suppressUnhandledRejections()),r._setOnCancel(this),this._values=n,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function t(n,o){var a=r(this._values,this._promise);if(a instanceof e){var u=(a=a._target())._bitField;if(this._values=a,0==(50397184&u))return this._promise._setAsyncGuaranteed(),a._then(t,this._reject,void 0,this,o);if(0==(33554432&u))return 0!=(16777216&u)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===o?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(o));else{var l=i("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(l,!1)}},a.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;a<n;++a){var u=r(t[a],i);s=u instanceof e?(u=u._target())._bitField:null,o?null!==s&&u.suppressUnhandledRejections():null!==s?0==(50397184&s)?(u._proxy(this,a),this._values[a]=u):o=0!=(33554432&s)?this._promiseFulfilled(u._value(),a):0!=(16777216&s)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(u,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},function(e,t,n){"use strict";e.exports=function(e){var t=!1,n=[];function r(){this._trace=new r.CapturedTrace(i())}function i(){var e=n.length-1;if(e>=0)return n[e]}return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var e=n.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},r.CapturedTrace=null,r.create=function(){if(t)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=e.prototype._pushContext,o=e.prototype._popContext,s=e._peekContext,a=e.prototype._peekContext,u=e.prototype._promiseCreated;r.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=o,e._peekContext=s,e.prototype._peekContext=a,e.prototype._promiseCreated=u,t=!1},t=!0,e.prototype._pushContext=r.prototype._pushContext,e.prototype._popContext=r.prototype._popContext,e._peekContext=e.prototype._peekContext=i,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},r}},function(e,t,n){"use strict";e.exports=function(e,t,r,i){var o,s,a,u,l=e._async,c=n(43).Warning,p=n(11),d=n(47),f=p.canAttachTrace,h=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,g=/\((?:timers\.js):\d+:\d+\)/,y=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,E=null,m=null,A=!1,v=!(0==p.env("BLUEBIRD_DEBUG")||!p.env("BLUEBIRD_DEBUG")&&"development"!==p.env("NODE_ENV")),R=!(0==p.env("BLUEBIRD_WARNINGS")||!v&&!p.env("BLUEBIRD_WARNINGS")),b=!(0==p.env("BLUEBIRD_LONG_STACK_TRACES")||!v&&!p.env("BLUEBIRD_LONG_STACK_TRACES")),C=0!=p.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(R||!!p.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){var t=[];function n(){for(var e=0;e<t.length;++e)t[e]._notifyUnhandledRejection();r()}function r(){t.length=0}u=function(e){t.push(e),setTimeout(n,1)},d.defineProperty(e,"_unhandledRejectionCheck",{value:n}),d.defineProperty(e,"_unhandledRejectionClear",{value:r})}(),e.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},e.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),u(this))},e.prototype._notifyUnhandledRejectionIsHandled=function(){K("rejectionHandled",o,void 0,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},e.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),K("unhandledRejection",s,e,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(e,t,n){return W(e,t,n||this)},e.onPossiblyUnhandledRejection=function(t){var n=e._getContext();s=p.contextBind(n,t)},e.onUnhandledRejectionHandled=function(t){var n=e._getContext();o=p.contextBind(n,t)};var T=function(){};e.longStackTraces=function(){if(l.haveItemsQueued()&&!te.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!te.longStackTraces&&z()){var n=e.prototype._captureStackTrace,r=e.prototype._attachExtraTrace,i=e.prototype._dereferenceTrace;te.longStackTraces=!0,T=function(){if(l.haveItemsQueued()&&!te.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");e.prototype._captureStackTrace=n,e.prototype._attachExtraTrace=r,e.prototype._dereferenceTrace=i,t.deactivateLongStackTraces(),te.longStackTraces=!1},e.prototype._captureStackTrace=j,e.prototype._attachExtraTrace=G,e.prototype._dereferenceTrace=H,t.activateLongStackTraces()}},e.hasLongStackTraces=function(){return te.longStackTraces&&z()};var S={unhandledrejection:{before:function(){var e=p.global.onunhandledrejection;return p.global.onunhandledrejection=null,e},after:function(e){p.global.onunhandledrejection=e}},rejectionhandled:{before:function(){var e=p.global.onrejectionhandled;return p.global.onrejectionhandled=null,e},after:function(e){p.global.onrejectionhandled=e}}},O=function(){var e=function(e,t){if(!e)return!p.global.dispatchEvent(t);var n;try{return n=e.before(),!p.global.dispatchEvent(t)}finally{e.after(n)}};try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return p.global.dispatchEvent(t),function(t,n){t=t.toLowerCase();var r=new CustomEvent(t,{detail:n,cancelable:!0});return d.defineProperty(r,"promise",{value:n.promise}),d.defineProperty(r,"reason",{value:n.reason}),e(S[t],r)}}if("function"==typeof Event){t=new Event("CustomEvent");return p.global.dispatchEvent(t),function(t,n){t=t.toLowerCase();var r=new Event(t,{cancelable:!0});return r.detail=n,d.defineProperty(r,"promise",{value:n.promise}),d.defineProperty(r,"reason",{value:n.reason}),e(S[t],r)}}return(t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),p.global.dispatchEvent(t),function(t,n){t=t.toLowerCase();var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,!1,!0,n),e(S[t],r)}}catch(e){}return function(){return!1}}(),_=p.isNode?function(){return process.emit.apply(process,arguments)}:p.global?function(e){var t="on"+e.toLowerCase(),n=p.global[t];return!!n&&(n.apply(p.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function I(e,t){return{promise:t}}var P={promiseCreated:I,promiseFulfilled:I,promiseRejected:I,promiseResolved:I,promiseCancelled:I,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:I},w=function(e){var t=!1;try{t=_.apply(null,arguments)}catch(e){l.throwLater(e),t=!0}var n=!1;try{n=O(e,P[e].apply(null,arguments))}catch(e){l.throwLater(e),n=!0}return n||t};function N(){return!1}function L(e,t,n){var r=this;try{e(t,n,(function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+p.toString(e));r._attachCancellationCallback(e)}))}catch(e){return e}}function D(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?p.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function x(){return this._onCancelField}function F(e){this._onCancelField=e}function M(){this._cancellationParent=void 0,this._onCancelField=void 0}function B(e,t){if(0!=(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}e.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&T()),"warnings"in t){var n=t.warnings;te.warnings=!!n,C=te.warnings,p.isObject(n)&&"wForgottenReturn"in n&&(C=!!n.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!te.cancellation){if(l.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=M,e.prototype._propagateFrom=B,e.prototype._onCancel=x,e.prototype._setOnCancel=F,e.prototype._attachCancellationCallback=D,e.prototype._execute=L,U=B,te.cancellation=!0}if("monitoring"in t&&(t.monitoring&&!te.monitoring?(te.monitoring=!0,e.prototype._fireEvent=w):!t.monitoring&&te.monitoring&&(te.monitoring=!1,e.prototype._fireEvent=N)),"asyncHooks"in t&&p.nodeSupportsAsyncResource){var o=te.asyncHooks,s=!!t.asyncHooks;o!==s&&(te.asyncHooks=s,s?r():i())}return e},e.prototype._fireEvent=N,e.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(e){},e.prototype._attachCancellationCallback=function(e){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._dereferenceTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(e,t){};var U=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function k(){var t=this._boundTo;return void 0!==t&&t instanceof e?t.isFulfilled()?t.value():void 0:t}function j(){this._trace=new X(this._peekContext())}function G(e,t){if(f(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=Y(e);p.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),p.notEnumerableProp(e,"__stackCleaned__",!0)}}}function H(){this._trace=void 0}function W(t,n,r){if(te.warnings){var i,o=new c(t);if(n)r._attachExtraTrace(o);else if(te.longStackTraces&&(i=e._peekContext()))i.attachExtraTrace(o);else{var s=Y(o);o.stack=s.message+"\n"+s.stack.join("\n")}w("warning",o)||$(o,"",!0)}}function V(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||E.test(r),o=i&&Q(r);i&&!o&&(A&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function Y(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||E.test(r))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:V(t)}}function $(e,t,n){if("undefined"!=typeof console){var r;if(p.isObject(e)){var i=e.stack;r=t+m(i,e)}else r=t+String(e);"function"==typeof a?a(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function K(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(e){l.throwLater(e)}"unhandledRejection"===e?w(e,n,r)||i||$(n,"Unhandled rejection "):w(e,r)}function q(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():p.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){if(e.length<41)return e;return e.substr(0,38)+"..."}(t)+">, no stack trace)"}function z(){return"function"==typeof ee}var Q=function(){return!1},Z=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function J(e){var t=e.match(Z);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function X(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);ee(this,X),t>32&&this.uncycle()}p.inherits(X,Error),t.CapturedTrace=X,X.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;for(r=(e=this._length=r)-1;r>=0;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<e;++r){var s=n[t[r].stack];if(void 0!==s&&s!==r){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var a=r>0?t[r-1]:this;s<e-1?(a._parent=t[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var u=a._length+1,l=r-2;l>=0;--l)t[l]._length=u,u++;return}}}},X.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=Y(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(V(i.stack.split("\n"))),i=i._parent;!function(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(a=s;a>=0;--a){var u=r[a];if(t[i]!==u)break;t.pop(),i--}t=r}}(r),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(r),p.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}(n,r)),p.notEnumerableProp(e,"__stackCleaned__",!0)}};var ee=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():q(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,E=e,m=t;var n=Error.captureStackTrace;return Q=function(e){return h.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return E=/@/,m=t,A=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){r="stack"in e}return!("stack"in i)&&r&&"number"==typeof Error.stackTraceLimit?(E=e,m=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6}):(m=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?q(t):t.toString()},null)}();"undefined"!=typeof console&&void 0!==console.warn&&(a=function(e){console.warn(e)},p.isNode&&process.stderr.isTTY?a=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:p.isNode||"string"!=typeof(new Error).stack||(a=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var te={warnings:R,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return b&&e.longStackTraces(),{asyncHooks:function(){return te.asyncHooks},longStackTraces:function(){return te.longStackTraces},warnings:function(){return te.warnings},cancellation:function(){return te.cancellation},monitoring:function(){return te.monitoring},propagateFromFunction:function(){return U},boundValueFunction:function(){return k},checkForgottenReturns:function(e,t,n,r,i){if(void 0===e&&null!==t&&C){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",s="";if(t._trace){for(var a=t._trace.stack.split("\n"),u=V(a),l=u.length-1;l>=0;--l){var c=u[l];if(!g.test(c)){var p=c.match(y);p&&(o="at "+p[1]+":"+p[2]+":"+p[3]+" ");break}}if(u.length>0){var d=u[0];for(l=0;l<a.length;++l)if(a[l]===d){l>0&&(s="\n"+a[l-1]);break}}}var f="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(f,!0,t)}},setBounds:function(e,t){if(z()){for(var n,r,i=(e.stack||"").split("\n"),o=(t.stack||"").split("\n"),s=-1,a=-1,u=0;u<i.length;++u){if(l=J(i[u])){n=l.fileName,s=l.line;break}}for(u=0;u<o.length;++u){var l;if(l=J(o[u])){r=l.fileName,a=l.line;break}}s<0||a<0||!n||!r||n!==r||s>=a||(Q=function(e){if(h.test(e))return!0;var t=J(e);return!!(t&&t.fileName===n&&s<=t.line&&t.line<=a)})}},warn:W,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),W(n)},CapturedTrace:X,fireDomEvent:O,fireGlobalEvent:_}}},function(e,t,n){"use strict";e.exports=function(e,t,r){var i=n(11),o=e.CancellationError,s=i.errorObj,a=n(131)(r);function u(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function l(e){this.finallyHandler=e}function c(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function p(){return f.call(this,this.promise._target()._settledValue())}function d(e){if(!c(this,e))return s.e=e,s}function f(n){var i=this.promise,a=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?a.call(i._boundValue()):a.call(i._boundValue(),n);if(u===r)return u;if(void 0!==u){i._setReturnedNonUndefined();var f=t(u,i);if(f instanceof e){if(null!=this.cancelPromise){if(f._isCancelled()){var h=new o("late cancellation observer");return i._attachExtraTrace(h),s.e=h,s}f.isPending()&&f._attachCancellationCallback(new l(this))}return f._then(p,d,void 0,this,void 0)}}}return i.isRejected()?(c(this),s.e=n,s):(c(this),n)}return u.prototype.isFinallyHandler=function(){return 0===this.type},l.prototype._resultCancelled=function(){c(this.finallyHandler)},e.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new u(this,t,e),void 0)},e.prototype.lastly=e.prototype.finally=function(e){return this._passThrough(e,0,f,f)},e.prototype.tap=function(e){return this._passThrough(e,1,f)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,f);var r,o=new Array(n-1),s=0;for(r=0;r<n-1;++r){var u=arguments[r];if(!i.isObject(u))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(u)));o[s++]=u}o.length=s;var l=arguments[r];return this._passThrough(a(o,l,this),1,void 0,f)},u}},function(e,t,n){"use strict";e.exports=function(e,t,r,i,o){var s=n(11),a=s.tryCatch;e.method=function(n){if("function"!=typeof n)throw new e.TypeError("expecting a function but got "+s.classString(n));return function(){var r=new e(t);r._captureStackTrace(),r._pushContext();var i=a(n).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e.try=function(n){if("function"!=typeof n)return i("expecting a function but got "+s.classString(n));var r,u=new e(t);if(u._captureStackTrace(),u._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],c=arguments[2];r=s.isArray(l)?a(n).apply(c,l):a(n).call(c,l)}else r=a(n)();var p=u._popContext();return o.checkForgottenReturns(r,p,"Promise.try",u),u._resolveFromSyncValue(r),u},e.prototype._resolveFromSyncValue=function(e){e===s.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var i=!1,o=function(e,t){this._reject(t)},s=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},a=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var l=n(o),c=new e(t);c._propagateFrom(this,1);var p=this._target();if(c._setBoundTo(l),l instanceof e){var d={promiseRejectionQueued:!1,promise:c,target:p,bindingPromise:l};p._then(t,s,void 0,c,d),l._then(a,u,void 0,c,d),c._setOnCancel(l)}else c._resolveCallback(p);return c},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},function(e,t,n){"use strict";e.exports=function(e,t,r,i){var o=n(11),s=o.tryCatch,a=o.errorObj,u=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=s(e).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else e._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,e)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},function(e,t,n){"use strict";e.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],r=function(){throw t};return this.caught(e,r)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},function(e,t,n){"use strict";e.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},function(e,t,n){"use strict";e.exports=function(e,t,r,i,o){var s,a=n(11),u=a.canEvaluate,l=a.tryCatch,c=a.errorObj;if(u){for(var p=function(e){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,e))},d=function(e){return new Function("promise","holder","                           \n            'use strict';                                                    \n            holder.pIndex = promise;                                         \n            ".replace(/Index/g,e))},f=function(t){for(var n=new Array(t),r=0;r<n.length;++r)n[r]="this.p"+(r+1);var i=n.join(" = ")+" = null;",s="var promise;\n"+n.map((function(e){return"                                                         \n                promise = "+e+";                                      \n                if (promise instanceof Promise) {                            \n                    promise.cancel();                                        \n                }                                                            \n            "})).join("\n"),a=n.join(", "),u="Holder$"+t,p="return function(tryCatch, errorObj, Promise, async) {    \n            'use strict';                                                    \n            function [TheName](fn) {                                         \n                [TheProperties]                                              \n                this.fn = fn;                                                \n                this.asyncNeeded = true;                                     \n                this.now = 0;                                                \n            }                                                                \n                                                                             \n            [TheName].prototype._callFunction = function(promise) {          \n                promise._pushContext();                                      \n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \n                promise._popContext();                                       \n                if (ret === errorObj) {                                      \n                    promise._rejectCallback(ret.e, false);                   \n                } else {                                                     \n                    promise._resolveCallback(ret);                           \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype.checkFulfillment = function(promise) {       \n                var now = ++this.now;                                        \n                if (now === [TheTotal]) {                                    \n                    if (this.asyncNeeded) {                                  \n                        async.invoke(this._callFunction, this, promise);     \n                    } else {                                                 \n                        this._callFunction(promise);                         \n                    }                                                        \n                                                                             \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype._resultCancelled = function() {              \n                [CancellationCode]                                           \n            };                                                               \n                                                                             \n            return [TheName];                                                \n        }(tryCatch, errorObj, Promise, async);                               \n        ";return p=p.replace(/\[TheName\]/g,u).replace(/\[TheTotal\]/g,t).replace(/\[ThePassedArguments\]/g,a).replace(/\[TheProperties\]/g,i).replace(/\[CancellationCode\]/g,s),new Function("tryCatch","errorObj","Promise","async",p)(l,c,e,o)},h=[],g=[],y=[],E=0;E<8;++E)h.push(f(E+1)),g.push(p(E+1)),y.push(d(E+1));s=function(e){this._reject(e)}}e.join=function(){var n,o=arguments.length-1;if(o>0&&"function"==typeof arguments[o]&&(n=arguments[o],o<=8&&u)){(b=new e(i))._captureStackTrace();for(var l=h[o-1],c=new l(n),p=g,d=0;d<o;++d){var f=r(arguments[d],b);if(f instanceof e){var E=(f=f._target())._bitField;0==(50397184&E)?(f._then(p[d],s,void 0,b,c),y[d](f,c),c.asyncNeeded=!1):0!=(33554432&E)?p[d].call(b,f._value(),c):0!=(16777216&E)?b._reject(f._reason()):b._cancel()}else p[d].call(b,f,c)}if(!b._isFateSealed()){if(c.asyncNeeded){var m=e._getContext();c.fn=a.contextBind(m,c.fn)}b._setAsyncGuaranteed(),b._setOnCancel(c)}return b}for(var A=arguments.length,v=new Array(A),R=0;R<A;++R)v[R]=arguments[R];n&&v.pop();var b=new t(v).promise();return void 0!==n?b.spread(n):b}}},function(e,t,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){var t,r,s=n(11),a=s.canEvaluate,u=s.isIdentifier,l=function(e){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,e))(d)},c=function(e){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",e))},p=function(e,t,n){var r=n[e];if("function"!=typeof r){if(!u(e))return null;if(r=t(e),n[e]=r,n[" size"]++,n[" size"]>512){for(var i=Object.keys(n),o=0;o<256;++o)delete n[i[o]];n[" size"]=i.length-256}}return r};function d(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+s.classString(t)+" has no method '"+s.toString(n)+"'";throw new e.TypeError(i)}return r}function f(e){return d(e,this.pop()).apply(e,this)}function h(e){return e[this]}function g(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}t=function(e){return p(e,l,i)},r=function(e){return p(e,c,o)},e.prototype.call=function(e){for(var n=arguments.length,r=new Array(Math.max(n-1,0)),i=1;i<n;++i)r[i-1]=arguments[i];if(a){var o=t(e);if(null!==o)return this._then(o,void 0,void 0,r,void 0)}return r.push(e),this._then(f,void 0,void 0,r,void 0)},e.prototype.get=function(e){var t;if("number"==typeof e)t=g;else if(a){var n=r(e);t=null!==n?n:h}else t=h;return this._then(t,void 0,void 0,e,void 0)}}},function(e,t,n){"use strict";e.exports=function(e,t,r,i,o,s){var a=n(43).TypeError,u=n(11),l=u.errorObj,c=u.tryCatch,p=[];function d(t,n,i,o){if(s.cancellation()){var a=new e(r),u=this._finallyPromise=new e(r);this._promise=a.lastly((function(){return u})),a._captureStackTrace(),a._setOnCancel(this)}else{(this._promise=new e(r))._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(p):p,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(d,o),d.prototype._isResolved=function(){return null===this._promise},d.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=c(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),t=c(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},d.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=c(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=c(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(t){var n=this._promise;if(t===l)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof e||null!==(o=function(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=c(n[o])(t);if(r._popContext(),s===l){r._pushContext();var a=e.reject(l.e);return r._popContext(),a}var u=i(s,r);if(u instanceof e)return u}return null}(o,this._yieldHandlers,this._promise))){var s=(o=o._target())._bitField;0==(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&s)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&s)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(e,t){if("function"!=typeof e)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=d,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new r(void 0,void 0,n,i),s=o.promise();return o._generator=t,o._promiseFulfilled(void 0),s}},e.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new a("expecting a function but got "+u.classString(e));p.push(e)},e.spawn=function(n){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof n)return t("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new d(n,this),i=r.promise();return r._run(e.spawn),i}}},function(e,t,n){"use strict";e.exports=function(e,t,r,i,o,s){var a=n(11),u=a.tryCatch,l=a.errorObj,c=e._async;function p(t,n,r,i){this.constructor$(t),this._promise._captureStackTrace();var s=e._getContext();if(this._callback=a.contextBind(s,n),this._preservedValues=i===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],c.invoke(this._asyncInit,this,void 0),a.isArray(t))for(var u=0;u<t.length;++u){var l=t[u];l instanceof e&&l.suppressUnhandledRejections()}}function d(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+a.classString(n));var s=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+a.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+a.classString(i.concurrency)));s=i.concurrency}return new p(t,n,s="number"==typeof s&&isFinite(s)&&s>=1?s:0,o).promise()}a.inherits(p,t),p.prototype._asyncInit=function(){this._init$(void 0,-2)},p.prototype._init=function(){},p.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),a=this._preservedValues,c=this._limit;if(n<0){if(r[n=-1*n-1]=t,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return r[n]=t,this._queue.push(n),!1;null!==a&&(a[n]=t);var p=this._promise,d=this._callback,f=p._boundValue();p._pushContext();var h=u(d).call(f,t,n,o),g=p._popContext();if(s.checkForgottenReturns(h,g,null!==a?"Promise.filter":"Promise.map",p),h===l)return this._reject(h.e),!0;var y=i(h,this._promise);if(y instanceof e){var E=(y=y._target())._bitField;if(0==(50397184&E))return c>=1&&this._inFlight++,r[n]=y,y._proxy(this,-1*(n+1)),!1;if(0==(33554432&E))return 0!=(16777216&E)?(this._reject(y._reason()),!0):(this._cancel(),!0);h=y._value()}r[n]=h}return++this._totalResolved>=o&&(null!==a?this._filter(r,a):this._resolve(r),!0)},p.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},p.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;o<n;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},p.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(e,t){return d(this,e,t,null)},e.map=function(e,t,n,r){return d(e,t,n,r)}}},function(e,t,n){"use strict";e.exports=function(e){var t=n(11),r=e._async,i=t.tryCatch,o=t.errorObj;function s(e,n){if(!t.isArray(e))return a.call(this,e,n);var s=i(n).apply(this._boundValue(),[null].concat(e));s===o&&r.throwLater(s.e)}function a(e,t){var n=this._boundValue(),s=void 0===e?i(t).call(n,null):i(t).call(n,null,e);s===o&&r.throwLater(s.e)}function u(e,t){if(!e){var n=new Error(e+"");n.cause=e,e=n}var s=i(t).call(this._boundValue(),e);s===o&&r.throwLater(s.e)}e.prototype.asCallback=e.prototype.nodeify=function(e,t){if("function"==typeof e){var n=a;void 0!==t&&Object(t).spread&&(n=s),this._then(n,u,void 0,this,e)}return this}}},function(e,t,n){"use strict";e.exports=function(e,t){var r={},i=n(11),o=n(132),s=i.withAppended,a=i.maybeWrapAsError,u=i.canEvaluate,l=n(43).TypeError,c={__isPromisified__:!0},p=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),d=function(e){return i.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function f(e){return!p.test(e)}function h(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function g(e,t,n){var r=i.getDataPropertyOrDefault(e,t+n,c);return!!r&&h(r)}function y(e,t,n,r){for(var o=i.inheritedDataKeys(e),s=[],a=0;a<o.length;++a){var u=o[a],c=e[u],p=r===d||d(u);"function"!=typeof c||h(c)||g(e,u,t)||!r(u,c,e,p)||s.push(u,c)}return function(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<e.length;s+=2)if(e[s]===o)throw new l("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(s,t,n),s}var E=u?function(n,u,l,c,p,d){var f=Math.max(0,function(e){return"number"==typeof e.length?Math.max(Math.min(e.length,1024),0):0}(c)-1),h=function(e){for(var t=[e],n=Math.max(0,e-1-3),r=e-1;r>=n;--r)t.push(r);for(r=e+1;r<=3;++r)t.push(r);return t}(f),g="string"==typeof n||u===r;function y(e){var t,n=(t=e,i.filledRange(t,"_arg","")).join(", "),r=e>0?", ":"";return(g?"ret = callback.call(this, {{args}}, nodeback); break;\n":void 0===u?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n").replace("{{args}}",n).replace(", ",r)}var E="string"==typeof n?"this != null ? this['"+n+"'] : fn":"fn",m="'use strict';                                                \n        var ret = function (Parameters) {                                    \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._captureStackTrace();                                    \n            var nodeback = nodebackForPromise(promise, "+d+");   \n            var ret;                                                         \n            var callback = tryCatch([GetFunctionCode]);                      \n            switch(len) {                                                    \n                [CodeForSwitchCase]                                          \n            }                                                                \n            if (ret === errorObj) {                                          \n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n            }                                                                \n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \n            return promise;                                                  \n        };                                                                   \n        notEnumerableProp(ret, '__isPromisified__', true);                   \n        return ret;                                                          \n    ".replace("[CodeForSwitchCase]",function(){for(var e="",t=0;t<h.length;++t)e+="case "+h[t]+":"+y(h[t]);return e+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = nodeback;                                              \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",g?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n")}()).replace("[GetFunctionCode]",E);return m=m.replace("Parameters",function(e){return i.filledRange(Math.max(e,3),"_arg","")}(f)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",m)(e,c,u,s,a,o,i.tryCatch,i.errorObj,i.notEnumerableProp,t)}:function(n,u,l,c,p,d){var f=function(){return this}(),h=n;function g(){var i=u;u===r&&(i=this);var l=new e(t);l._captureStackTrace();var c="string"==typeof h&&this!==f?this[h]:n,p=o(l,d);try{c.apply(i,s(arguments,p))}catch(e){l._rejectCallback(a(e),!0,!0)}return l._isFateSealed()||l._setAsyncGuaranteed(),l}return"string"==typeof h&&(n=c),i.notEnumerableProp(g,"__isPromisified__",!0),g};function m(e,t,n,o,s){for(var a=new RegExp(t.replace(/([$])/,"\\$")+"$"),u=y(e,t,a,n),l=0,c=u.length;l<c;l+=2){var p=u[l],d=u[l+1],f=p+t;if(o===E)e[f]=E(p,r,p,d,t,s);else{var h=o(d,(function(){return E(p,r,p,d,t,s)}));i.notEnumerableProp(h,"__isPromisified__",!0),e[f]=h}}return i.toFastProperties(e),e}e.promisify=function(e,t){if("function"!=typeof e)throw new l("expecting a function but got "+i.classString(e));if(h(e))return e;var n=function(e,t,n){return E(e,t,void 0,e,null,n)}(e,void 0===(t=Object(t)).context?r:t.context,!!t.multiArgs);return i.copyDescriptors(e,n,f),n},e.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new l("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(t=Object(t)).multiArgs,r=t.suffix;"string"!=typeof r&&(r="Async");var o=t.filter;"function"!=typeof o&&(o=d);var s=t.promisifier;if("function"!=typeof s&&(s=E),!i.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=i.inheritedDataKeys(e),u=0;u<a.length;++u){var c=e[a[u]];"constructor"!==a[u]&&i.isClass(c)&&(m(c.prototype,r,o,s,n),m(c,r,o,s,n))}return m(e,r,o,s,n)}}},function(e,t,n){"use strict";e.exports=function(e,t,r,i){var o,s=n(11),a=s.isObject,u=n(47);"function"==typeof Map&&(o=Map);var l=function(){var e=0,t=0;function n(n,r){this[e]=n,this[e+t]=r,e++}return function(r){t=r.size,e=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function c(e){var t,n=!1;if(void 0!==o&&e instanceof o)t=l(e),n=!0;else{var r=u.keys(e),i=r.length;t=new Array(2*i);for(var s=0;s<i;++s){var a=r[s];t[s]=e[a],t[s+i]=a}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function p(t){var n,o=r(t);return a(o)?(n=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new c(o).promise(),o instanceof e&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}s.inherits(c,t),c.prototype._init=function(){},c.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(e){for(var t=new o,n=e.length/2|0,r=0;r<n;++r){var i=e[n+r],s=e[r];t.set(i,s)}return t}(this._values);else{n={};for(var r=this.length(),i=0,s=this.length();i<s;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},c.prototype.shouldCopyValues=function(){return!1},c.prototype.getActualLength=function(e){return e>>1},e.prototype.props=function(){return p(this)},e.props=function(e){return p(e)}}},function(e,t,n){"use strict";e.exports=function(e,t,r,i){var o=n(11);function s(n,a){var u,l=r(n);if(l instanceof e)return(u=l).then((function(e){return s(e,u)}));if(null===(n=o.asArray(n)))return i("expecting an array or an iterable object but got "+o.classString(n));var c=new e(t);void 0!==a&&c._propagateFrom(a,3);for(var p=c._fulfill,d=c._reject,f=0,h=n.length;f<h;++f){var g=n[f];(void 0!==g||f in n)&&e.cast(g)._then(p,d,void 0,c,null)}return c}e.race=function(e){return s(e,void 0)},e.prototype.race=function(){return s(this,void 0)}}},function(e,t,n){"use strict";e.exports=function(e,t,r,i,o,s){var a=n(11),u=a.tryCatch;function l(t,n,r,i){this.constructor$(t);var s=e._getContext();this._fn=a.contextBind(s,n),void 0!==r&&(r=e.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function c(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function p(e,t,n,i){return"function"!=typeof t?r("expecting a function but got "+a.classString(t)):new l(e,t,n,i).promise()}function d(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(f,void 0,void 0,this,void 0)):f.call(this,n)}function f(t){var n,r=this.array,i=r._promise,o=u(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),t,this.index,this.length):o.call(i._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(r._currentCancellable=n);var a=i._popContext();return s.checkForgottenReturns(n,a,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}a.inherits(l,t),l.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},l.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},l.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},l.prototype._iterate=function(t){var n,r;this._values=t;var i=t.length;void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n;for(var o=r;o<i;++o){var s=t[o];s instanceof e&&s.suppressUnhandledRejections()}if(!n.isRejected())for(;r<i;++r){var a={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(d,void 0,void 0,a,void 0),0==(127&r)&&n._setNoAsyncGuarantee()}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(c,c,void 0,n,this)},e.prototype.reduce=function(e,t){return p(this,e,t,null)},e.reduce=function(e,t,n,r){return p(e,t,n,r)}}},function(e,t,n){"use strict";e.exports=function(e,t,r){var i=e.PromiseInspection;function o(e){this.constructor$(e)}n(11).inherits(o,t),o.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(e,t){var n=new i;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},o.prototype._promiseRejected=function(e,t){var n=new i;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},e.settle=function(e){return r.deprecated(".settle()",".reflect()"),new o(e).promise()},e.allSettled=function(e){return new o(e).promise()},e.prototype.settle=function(){return e.settle(this)}}},function(e,t,n){"use strict";e.exports=function(e,t,r){var i=n(11),o=n(43).RangeError,s=n(43).AggregateError,a=i.isArray,u={};function l(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function c(e,t){if((0|t)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new l(e),i=n.promise();return n.setHowMany(t),n.init(),i}i.inherits(l,t),l.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=a(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},l.prototype.init=function(){this._initialized=!0,this._init()},l.prototype.setUnwrap=function(){this._unwrap=!0},l.prototype.howMany=function(){return this._howMany},l.prototype.setHowMany=function(e){this._howMany=e},l.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},l.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},l.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},l.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new s,t=this.length();t<this._values.length;++t)this._values[t]!==u&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},l.prototype._fulfilled=function(){return this._totalResolved},l.prototype._rejected=function(){return this._values.length-this.length()},l.prototype._addRejected=function(e){this._values.push(e)},l.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},l.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},l.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new o(t)},l.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(e,t){return c(e,t)},e.prototype.some=function(e){return c(this,e)},e._SomePromiseArray=l}},function(e,t,n){"use strict";e.exports=function(e,t,r){var i=n(11),o=e.TimeoutError;function s(e){this.handle=e}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(e){return u(+this).thenReturn(e)},u=e.delay=function(n,i){var o,u;return void 0!==i?(o=e.resolve(i)._then(a,null,null,n,void 0),r.cancellation()&&i instanceof e&&o._setOnCancel(i)):(o=new e(t),u=setTimeout((function(){o._fulfill()}),+n),r.cancellation()&&o._setOnCancel(new s(u)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};e.prototype.delay=function(e){return u(e,this)};function l(e){return clearTimeout(this.handle),e}function c(e){throw clearTimeout(this.handle),e}e.prototype.timeout=function(e,t){var n,a;e=+e;var u=new s(setTimeout((function(){n.isPending()&&function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new o("operation timed out"):new o(t),i.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()}(n,t,a)}),e));return r.cancellation()?(a=this.then(),(n=a._then(l,c,void 0,u,void 0))._setOnCancel(u)):n=this._then(l,c,void 0,u,void 0),n}}},function(e,t,n){"use strict";e.exports=function(e,t,r,i,o,s){var a=n(11),u=n(43).TypeError,l=n(11).inherits,c=a.errorObj,p=a.tryCatch,d={};function f(e){setTimeout((function(){throw e}),0)}function h(t,n){var i=0,s=t.length,a=new e(o);return function o(){if(i>=s)return a._fulfill();var u=function(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(t[i++]);if(u instanceof e&&u._isDisposable()){try{u=r(u._getDisposer().tryDispose(n),t.promise)}catch(e){return f(e)}if(u instanceof e)return u._then(o,f,null,null,null)}o()}(),a}function g(e,t,n){this._data=e,this._promise=t,this._context=n}function y(e,t,n){this.constructor$(e,t,n)}function E(e){return g.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function m(e){this.length=e,this.promise=null,this[e-1]=null}g.prototype.data=function(){return this._data},g.prototype.promise=function(){return this._promise},g.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():d},g.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==d?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},g.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},l(y,g),y.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},m.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var n=arguments.length;if(n<2)return t("you must pass at least 2 arguments to Promise.using");var i,o=arguments[n-1];if("function"!=typeof o)return t("expecting a function but got "+a.classString(o));var u=!0;2===n&&Array.isArray(arguments[0])?(n=(i=arguments[0]).length,u=!1):(i=arguments,n--);for(var l=new m(n),d=0;d<n;++d){var f=i[d];if(g.isDisposer(f)){var y=f;(f=f.promise())._setDisposable(y)}else{var A=r(f);A instanceof e&&(f=A._then(E,null,null,{resources:l,index:d},void 0))}l[d]=f}var v=new Array(l.length);for(d=0;d<v.length;++d)v[d]=e.resolve(l[d]).reflect();var R=e.all(v).then((function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return c.e=n.error(),c;if(!n.isFulfilled())return void R.cancel();e[t]=n.value()}b._pushContext(),o=p(o);var r=u?o.apply(void 0,e):o(e),i=b._popContext();return s.checkForgottenReturns(r,i,"Promise.using",b),r})),b=R.lastly((function(){var t=new e.PromiseInspection(R);return h(l,t)}));return l.promise=b,b._setOnCancel(l),b},e.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(e){if("function"==typeof e)return new y(e,this,i());throw new u}}},function(e,t,n){"use strict";e.exports=function(e){var t=e._SomePromiseArray;function n(e){var n=new t(e),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}e.any=function(e){return n(e)},e.prototype.any=function(){return n(this)}}},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.reduce,r=e.all;function i(){return r(this)}e.prototype.each=function(e){return n(this,e,t,0)._then(i,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return n(this,e,t,t)},e.each=function(e,r){return n(e,r,t,0)._then(i,void 0,void 0,e,void 0)},e.mapSeries=function(e,r){return n(e,r,t,t)}}},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}},function(e,t,n){"use strict";const r=n(255);function i(e,t){const o=r(e,t,n(90));var s;return s=o,Object.keys(s).forEach(e=>{"argv"===e?i.__defineGetter__(e,s.__lookupGetter__(e)):i[e]="function"==typeof s[e]?s[e].bind(s):s[e]}),o}i(process.argv.slice(2)),e.exports=i},function(e,t,n){"use strict";const r=n(133),i=n(17),o=n(134),s=n(261),a=n(135),u=n(10),l=n(262),c=n(272),p=n(274),d=n(89),f=n(139),h=n(275),g=n(276),y=n(71);function E(e,t){return u.relative(e,t)}(e.exports=function(e,t,m){e=e||[];const A={};let v=null,R=null,b={},C=[],T="",S={},O=null,_=null;const I=p({directory:u.resolve(__dirname,"./locales"),updateFiles:!1});A.middleware=g(C,A),t||(t=process.cwd());A.scriptName=function(e){return A.$0=e,A},/\b(node|iojs|electron)(\.exe)?$/.test(process.argv[0])?A.$0=process.argv.slice(1,2):A.$0=process.argv.slice(0,1);A.$0=A.$0.map((e,n)=>{const r=E(t,e);return e.match(/^(\/|([a-zA-Z]:)?\\)/)&&r.length<e.length?r:e}).join(" ").trim(),void 0!==process.env._&&process.argv[1]===process.env._&&(A.$0=process.env._.replace(u.dirname(process.execPath)+"/",""));const P={resets:-1,commands:[],fullCommands:[],files:[]};let w,N;function L(){N={},N.options=w,N.configObjects=w.configObjects.slice(0),N.exitProcess=Y,N.groups=b,O.freeze(),_.freeze(),v.freeze(),N.strict=G,N.completionCommand=$,N.output=T,N.exitError=z,N.hasOutput=q,N.parsed=A.parsed}function D(){w=N.options,w.configObjects=N.configObjects,Y=N.exitProcess,b=N.groups,T=N.output,z=N.exitError,q=N.hasOutput,A.parsed=N.parsed,O.unfreeze(),_.unfreeze(),v.unfreeze(),G=N.strict,$=N.completionCommand,k=null,j=null,N=void 0}function x(e,t,n){(t=[].concat(t)).forEach(t=>{w[e].push(t)})}function F(e,t,n,r,i){if(Array.isArray(r)){const t={};r.forEach(e=>{t[e]=i}),e(t)}else"object"==typeof r?Object.keys(r).forEach(t=>{e(t,r[t])}):w[n][r]=t?(w[n][r]||[]).concat(i):i}function M(e){Object.keys(w).forEach(t=>{const n=w[t];Array.isArray(n)?~n.indexOf(e)&&n.splice(n.indexOf(e),1):"object"==typeof n&&delete n[e]}),delete O.getDescriptions()[e]}A.getContext=()=>P,A.resetOptions=A.reset=function(e){P.resets++,e=e||{},w=w||{};const t={};t.local=w.local?w.local:[],t.configObjects=w.configObjects?w.configObjects:[];const n={};t.local.forEach(t=>{n[t]=!0,(e[t]||[]).forEach(e=>{n[e]=!0})}),S=Object.keys(b).reduce((e,t)=>{const r=b[t].filter(e=>!(e in n));return r.length>0&&(e[t]=r),e},{}),b={};return["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"].forEach(e=>{t[e]=(w[e]||[]).filter(e=>!n[e])}),["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","coerce"].forEach(e=>{t[e]=d(w[e],(e,t)=>!n[e])}),t.envPrefix=w.envPrefix,w=t,O=O?O.reset(n):l(A,I),_=_?_.reset(n):c(A,O,I),v=v?v.reset():o(A,O,_,C),R||(R=s(A,O,v)),$=null,T="",z=null,q=!1,A.parsed=!1,A},A.resetOptions(),A.boolean=function(e){return r("<array|string>",[e],arguments.length),x("boolean",e),A},A.array=function(e){return r("<array|string>",[e],arguments.length),x("array",e),A},A.number=function(e){return r("<array|string>",[e],arguments.length),x("number",e),A},A.normalize=function(e){return r("<array|string>",[e],arguments.length),x("normalize",e),A},A.count=function(e){return r("<array|string>",[e],arguments.length),x("count",e),A},A.string=function(e){return r("<array|string>",[e],arguments.length),x("string",e),A},A.requiresArg=function(e){return r("<array|string>",[e],arguments.length),F(A.nargs,!1,"narg",e,1),A},A.skipValidation=function(e){return r("<array|string>",[e],arguments.length),x("skipValidation",e),A},A.nargs=function(e,t){return r("<string|object|array> [number]",[e,t],arguments.length),F(A.nargs,!1,"narg",e,t),A},A.choices=function(e,t){return r("<object|string|array> [string|array]",[e,t],arguments.length),F(A.choices,!0,"choices",e,t),A},A.alias=function(e,t){return r("<object|string|array> [string|array]",[e,t],arguments.length),F(A.alias,!0,"alias",e,t),A},A.default=A.defaults=function(e,t,n){return r("<object|string|array> [*] [string]",[e,t,n],arguments.length),n&&(w.defaultDescription[e]=n),"function"==typeof t&&(w.defaultDescription[e]||(w.defaultDescription[e]=O.functionDescription(t)),t=t.call()),F(A.default,!1,"default",e,t),A},A.describe=function(e,t){return r("<object|string|array> [string]",[e,t],arguments.length),F(A.describe,!1,"key",e,!0),O.describe(e,t),A},A.demandOption=function(e,t){return r("<object|string|array> [string]",[e,t],arguments.length),F(A.demandOption,!1,"demandedOptions",e,t),A},A.coerce=function(e,t){return r("<object|string|array> [function]",[e,t],arguments.length),F(A.coerce,!1,"coerce",e,t),A},A.config=function(e,n,i){return r("[object|string] [string|function] [function]",[e,n,i],arguments.length),"object"==typeof e?(e=h(e,t),w.configObjects=(w.configObjects||[]).concat(e),A):("function"==typeof n&&(i=n,n=null),e=e||"config",A.describe(e,n||O.deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(e=>{w.config[e]=i||!0}),A)},A.example=function(e,t){return r("<string> [string]",[e,t],arguments.length),O.example(e,t),A},A.command=function(e,t,n,i,o){return r("<string|array|object> [string|boolean] [function|object] [function] [array]",[e,t,n,i,o],arguments.length),v.addHandler(e,t,n,i,o),A},A.commandDir=function(e,t){r("<string> [object]",[e,t],arguments.length);const i=m||n(90);return v.addDirectory(e,A.getContext(),i,n(277)(),t),A},A.demand=A.required=A.require=function(e,t,n){return Array.isArray(t)?(t.forEach(e=>{A.demandOption(e,n)}),t=1/0):"number"!=typeof t&&(n=t,t=1/0),"number"==typeof e?A.demandCommand(e,t,n,n):Array.isArray(e)?e.forEach(e=>{A.demandOption(e,n)}):"string"==typeof n?A.demandOption(e,n):!0!==n&&void 0!==n||A.demandOption(e),A},A.demandCommand=function(e,t,n,i){return r("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,t,n,i],arguments.length),void 0===e&&(e=1),"number"!=typeof t&&(n=t,t=1/0),A.global("_",!1),w.demandedCommands._={min:e,max:t,minMsg:n,maxMsg:i},A},A.getDemandedOptions=()=>(r([],0),w.demandedOptions),A.getDemandedCommands=()=>(r([],0),w.demandedCommands),A.implies=function(e,t){return r("<string|object> [number|string|array]",[e,t],arguments.length),_.implies(e,t),A},A.conflicts=function(e,t){return r("<string|object> [string|array]",[e,t],arguments.length),_.conflicts(e,t),A},A.usage=function(e,t,n,i){if(r("<string|null|undefined> [string|boolean] [function|object] [function]",[e,t,n,i],arguments.length),void 0!==t){if((e||"").match(/^\$0( |$)/))return A.command(e,t,n,i);throw new y(".usage() description must start with $0 if being used as alias for .command()")}return O.usage(e),A},A.epilogue=A.epilog=function(e){return r("<string>",[e],arguments.length),O.epilog(e),A},A.fail=function(e){return r("<function>",[e],arguments.length),O.failFn(e),A},A.check=function(e,t){return r("<function> [boolean]",[e,t],arguments.length),_.check(e,!1!==t),A},A.global=function(e,t){return r("<string|array> [boolean]",[e,t],arguments.length),e=[].concat(e),!1!==t?w.local=w.local.filter(t=>-1===e.indexOf(t)):e.forEach(e=>{-1===w.local.indexOf(e)&&w.local.push(e)}),A},A.pkgConf=function(e,n){r("<string> [string]",[e,n],arguments.length);let i=null;const o=U(n||t);return o[e]&&"object"==typeof o[e]&&(i=h(o[e],n||t),w.configObjects=(w.configObjects||[]).concat(i)),A};const B={};function U(e){const t=e||"*";if(B[t])return B[t];const r=n(278);let o={};try{let t=e||n(284)(m||n(90));!e&&u.extname(t)&&(t=u.dirname(t));const s=r.sync("package.json",{cwd:t});o=JSON.parse(i.readFileSync(s))}catch(e){}return B[t]=o||{},B[t]}let k=null,j=null;A.parse=function(t,n,i){if(r("[string|array] [function|boolean|object] [function]",[t,n,i],arguments.length),void 0===t)return A._parseArgs(e);"object"==typeof n&&(j=n,n=i),"function"==typeof n&&(k=n,n=null),n||(e=t),L(),k&&(Y=!1);const o=A._parseArgs(t,n);return k&&k(z,o,T),D(),o},A._getParseContext=()=>j||{},A._hasParseCallback=()=>!!k,A.option=A.options=function(e,t){if(r("<string|object> [object]",[e,t],arguments.length),"object"==typeof e)Object.keys(e).forEach(t=>{A.options(t,e[t])});else{"object"!=typeof t&&(t={}),w.key[e]=!0,t.alias&&A.alias(e,t.alias);const n=t.demand||t.required||t.require;n&&A.demand(e,n),t.demandOption&&A.demandOption(e,"string"==typeof t.demandOption?t.demandOption:void 0),"conflicts"in t&&A.conflicts(e,t.conflicts),"default"in t&&A.default(e,t.default),"implies"in t&&A.implies(e,t.implies),"nargs"in t&&A.nargs(e,t.nargs),t.config&&A.config(e,t.configParser),t.normalize&&A.normalize(e),"choices"in t&&A.choices(e,t.choices),"coerce"in t&&A.coerce(e,t.coerce),"group"in t&&A.group(e,t.group),(t.boolean||"boolean"===t.type)&&(A.boolean(e),t.alias&&A.boolean(t.alias)),(t.array||"array"===t.type)&&(A.array(e),t.alias&&A.array(t.alias)),(t.number||"number"===t.type)&&(A.number(e),t.alias&&A.number(t.alias)),(t.string||"string"===t.type)&&(A.string(e),t.alias&&A.string(t.alias)),(t.count||"count"===t.type)&&A.count(e),"boolean"==typeof t.global&&A.global(e,t.global),t.defaultDescription&&(w.defaultDescription[e]=t.defaultDescription),t.skipValidation&&A.skipValidation(e);const r=t.describe||t.description||t.desc;A.describe(e,r),t.hidden&&A.hide(e),t.requiresArg&&A.requiresArg(e)}return A},A.getOptions=()=>w,A.positional=function(e,t){if(r("<string> <object>",[e,t],arguments.length),0===P.resets)throw new y(".positional() can only be called in a command's builder function");const n=["default","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];t=d(t,(e,t)=>{let r=-1!==n.indexOf(e);return"type"===e&&-1===["string","number","boolean"].indexOf(t)&&(r=!1),r});const i=P.fullCommands[P.fullCommands.length-1],o=i?v.cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return Object.keys(o).forEach(n=>{Array.isArray(o[n])?-1!==o[n].indexOf(e)&&(t[n]=!0):o[n][e]&&!(n in t)&&(t[n]=o[n][e])}),A.group(e,O.getPositionalGroupName()),A.option(e,t)},A.group=function(e,t){r("<string|array> <string>",[e,t],arguments.length);const n=S[t]||b[t];S[t]&&delete S[t];const i={};return b[t]=(n||[]).concat(e).filter(e=>!i[e]&&(i[e]=!0)),A},A.getGroups=()=>Object.assign({},b,S),A.env=function(e){return r("[string|boolean]",[e],arguments.length),w.envPrefix=!1===e?void 0:e||"",A},A.wrap=function(e){return r("<number|null|undefined>",[e],arguments.length),O.wrap(e),A};let G=!1;A.strict=function(e){return r("[boolean]",[e],arguments.length),G=!1!==e,A},A.getStrict=()=>G,A.showHelp=function(t){return r("[string|function]",[t],arguments.length),A.parsed||A._parseArgs(e),v.hasDefaultCommand()&&(P.resets++,v.runDefaultBuilderOn(A,!0)),O.showHelp(t),A};let H=null;function W(){return U().version||"unknown"}A.version=function(e,t,n){const i="version";if(r("[boolean|string] [string] [string]",[e,t,n],arguments.length),H&&(M(H),O.version(void 0),H=null),0===arguments.length)n=W(),e=i;else if(1===arguments.length){if(!1===e)return A;n=e,e=i}else 2===arguments.length&&(n=t,t=null);return H="string"==typeof e?e:i,t=t||O.deferY18nLookup("Show version number"),O.version(n||void 0),A.boolean(H),A.describe(H,t),A};let V=null;A.addHelpOpt=A.help=function(e,t){const n="help";return r("[string|boolean] [string]",[e,t],arguments.length),V&&(M(V),V=null),1===arguments.length&&!1===e||(V="string"==typeof e?e:n,A.boolean(V),A.describe(V,t||O.deferY18nLookup("Show help"))),A};w.showHiddenOpt="show-hidden",A.addShowHiddenOpt=A.showHidden=function(e,t){if(r("[string|boolean] [string]",[e,t],arguments.length),1===arguments.length&&!1===e)return A;const n="string"==typeof e?e:"show-hidden";return A.boolean(n),A.describe(n,t||O.deferY18nLookup("Show hidden options")),w.showHiddenOpt=n,A},A.hide=function(e){return r("<string|object>",[e],arguments.length),w.hiddenOptions.push(e),A},A.showHelpOnFail=function(e,t){return r("[boolean|string] [string]",[e,t],arguments.length),O.showHelpOnFail(e,t),A};var Y=!0;A.exitProcess=function(e){return r("[boolean]",[e],arguments.length),"boolean"!=typeof e&&(e=!0),Y=e,A},A.getExitProcess=()=>Y;var $=null;A.completion=function(e,t,n){return r("[string] [string|boolean|function] [function]",[e,t,n],arguments.length),"function"==typeof t&&(n=t,t=null),$=e||"completion",t||!1===t||(t="generate bash completion script"),A.command($,t),n&&R.registerFunction(n),A},A.showCompletionScript=function(e){return r("[string]",[e],arguments.length),e=e||A.$0,Q.log(R.generateCompletionScript(e,$)),A},A.getCompletion=function(e,t){r("<array> <function>",[e,t],arguments.length),R.getCompletion(e,t)},A.locale=function(e){return r("[string]",[e],arguments.length),0===arguments.length?(J(),I.getLocale()):(K=!1,I.setLocale(e),A)},A.updateStrings=A.updateLocale=function(e){return r("<object>",[e],arguments.length),K=!1,I.updateLocale(e),A};let K=!0;A.detectLocale=function(e){return r("<boolean>",[e],arguments.length),K=e,A},A.getDetectLocale=()=>K;var q=!1,z=null;A.exit=(e,t)=>{q=!0,z=t,Y&&process.exit(e)};const Q={log(){const e=[];for(let t=0;t<arguments.length;t++)e.push(arguments[t]);A._hasParseCallback()||console.log.apply(console,e),q=!0,T.length&&(T+="\n"),T+=e.join(" ")},error(){const e=[];for(let t=0;t<arguments.length;t++)e.push(arguments[t]);A._hasParseCallback()||console.error.apply(console,e),q=!0,T.length&&(T+="\n"),T+=e.join(" ")}};let Z;function J(){if(K)try{const e=n(286);A.locale(e.sync({spawn:!1}))}catch(e){}}return A._getLoggerInstance=()=>Q,A._hasOutput=()=>q,A._setHasOutput=()=>{q=!0},A.recommendCommands=function(e){return r("[boolean]",[e],arguments.length),Z="boolean"!=typeof e||e,A},A.getUsageInstance=()=>O,A.getValidationInstance=()=>_,A.getCommandInstance=()=>v,A.terminalWidth=()=>(r([],0),void 0!==process.stdout.columns?process.stdout.columns:null),Object.defineProperty(A,"argv",{get:()=>A._parseArgs(e),enumerable:!0}),A._parseArgs=function(t,n,r,i){let o=!!r;t=t||e,w.__=I.__,w.configuration=U().yargs||{};const s=a.detailed(t,w);let u=s.argv;j&&(u=Object.assign({},u,j));const l=s.aliases;u.$0=A.$0,A.parsed=s;try{if(J(),n)return u;if(V){~[V].concat(l[V]||[]).filter(e=>e.length>1).indexOf(u._[u._.length-1])&&(u._.pop(),u[V]=!0)}const e=v.getCommands(),r=R.completionKey in u,a=u[V]||r,c=a&&(e.length>1||"$0"!==e[0]);if(u._.length){if(e.length){let t;for(let n,r=i||0;void 0!==u._[r];r++){if(n=String(u._[r]),~e.indexOf(n)&&n!==$)return v.runCommand(n,A,s,r+1);if(!t&&n!==$){t=n;break}}if(v.hasDefaultCommand()&&!c)return v.runCommand(null,A,s);Z&&t&&!a&&_.recommendCommands(t,e)}$&&~u._.indexOf($)&&!r&&(Y&&f(!0),A.showCompletionScript(),A.exit(0))}else if(v.hasDefaultCommand()&&!c)return v.runCommand(null,A,s);if(r){Y&&f(!0);const e=t.slice(t.indexOf("--"+R.completionKey)+1);return R.getCompletion(e,e=>{(e||[]).forEach(e=>{Q.log(e)}),A.exit(0)}),u}if(q||Object.keys(u).forEach(e=>{e===V&&u[e]?(Y&&f(!0),o=!0,A.showHelp("log"),A.exit(0)):e===H&&u[e]&&(Y&&f(!0),o=!0,O.showVersion(),A.exit(0))}),!o&&w.skipValidation.length>0&&(o=Object.keys(u).some(e=>w.skipValidation.indexOf(e)>=0&&!0===u[e])),!o){if(s.error)throw new y(s.error.message);r||A._runValidation(u,l,{},s.error)}}catch(e){if(!(e instanceof y))throw e;O.fail(e.message,e)}return u},A._runValidation=function(e,t,n,r){if(r)throw new y(r.message);_.nonOptionCount(e),_.requiredArguments(e),G&&_.unknownArguments(e,t,n),_.customChecks(e,t),_.limitedChoices(e),_.implications(e),_.conflicting(e)},A.help(),A.version(),A}).rebase=E},function(e,t,n){"use strict";const r=(e,t)=>{if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");t=Object.assign({pascalCase:!1},t);if(0===(e=Array.isArray(e)?e.map(e=>e.trim()).filter(e=>e.length).join("-"):e.trim()).length)return"";if(1===e.length)return t.pascalCase?e.toUpperCase():e.toLowerCase();return e!==e.toLowerCase()&&(e=(e=>{let t=!1,n=!1,r=!1;for(let i=0;i<e.length;i++){const o=e[i];t&&/[a-zA-Z]/.test(o)&&o.toUpperCase()===o?(e=e.slice(0,i)+"-"+e.slice(i),t=!1,r=n,n=!0,i++):n&&r&&/[a-zA-Z]/.test(o)&&o.toLowerCase()===o?(e=e.slice(0,i-1)+"-"+e.slice(i-1),r=n,n=!1,t=!0):(t=o.toLowerCase()===o&&o.toUpperCase()!==o,r=n,n=o.toUpperCase()===o&&o.toLowerCase()!==o)}return e})(e)),e=e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(e,t)=>t.toUpperCase()).replace(/\d+(\w|$)/g,e=>e.toUpperCase()),n=e,t.pascalCase?n.charAt(0).toUpperCase()+n.slice(1):n;var n};e.exports=r,e.exports.default=r},function(e,t){e.exports=function(e){if(Array.isArray(e))return e;e=e.trim();for(var t=0,n=null,r=null,i=null,o=[],s=0;s<e.length;s++)n=r," "!==(r=e.charAt(s))||i?r!==i?"'"!==r&&'"'!==r||i?(o[t]||(o[t]=""),o[t]+=r):i=r:(o[t]||(o[t]=""),i=null):" "!==n&&t++;return o}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=258},function(e,t,n){"use strict";var r=n(17),i=n(10).join,o=n(10).resolve,s=n(10).dirname,a={extensions:["js","json","coffee"],recurse:!0,rename:function(e){return e},visit:function(e){return e}};e.exports=function e(t,n,u){var l={};for(var c in n&&!u&&"string"!=typeof n&&(u=n,n=null),u=u||{},a)void 0===u[c]&&(u[c]=a[c]);return n=n?o(s(t.filename),n):s(t.filename),r.readdirSync(n).forEach((function(o){var s,a,c,p=i(n,o);r.statSync(p).isDirectory()&&u.recurse?(s=e(t,p,u),Object.keys(s).length&&(l[u.rename(o,p,o)]=s)):p!==t.filename&&function(e,t,n){return new RegExp("\\.("+n.extensions.join("|")+")$","i").test(t)&&!(n.include&&n.include instanceof RegExp&&!n.include.test(e))&&!(n.include&&"function"==typeof n.include&&!n.include(e,t))&&!(n.exclude&&n.exclude instanceof RegExp&&n.exclude.test(e))&&!(n.exclude&&"function"==typeof n.exclude&&n.exclude(e,t))}(p,o,u)&&(a=o.substring(0,o.lastIndexOf(".")),c=t.require(p),l[u.rename(a,p,o)]=u.visit(c,p,o)||c)})),l},e.exports.defaults=a},function(e,t,n){"use strict";e.exports=function(e){for(var t,r=0,i=Object.keys(n.c);r<i.length;r++)if((t=n.c[i[r]]).exports===e)return t;return null}},function(e,t,n){"use strict";const r=n(17),i=n(10);e.exports=function(e,t,n){const o={completionKey:"get-yargs-completions",getCompletion:function(r,i){const o=[],a=r.length?r[r.length-1]:"",u=e.parse(r,!0),l=e.parsed.aliases;if(s){if(s.length<3){const e=s(a,u);return"function"==typeof e.then?e.then(e=>{process.nextTick(()=>{i(e)})}).catch(e=>{process.nextTick(()=>{throw e})}):i(e)}return s(a,u,e=>{i(e)})}const c=n.getCommandHandlers();for(let t=0,n=r.length;t<n;++t)if(c[r[t]]&&c[r[t]].builder){const n=c[r[t]].builder;if("function"==typeof n){const t=e.reset();return n(t),t.argv}}a.match(/^-/)||t.getCommands().forEach(e=>{const t=n.parseCommand(e[0]).cmd;-1===r.indexOf(t)&&o.push(t)}),a.match(/^-/)&&Object.keys(e.getOptions().key).forEach(e=>{[e].concat(l[e]||[]).every(e=>-1===r.indexOf("--"+e))&&o.push("--"+e)}),i(o)},generateCompletionScript:function(e,t){let n=r.readFileSync(i.resolve(__dirname,"../completion.sh.hbs"),"utf-8");const o=i.basename(e);return e.match(/\.js$/)&&(e="./"+e),n=n.replace(/{{app_name}}/g,o),n=n.replace(/{{completion_command}}/g,t),n.replace(/{{app_path}}/g,e)}};let s=null;return o.registerFunction=e=>{s=e},o}},function(e,t,n){"use strict";const r=n(137),i=n(89),o=n(10),s=n(139),a=n(71);e.exports=function(e,t){const u=t.__,l={},c=[];l.failFn=function(e){c.push(e)};let p=null,d=!0;l.showHelpOnFail=function(e,t){return"string"==typeof e?(t=e,e=!0):void 0===e&&(e=!0),p=t,d=e,l};let f=!1;l.fail=function(t,n){const r=e._getLoggerInstance();if(!c.length){if(e.getExitProcess()&&s(!0),f||(f=!0,d&&(e.showHelp("error"),r.error()),(t||n)&&r.error(t||n),p&&((t||n)&&r.error(""),r.error(p))),n=n||new a(t),e.getExitProcess())return e.exit(1);if(e._hasParseCallback())return e.exit(1,n);throw n}for(let e=c.length-1;e>=0;--e)c[e](t,n,l)};let h=[],g=!1;l.usage=(e,t)=>null===e?(g=!0,void(h=[])):(g=!1,h.push([e,t||""]),l),l.getUsage=()=>h,l.getUsageDisabled=()=>g,l.getPositionalGroupName=()=>u("Positionals:");let y=[];l.example=(e,t)=>{y.push([e,t||""])};let E=[];l.command=function(e,t,n,r){n&&(E=E.map(e=>(e[2]=!1,e))),E.push([e,t||"",n,r])},l.getCommands=()=>E;let m,A={};l.describe=function(e,t){"object"==typeof e?Object.keys(e).forEach(t=>{l.describe(t,e[t])}):A[e]=t},l.getDescriptions=()=>A,l.epilog=e=>{m=e};let v,R=!1;function b(){return R||(v="object"==typeof process&&process.stdout&&process.stdout.columns?Math.min(80,process.stdout.columns):80,R=!0),v}l.wrap=e=>{R=!0,v=e};l.deferY18nLookup=e=>"__yargsString__:"+e;function C(e,t,n){let i=0;return Array.isArray(e)||(e=Object.keys(e).map(t=>[e[t]])),e.forEach(e=>{i=Math.max(r(n?`${n} ${e[0]}`:e[0]),i)}),t&&(i=Math.min(i,parseInt(.5*t,10))),i}function T(t){return e.getOptions().hiddenOptions.indexOf(t)<0||e.parsed.argv[e.getOptions().showHiddenOpt]}function S(e,t){let n=`[${u("default:")} `;if(void 0===e&&!t)return null;if(t)n+=t;else switch(typeof e){case"string":n+=`"${e}"`;break;case"object":n+=JSON.stringify(e);break;default:n+=e}return n+"]"}l.help=function(){!function(){const t=e.getDemandedOptions(),n=e.getOptions();(Object.keys(n.alias)||[]).forEach(r=>{n.alias[r].forEach(i=>{A[i]&&l.describe(r,A[i]),i in t&&e.demandOption(r,t[i]),~n.boolean.indexOf(i)&&e.boolean(r),~n.count.indexOf(i)&&e.count(r),~n.string.indexOf(i)&&e.string(r),~n.normalize.indexOf(i)&&e.normalize(r),~n.array.indexOf(i)&&e.array(r),~n.number.indexOf(i)&&e.number(r)})})}();const t=o.basename(e.$0),r=e.getDemandedOptions(),i=e.getDemandedCommands(),s=e.getGroups(),a=e.getOptions();let c=[];c=c.concat(Object.keys(A)),c=c.concat(Object.keys(r)),c=c.concat(Object.keys(i)),c=c.concat(Object.keys(a.default)),c=c.filter(T),c=Object.keys(c.reduce((e,t)=>("_"!==t&&(e[t]=!0),e),{}));const p=b(),d=n(265)({width:p,wrap:!!p});if(!g)if(h.length)h.forEach(e=>{d.div(""+e[0].replace(/\$0/g,t)),e[1]&&d.div({text:""+e[1],padding:[1,0,0,0]})}),d.div();else if(E.length){let e=null;e=i._?`${t} <${u("command")}>\n`:`${t} [${u("command")}]\n`,d.div(""+e)}if(E.length){d.div(u("Commands:"));const n=e.getContext(),r=n.commands.length?n.commands.join(" ")+" ":"";E.forEach(e=>{const n=`${t} ${r}${e[0].replace(/^\$0 ?/,"")}`;d.span({text:n,padding:[0,2,0,2],width:C(E,p,`${t}${r}`)+4},{text:e[1]});const i=[];e[2]&&i.push(`[${u("default:").slice(0,-1)}]`),e[3]&&e[3].length&&i.push(`[${u("aliases:")} ${e[3].join(", ")}]`),i.length?d.div({text:i.join(" "),padding:[0,0,0,2],align:"right"}):d.div()}),d.div()}const f=(Object.keys(a.alias)||[]).concat(Object.keys(e.parsed.newAliases)||[]);if(c=c.filter(t=>!e.parsed.newAliases[t]&&f.every(e=>-1===(a.alias[e]||[]).indexOf(t))),s["Options:"]||(s["Options:"]=[]),function(e,t,n){let r=[],i=null;Object.keys(n).forEach(e=>{r=r.concat(n[e])}),e.forEach(e=>{i=[e].concat(t[e]),i.some(e=>-1!==r.indexOf(e))||n["Options:"].push(e)})}(c,a.alias,s),Object.keys(s).forEach(e=>{if(!s[e].length)return;const t=s[e].filter(T).map(e=>{if(~f.indexOf(e))return e;for(let t,n=0;void 0!==(t=f[n]);n++)if(~(a.alias[t]||[]).indexOf(e))return t;return e});if(t.length<1)return;d.div(u(e));const n=t.reduce((t,n)=>(t[n]=[n].concat(a.alias[n]||[]).map(t=>e===l.getPositionalGroupName()?t:(t.length>1?"--":"-")+t).join(", "),t),{});t.forEach(e=>{const t=n[e];let i=A[e]||"",o=null;~i.lastIndexOf("__yargsString__:")&&(i=u(i.substring("__yargsString__:".length))),~a.boolean.indexOf(e)&&(o=`[${u("boolean")}]`),~a.count.indexOf(e)&&(o=`[${u("count")}]`),~a.string.indexOf(e)&&(o=`[${u("string")}]`),~a.normalize.indexOf(e)&&(o=`[${u("string")}]`),~a.array.indexOf(e)&&(o=`[${u("array")}]`),~a.number.indexOf(e)&&(o=`[${u("number")}]`);const s=[o,e in r?`[${u("required")}]`:null,a.choices&&a.choices[e]?`[${u("choices:")} ${l.stringifiedValues(a.choices[e])}]`:null,S(a.default[e],a.defaultDescription[e])].filter(Boolean).join(" ");d.span({text:t,padding:[0,2,0,2],width:C(n,p)+4},i),s?d.div({text:s,padding:[0,0,0,2],align:"right"}):d.div()}),d.div()}),y.length&&(d.div(u("Examples:")),y.forEach(e=>{e[0]=e[0].replace(/\$0/g,t)}),y.forEach(e=>{""===e[1]?d.div({text:e[0],padding:[0,2,0,2]}):d.div({text:e[0],padding:[0,2,0,2],width:C(y,p)+4},{text:e[1]})}),d.div()),m){const e=m.replace(/\$0/g,t);d.div(e+"\n")}return d.toString().replace(/\s*$/,"")},l.showHelp=t=>{const n=e._getLoggerInstance();t||(t="error");("function"==typeof t?t:n[t])(l.help())},l.functionDescription=e=>["(",e.name?n(136)(e.name,"-"):u("generated-value"),")"].join(""),l.stringifiedValues=function(e,t){let n="";const r=t||", ",i=[].concat(e);return e&&i.length?(i.forEach(e=>{n.length&&(n+=r),n+=JSON.stringify(e)}),n):n};let O,_=null;return l.version=e=>{_=e},l.showVersion=()=>{e._getLoggerInstance().log(_)},l.reset=function(e){return p=null,f=!1,h=[],g=!1,m=void 0,y=[],E=[],A=i(A,(t,n)=>!e[t]),l},l.freeze=function(){O={},O.failMessage=p,O.failureOutput=f,O.usages=h,O.usageDisabled=g,O.epilog=m,O.examples=y,O.commands=E,O.descriptions=A},l.unfreeze=function(){p=O.failMessage,f=O.failureOutput,h=O.usages,g=O.usageDisabled,m=O.epilog,y=O.examples,E=O.commands,A=O.descriptions,O=void 0},l}},function(e,t,n){"use strict";e.exports=()=>{const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[a-zA-Z\\d]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|");return new RegExp(e,"g")}},function(e,t,n){"use strict";e.exports=e=>!Number.isNaN(e)&&(e>=4352&&(e<=4447||9001===e||9002===e||11904<=e&&e<=12871&&12351!==e||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141))},function(e,t,n){var r=n(137),i=n(138),o=n(266),s={right:function(e,t){e=e.trim();var n="",i=r(e);i<t&&(n=new Array(t-i+1).join(" "));return n+e},center:function(e,t){e=e.trim();var n="",i=r(e.trim());i<t&&(n=new Array(parseInt((t-i)/2,10)+1).join(" "));return n+e}};function a(e){this.width=e.width,this.wrap=e.wrap,this.rows=[]}function u(e,t,n){return e.border?/[.']-+[.']/.test(t)?"":t.trim().length?n:"  ":""}function l(){if("object"==typeof process&&process.stdout&&process.stdout.columns)return process.stdout.columns}a.prototype.span=function(){var e=this.div.apply(this,arguments);e.span=!0},a.prototype.resetOutput=function(){this.rows=[]},a.prototype.div=function(){if(0===arguments.length&&this.div(""),this.wrap&&this._shouldApplyLayoutDSL.apply(this,arguments))return this._applyLayoutDSL(arguments[0]);for(var e,t=[],n=0;void 0!==(e=arguments[n]);n++)"string"==typeof e?t.push(this._colFromString(e)):t.push(e);return this.rows.push(t),t},a.prototype._shouldApplyLayoutDSL=function(){return 1===arguments.length&&"string"==typeof arguments[0]&&/[\t\n]/.test(arguments[0])},a.prototype._applyLayoutDSL=function(e){var t=this,n=e.split("\n"),i=0;return n.forEach((function(e){var n=e.split("\t");n.length>1&&r(n[0])>i&&(i=Math.min(Math.floor(.5*t.width),r(n[0])))})),n.forEach((function(e){var n=e.split("\t");t.div.apply(t,n.map((function(e,r){return{text:e.trim(),padding:t._measurePadding(e),width:0===r&&n.length>1?i:void 0}})))})),this.rows[this.rows.length-1]},a.prototype._colFromString=function(e){return{text:e,padding:this._measurePadding(e)}},a.prototype._measurePadding=function(e){var t=i(e);return[0,t.match(/\s*$/)[0].length,0,t.match(/^\s*/)[0].length]},a.prototype.toString=function(){var e=this,t=[];return e.rows.forEach((function(n,r){e.rowToString(n,t)})),(t=t.filter((function(e){return!e.hidden}))).map((function(e){return e.text})).join("\n")},a.prototype.rowToString=function(e,t){var n,i,o,a,l=this,c=this._rasterize(e),p="";return c.forEach((function(c,d){p="",c.forEach((function(c,f){i="",o=e[f].width,a=l._negatePadding(e[f]),i+=c;for(var h=0;h<a-r(c);h++)i+=" ";e[f].align&&"left"!==e[f].align&&l.wrap&&(i=s[e[f].align](i,a),r(i)<a&&(i+=new Array(o-r(i)).join(" "))),(n=e[f].padding||[0,0,0,0])[3]&&(p+=new Array(n[3]+1).join(" ")),p+=u(e[f],i,"| "),p+=i,p+=u(e[f],i," |"),n[1]&&(p+=new Array(n[1]+1).join(" ")),0===d&&t.length>0&&(p=l._renderInline(p,t[t.length-1]))})),t.push({text:p.replace(/ +$/,""),span:e.span})})),t},a.prototype._renderInline=function(e,t){var n=e.match(/^ */)[0].length,i=t.text,o=r(i.trimRight());return t.span?this.wrap?n<o?e:(t.hidden=!0,i.trimRight()+new Array(n-o+1).join(" ")+e.trimLeft()):(t.hidden=!0,i+e):e},a.prototype._rasterize=function(e){var t,n,r,i=this,s=[],a=this._columnWidths(e);return e.forEach((function(e,u){if(e.width=a[u],r=i.wrap?o(e.text,i._negatePadding(e),{hard:!0}).split("\n"):e.text.split("\n"),e.border&&(r.unshift("."+new Array(i._negatePadding(e)+3).join("-")+"."),r.push("'"+new Array(i._negatePadding(e)+3).join("-")+"'")),e.padding){for(t=0;t<(e.padding[0]||0);t++)r.unshift("");for(t=0;t<(e.padding[2]||0);t++)r.push("")}r.forEach((function(e,t){s[t]||s.push([]),n=s[t];for(var r=0;r<u;r++)void 0===n[r]&&n.push("");n.push(e)}))})),s},a.prototype._negatePadding=function(e){var t=e.width;return e.padding&&(t-=(e.padding[3]||0)+(e.padding[1]||0)),e.border&&(t-=4),t},a.prototype._columnWidths=function(e){var t,n=this,i=[],o=e.length,s=this.width;return e.forEach((function(e,t){e.width?(o--,i[t]=e.width,s-=e.width):i[t]=void 0})),o&&(t=Math.floor(s/o)),i.forEach((function(o,s){n.wrap?void 0===o&&(i[s]=Math.max(t,function(e){var t=e.padding||[],n=1+(t[3]||0)+(t[1]||0);e.border&&(n+=4);return n}(e[s]))):i[s]=e[s].width||r(e[s].text)})),i},e.exports=function(e){return new a({width:((e=e||{})||{}).width||l()||80,wrap:"boolean"!=typeof e.wrap||e.wrap})}},function(e,t,n){"use strict";var r=n(267),i=n(140),o=["",""],s={0:0,1:22,2:22,3:23,4:24,7:27,8:28,9:29,30:39,31:39,32:39,33:39,34:39,35:39,36:39,37:39,90:39,40:49,41:49,42:49,43:49,44:49,45:49,46:49,47:49};function a(e){return o[0]+"["+e+"m"}function u(e,t,n){for(var r=!1,s=i(e[e.length-1]).length,a=0;a<t.length;a++){var u=t[a];if(e[e.length-1]+=u,-1!==o.indexOf(u))r=!0;else if(r&&"m"===u){r=!1;continue}r||++s>=n&&a<t.length-1&&(e.push(""),s=0)}!s&&e[e.length-1].length>0&&e.length>1&&(e[e.length-2]+=e.pop())}function l(e,t,n){for(var i,l,c=n||{},p="",d="",f=function(e){return e.split(" ").map((function(e){return r(e)}))}(e),h=e.split(" "),g=[""],y=0;void 0!==(l=h[y]);y++){var E=r(g[g.length-1]);if(E&&(g[g.length-1]+=" ",E++),f[y]>t&&c.hard)E&&g.push(""),u(g,l,t);else{if(E+f[y]>t&&E>0){if(!1===c.wordWrap&&E<t){u(g,l,t);continue}g.push("")}g[g.length-1]+=l}}p=g.map((function(e){return e.trim()})).join("\n");for(var m=0;m<p.length;m++){var A=p[m];if(d+=A,-1!==o.indexOf(A)){var v=parseFloat(/[0-9][^m]*/.exec(p.slice(m,m+4)));i=39===v?null:v}i&&s[i]&&("\n"===p[m+1]?d+=a(s[i]):"\n"===A&&(d+=a(i)))}return d}e.exports=function(e,t,n){return String(e).split("\n").map((function(e){return l(e,t,n)})).join("\n")}},function(e,t,n){"use strict";var r=n(140),i=n(269),o=n(270);e.exports=function(e){if("string"!=typeof e||0===e.length)return 0;var t=0;e=r(e);for(var n=0;n<e.length;n++){var s=i(e,n);s<=31||s>=127&&s<=159||(s>=65536&&n++,o(s)?t+=2:t++)}return t}},function(e,t,n){"use strict";e.exports=function(){return/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g}},function(e,t,n){"use strict";e.exports=function(e,t){if(null==e)throw TypeError();var n=(e=String(e)).length,r=t?Number(t):0;if(Number.isNaN(r)&&(r=0),!(r<0||r>=n)){var i=e.charCodeAt(r);if(i>=55296&&i<=56319&&n>r+1){var o=e.charCodeAt(r+1);if(o>=56320&&o<=57343)return 1024*(i-55296)+o-56320+65536}return i}}},function(e,t,n){"use strict";var r=n(271);e.exports=function(e){return!r(e)&&(e>=4352&&(e<=4447||9001===e||9002===e||11904<=e&&e<=12871&&12351!==e||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141))}},function(e,t,n){"use strict";e.exports=Number.isNaN||function(e){return e!=e}},function(e,t,n){"use strict";const r=n(133),i=n(89),o=["$0","--","_"];e.exports=function(e,t,s){const a=s.__,u=s.__n,l={nonOptionCount:function(n){const r=e.getDemandedCommands(),i=n._.length-e.getContext().commands.length;r._&&(i<r._.min||i>r._.max)&&(i<r._.min?void 0!==r._.minMsg?t.fail(r._.minMsg?r._.minMsg.replace(/\$0/g,i).replace(/\$1/,r._.min):null):t.fail(a("Not enough non-option arguments: got %s, need at least %s",i,r._.min)):i>r._.max&&(void 0!==r._.maxMsg?t.fail(r._.maxMsg?r._.maxMsg.replace(/\$0/g,i).replace(/\$1/,r._.max):null):t.fail(a("Too many non-option arguments: got %s, maximum of %s",i,r._.max))))},positionalCount:function(e,n){n<e&&t.fail(a("Not enough non-option arguments: got %s, need at least %s",n,e))},requiredArguments:function(n){const r=e.getDemandedOptions();let i=null;if(Object.keys(r).forEach(e=>{n.hasOwnProperty(e)&&void 0!==n[e]||(i=i||{},i[e]=r[e])}),i){const e=[];Object.keys(i).forEach(t=>{const n=i[t];n&&e.indexOf(n)<0&&e.push(n)});const n=e.length?"\n"+e.join("\n"):"";t.fail(u("Missing required argument: %s","Missing required arguments: %s",Object.keys(i).length,Object.keys(i).join(", ")+n))}},unknownArguments:function(n,r,i){const s=e.getCommandInstance().getCommands(),a=[],l=e.getContext();Object.keys(n).forEach(t=>{-1!==o.indexOf(t)||i.hasOwnProperty(t)||e._getParseContext().hasOwnProperty(t)||r.hasOwnProperty(t)||a.push(t)}),s.length>0&&n._.slice(l.commands.length).forEach(e=>{-1===s.indexOf(e)&&a.push(e)}),a.length>0&&t.fail(u("Unknown argument: %s","Unknown arguments: %s",a.length,a.join(", ")))},limitedChoices:function(n){const r=e.getOptions(),i={};if(!Object.keys(r.choices).length)return;Object.keys(n).forEach(e=>{-1===o.indexOf(e)&&r.choices.hasOwnProperty(e)&&[].concat(n[e]).forEach(t=>{-1===r.choices[e].indexOf(t)&&void 0!==t&&(i[e]=(i[e]||[]).concat(t))})});const s=Object.keys(i);if(!s.length)return;let u=a("Invalid values:");s.forEach(e=>{u+="\n  "+a("Argument: %s, Given: %s, Choices: %s",e,t.stringifiedValues(i[e]),t.stringifiedValues(r.choices[e]))}),t.fail(u)}};let c=[];l.check=function(e,t){c.push({func:e,global:t})},l.customChecks=function(e,n){for(let r,i=0;void 0!==(r=c[i]);i++){const i=r.func;let o=null;try{o=i(e,n)}catch(e){t.fail(e.message?e.message:e,e);continue}o?("string"==typeof o||o instanceof Error)&&t.fail(o.toString(),o):t.fail(a("Argument check failed: %s",i.toString()))}};let p={};l.implies=function(t,n){r("<string|object> [array|number|string]",[t,n],arguments.length),"object"==typeof t?Object.keys(t).forEach(e=>{l.implies(e,t[e])}):(e.global(t),p[t]||(p[t]=[]),Array.isArray(n)?n.forEach(e=>l.implies(t,e)):p[t].push(n))},l.getImplied=function(){return p},l.implications=function(e){const n=[];if(Object.keys(p).forEach(t=>{const r=t;(p[t]||[]).forEach(t=>{let i,o=r;const s=t;i=Number(o),o=isNaN(i)?o:i,"number"==typeof o?o=e._.length>=o:o.match(/^--no-.+/)?(o=o.match(/^--no-(.+)/)[1],o=!e[o]):o=e[o],i=Number(t),"number"==typeof(t=isNaN(i)?t:i)?t=e._.length>=t:t.match(/^--no-.+/)?(t=t.match(/^--no-(.+)/)[1],t=!e[t]):t=e[t],o&&!t&&n.push(` ${r} -> ${s}`)})}),n.length){let e=a("Implications failed:")+"\n";n.forEach(t=>{e+=t}),t.fail(e)}};let d,f={};return l.conflicts=function(t,n){r("<string|object> [array|string]",[t,n],arguments.length),"object"==typeof t?Object.keys(t).forEach(e=>{l.conflicts(e,t[e])}):(e.global(t),f[t]||(f[t]=[]),Array.isArray(n)?n.forEach(e=>l.conflicts(t,e)):f[t].push(n))},l.getConflicting=()=>f,l.conflicting=function(e){Object.keys(e).forEach(n=>{f[n]&&f[n].forEach(r=>{r&&void 0!==e[n]&&void 0!==e[r]&&t.fail(a("Arguments %s and %s are mutually exclusive",n,r))})})},l.recommendCommands=function(e,r){const i=n(273);r=r.sort((e,t)=>t.length-e.length);let o=null,s=1/0;for(let t,n=0;void 0!==(t=r[n]);n++){const n=i(e,t);n<=3&&n<s&&(s=n,o=t)}o&&t.fail(a("Did you mean %s?",o))},l.reset=function(e){return p=i(p,(t,n)=>!e[t]),f=i(f,(t,n)=>!e[t]),c=c.filter(e=>e.global),l},l.freeze=function(){d={},d.implied=p,d.checks=c,d.conflicting=f},l.unfreeze=function(){p=d.implied,c=d.checks,f=d.conflicting,d=void 0},l}},function(e,t,n){"use strict";e.exports=function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;const n=[];let r,i;for(r=0;r<=t.length;r++)n[r]=[r];for(i=0;i<=e.length;i++)n[0][i]=i;for(r=1;r<=t.length;r++)for(i=1;i<=e.length;i++)t.charAt(r-1)===e.charAt(i-1)?n[r][i]=n[r-1][i-1]:n[r][i]=Math.min(n[r-1][i-1]+1,Math.min(n[r][i-1]+1,n[r-1][i]+1));return n[t.length][e.length]}},function(e,t,n){var r=n(17),i=n(10),o=n(37);function s(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles="boolean"!=typeof e.updateFiles||e.updateFiles,this.locale=e.locale||"en",this.fallbackToLanguage="boolean"!=typeof e.fallbackToLanguage||e.fallbackToLanguage,this.cache=Object.create(null),this.writeQueue=[]}s.prototype.__=function(){if("string"!=typeof arguments[0])return this._taggedLiteral.apply(this,arguments);var e=Array.prototype.slice.call(arguments),t=e.shift(),n=function(){};return"function"==typeof e[e.length-1]&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][t]&&this.updateFiles?(this.cache[this.locale][t]=t,this._enqueueWrite([this.directory,this.locale,n])):n(),o.format.apply(o,[this.cache[this.locale][t]||t].concat(e))},s.prototype._taggedLiteral=function(e){var t=arguments,n="";return e.forEach((function(e,r){var i=t[r+1];n+=e,void 0!==i&&(n+="%s")})),this.__.apply(null,[n].concat([].slice.call(arguments,1)))},s.prototype._enqueueWrite=function(e){this.writeQueue.push(e),1===this.writeQueue.length&&this._processWriteQueue()},s.prototype._processWriteQueue=function(){var e=this,t=this.writeQueue[0],n=t[0],i=t[1],o=t[2],s=this._resolveLocaleFile(n,i),a=JSON.stringify(this.cache[i],null,2);r.writeFile(s,a,"utf-8",(function(t){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(t)}))},s.prototype._readLocaleFile=function(){var e={},t=this._resolveLocaleFile(this.directory,this.locale);try{e=JSON.parse(r.readFileSync(t,"utf-8"))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+t),"ENOENT"!==n.code)throw n;e={}}this.cache[this.locale]=e},s.prototype._resolveLocaleFile=function(e,t){var n=i.resolve(e,"./",t+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~t.lastIndexOf("_")){var r=i.resolve(e,"./",t.split("_")[0]+".json");this._fileExistsSync(r)&&(n=r)}return n},s.prototype._fileExistsSync=function(e){try{return r.statSync(e).isFile()}catch(e){return!1}},s.prototype.__n=function(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n=e.shift(),r=e.shift(),i=function(){};"function"==typeof e[e.length-1]&&(i=e.pop()),this.cache[this.locale]||this._readLocaleFile();var s=1===r?t:n;this.cache[this.locale][t]&&(s=this.cache[this.locale][t][1===r?"one":"other"]),!this.cache[this.locale][t]&&this.updateFiles?(this.cache[this.locale][t]={one:t,other:n},this._enqueueWrite([this.directory,this.locale,i])):i();var a=[s];return~s.indexOf("%d")&&a.push(r),o.format.apply(o,a.concat(e))},s.prototype.setLocale=function(e){this.locale=e},s.prototype.getLocale=function(){return this.locale},s.prototype.updateLocale=function(e){for(var t in this.cache[this.locale]||this._readLocaleFile(),e)this.cache[this.locale][t]=e[t]},e.exports=function(e){var t=new s(e);for(var n in t)"function"==typeof t[n]&&(t[n]=t[n].bind(t));return t}},function(e,t,n){"use strict";const r=n(17),i=n(10),o=n(71);let s=[];e.exports=function e(t,a){let u={};if(t.hasOwnProperty("extends")){if("string"!=typeof t.extends)return u;const l=/\.json|\..*rc$/.test(t.extends);let c=null;if(l)c=function(e,t){return i.resolve(e,t)}(a,t.extends);else try{c=n(141).resolve(t.extends)}catch(e){}if(!c&&!l)return t;!function(e){if(s.indexOf(e)>-1)throw new o(`Circular extended configurations: '${e}'.`)}(c),s.push(c),u=l?JSON.parse(r.readFileSync(c,"utf8")):n(141)(t.extends),delete t.extends,u=e(u,i.dirname(c))}return s=[],Object.assign({},u,t)}},function(e,t){e.exports=function(e,t){return function(n){return Array.isArray(n)?Array.prototype.push.apply(e,n):"function"==typeof n&&e.push(n),t}}},function(e,t,n){"use strict";e.exports=function(e){var t=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t};var n=(new Error).stack;Error.prepareStackTrace=t;var r=e||2;return n[r]?n[r].getFileName():void 0}},function(e,t,n){"use strict";const r=n(10),i=n(279);e.exports=(e,t={})=>{const n=r.resolve(t.cwd||""),{root:o}=r.parse(n),s=[].concat(e);return new Promise(e=>{!function t(n){i(s,{cwd:n}).then(i=>{i?e(r.join(n,i)):n===o?e(null):t(r.dirname(n))})}(n)})},e.exports.sync=(e,t={})=>{let n=r.resolve(t.cwd||"");const{root:o}=r.parse(n),s=[].concat(e);for(;;){const e=i.sync(s,{cwd:n});if(e)return r.join(n,e);if(n===o)return null;n=r.dirname(n)}}},function(e,t,n){"use strict";const r=n(10),i=n(280),o=n(281);e.exports=(e,t)=>(t=Object.assign({cwd:process.cwd()},t),o(e,e=>i(r.resolve(t.cwd,e)),t)),e.exports.sync=(e,t)=>{t=Object.assign({cwd:process.cwd()},t);for(const n of e)if(i.sync(r.resolve(t.cwd,n)))return n}},function(e,t,n){"use strict";const r=n(17);e.exports=e=>new Promise(t=>{r.access(e,e=>{t(!e)})}),e.exports.sync=e=>{try{return r.accessSync(e),!0}catch(e){return!1}}},function(e,t,n){"use strict";const r=n(282);class i extends Error{constructor(e){super(),this.value=e}}const o=(e,t)=>Promise.resolve(e).then(t),s=e=>Promise.all(e).then(e=>!0===e[1]&&Promise.reject(new i(e[0])));e.exports=(e,t,n)=>{n=Object.assign({concurrency:1/0,preserveOrder:!0},n);const a=r(n.concurrency),u=[...e].map(e=>[e,a(o,e,t)]),l=r(n.preserveOrder?1:1/0);return Promise.all(u.map(e=>l(s,e))).then(()=>{}).catch(e=>e instanceof i?e.value:Promise.reject(e))}},function(e,t,n){"use strict";const r=n(283),i=e=>{if(!Number.isInteger(e)&&e!==1/0||!(e>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));const t=[];let n=0;const i=()=>{n--,t.length>0&&t.shift()()},o=(e,t,...o)=>{n++;const s=r(e,...o);t(s),s.then(i,i)},s=(r,...i)=>new Promise(s=>((r,i,...s)=>{n<e?o(r,i,...s):t.push(o.bind(null,r,i,...s))})(r,s,...i));return Object.defineProperties(s,{activeCount:{get:()=>n},pendingCount:{get:()=>t.length},clearQueue:{value:()=>{t.length=0}}}),s};e.exports=i,e.exports.default=i},function(e,t,n){"use strict";const r=(e,...t)=>new Promise(n=>{n(e(...t))});e.exports=r,e.exports.default=r},function(e,t,n){e.exports=function(e){var t=(e=e||n(285)).main;return t&&function(e){return/\\iisnode\\/.test(e.filename)}(t)?function(e){return e.children.length?e.children[0].filename:e.filename}(t):t?t.filename:process.cwd()}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=285},function(e,t,n){"use strict";const r=n(287),i=n(316),o=n(319),s={spawn:!0};function a(e=process.env){return e.LC_ALL||e.LC_MESSAGES||e.LANG||e.LANGUAGE}function u(e){return a(e.split("\n").reduce((e,t)=>{const[n,r]=t.split("=");return e[n]=r.replace(/^"|"$/g,""),e},{}))}function l(e){return e&&e.replace(/[.:].*/,"")}function c(e,t=""){return t.includes(e)?e:"en_US"}function p(){return c(r.sync("defaults",["read","-globalDomain","AppleLocale"]).stdout,r.sync("locale",["-a"]).stdout)}function d(){return"darwin"===process.platform?Promise.all([r.stdout("defaults",["read","-globalDomain","AppleLocale"]),r.stdout("locale",["-a"])]).then(e=>c(e[0],e[1])):r.stdout("locale").then(e=>l(u(e)))}e.exports=o((e=s)=>{const t=a();let n;return n=t||!1===e.spawn?Promise.resolve(l(t)):"win32"===process.platform?r.stdout("wmic",["os","get","locale"]).then(e=>{const t=parseInt(e.replace("Locale",""),16);return i.from(t)}):d(),n.then(e=>e||"en_US").catch(()=>"en_US")}),e.exports.sync=o((e=s)=>{const t=a();let n;if(t||!1===e.spawn)n=l(t);else try{n="win32"===process.platform?function(){const{stdout:e}=r.sync("wmic",["os","get","locale"]),t=parseInt(e.replace("Locale",""),16);return i.from(t)}():"darwin"===process.platform?p():l(u(r.sync("locale").stdout))}catch(e){}return n||"en_US"})},function(e,t,n){"use strict";const r=n(10),i=n(72),o=n(288),s=n(302),a=n(303),u=n(304),l=n(305),c=n(310),p=n(311),d=n(314),f=n(315);function h(e,t,n){let i;return(n=Object.assign({extendEnv:!0,env:{}},n)).extendEnv&&(n.env=Object.assign({},process.env,n.env)),!0===n.__winShell?(delete n.__winShell,i={command:e,args:t,options:n,file:e,original:{cmd:e,args:t}}):i=o._parse(e,t,n),(n=Object.assign({maxBuffer:1e7,buffer:!0,stripEof:!0,preferLocal:!0,localDir:i.options.cwd||process.cwd(),encoding:"utf8",reject:!0,cleanup:!0},i.options)).stdio=f(n),n.preferLocal&&(n.env=a.env(Object.assign({},n,{cwd:n.localDir}))),n.detached&&(n.cleanup=!1),"win32"===process.platform&&"cmd.exe"===r.basename(i.command)&&i.args.unshift("/q"),{cmd:i.command,args:i.args,opts:n,parsed:i}}function g(e,t){return t&&e.stripEof&&(t=s(t)),t}function y(e,t,n){let r="/bin/sh",i=["-c",t];return n=Object.assign({},n),"win32"===process.platform&&(n.__winShell=!0,r=process.env.comspec||"cmd.exe",i=["/s","/c",`"${t}"`],n.windowsVerbatimArguments=!0),n.shell&&(r=n.shell,delete n.shell),e(r,i,n)}function E(e,t,{encoding:n,buffer:r,maxBuffer:i}){if(!e[t])return null;let o;return o=r?n?l(e[t],{encoding:n,maxBuffer:i}):l.buffer(e[t],{maxBuffer:i}):new Promise((n,r)=>{e[t].once("end",n).once("error",r)}),o.catch(e=>{throw e.stream=t,e.message=`${t} ${e.message}`,e})}function m(e,t){const{stdout:n,stderr:r}=e;let i=e.error;const{code:o,signal:s}=e,{parsed:a,joinedCmd:u}=t,l=t.timedOut||!1;if(!i){let e="";Array.isArray(a.opts.stdio)?("inherit"!==a.opts.stdio[2]&&(e+=e.length>0?r:"\n"+r),"inherit"!==a.opts.stdio[1]&&(e+="\n"+n)):"inherit"!==a.opts.stdio&&(e=`\n${r}${n}`),i=new Error(`Command failed: ${u}${e}`),i.code=o<0?d(o):o}return i.stdout=n,i.stderr=r,i.failed=!0,i.signal=s||null,i.cmd=u,i.timedOut=l,i}function A(e,t){let n=e;return Array.isArray(t)&&t.length>0&&(n+=" "+t.join(" ")),n}e.exports=(e,t,n)=>{const r=h(e,t,n),{encoding:s,buffer:a,maxBuffer:l}=r.opts,d=A(e,t);let f,y;try{f=i.spawn(r.cmd,r.args,r.opts)}catch(e){return Promise.reject(e)}r.opts.cleanup&&(y=p(()=>{f.kill()}));let v=null,R=!1;const b=()=>{v&&(clearTimeout(v),v=null),y&&y()};r.opts.timeout>0&&(v=setTimeout(()=>{v=null,R=!0,f.kill(r.opts.killSignal)},r.opts.timeout));const C=new Promise(e=>{f.on("exit",(t,n)=>{b(),e({code:t,signal:n})}),f.on("error",t=>{b(),e({error:t})}),f.stdin&&f.stdin.on("error",t=>{b(),e({error:t})})});function T(){f.stdout&&f.stdout.destroy(),f.stderr&&f.stderr.destroy()}const S=()=>c(Promise.all([C,E(f,"stdout",{encoding:s,buffer:a,maxBuffer:l}),E(f,"stderr",{encoding:s,buffer:a,maxBuffer:l})]).then(e=>{const t=e[0];if(t.stdout=e[1],t.stderr=e[2],t.error||0!==t.code||null!==t.signal){const e=m(t,{joinedCmd:d,parsed:r,timedOut:R});if(e.killed=e.killed||f.killed,!r.opts.reject)return e;throw e}return{stdout:g(r.opts,t.stdout),stderr:g(r.opts,t.stderr),code:0,failed:!1,killed:!1,signal:null,cmd:d,timedOut:!1}}),T);return o._enoent.hookChildProcess(f,r.parsed),function(e,t){null!=t&&(u(t)?t.pipe(e.stdin):e.stdin.end(t))}(f,r.opts.input),f.then=(e,t)=>S().then(e,t),f.catch=e=>S().catch(e),f},e.exports.stdout=(...t)=>e.exports(...t).then(e=>e.stdout),e.exports.stderr=(...t)=>e.exports(...t).then(e=>e.stderr),e.exports.shell=(t,n)=>y(e.exports,t,n),e.exports.sync=(e,t,n)=>{const r=h(e,t,n),o=A(e,t);if(u(r.opts.input))throw new TypeError("The `input` option cannot be a stream in sync mode");const s=i.spawnSync(r.cmd,r.args,r.opts);if(s.code=s.status,s.error||0!==s.status||null!==s.signal){const e=m(s,{joinedCmd:o,parsed:r});if(!r.opts.reject)return e;throw e}return{stdout:g(r.opts,s.stdout),stderr:g(r.opts,s.stderr),code:0,failed:!1,signal:null,cmd:o,timedOut:!1}},e.exports.shellSync=(t,n)=>y(e.exports.sync,t,n)},function(e,t,n){"use strict";const r=n(72),i=n(289),o=n(301);function s(e,t,n){const s=i(e,t,n),a=r.spawn(s.command,s.args,s.options);return o.hookChildProcess(a,s),a}e.exports=s,e.exports.spawn=s,e.exports.sync=function(e,t,n){const s=i(e,t,n),a=r.spawnSync(s.command,s.args,s.options);return a.error=a.error||o.verifyENOENTSync(a.status,s),a},e.exports._parse=i,e.exports._enoent=o},function(e,t,n){"use strict";const r=n(10),i=n(290),o=n(291),s=n(296),a=n(297),u=n(300),l="win32"===process.platform,c=/\.(?:com|exe)$/i,p=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i,d=i(()=>u.satisfies(process.version,"^4.8.0 || ^5.7.0 || >= 6.0.0",!0))||!1;function f(e){if(!l)return e;const t=function(e){e.file=o(e);const t=e.file&&a(e.file);return t?(e.args.unshift(e.file),e.command=t,o(e)):e.file}(e),n=!c.test(t);if(e.options.forceShell||n){const n=p.test(t);e.command=r.normalize(e.command),e.command=s.command(e.command),e.args=e.args.map(e=>s.argument(e,n));const i=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${i}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}e.exports=function(e,t,n){t&&!Array.isArray(t)&&(n=t,t=null);const r={command:e,args:t=t?t.slice(0):[],options:n=Object.assign({},n),file:void 0,original:{command:e,args:t}};return n.shell?function(e){if(d)return e;const t=[e.command].concat(e.args).join(" ");return l?(e.command="string"==typeof e.options.shell?e.options.shell:process.env.comspec||"cmd.exe",e.args=["/d","/s","/c",`"${t}"`],e.options.windowsVerbatimArguments=!0):("string"==typeof e.options.shell?e.command=e.options.shell:"android"===process.platform?e.command="/system/bin/sh":e.command="/bin/sh",e.args=["-c",t]),e}(r):f(r)}},function(e,t,n){"use strict";e.exports=function(e){try{return e()}catch(e){}}},function(e,t,n){"use strict";const r=n(10),i=n(292),o=n(142)();function s(e,t){const n=process.cwd(),s=null!=e.options.cwd;if(s)try{process.chdir(e.options.cwd)}catch(e){}let a;try{a=i.sync(e.command,{path:(e.options.env||process.env)[o],pathExt:t?r.delimiter:void 0})}catch(e){}finally{process.chdir(n)}return a&&(a=r.resolve(s?e.options.cwd:"",a)),a}e.exports=function(e){return s(e)||s(e,!0)}},function(e,t,n){e.exports=l,l.sync=function(e,t){for(var n=u(e,t=t||{}),r=n.env,o=n.ext,l=n.extExe,c=[],p=0,d=r.length;p<d;p++){var f=r[p];'"'===f.charAt(0)&&'"'===f.slice(-1)&&(f=f.slice(1,-1));var h=i.join(f,e);!f&&/^\.[\\\/]/.test(e)&&(h=e.slice(0,2)+h);for(var g=0,y=o.length;g<y;g++){var E=h+o[g];try{if(s.sync(E,{pathExt:l})){if(!t.all)return E;c.push(E)}}catch(e){}}}if(t.all&&c.length)return c;if(t.nothrow)return null;throw a(e)};var r="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,i=n(10),o=r?";":":",s=n(293);function a(e){var t=new Error("not found: "+e);return t.code="ENOENT",t}function u(e,t){var n=t.colon||o,i=t.path||process.env.PATH||"",s=[""];i=i.split(n);var a="";return r&&(i.unshift(process.cwd()),s=(a=t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM").split(n),-1!==e.indexOf(".")&&""!==s[0]&&s.unshift("")),(e.match(/\//)||r&&e.match(/\\/))&&(i=[""]),{env:i,ext:s,extExe:a}}function l(e,t,n){"function"==typeof t&&(n=t,t={});var r=u(e,t),o=r.env,l=r.ext,c=r.extExe,p=[];!function r(u,d){if(u===d)return t.all&&p.length?n(null,p):n(a(e));var f=o[u];'"'===f.charAt(0)&&'"'===f.slice(-1)&&(f=f.slice(1,-1));var h=i.join(f,e);!f&&/^\.[\\\/]/.test(e)&&(h=e.slice(0,2)+h),function e(i,o){if(i===o)return r(u+1,d);var a=l[i];s(h+a,{pathExt:c},(function(r,s){if(!r&&s){if(!t.all)return n(null,h+a);p.push(h+a)}return e(i+1,o)}))}(0,l.length)}(0,o.length)}},function(e,t,n){var r;n(17);function i(e,t,n){if("function"==typeof t&&(n=t,t={}),!n){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(n,r){i(e,t||{},(function(e,t){e?r(e):n(t)}))}))}r(e,t||{},(function(e,r){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,r=!1),n(e,r)}))}r="win32"===process.platform||global.TESTING_WINDOWS?n(294):n(295),e.exports=i,i.sync=function(e,t){try{return r.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},function(e,t,n){e.exports=o,o.sync=function(e,t){return i(r.statSync(e),e,t)};var r=n(17);function i(e,t,n){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var n=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!n)return!0;if(-1!==(n=n.split(";")).indexOf(""))return!0;for(var r=0;r<n.length;r++){var i=n[r].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i)return!0}return!1}(t,n)}function o(e,t,n){r.stat(e,(function(r,o){n(r,!r&&i(o,e,t))}))}},function(e,t,n){e.exports=i,i.sync=function(e,t){return o(r.statSync(e),t)};var r=n(17);function i(e,t,n){r.stat(e,(function(e,r){n(e,!e&&o(r,t))}))}function o(e,t){return e.isFile()&&function(e,t){var n=e.mode,r=e.uid,i=e.gid,o=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),s=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),u=parseInt("010",8),l=parseInt("001",8),c=a|u;return n&l||n&u&&i===s||n&a&&r===o||n&c&&0===o}(e,t)}},function(e,t,n){"use strict";const r=/([()\][%!^"`<>&|;, *?])/g;e.exports.command=function(e){return e=e.replace(r,"^$1")},e.exports.argument=function(e,t){return e=(e=`"${e=(e=(e=""+e).replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1")}"`).replace(r,"^$1"),t&&(e=e.replace(r,"^$1")),e}},function(e,t,n){"use strict";const r=n(17),i=n(298);e.exports=function(e){let t,n;Buffer.alloc?t=Buffer.alloc(150):(t=new Buffer(150),t.fill(0));try{n=r.openSync(e,"r"),r.readSync(n,t,0,150,0),r.closeSync(n)}catch(e){}return i(t.toString())}},function(e,t,n){"use strict";var r=n(299);e.exports=function(e){var t=e.match(r);if(!t)return null;var n=t[0].replace(/#! ?/,"").split(" "),i=n[0].split("/").pop(),o=n[1];return"env"===i?o:i+(o?" "+o:"")}},function(e,t,n){"use strict";e.exports=/^#!.*/},function(e,t){var n;t=e.exports=$,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],o=t.src=[],s=0,a=s++;o[a]="0|[1-9]\\d*";var u=s++;o[u]="[0-9]+";var l=s++;o[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var c=s++;o[c]="("+o[a]+")\\.("+o[a]+")\\.("+o[a]+")";var p=s++;o[p]="("+o[u]+")\\.("+o[u]+")\\.("+o[u]+")";var d=s++;o[d]="(?:"+o[a]+"|"+o[l]+")";var f=s++;o[f]="(?:"+o[u]+"|"+o[l]+")";var h=s++;o[h]="(?:-("+o[d]+"(?:\\."+o[d]+")*))";var g=s++;o[g]="(?:-?("+o[f]+"(?:\\."+o[f]+")*))";var y=s++;o[y]="[0-9A-Za-z-]+";var E=s++;o[E]="(?:\\+("+o[y]+"(?:\\."+o[y]+")*))";var m=s++,A="v?"+o[c]+o[h]+"?"+o[E]+"?";o[m]="^"+A+"$";var v="[v=\\s]*"+o[p]+o[g]+"?"+o[E]+"?",R=s++;o[R]="^"+v+"$";var b=s++;o[b]="((?:<|>)?=?)";var C=s++;o[C]=o[u]+"|x|X|\\*";var T=s++;o[T]=o[a]+"|x|X|\\*";var S=s++;o[S]="[v=\\s]*("+o[T]+")(?:\\.("+o[T]+")(?:\\.("+o[T]+")(?:"+o[h]+")?"+o[E]+"?)?)?";var O=s++;o[O]="[v=\\s]*("+o[C]+")(?:\\.("+o[C]+")(?:\\.("+o[C]+")(?:"+o[g]+")?"+o[E]+"?)?)?";var _=s++;o[_]="^"+o[b]+"\\s*"+o[S]+"$";var I=s++;o[I]="^"+o[b]+"\\s*"+o[O]+"$";var P=s++;o[P]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var w=s++;o[w]="(?:~>?)";var N=s++;o[N]="(\\s*)"+o[w]+"\\s+",i[N]=new RegExp(o[N],"g");var L=s++;o[L]="^"+o[w]+o[S]+"$";var D=s++;o[D]="^"+o[w]+o[O]+"$";var x=s++;o[x]="(?:\\^)";var F=s++;o[F]="(\\s*)"+o[x]+"\\s+",i[F]=new RegExp(o[F],"g");var M=s++;o[M]="^"+o[x]+o[S]+"$";var B=s++;o[B]="^"+o[x]+o[O]+"$";var U=s++;o[U]="^"+o[b]+"\\s*("+v+")$|^$";var k=s++;o[k]="^"+o[b]+"\\s*("+A+")$|^$";var j=s++;o[j]="(\\s*)"+o[b]+"\\s*("+v+"|"+o[S]+")",i[j]=new RegExp(o[j],"g");var G=s++;o[G]="^\\s*("+o[S]+")\\s+-\\s+("+o[S]+")\\s*$";var H=s++;o[H]="^\\s*("+o[O]+")\\s+-\\s+("+o[O]+")\\s*$";var W=s++;o[W]="(<|>)?=?\\s*\\*";for(var V=0;V<35;V++)n(V,o[V]),i[V]||(i[V]=new RegExp(o[V]));function Y(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof $)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?i[R]:i[m]).test(e))return null;try{return new $(e,t)}catch(e){return null}}function $(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof $){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof $))return new $(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?i[R]:i[m]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=Y,t.valid=function(e,t){var n=Y(e,t);return n?n.version:null},t.clean=function(e,t){var n=Y(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=$,$.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},$.prototype.toString=function(){return this.version},$.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof $||(e=new $(e,this.options)),this.compareMain(e)||this.comparePre(e)},$.prototype.compareMain=function(e){return e instanceof $||(e=new $(e,this.options)),q(this.major,e.major)||q(this.minor,e.minor)||q(this.patch,e.patch)},$.prototype.comparePre=function(e){if(e instanceof $||(e=new $(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return q(r,i)}while(++t)},$.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new $(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(J(e,t))return null;var n=Y(e),r=Y(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=q;var K=/^[0-9]+$/;function q(e,t){var n=K.test(e),r=K.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function z(e,t,n){return new $(e,n).compare(new $(t,n))}function Q(e,t,n){return z(e,t,n)>0}function Z(e,t,n){return z(e,t,n)<0}function J(e,t,n){return 0===z(e,t,n)}function X(e,t,n){return 0!==z(e,t,n)}function ee(e,t,n){return z(e,t,n)>=0}function te(e,t,n){return z(e,t,n)<=0}function ne(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return J(e,n,r);case"!=":return X(e,n,r);case">":return Q(e,n,r);case">=":return ee(e,n,r);case"<":return Z(e,n,r);case"<=":return te(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function re(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof re){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof re))return new re(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return q(t,e)},t.major=function(e,t){return new $(e,t).major},t.minor=function(e,t){return new $(e,t).minor},t.patch=function(e,t){return new $(e,t).patch},t.compare=z,t.compareLoose=function(e,t){return z(e,t,!0)},t.rcompare=function(e,t,n){return z(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compare(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.rcompare(e,r,n)}))},t.gt=Q,t.lt=Z,t.eq=J,t.neq=X,t.gte=ee,t.lte=te,t.cmp=ne,t.Comparator=re;var ie={};function oe(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof oe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new oe(e.raw,t);if(e instanceof re)return new oe(e.value,t);if(!(this instanceof oe))return new oe(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function ae(e,t,n,r,i,o,s,a,u,l,c,p,d){return((t=se(n)?"":se(r)?">="+n+".0.0":se(i)?">="+n+"."+r+".0":">="+t)+" "+(a=se(u)?"":se(l)?"<"+(+u+1)+".0.0":se(c)?"<"+u+"."+(+l+1)+".0":p?"<="+u+"."+l+"."+c+"-"+p:"<="+a)).trim()}function ue(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==ie&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new oe(t,n)}catch(e){return!1}return t.test(e)}function ce(e,t,n,r){var i,o,s,a,u;switch(e=new $(e,r),t=new oe(t,r),n){case">":i=Q,o=te,s=Z,a=">",u=">=";break;case"<":i=Z,o=ee,s=Q,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var c=t.set[l],p=null,d=null;if(c.forEach((function(e){e.semver===ie&&(e=new re(">=0.0.0")),p=p||e,d=d||e,i(e.semver,p.semver,r)?p=e:s(e.semver,d.semver,r)&&(d=e)})),p.operator===a||p.operator===u)return!1;if((!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===u&&s(e,d.semver))return!1}return!0}re.prototype.parse=function(e){var t=this.options.loose?i[U]:i[k],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new $(n[2],this.options.loose):this.semver=ie},re.prototype.toString=function(){return this.value},re.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===ie||("string"==typeof e&&(e=new $(e,this.options)),ne(e,this.operator,this.semver,this.options))},re.prototype.intersects=function(e,t){if(!(e instanceof re))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new oe(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new oe(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||u},t.Range=oe,oe.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},oe.prototype.toString=function(){return this.range},oe.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?i[H]:i[G];e=e.replace(r,ae),n("hyphen replace",e),e=e.replace(i[j],"$1$2$3"),n("comparator trim",e,i[j]),e=(e=(e=e.replace(i[N],"$1~")).replace(i[F],"$1^")).split(/\s+/).join(" ");var o=t?i[U]:i[k],s=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?i[B]:i[M];return e.replace(r,(function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),se(r)?a="":se(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":se(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?i[D]:i[L];return e.replace(r,(function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),se(r)?a="":se(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":se(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?i[I]:i[_];return e.replace(r,(function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var u=se(i),l=u||se(o),c=l||se(s);return"="===r&&c&&(r=""),u?t=">"===r||"<"===r?"<0.0.0":"*":r&&c?(l&&(o=0),s=0,">"===r?(r=">=",l?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):l?t=">="+i+".0.0 <"+(+i+1)+".0.0":c&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(i[W],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(o)}))),s=s.map((function(e){return new re(e,this.options)}),this)},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new oe(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},oe.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new $(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new oe(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new $(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new oe(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new $(r=e,n)))})),r},t.minVersion=function(e,t){e=new oe(e,t);var n=new $("0.0.0");if(e.test(n))return n;if(n=new $("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){e.set[r].forEach((function(e){var t=new $(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!Q(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new oe(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return ce(e,t,"<",n)},t.gtr=function(e,t,n){return ce(e,t,">",n)},t.outside=ce,t.prerelease=function(e,t){var n=Y(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new oe(e,n),t=new oe(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof $)return e;if("string"!=typeof e)return null;var t=e.match(i[P]);if(null==t)return null;return Y(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},function(e,t,n){"use strict";const r="win32"===process.platform;function i(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function o(e,t){return r&&1===e&&!t.file?i(t.original,"spawn"):null}e.exports={hookChildProcess:function(e,t){if(!r)return;const n=e.emit;e.emit=function(r,i){if("exit"===r){const r=o(i,t);if(r)return n.call(e,"error",r)}return n.apply(e,arguments)}},verifyENOENT:o,verifyENOENTSync:function(e,t){return r&&1===e&&!t.file?i(t.original,"spawnSync"):null},notFoundError:i}},function(e,t,n){"use strict";e.exports=function(e){var t="string"==typeof e?"\n":"\n".charCodeAt(),n="string"==typeof e?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===n&&(e=e.slice(0,e.length-1)),e}},function(e,t,n){"use strict";const r=n(10),i=n(142);e.exports=e=>{let t;e=Object.assign({cwd:process.cwd(),path:process.env[i()]},e);let n=r.resolve(e.cwd);const o=[];for(;t!==n;)o.push(r.join(n,"node_modules/.bin")),t=n,n=r.resolve(n,"..");return o.push(r.dirname(process.execPath)),o.concat(e.path).join(r.delimiter)},e.exports.env=t=>{t=Object.assign({env:process.env},t);const n=Object.assign({},t.env),r=i({env:n});return t.path=n[r],n[r]=e.exports(t),n}},function(e,t,n){"use strict";var r=e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe};r.writable=function(e){return r(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState},r.readable=function(e){return r(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState},r.duplex=function(e){return r.writable(e)&&r.readable(e)},r.transform=function(e){return r.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState}},function(e,t,n){"use strict";const r=n(306),i=n(309);class o extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}function s(e,t){if(!e)return Promise.reject(new Error("Expected a stream"));t=Object.assign({maxBuffer:1/0},t);const{maxBuffer:n}=t;let s;return new Promise((a,u)=>{const l=e=>{e&&(e.bufferedData=s.getBufferedValue()),u(e)};s=r(e,i(t),e=>{e?l(e):a()}),s.on("data",()=>{s.getBufferedLength()>n&&l(new o)})}).then(()=>s.getBufferedValue())}e.exports=s,e.exports.buffer=(e,t)=>s(e,Object.assign({},t,{encoding:"buffer"})),e.exports.array=(e,t)=>s(e,Object.assign({},t,{array:!0})),e.exports.MaxBufferError=o},function(e,t,n){var r=n(143),i=n(308),o=n(17),s=function(){},a=/^v?\.0/.test(process.version),u=function(e){return"function"==typeof e},l=function(e,t,n,l){l=r(l);var c=!1;e.on("close",(function(){c=!0})),i(e,{readable:t,writable:n},(function(e){if(e)return l(e);c=!0,l()}));var p=!1;return function(t){if(!c&&!p)return p=!0,function(e){return!!a&&(!!o&&((e instanceof(o.ReadStream||s)||e instanceof(o.WriteStream||s))&&u(e.close)))}(e)?e.close(s):function(e){return e.setHeader&&u(e.abort)}(e)?e.abort():u(e.destroy)?e.destroy():void l(t||new Error("stream was destroyed"))}},c=function(e){e()},p=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),n=u(t[t.length-1]||s)&&t.pop()||s;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r=t.map((function(i,o){var s=o<t.length-1;return l(i,s,o>0,(function(t){e||(e=t),t&&r.forEach(c),s||(r.forEach(c),n(e))}))}));return t.reduce(p)}},function(e,t){e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){r[e]=t[e]})),r;function r(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach((function(e){r[e]=i[e]})),r}}},function(e,t,n){var r=n(143),i=function(){},o=function(e,t,n){if("function"==typeof t)return o(e,null,t);t||(t={}),n=r(n||i);var s=e._writableState,a=e._readableState,u=t.readable||!1!==t.readable&&e.readable,l=t.writable||!1!==t.writable&&e.writable,c=!1,p=function(){e.writable||d()},d=function(){l=!1,u||n.call(e)},f=function(){u=!1,l||n.call(e)},h=function(t){n.call(e,t?new Error("exited with error code: "+t):null)},g=function(t){n.call(e,t)},y=function(){process.nextTick(E)},E=function(){if(!c)return(!u||a&&a.ended&&!a.destroyed)&&(!l||s&&s.ended&&!s.destroyed)?void 0:n.call(e,new Error("premature close"))},m=function(){e.req.on("finish",d)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?l&&!s&&(e.on("end",p),e.on("close",p)):(e.on("complete",d),e.on("abort",y),e.req?m():e.on("request",m)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",h),e.on("end",f),e.on("finish",d),!1!==t.error&&e.on("error",g),e.on("close",y),function(){c=!0,e.removeListener("complete",d),e.removeListener("abort",y),e.removeListener("request",m),e.req&&e.req.removeListener("finish",d),e.removeListener("end",p),e.removeListener("close",p),e.removeListener("finish",d),e.removeListener("exit",h),e.removeListener("end",f),e.removeListener("error",g),e.removeListener("close",y)}};e.exports=o},function(e,t,n){"use strict";const{PassThrough:r}=n(144);e.exports=e=>{e=Object.assign({},e);const{array:t}=e;let{encoding:n}=e;const i="buffer"===n;let o=!1;t?o=!(n||i):n=n||"utf8",i&&(n=null);let s=0;const a=[],u=new r({objectMode:o});return n&&u.setEncoding(n),u.on("data",e=>{a.push(e),o?s=a.length:s+=e.length}),u.getBufferedValue=()=>t?a:i?Buffer.concat(a,s):a.join(""),u.getBufferedLength=()=>s,u}},function(e,t,n){"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},function(e,t,n){var r,i=n(312),o=n(313),s=/^win/i.test(process.platform),a=n(64);function u(){p&&(p=!1,o.forEach((function(e){try{process.removeListener(e,c[e])}catch(e){}})),process.emit=g,process.reallyExit=f,r.count-=1)}function l(e,t,n){r.emitted[e]||(r.emitted[e]=!0,r.emit(e,t,n))}"function"!=typeof a&&(a=a.EventEmitter),process.__signal_exit_emitter__?r=process.__signal_exit_emitter__:((r=process.__signal_exit_emitter__=new a).count=0,r.emitted={}),r.infinite||(r.setMaxListeners(1/0),r.infinite=!0),e.exports=function(e,t){i.equal(typeof e,"function","a callback must be provided for exit handler"),!1===p&&d();var n="exit";t&&t.alwaysLast&&(n="afterexit");return r.on(n,e),function(){r.removeListener(n,e),0===r.listeners("exit").length&&0===r.listeners("afterexit").length&&u()}},e.exports.unload=u;var c={};o.forEach((function(e){c[e]=function(){process.listeners(e).length===r.count&&(u(),l("exit",null,e),l("afterexit",null,e),s&&"SIGHUP"===e&&(e="SIGINT"),process.kill(process.pid,e))}})),e.exports.signals=function(){return o},e.exports.load=d;var p=!1;function d(){p||(p=!0,r.count+=1,o=o.filter((function(e){try{return process.on(e,c[e]),!0}catch(e){return!1}})),process.emit=y,process.reallyExit=h)}var f=process.reallyExit;function h(e){process.exitCode=e||0,l("exit",process.exitCode,null),l("afterexit",process.exitCode,null),f.call(process,process.exitCode)}var g=process.emit;function y(e,t){if("exit"===e){void 0!==t&&(process.exitCode=t);var n=g.apply(this,arguments);return l("exit",process.exitCode,null),l("afterexit",process.exitCode,null),n}return g.apply(this,arguments)}},function(e,t){e.exports=require("assert")},function(e,t){e.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&e.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&e.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")},function(e,t,n){"use strict";const r=n(37);let i;if("function"==typeof r.getSystemErrorName)e.exports=r.getSystemErrorName;else{try{if(i=process.binding("uv"),"function"!=typeof i.errname)throw new TypeError("uv.errname is not a function")}catch(e){console.error("execa/lib/errname: unable to establish process.binding('uv')",e),i=null}e.exports=e=>o(i,e)}function o(e,t){if(e)return e.errname(t);if(!(t<0))throw new Error("err >= 0");return"Unknown system error "+t}e.exports.__test__=o},function(e,t,n){"use strict";const r=["stdin","stdout","stderr"];e.exports=e=>{if(!e)return null;if(e.stdio&&(e=>r.some(t=>Boolean(e[t])))(e))throw new Error("It's not possible to provide `stdio` in combination with one of "+r.map(e=>`\`${e}\``).join(", "));if("string"==typeof e.stdio)return e.stdio;const t=e.stdio||[];if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);const n=[],i=Math.max(t.length,r.length);for(let o=0;o<i;o++){let i=null;void 0!==t[o]?i=t[o]:void 0!==e[r[o]]&&(i=e[r[o]]),n[o]=i}return n}},function(e,t,n){"use strict";const r=n(317),i=n(318),o=r(i);t.from=e=>{if("number"!=typeof e)throw new TypeError("Expected a number");return o[e]},t.to=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return i[e]},t.all=i},function(e,t,n){"use strict";e.exports=e=>{if("object"!=typeof e)throw new TypeError("Expected an object");const t={};for(const n of Object.keys(e)){t[e[n]]=n}return t}},function(e){e.exports=JSON.parse('{"af_ZA":1078,"am_ET":1118,"ar_AE":14337,"ar_BH":15361,"ar_DZ":5121,"ar_EG":3073,"ar_IQ":2049,"ar_JO":11265,"ar_KW":13313,"ar_LB":12289,"ar_LY":4097,"ar_MA":6145,"ar_OM":8193,"ar_QA":16385,"ar_SA":1025,"ar_SY":10241,"ar_TN":7169,"ar_YE":9217,"arn_CL":1146,"as_IN":1101,"az_AZ":2092,"ba_RU":1133,"be_BY":1059,"bg_BG":1026,"bn_IN":1093,"bo_BT":2129,"bo_CN":1105,"br_FR":1150,"bs_BA":8218,"ca_ES":1027,"co_FR":1155,"cs_CZ":1029,"cy_GB":1106,"da_DK":1030,"de_AT":3079,"de_CH":2055,"de_DE":1031,"de_LI":5127,"de_LU":4103,"div_MV":1125,"dsb_DE":2094,"el_GR":1032,"en_AU":3081,"en_BZ":10249,"en_CA":4105,"en_CB":9225,"en_GB":2057,"en_IE":6153,"en_IN":18441,"en_JA":8201,"en_MY":17417,"en_NZ":5129,"en_PH":13321,"en_TT":11273,"en_US":1033,"en_ZA":7177,"en_ZW":12297,"es_AR":11274,"es_BO":16394,"es_CL":13322,"es_CO":9226,"es_CR":5130,"es_DO":7178,"es_EC":12298,"es_ES":3082,"es_GT":4106,"es_HN":18442,"es_MX":2058,"es_NI":19466,"es_PA":6154,"es_PE":10250,"es_PR":20490,"es_PY":15370,"es_SV":17418,"es_UR":14346,"es_US":21514,"es_VE":8202,"et_EE":1061,"eu_ES":1069,"fa_IR":1065,"fi_FI":1035,"fil_PH":1124,"fo_FO":1080,"fr_BE":2060,"fr_CA":3084,"fr_CH":4108,"fr_FR":1036,"fr_LU":5132,"fr_MC":6156,"fy_NL":1122,"ga_IE":2108,"gbz_AF":1164,"gl_ES":1110,"gsw_FR":1156,"gu_IN":1095,"ha_NG":1128,"he_IL":1037,"hi_IN":1081,"hr_BA":4122,"hr_HR":1050,"hu_HU":1038,"hy_AM":1067,"id_ID":1057,"ii_CN":1144,"is_IS":1039,"it_CH":2064,"it_IT":1040,"iu_CA":2141,"ja_JP":1041,"ka_GE":1079,"kh_KH":1107,"kk_KZ":1087,"kl_GL":1135,"kn_IN":1099,"ko_KR":1042,"kok_IN":1111,"ky_KG":1088,"lb_LU":1134,"lo_LA":1108,"lt_LT":1063,"lv_LV":1062,"mi_NZ":1153,"mk_MK":1071,"ml_IN":1100,"mn_CN":2128,"mn_MN":1104,"moh_CA":1148,"mr_IN":1102,"ms_BN":2110,"ms_MY":1086,"mt_MT":1082,"my_MM":1109,"nb_NO":1044,"ne_NP":1121,"nl_BE":2067,"nl_NL":1043,"nn_NO":2068,"ns_ZA":1132,"oc_FR":1154,"or_IN":1096,"pa_IN":1094,"pl_PL":1045,"ps_AF":1123,"pt_BR":1046,"pt_PT":2070,"qut_GT":1158,"quz_BO":1131,"quz_EC":2155,"quz_PE":3179,"rm_CH":1047,"ro_RO":1048,"ru_RU":1049,"rw_RW":1159,"sa_IN":1103,"sah_RU":1157,"se_FI":3131,"se_NO":1083,"se_SE":2107,"si_LK":1115,"sk_SK":1051,"sl_SI":1060,"sma_NO":6203,"sma_SE":7227,"smj_NO":4155,"smj_SE":5179,"smn_FI":9275,"sms_FI":8251,"sq_AL":1052,"sr_BA":7194,"sr_SP":3098,"sv_FI":2077,"sv_SE":1053,"sw_KE":1089,"syr_SY":1114,"ta_IN":1097,"te_IN":1098,"tg_TJ":1064,"th_TH":1054,"tk_TM":1090,"tmz_DZ":2143,"tn_ZA":1074,"tr_TR":1055,"tt_RU":1092,"ug_CN":1152,"uk_UA":1058,"ur_IN":2080,"ur_PK":1056,"uz_UZ":2115,"vi_VN":1066,"wen_DE":1070,"wo_SN":1160,"xh_ZA":1076,"yo_NG":1130,"zh_CHS":4,"zh_CHT":31748,"zh_CN":2052,"zh_HK":3076,"zh_MO":5124,"zh_SG":4100,"zh_TW":1028,"zu_ZA":1077}')},function(e,t,n){"use strict";const r=n(320),i=n(321),o=n(322),s=new WeakMap,a=(...e)=>{if(0===e.length)return"__defaultKey";if(1===e.length){const[t]=e;if(null==t||"function"!=typeof t&&"object"!=typeof t)return t}return JSON.stringify(e)},u=(e,t)=>{"number"==typeof(t=Object.assign({cacheKey:a,cache:new Map,cachePromiseRejection:!1},t)).maxAge&&o(t.cache);const{cache:n}=t;t.maxAge=t.maxAge||0;const u=function(...r){const o=t.cacheKey(...r);if(n.has(o))return n.get(o).data;const s=e.call(this,...r);return((e,r)=>{n.set(e,{data:r,maxAge:Date.now()+t.maxAge})})(o,s),i(s)&&!1===t.cachePromiseRejection&&s.catch(()=>n.delete(o)),s};try{r(u,e)}catch(e){}return s.set(u,t.cache),u};e.exports=u,e.exports.default=u,e.exports.clear=e=>{const t=s.get(e);t&&"function"==typeof t.clear&&t.clear()}},function(e,t,n){"use strict";const r=(e,t)=>{for(const n of Reflect.ownKeys(t))Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n));return e};e.exports=r,e.exports.default=r},function(e,t,n){"use strict";const r=e=>e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch;e.exports=r,e.exports.default=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(323));function s(e,t="maxAge"){let n,i,s;const a=()=>r(this,void 0,void 0,(function*(){if(void 0!==n)return;const a=a=>r(this,void 0,void 0,(function*(){s=o.default();const r=a[1][t]-Date.now();return r<=0?(e.delete(a[0]),void s.resolve()):(n=a[0],i=setTimeout(()=>{e.delete(a[0]),s&&s.resolve()},r),"function"==typeof i.unref&&i.unref(),s.promise)}));try{for(const t of e)yield a(t)}catch(e){}n=void 0})),u=e.set.bind(e);return e.set=(t,r)=>{e.has(t)&&e.delete(t);const o=u(t,r);return n&&n===t&&(n=void 0,void 0!==i&&(clearTimeout(i),i=void 0),void 0!==s&&(s.reject(void 0),s=void 0)),a(),o},a(),e}t.default=s,e.exports=s,e.exports.default=s},function(e,t,n){"use strict";e.exports=()=>{const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}},function(e,t,n){var r=n(146),i=n(325);e.exports=function(e,t,n){var o=i(e,t);return n||(o=o.replace(/ (?=\d)/g,"_")),o.replace(/ (.)/g,(function(e,n){return r(n,t)}))}},function(e,t,n){var r=n(326),i=n(327),o=n(328),s=n(329);e.exports=function(e,t,n){if(null==e)return"";return n="string"!=typeof n?" ":n,e=String(e).replace(o,"$1 $2").replace(s,"$1 $2").replace(i,(function(e,t,r){return 0===t||t===r.length-e.length?"":n})),r(e,t)}},function(e,t){var n={tr:{regexp:/\u0130|\u0049|\u0049\u0307/g,map:{"İ":"i",I:"ı","İ":"i"}},az:{regexp:/[\u0130]/g,map:{"İ":"i",I:"ı","İ":"i"}},lt:{regexp:/[\u0049\u004A\u012E\u00CC\u00CD\u0128]/g,map:{I:"i̇",J:"j̇","Į":"į̇","Ì":"i̇̀","Í":"i̇́","Ĩ":"i̇̃"}}};e.exports=function(e,t){var r=n[t];return e=null==e?"":String(e),r&&(e=e.replace(r.regexp,(function(e){return r.map[e]}))),e.toLowerCase()}},function(e,t){e.exports=/[^A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]+/g},function(e,t){e.exports=/([a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19])([A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A])/g},function(e,t){e.exports=/([A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A])([A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A][a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A])/g},function(e,t,n){var r=n(146);e.exports=function(e,t){return null==e?"":(e=String(e),r(e.charAt(0),t)+e.substr(1))}},function(e,t,n){"use strict";e.exports=e=>{const t=1e9*e[0]+e[1];return{seconds:t/1e9,milliseconds:t/1e6,nanoseconds:t}}},function(e,t,n){"use strict";const r=n(7)("sc2:debug:launcher"),i=n(70),o=n(17),{promisify:s}=n(37),{spawn:a}=n(72),u=n(10),l=n(333);let c,p,d,f;const h=s(o.access);e.exports={launcher:async function(e={}){!function(){c="darwin"===i.platform()?u.join("Library","Application Support","Blizzard","StarCraft II","ExecuteInfo.txt"):u.join("Documents","StarCraft II","ExecuteInfo.txt");const e=i.homedir(),t=o.readFileSync(u.join(e,c)).toString();p=t.match(/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/m)[2];const n=p.split(u.sep);d=n[n.length-1],f=n.slice(0,n.findIndex(e=>"StarCraft II"===e)+1).join(u.sep)}();const t={listen:"127.0.0.1",port:5e3,displayMode:0,force:!1,killAll:!1,...e},[n]=await l("port",t.port);if(n&&0!==n.pid){if(r("Existing process found running on same port: %o",n),!e.force)return r("Skipping launch since the client already exists listening on this port (set { force: true } in options if you want to force restart it)"),n.pid;r('"Force" enabled, killing process to restart...'),n.pid&&process.kill(n.pid,"SIGKILL")}const s=await l("name",d,!0);s.length>0?(r(`Existing ${d} processes found running: %o`,s),e.forceAll?(r(`ForceAll" enabled, killing *all* ${d} processes before launching...`),s.forEach(e=>{e.pid&&process.kill(e.pid,"SIGKILL")})):r("Not killing existing clients running on a different port, (set { forceAll: true } in options if you want this behavior)")):r("no existing processes"),r("Launching new process...");const h=a(p,["-listen",t.listen,"-port",String(t.port),"-displayMode",String(t.displayMode)],{cwd:"win32"===i.platform()?u.join(f,"Support64"):void 0,detached:!0,stdio:"ignore"});for(r(`Waiting for new process to start listening on port ${t.port}...`);{pid:0,...(await l("port",t.port))[0]}.pid!==h.pid;);return r("New client is up and running successfully"),h.unref(),h},findMap:async function(e){const t=u.join(f,"Maps",e+".SC2Map"),n=u.join(f,"Maps",e.replace(/\s/g,"")+".SC2Map");try{return await h(t,o.constants.F_OK),r(`Map ${e} found in path: ${t}`),t}catch(e){r(t+" does not exist... trying alternative")}try{return await h(n,o.constants.F_OK),r(`Map ${e} found in path: ${n}`),n}catch(e){r(n+" also does not exist... cannot find map")}throw new Error(`Map "${e}" not found`)}}},function(e,t,n){"use strict";e.exports=n(334)},function(e,t,n){"use strict";const r=n(335),i=n(336),o={port:(e,t)=>r(e,t).then(e=>o.pid(e,t),()=>[]),pid:(e,t)=>i({pid:e,strict:t}),name:(e,t)=>i({name:e,strict:t})};e.exports=function(e,t,n){return new Promise((r,i)=>{if(e in o){const s=/^\d+$/.test(t);"pid"!==e||s?"port"!==e||s?o[e](t,n).then(r,i):i(new Error("port must be a number")):i(new Error("pid must be a number"))}else i(new Error(`do not support find by "${e}"`))})}},function(e,t,n){"use strict";const r=n(70),i=n(17),o=n(147),s={darwin:e=>new Promise((t,n)=>{o.exec("netstat -anv -p TCP && netstat -anv -p UDP",(function(r,i,s){if(r)n(r);else{if(r=s.toString().trim())return void n(r);const a=o.stripLine(i.toString(),2),u=o.extractColumns(a,[0,3,8],10).filter(e=>!!String(e[0]).match(/^(udp|tcp)/)).find(t=>{const n=String(t[1]).match(/\.(\d+)$/);if(n&&n[1]===String(e))return!0});u&&u[2].length?t(parseInt(u[2],10)):n(new Error(`pid of port (${e}) not found`))}}))}),freebsd:"darwin",sunos:"darwin",linux:e=>new Promise((t,n)=>{o.exec("netstat -tunlp",(function(r,i,s){if(r)n(r);else{const r=s.toString().trim();r&&console.warn(r);const a=o.stripLine(i.toString(),2),u=o.extractColumns(a,[3,6],7).find(t=>{const n=String(t[0]).match(/:(\d+)$/);if(n&&n[1]===String(e))return!0});if(u&&u[1]){const r=u[1].split("/",1)[0];r.length?t(parseInt(r,10)):n(new Error(`pid of port (${e}) not found`))}else n(new Error(`pid of port (${e}) not found`))}}))}),win32:e=>new Promise((t,n)=>{o.exec("netstat -ano",(function(r,i,s){if(r)n(r);else{if(r=s.toString().trim())return void n(r);const a=o.stripLine(i.toString(),4),u=o.extractColumns(a,[1,4],5).find(t=>{const n=String(t[0]).match(/:(\d+)$/);if(n&&n[1]===String(e))return!0});u&&u[1].length&&parseInt(u[1],10)>0?t(parseInt(u[1],10)):n(new Error(`pid of port (${e}) not found`))}}))}),android:e=>new Promise((t,n)=>{const s=r.tmpdir()+"/.find-process",a=s+"/"+process.pid,u='netstat -tunp >> "'+a+'"';var l;(l=s,new Promise((e,t)=>{i.existsSync(l)?e():i.mkdir(l,n=>{n?t(n):e()})})).then(()=>{o.exec(u,()=>{i.readFile(a,"utf8",(r,s)=>{if(i.unlink(a,()=>{}),r)n(r);else{s=o.stripLine(s,2);const r=o.extractColumns(s,[3,6],7).find(t=>{const n=String(t[0]).match(/:(\d+)$/);if(n&&n[1]===String(e))return!0});if(r&&r[1]){const i=r[1].split("/",1)[0];i.length?t(parseInt(i,10)):n(new Error(`pid of port (${e}) not found`))}else n(new Error(`pid of port (${e}) not found`))}})})})})};e.exports=function(e){const t=process.platform;return new Promise((n,r)=>{if(!(t in s))return r(new Error(`platform ${t} is unsupported`));let i=s[t];"string"==typeof i&&(i=s[i]),i(e).then(n,r)})}},function(e,t,n){"use strict";const r=n(10),i=n(147);function o(e,t){return!t||!(!e||!e.match)&&e.match(t)}function s(e){const t=e.split(r.sep),n=t[t.length-1];n&&(t[t.length-1]=n.split(" ")[0]);const i=[];for(const e of t){const t=e.indexOf(" -");if(t>=0){i.push(e.substring(0,t).trim());break}if(e.endsWith(" ")){i.push(e.trim());break}i.push(e)}return i.join(r.sep)}function a(e){if("darwin"===process.platform){const t=e.indexOf(".app/");if(t>=0)return r.basename(e.substring(0,t))}return r.basename(e)}const u={darwin:e=>new Promise((t,n)=>{let r;r="pid"in e?`ps -p ${e.pid} -ww -o pid,ppid,uid,gid,args`:"ps ax -ww -o pid,ppid,uid,gid,args",i.exec(r,(function(r,u,l){if(r)"pid"in e?t([]):n(r);else{if(r=l.toString().trim())return void n(r);const c=i.stripLine(u.toString(),1);let p=i.extractColumns(c,[0,1,2,3,4],5).filter(t=>t[0]&&e.pid?t[0]===String(e.pid):t[4]&&e.name?o(t[4],e.name):!!t[0]).map(e=>{const t=s(String(e[4]));return{pid:parseInt(e[0],10),ppid:parseInt(e[1],10),uid:parseInt(e[2],10),gid:parseInt(e[3],10),name:a(t),bin:t,cmd:e[4]}});e.strict&&e.name&&(p=p.filter(t=>t.name===e.name)),t(p)}}))}),linux:"darwin",sunos:"darwin",freebsd:"darwin",win32:e=>new Promise((t,n)=>{const r="Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",s=[],a=i.spawn("powershell.exe",["/c",r],{detached:!1,windowsHide:!0});a.stdout.on("data",e=>{s.push(e.toString())}),a.on("close",a=>{if(0!==a)return n(new Error("Command '"+r+"' terminated with code: "+a));const u=i.parseTable(s.join("")).filter(t=>{if("pid"in e)return t.ProcessId===String(e.pid);if(e.name){const n=t.Name||"";return e.strict?n===e.name||n.endsWith(".exe")&&n.slice(0,-4)===e.name:o(t.CommandLine||n,e.name)}return!0}).map(e=>({pid:parseInt(e.ProcessId,10),ppid:parseInt(e.ParentProcessId,10),bin:e.ExecutablePath,name:e.Name||"",cmd:e.CommandLine}));t(u)})}),android:e=>new Promise((t,n)=>{i.exec("ps",(function(r,u,l){if(r)"pid"in e?t([]):n(r);else{if(r=l.toString().trim())return void n(r);const c=i.stripLine(u.toString(),1);let p=i.extractColumns(c,[0,3],4).filter(t=>t[0]&&e.pid?t[0]===String(e.pid):t[1]&&e.name?o(t[1],e.name):!!t[0]).map(e=>{const t=String(e[1]),n=s(t);return{pid:parseInt(e[0],10),name:a(n),bin:n,cmd:t}});e.strict&&e.name&&(p=p.filter(t=>t.name===e.name)),t(p)}}))})};e.exports=function(e){const t=process.platform;return new Promise((n,r)=>{if(!(t in u))return r(new Error(`platform ${t} is unsupported`));let i=u[t];"string"==typeof i&&(i=u[i]),i(e).then(n,r)})}},function(e,t,n){"use strict";const r=n(338),i=n(339),o=n(362),s=n(363),a=n(364),u=n(376),l=n(377),c=n(394);e.exports=function(e){const t={agent:null,data:null,resources:null};return t.data=s(),t.resources=r(),t.resources.set({frame:u(),map:l(t),debug:o(t),units:c(t),events:a(t),actions:i(t,e)}),t}},function(e,t,n){"use strict";e.exports=function(){const e={actions:null,events:null,frame:null,map:null,units:null,debug:null};return{set(t){Object.entries(t).forEach(([t,n])=>{e[t]=n})},get:()=>e}}},function(e,t,n){"use strict";const r=n(7)("sc2:debug:actionManager"),i=n(88),o=n(340),s=n(22),{distance:a,nClosestPoint:u}=n(2),{gridsInCircle:l}=n(15),{Ability:c,enums:{Alliance:p,Race:d,AbilityDataTarget:f},UnitType:h,UnitTypeId:g,WarpUnitAbility:y}=n(8),{GasMineRace:E}=n(13),m=n(159),{ActionManagerError:A,BuildError:v,TrainError:R,GatherError:b}=n(65);function C(e,t){return Array.from({length:t},()=>e[Math.floor(Math.random()*e.length)])}e.exports=function(e,t){const n=t||o();return{_client:n,async do(e,t,n={}){let r=Array.isArray(t)?t:[t];r[0].tag&&(r=r.map(e=>e.tag));const i={abilityId:e,unitTags:r,queueCommand:n.queue||!1};return n.target&&n.target.tag?i.targetUnitTag=n.target.tag:n.target&&n.target.x&&(i.targetWorldSpacePos=n.target),this.sendAction(i).then(async e=>{if(1!==e.result[0])throw new Error("Could not perform ability, result "+e.result[0]);return e})},async smart(e,t,n=!1){const r=Array.isArray(e)?e:[e],i={abilityId:c.SMART,unitTags:r.map(e=>e.tag),queueCommand:n};return t.tag?i.targetUnitTag=t.tag:t.x&&(i.targetWorldSpacePos=t),this.sendAction(i).then(async e=>{if(1!==e.result[0])throw new Error("Could not SMART unit, result "+e.result[0]);return e})},async move(e,t,n=!1){const r=Array.isArray(e)?e:[e],i={abilityId:c.MOVE,unitTags:r.map(e=>e.tag),queueCommand:n};return t.tag?i.targetUnitTag=t.tag:t.x&&(i.targetWorldSpacePos=t),this.sendAction(i).then(e=>{if(1!==e.result[0])throw new Error("Could not move unit, result "+e.result[0]);return e})},async patrol(e,t,n=!1){const r=Array.isArray(e)?e:[e],i=Array.isArray(t)?t:[e.pos,t],[o,s]=i,a={abilityId:c.PATROL,unitTags:r.map(e=>e.tag),targetWorldSpacePos:s,queueCommand:!0};return this.move(r,o,n).then(()=>this.sendAction(a)).then(e=>{if(1!==e.result[0])throw new Error("Could not patrol unit, result "+e.result[0]);return e})},async attack(e,t,n=!1){const r=Array.isArray(e)?e:[e];return this.sendAction({abilityId:c.ATTACK_ATTACK,targetUnitTag:t.tag,unitTags:r.map(e=>e.tag),queueCommand:n})},async attackMove(t,n,r=!1){const i=Array.isArray(t)?t:[t],{map:o}=e.resources.get(),s=i,a=n||o.getLocations().enemy[0];return this.sendAction({abilityId:c.ATTACK_ATTACK,targetWorldSpacePos:a,unitTags:s.map(e=>e.tag),queueCommand:r})},async swapBuildings(e,t){const n=[e,t].every(e=>m[e.unitType].includes(c.LIFT)),o=[e,t].every(e=>e.buildProgress>=1);if(!n||!o)throw new A("These two units cannot be swapped",{data:{unitA:e,unitB:t}});const s=e.pos,a=t.pos;return i.all([this.do(c.LIFT,e.tag),this.do(c.LIFT,t.tag)]).delay(100).then(()=>i.all([this.move([e],a,!0),this.move([t],s,!0)])).delay(100).then(()=>i.all([this.do(c.LAND,e.tag,{target:a,queue:!0}),this.do(c.LAND,t.tag,{target:s,queue:!0})])).catch(e=>{r("Transport error while trying to engage building swap: "+e.message)}),null},async gather(t,n,r=!0){const{units:i}=e.resources.get();if(!t.isWorker()&&t.unitType!==h.MULE)throw new b("only workers can gather",{data:{unit:t,mineralField:n,queue:r}});t.labels.has("command")&&!1===r&&(console.warn("WARNING! unit with command erroniously told to force gather! Forcing queue"),r=!0);const o=i.getBases(p.SELF).filter(e=>e.buildProgress>=1);let s;if(n&&n.tag)s=n;else{let e;const n=o.sort((e,n)=>a(t.pos,e.pos)-a(t.pos,n.pos)).find(e=>e.assignedHarvesters<e.idealHarvesters);n?e=n:[e]=o;const r=i.getMineralFields(),u=i.getClosest(e.pos,r,3);[s]=i.getClosest(t.pos,u)}const u={abilityId:c.SMART,targetUnitTag:s.tag,unitTags:[t.tag],queueCommand:r};return this.sendAction(u).then(async e=>{if(1!==e.result[0])throw new Error("Could not send to gather, result "+e.result[0]);return e})},async mine(e,t,n=!0){const r=Array.isArray(e)?e:[e],i={abilityId:c.HARVEST_GATHER,unitTags:r.map(e=>e.tag),targetUnitTag:t.tag,queueCommand:n};return this.sendAction(i)},async canPlace(t,r){const i=(r.length<=10?r:C(r,10)).map(n=>({targetPos:n,abilityId:e.data.getUnitTypeData(t).abilityId})).reverse(),o=(await n.query({placements:i})).placements.map((e,t)=>({placement:e,index:t})).filter(e=>1===e.placement.result);return o.length>0&&i[s(o).index].targetPos},async build(t,n,i){const{units:o,frame:s}=e.resources.get();let u,l,c=!1;if(!1===e.agent.hasTechFor(t))throw new v("Missing tech requirements to build unit type",{data:{unitTypeId:t,pointOrUnitOrNone:n,worker:i}});if(!e.agent.canAfford(t))throw new v("You can not (currently) afford to build unitTypeId "+t,{data:{unitTypeId:t,pointOrUnitOrNone:n,worker:i}});n&&n.tag?l=n:n&&n.x&&(u=n);const{abilityId:p}=e.data.getUnitTypeData(t),h=e.data.getAbilityData(p).target,g=h===f.NONE,y=g||h===f.POINTORNONE;if(!l&&!u&&!y)throw new v(`Building unit ${t} with build ability ${p} requires a target of type ${h}, but none was given`,{data:{unitTypeId:t,pointOrUnitOrNone:n,worker:i}});if((l||u)&&g)throw new v(`Building unit ${t} with build ability ${p} must be done without a target, but you gave: ${n}. Try passing null as the second argument, and your target as the third.`,{data:{unitTypeId:t,pointOrUnitOrNone:n,worker:i}});let m;if(i)m=i;else{const t=[...o.getMineralWorkers(),...o.getWorkers().filter(e=>e.noQueue)];if(e.agent.race===d.PROTOSS){const e=o.getConstructingWorkers().filter(e=>!e.hasLabel("stuck"));e.length>0?([m]=o.getClosest(u||l.pos,e),a(m.pos,u||l.pos)<20?c=!0:[m]=o.getClosest(u||l.pos,t)):[m]=o.getClosest(u||l.pos,t)}else[m]=o.getClosest(u||l.pos,t)}if(!m)throw new v("Unable to find or use builder, something is very wrong",{data:{unitTypeId:t,pointOrUnitOrNone:n,worker:i}});const A={abilityId:p,unitTags:[m.tag],queueCommand:c};m.labels.set("command",s.getGameLoop());const{mineralCost:R,vespeneCost:b}=e.data.getUnitTypeData(t);return e.agent.minerals=e.agent.minerals-R,e.agent.vespene=e.agent.vespene-b,l?A.targetUnitTag=l.tag:u&&(A.targetWorldSpacePos=u),this.sendAction(A).then(async n=>{if(1!==n.result[0])throw r("failed request: "+JSON.stringify(A)),new Error("Could not build, result "+n.result[0]);return t===E[e.agent.race]&&await this.gather(m),n})},async buildGasMine(){const{map:t}=e.resources.get(),n=E[e.agent.race],[r]=t.freeGasGeysers();if(!r)throw new v("no free geysers in own expansions for building mines on");return this.build(n,r)},async train(t,n){const{units:r}=e.resources.get();if(!1===e.agent.hasTechFor(t))throw new R("Missing tech requirements to build unit type "+t,{data:{unitTypeId:t,productionUnit:n}});let i;if(!e.agent.canAfford(t))throw new R("cannot afford training unit: "+t,{data:{unitTypeId:t,productionUnit:n}});if(i=n||r.getProductionUnits(t).find(e=>e.noQueue),!i)throw new R("no free production unit for type: "+t,{data:{unitTypeId:t,productionUnit:n}});const{mineralCost:o,vespeneCost:s,abilityId:a}=e.data.getUnitTypeData(t);e.agent.minerals=e.agent.minerals-o,e.agent.vespene=e.agent.vespene-s;const u={abilityId:a,unitTags:[i.tag]};return this.sendAction(u).then(async e=>{if(1!==e.result[0])throw new Error("Could not train, result "+e.result[0]);return e})},async upgrade(t,n){const{units:r}=e.resources.get();let i;if(i=n||r.getUpgradeFacilities(t).find(e=>e.noQueue),!i)throw new R("no free upgrade facility for upgradeId: "+t,{data:{upgradeId:t,upgradeFacility:n}});const{abilityId:o}=e.data.getUpgradeData(t),s={abilityId:o,unitTags:[i.tag]};return this.sendAction(s).then(async e=>{if(1!==e.result[0])throw new Error(`Could not start upgrade ${t}, result ${e.result[0]}`);return e})},async warpIn(t,n={}){const{units:r,map:i}=e.resources.get(),o=y[t],s=n.maxQty||1,c=n.nearPosition||i.getCombatRally(),p=e.agent.canAffordN(t,s);if(p<=0)throw new A("cannot afford warping any qty of unit: "+g[t],{data:{unitType:t,opts:n}});let d=r.getClosest(c,e.agent.powerSources,n.nearPosition?1:3).map(e=>l(e.pos,e.radius)).reduce((e,t)=>e.concat(t),[]).filter(e=>i.isPathable(e)&&!i.hasCreep(e));n.highground&&(d=d.map(e=>({...e,z:i.getHeight(e)})).sort((e,t)=>t.z-e.z).filter((e,t,n)=>e.z===n[0].z));const f=r.getStructures(),E=u(c,d,100).filter(e=>f.every(t=>a(t.pos,e)>2)),m=r.getById(h.WARPGATE).filter(e=>e.abilityAvailable(o)).slice(0,p);if(m.length<=0)throw new A("No ready warpgates with ability to warp in "+g[t]);const v=C(E,m.length),R=m.map((e,t)=>({abilityId:o,unitTags:[e.tag],targetWorldSpacePos:v[t]}));return this.sendAction(R).then(async e=>{if(1!==e.result[0])throw new Error("Could not warp in unit, result "+e.result[0]);return e})},sendQuery:async e=>n.query(e),async sendAction(e){const t={actions:(Array.isArray(e)?e:[e]).map(e=>({actionRaw:{unitCommand:e}}))};return n.action(t)},async sendChat(e){const t={actions:(Array.isArray(e)?e:[e]).map(e=>({actionChat:e}))};return n.action(t)}}}},function(e,t,n){"use strict";const r=n(7)("sc2:debug:proto"),i=n(341),o=n(83),s=n(353),a=n(359),u=n(360),l=o.Root.fromJSON(n(127)),c=l.lookupType("Request"),p=l.lookupType("Response"),d=p.oneofs.response.oneof,f=p.fieldsArray.map(e=>({name:e.name,type:e.type,errorType:"field.type:"+Error}));function h(){const e=s();return f.forEach(t=>{e.define(t.name,e=>{const n=a(this._protoApiQueue,t.type,{error:t.errorType});return this._request(e),n},{concurrency:1})}),e}e.exports=function(){const e=u(f.reduce((e,t)=>{return{...e,[t.name]:(n=t.name,r=t.type,i=t.errorType,function(e,t){e?this.emit(i,e):this.emit(r,t[n])})};var n,r,i},{}));e.setMaxListeners(24);const t={...f.reduce((function(e,t){return{...e,[t.name]:function(e={}){const n=c.create({[t.name]:e}),r=c.encode(n).finish();return this._promiseQueue.push(t.name,r)}}}),{}),_ws:null,async connect(e){return this._ws=function({host:e="127.0.0.1",port:t=5e3}){return new i(`ws://${e}:${t}/sc2api`)}(e),this._ws.on("message",e=>{let t;const n=p.decode(e),i=p.toObject(n,{bytes:Array,longs:String,defaults:!0});i.status&&(this.status=i.status),i.error&&i.error.length>0&&(t=Object.assign(new Error("Response Error: "+JSON.stringify(i.error,null,2)),{err:i.error}));const o=d.find(e=>i[e]);"leaveGame"===o&&(r("The client has responded to a leaveGame request"),this._ws.emit("leftGame"));this._protoApiQueue[o]?this._protoApiQueue[o](t,i):"No save available to load."===i.error[0]?this._protoApiQueue.quickLoad(t,i):r("WARNING: response received with no valid response type handler: ",i)}),this._ws.on("close",()=>r("CONNECTION CLOSED")),await a(this._ws,"open"),r("successfully connected to sc2 client on port "+e.port),this.ping()},close(){this._ws.close()},status:99,_request(e){this._ws.send(e)},_protoApiQueue:e};return t._promiseQueue=h.bind(t)(),t}},function(e,t,n){"use strict";const r=n(148);r.Server=n(352),r.Receiver=n(153),r.Sender=n(155),e.exports=r},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("tls")},function(e,t){e.exports=require("url")},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);e=e||{},this.concurrency=e.concurrency||1/0,this.pending=0,this.jobs=[],this.cbs=[],this._done=i.bind(this)}function i(){this.pending--,this._run()}["push","unshift","splice"].forEach((function(e){r.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this._run(),t}})),Object.defineProperty(r.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),r.prototype._run=function(){if(this.pending!==this.concurrency){if(this.jobs.length){var e=this.jobs.shift();this.pending++,e(this._done),this._run()}if(0===this.pending)for(;0!==this.cbs.length;){var t=this.cbs.pop();process.nextTick(t)}}},r.prototype.onDone=function(e){"function"==typeof e&&(this.cbs.push(e),this._run())},e.exports=r},function(e,t){e.exports=require("zlib")},function(e,t,n){"use strict";try{e.exports=n(151)(__dirname)}catch(t){e.exports=n(348)}},function(e,t,n){"use strict";e.exports={mask:(e,t,n,r,i)=>{for(var o=0;o<i;o++)n[r+o]=e[o]^t[3&o]},unmask:(e,t)=>{const n=e.length;for(var r=0;r<n;r++)e[r]^=t[3&r]}}},function(e,t,n){"use strict";class r{constructor(e,t){this.target=t,this.type=e}}class i extends r{constructor(e,t){super("message",t),this.data=e}}class o extends r{constructor(e,t,n){super("close",n),this.wasClean=n._closeFrameReceived&&n._closeFrameSent,this.reason=t,this.code=e}}class s extends r{constructor(e){super("open",e)}}class a extends r{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const u={addEventListener(e,t){function n(e){t.call(this,new i(e,this))}function r(e,n){t.call(this,new o(e,n,this))}function u(e){t.call(this,new a(e,this))}function l(){t.call(this,new s(this))}"function"==typeof t&&("message"===e?(n._listener=t,this.on(e,n)):"close"===e?(r._listener=t,this.on(e,r)):"error"===e?(u._listener=t,this.on(e,u)):"open"===e?(l._listener=t,this.on(e,l)):this.on(e,t))},removeEventListener(e,t){const n=this.listeners(e);for(var r=0;r<n.length;r++)n[r]!==t&&n[r]._listener!==t||this.removeListener(e,n[r])}};e.exports=u},function(e,t,n){"use strict";try{e.exports=n(151)(__dirname)}catch(t){e.exports=n(351)}},function(e,t,n){"use strict";e.exports=function(e){const t=e.length;let n=0;for(;n<t;)if(0==(128&e[n]))n++;else if(192==(224&e[n])){if(n+1===t||128!=(192&e[n+1])||192==(254&e[n]))return!1;n+=2}else if(224==(240&e[n])){if(n+2>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||224===e[n]&&128==(224&e[n+1])||237===e[n]&&160==(224&e[n+1]))return!1;n+=3}else{if(240!=(248&e[n]))return!1;if(n+3>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||128!=(192&e[n+3])||240===e[n]&&128==(240&e[n+1])||244===e[n]&&e[n+1]>143||e[n]>244)return!1;n+=4}return!0}},function(e,t,n){"use strict";const r=n(64),i=n(34),o=n(149),s=n(73),a=n(152),u=n(148),{GUID:l}=n(57),c=/^[+/0-9A-Za-z]{22}==$/;function p(e){e.emit("close")}function d(){this.destroy()}function f(e,t,n,r){e.writable&&(n=n||o.STATUS_CODES[t],r=Object.assign({Connection:"close","Content-type":"text/html","Content-Length":Buffer.byteLength(n)},r),e.write(`HTTP/1.1 ${t} ${o.STATUS_CODES[t]}\r\n`+Object.keys(r).map(e=>`${e}: ${r[e]}`).join("\r\n")+"\r\n\r\n"+n)),e.removeListener("error",d),e.destroy()}function h(e){return e.trim()}e.exports=class extends r{constructor(e,t){if(super(),null==(e=Object.assign({maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},e)).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');null!=e.port?(this._server=o.createServer((e,t)=>{const n=o.STATUS_CODES[426];t.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),t.end(n)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server&&(this._removeListeners=function(e,t){for(const n of Object.keys(t))e.on(n,t[n]);return function(){for(const n of Object.keys(t))e.removeListener(n,t[n])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,t,n)=>{this.handleUpgrade(e,t,n,t=>{this.emit("connection",t,e)})}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?t.close(()=>this.emit("close")):process.nextTick(p,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,r){t.on("error",d);const i=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),o=+e.headers["sec-websocket-version"],u={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!i||!c.test(i)||8!==o&&13!==o||!this.shouldHandle(e))return f(t,400);if(this.options.perMessageDeflate){const n=new s(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const t=a.parse(e.headers["sec-websocket-extensions"]);t[s.extensionName]&&(n.accept(t[s.extensionName]),u[s.extensionName]=n)}catch(e){return f(t,400)}}if(this.options.verifyClient){const s={origin:e.headers[""+(8===o?"sec-websocket-origin":"origin")],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(s,(o,s,a,l)=>{if(!o)return f(t,s||401,a,l);this.completeUpgrade(i,u,e,t,n,r)});if(!this.options.verifyClient(s))return f(t,401)}this.completeUpgrade(i,u,e,t,n,r)}completeUpgrade(e,t,n,r,o,c){if(!r.readable||!r.writable)return r.destroy();const p=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade","Sec-WebSocket-Accept: "+i.createHash("sha1").update(e+l).digest("base64")],f=new u(null);var g=n.headers["sec-websocket-protocol"];if(g&&(g=g.split(",").map(h),(g=this.options.handleProtocols?this.options.handleProtocols(g,n):g[0])&&(p.push("Sec-WebSocket-Protocol: "+g),f.protocol=g)),t[s.extensionName]){const e=t[s.extensionName].params,n=a.format({[s.extensionName]:[e]});p.push("Sec-WebSocket-Extensions: "+n),f._extensions=t}this.emit("headers",p,n),r.write(p.concat("\r\n").join("\r\n")),r.removeListener("error",d),f.setSocket(r,o,this.options.maxPayload),this.clients&&(this.clients.add(f),f.on("close",()=>this.clients.delete(f))),c(f)}}},function(e,t,n){"use strict";e.exports=n(354)},function(e,t,n){"use strict";var r=n(88),i=n(64),o=n(355),s=n(156),a=n(157)("promise-task-queue:loop"),u=n(157)("promise-task-queue:tasks"),l=n(37);function c(e){return l.inspect(e,{depth:null,colors:!0}).replace(/\n|\r/g,"")}var p=s("TaskQueueError",{code:"TaskQueueError"});function d(e,t){return null!=e?e:t}e.exports=function(e){var t={},n={},s={},l={},f={},h={};function g(e){var i=d(n[e].concurrency,1/0),o=function(e){var t=1e3*d(n[e].interval,0);return d(f[e],0)+t-Date.now()}(e);s[e].length>0?o<=0?l[e]<i?(!1===h[e]&&(a("Queue for '"+e+"' is now running"),function(e){a("markQueueRunning ("+e+")"),E.emit("queueRunning:"+e),h[e]=!0}(e)),function(e){var n=s[e].shift();(function(e,t){u("markStarted ("+e+"): "+c(t.data)),l[e]+=1,f[e]=Date.now(),E.emit("started:"+e,t.data)})(e,n),r.try((function(){return t[e](n.data)})).then((function(t){n.resolve(t),function(e,t){u("markSuccess ("+e+"): "+c(t.data)),y(e,t),E.emit("success:"+e,t.data)}(e,n)})).catch((function(t){!function(e,t){u("markFailed ("+e+"): "+c(t.data)),y(e,t),E.emit("failed:"+e,t.data)}(e,n),n.reject(t)})).then((function(){g(e)}))}(e)):(a("Reached concurrency for '"+e+"'"),E.emit("concurrencyReached:"+e)):(a("Registering queue delay for '"+e+"'"),E.emit("delayed:"+e),setTimeout((function(){g(e)}),o)):!0===h[e]&&(a("Queue for '"+e+"' has now stopped"),function(e){a("markQueueDrained ("+e+")"),E.emit("queueDrained:"+e),h[e]=!1}(e))}function y(e,t){u("markFinished ("+e+"): "+c(t.data)),l[e]-=1,E.emit("finished:"+e,t.data),function(e){0===s[e].length&&0===l[e]&&function(e){a("markQueueCompleted ("+e+")"),E.emit("queueCompleted:"+e)}(e)}(e)}var E=o(new i.EventEmitter,{define:function(e,r,i){if(null!=t[e])throw new p("The '"+e+"' task type already exists.");t[e]=r,n[e]=d(i,{}),l[e]=0,h[e]=!1,s[e]=[]},push:function(e,n){return r.try((function(){if(null==t[e])throw new p("No such task type exists.");u("Queueing new task for '"+e+"': "+c(n));var i=void 0,o=void 0,a=new r((function(e,t){i=e,o=t}));return s[e].push({data:n,resolve:i,reject:o}),g(e),a}))},drain:function(e){if(null==t[e])throw new p("No such task type exists.");u("Draining tasks for '"+e+"'"),s[e]=[]},awaitDrained:function(e){var n=this;return r.try((function(){if(null==t[e])throw new p("No such task type exists.");return a("awaitDrained requested for '"+e+"'"),0===s[e].length?void a("Queue for '"+e+"' is already drained"):(a("Returning awaitDrained Promise for '"+e+"'"),new r((function(t,r){n.on("queueDrained:"+e,(function(){a("Resolving awaitDrained Promise for '"+e+"'"),t()}))})))}))},awaitCompleted:function(e){var n=this;return r.try((function(){if(null==t[e])throw new p("No such task type exists.");return a("awaitCompleted requested for '"+e+"'"),0===s[e].length&&0===l[e]?void a("Queue for '"+e+"' is already completed"):(a("Returning awaitCompleted Promise for '"+e+"'"),new r((function(t,r){n.on("queueCompleted:"+e,(function(){a("Resolving awaitCompleted Promise for '"+e+"'"),t()}))})))}))}});return E}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===i.call(e)},u=function(e){if(!e||"[object Object]"!==i.call(e))return!1;var t,n=r.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!o)return!1;for(t in e);return void 0===t||r.call(e,t)},l=function(e,t){o&&"__proto__"===t.name?o(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;if(s)return s(e,t).value}return e[t]};e.exports=function e(){var t,n,r,i,o,s,p=arguments[0],d=1,f=arguments.length,h=!1;for("boolean"==typeof p&&(h=p,p=arguments[1]||{},d=2),(null==p||"object"!=typeof p&&"function"!=typeof p)&&(p={});d<f;++d)if(null!=(t=arguments[d]))for(n in t)r=c(p,n),p!==(i=c(t,n))&&(h&&i&&(u(i)||(o=a(i)))?(o?(o=!1,s=r&&a(r)?r:[]):s=r&&u(r)?r:{},l(p,{name:n,newValue:e(h,s,i)})):void 0!==i&&l(p,{name:n,newValue:i}));return p}},function(e,t,n){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=n(158)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())},function(e,t){var n=1e3,r=6e4,i=60*r,o=24*i;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var a,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?s(a=e,o,"day")||s(a,i,"hour")||s(a,r,"minute")||s(a,n,"second")||a+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){var r=n(87),i=n(37);(t=e.exports=n(158)).init=function(e){e.inspectOpts={};for(var n=Object.keys(t.inspectOpts),r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(){return s.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function(e){var n=this.namespace;if(this.useColors){var r=this.color,i="  [3"+r+";1m"+n+" [0m";e[0]=i+e[0].split("\n").join("\n"+i),e.push("[3"+r+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+n+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=a,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(o)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()})),r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e}),{});var o=parseInt(process.env.DEBUG_FD,10)||2;1!==o&&2!==o&&i.deprecate((function(){}),"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var s=1===o?process.stdout:2===o?process.stderr:function(e){var t;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(t=new r.WriteStream(e))._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var i=n(17);(t=new i.SyncWriteStream(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":var o=n(150);(t=new o.Socket({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}(o);function a(){return process.env.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)},t.enable(a())},function(e,t,n){"use strict";function r(){}function i(e,t){var n=e.addEventListener||e.addListener||e.on;if(!n)throw new Error("cannot register an event listener");var i=e.removeEventListener||e.removeListener||e.off,o=[],s=i?function(){for(var t=0,n=o.length;t<n;t+=2)i.call(e,o[t],o[t+1])}:r;function a(r,i){function a(){var e;s();var n=arguments.length;if(t){e=new Array(n);for(var o=0;o<n;++o)e[o]=arguments[o];e.event=r}else e=n>0?arguments[0]:void 0;i(e)}o.push(r,a),n.call(e,r,a)}return a.cleanUp=s,a}function o(e,t,n){var o,s=new Promise((function(s,a){var u=i(e,n&&n.array);o=function(){o=r,u.cleanUp()},u(t,s),n&&n.ignoreErrors||u(n&&n.error||"error",a)}));return s.cancel=function(){return o()},s}var s=["error"];o.multi=function(e,t,n){var o;n||(n=s);var a=new Promise((function(s,a){var u,l,c=i(e,!0);for(o=function(){o=r,c.cleanUp()},u=0,l=t.length;u<l;++u)c(t[u],s);for(u=0,l=n.length;u<l;++u)c(n[u],a)}));return a.cancel=function(){return o()},a},e.exports=o},function(e,t,n){"use strict";e.exports=n(361)},function(e,t,n){"use strict";var r=n(64);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(new r.EventEmitter,e)}},function(e,t,n){"use strict";const r=n(7)("sc2:DebugWidget"),i=n(74),o=n(22),{cellsInFootprint:s}=n(19),{add:a,createPoint2D:u}=n(2);e.exports=function(e){const t={};let n={},l={};return{touched:!1,updateScreen(){const{actions:{_client:i}}=e.resources.get();r.enabled&&this._drawDebugWidget(t);const o=Object.values(n).reduce((e,t)=>e.concat(t),[]),s=Object.values(l).reduce((e,t)=>e.concat(t),[]);return l={},i.debug({debug:o.concat(s)})},removeCommand(e){this.touched=!0;const t=e+"-text-0",{[e]:r,[t]:i,...o}=n;n=o},setRegions(e){this.touched=!0,n.regions=e.map(t=>({draw:{text:e.map((e,t)=>({color:i.RED,text:`DISTANCE ORDER ${t} \n COORDS ${JSON.stringify(u(e.townhallPosition))}`,worldPos:{...e.townhallPosition,z:e.zPosition+.5}})),boxes:[...t.areas.mineralLine.map(e=>({color:i.LIME_GREEN,min:{x:e.x+.25,y:e.y+.25,z:t.zPosition},max:{x:e.x+.75,y:e.y+.75,z:t.zPosition+.04}})),...t.areas.behindMineralLine.map(e=>({color:i.RED,min:{x:e.x+.25,y:e.y+.25,z:t.zPosition},max:{x:e.x+.75,y:e.y+.75,z:t.zPosition+.02}})),...t.areas.areaFill.map(e=>({color:i.GRAY,min:{x:e.x+.25,y:e.y+.25,z:t.zPosition},max:{x:e.x+.75,y:e.y+.75,z:t.zPosition+.01}})),...t.areas.hull.map(e=>({color:i.YELLOW,min:{x:e.x+.25,y:e.y+.25,z:t.zPosition},max:{x:e.x+.75,y:e.y+.75,z:t.zPosition+.03}})),...s(t.townhallPosition,{w:5,h:5}).map(e=>({color:i.FUCHSIA,min:{x:e.x+.25,y:e.y+.25,z:t.zPosition},max:{x:e.x+.75,y:e.y+.75,z:t.zPosition+.05}}))],spheres:[{color:i.PURPLE,p:{...t.townhallPosition,z:t.zPosition+.1},r:2.75},{color:i.GREEN,p:{...t.centroid,z:t.zPosition+.1},r:1}]}}))},setDrawLines(t,r,s={}){this.touched=!0;const a=s.color||o(Object.values(i)),u=void 0!==s.includeText&&!s.includeText;r.length>0&&(n[t]=[{draw:{lines:r.map((n,r)=>{const{p0:i,p1:o}=n;return i.z=(s.zPos||i.z||e.resources.get().map.getHeight(i))+.01,o.z=(s.zPos||o.z||e.resources.get().map.getHeight(o))+.01,u||this.setDrawTextWorld(`${t}-text-${r}`,[{color:n.color||a,text:n.text?""+n.text:`${t}-${r}`,pos:{x:(i.x+o.x)/2-.5,y:(i.y+o.y)/2+.5}}]),{color:n.color||a,line:{p0:i,p1:o}}})}}])},setDrawCells(t,r,s={}){this.touched=!0;const a=void 0!==s.includeText&&!s.includeText,l=s.color||o(Object.values(i));r.length>0&&(n[t]=[{draw:{boxes:r.map((n,r)=>{const{pos:i}=n,o=n.color||l,c=1-(n.size||s.size||.8),p=s.zPos||i.z||e.resources.get().map.getHeight(u(i)),d=s.height?s.height:s.cube?n.max?2-2*(1-c):1-c:.01;a||this.setDrawTextWorld(`${t}-text-${r}`,[{pos:i,color:o,text:n.text?""+n.text:`${t}-${r}`}],{temp:!s.persistText});const f={x:(n.max?n.max.x:i.x)+(1-c/2),y:(n.max?n.max.y:i.y)+(1-c/2),z:(n.max&&n.max.z?n.max.z:p)+d};return{color:o,min:{x:i.x+c/2,y:i.y+c/2,z:p+.02},max:f}})}}])},setDrawSpheres(t,r,s={}){this.touched=!0;const u=void 0!==s.includeText&&!s.includeText,c=s.temp?l:n;r.length>0&&(c[t]=[{draw:{spheres:r.map((n,r)=>{const{pos:l}=n,c=s.zPos||l.z||e.resources.get().map.getHeight(n.pos);return u||this.setDrawTextWorld(`${t}-text-${r}`,[{pos:a(l,.25),text:n.text?""+n.text:`${t}-${r}`}],{temp:!s.persistText}),{color:n.color||s.color||o(Object.values(i)),p:{x:l.x,y:l.y,z:c+.01},r:n.size||s.size||.5}})}}])},setDrawTextWorld(t,r,o={}){this.touched=!0;const s=o.temp?l:n;r.length>0&&(s[t]=[{draw:{text:r.map(t=>{const n=t.color||i.WHITE,r=o.zPos||t.pos.z||e.resources.get().map.getHeight(u(t.pos));return{color:n,size:o.size,text:t.text,worldPos:{...t.pos,z:r}}})}}])},setDrawTextScreen(e,t,r={}){this.touched=!0,t.length>0&&(n[e]=[{draw:{text:t.map(e=>{const t=e.color||r.color||i.FIREBRICK,n=r.zPos||e.pos.z;return{color:t,size:e.size||r.size||8,text:e.text,virtualPos:{...e.pos,z:n||void 0}}})}}])},useDebugWidget(e,n,r){t[e]={data:n,opts:r}},_drawDebugWidget(e){const t=Object.entries(e).reduce((e,[t,n])=>{const{data:r,opts:i}=n,o=`${i.title?i.title+"\n":t+"\n"}${r}\n`;return e.concat(o)},[]),n="-".repeat("Global Debug Widget  \n".length-1)+"\n";this.setDrawTextScreen("GlobalDebugWidget",[{size:16,color:i.YELLOW,pos:{x:.005,y:.4},text:"Global Debug Widget  \n"+n},{size:12,color:i.YELLOW,pos:{x:.005,y:.43},text:t.join("\n")}])},async createUnit(t){const n=Array.isArray(t)?t:[t],{actions:{_client:r},map:i}=e.resources.get();return r.debug({debug:n.map(t=>({createUnit:{unitType:t.unitType,quantity:t.quantity||1,owner:t.playerId||e.agent.playerId,pos:t.pos||o(i.getMain().areas.areaFill.filter(e=>i.isPlaceable(e)))}}))})}}}},function(e,t,n){"use strict";const r=n(7)("sc2:debug:earmark"),{Race:i,Attribute:o}=n(0),{AbilitiesByUnit:s}=n(8);e.exports=function(){const e=new Map([["earmarks",[]],["abilities",null],["units",null],["upgrades",null],["buffs",null],["effects",null]]),t={register(e,t){this[e]=t},findUnitTypesWithAbility:e=>Object.entries(s).filter(([t,n])=>n.some(t=>t===e)).map(e=>parseInt(e[0],10)),getUnitTypeData(e){const t=this.get("units")[e];try{if(!t)throw new Error(`Unit type ${e} is not registered`)}catch(e){console.error(e)}return t.race===i.ZERG&&t.attributes.includes(o.STRUCTURE)?{...t,mineralCost:t.mineralCost-50}:t},getUpgradeData(e){return this.get("upgrades")[e]},getAbilityData(e){return this.get("abilities")[e]},getEffectData(e){return this.get("effects")[e]},getBuffData(e){return this.get("buffs")[e]},mineralCost(e){return this.getUnitTypeData(e).mineralCost},addEarmark(e){const t=this.get("earmarks");return t.find(t=>t.name===e.name)?t:(r("New earmark:",e),this.set("earmarks",[...t,e]))},getEarmarkTotals(e){return this.get("earmarks").filter(t=>t.name!==e).reduce((e,t)=>({minerals:e.minerals+t.minerals,vespene:e.vespene+t.vespene}),{minerals:0,vespene:0})},settleEarmark(e){const t=this.get("earmarks").filter(t=>t.name!==e);return this.set("earmarks",t),this.get("earmarks")}};return Object.assign(e,t)}},function(e,t,n){"use strict";const r=n(7)("sc2:silly:EventChannel"),i=n(365);e.exports=function({resources:e}){let t=[],n=[];const o={};return{createReader(e){const t=e?"build"===e||"unit"===e?"agent":e:"agent",s=i.generate();return r("new reader registered of type "+t),n=[...n,s],o[s]=t,s},removeReader(e){n=n.filter(t=>t===e)},read(e){r("all current events: "+t.map(e=>e.name));const n=t.filter(t=>t.readers.includes(e));return r(`Reading events for ${e}, the following are unread: ${n.map(e=>e.name)}`),n.forEach(t=>t.consume(e)),n},write(i,s){const{frame:a}=e.get(),u=i.type||"agent",l=a.getGameLoop(),c=n.filter(e=>!s||e!==s).filter(e=>"all"===u||o[e]===u),p={...i,data:i.data||null,type:u,gameLoop:l,readers:c,consume(e){this.readers=this.readers.filter(t=>t!==e),r(`consuming ${i.name} event for ${e} - ${this.readers.length} readers left to consume this event.`),this.readers.length<=0&&(this.destroy(),r(`${i.name} event consumed, event queue length: ${t.length}`))},destroy(){t=t.filter(e=>e!==this)}};r(`New ${i.name} event with these readers: ${c}`),t=[...t,p]}}}},function(e,t,n){"use strict";e.exports=n(366)},function(e,t,n){"use strict";var r=n(75),i=n(368),o=n(373),s=n(374)||0;function a(){return i(s)}e.exports=a,e.exports.generate=a,e.exports.seed=function(t){return r.seed(t),e.exports},e.exports.worker=function(t){return s=t,e.exports},e.exports.characters=function(e){return void 0!==e&&r.characters(e),r.shuffled()},e.exports.isValid=o},function(e,t,n){"use strict";var r=1;e.exports={nextValue:function(){return(r=(9301*r+49297)%233280)/233280},seed:function(e){r=e}}},function(e,t,n){"use strict";var r,i,o=n(369);n(75);e.exports=function(e){var t="",n=Math.floor(.001*(Date.now()-1567752802062));return n===i?r++:(r=0,i=n),t+=o(7),t+=o(e),r>0&&(t+=o(r)),t+=o(n)}},function(e,t,n){"use strict";var r=n(75),i=n(370),o=n(372);e.exports=function(e){for(var t,n=0,s="";!t;)s+=o(i,r.get(),1),t=e<Math.pow(16,n+1),n++;return s}},function(e,t,n){e.exports=n(371)},function(e,t,n){var r=n(34);if(r.randomFillSync){var i={};e.exports=function(e){var t=i[e];return t||(t=Buffer.allocUnsafe(e),e<=255&&(i[e]=t)),r.randomFillSync(t)}}else e.exports=r.randomBytes},function(e,t){e.exports=function(e,t,n){for(var r=(2<<31-Math.clz32(t.length-1|1))-1,i=Math.ceil(1.6*r*n/t.length),o="";;)for(var s=e(i),a=i;a--;)if((o+=t[s[a]&r]||"").length===+n)return o}},function(e,t,n){"use strict";var r=n(75);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6)&&!new RegExp("[^"+r.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}},function(e,t,n){"use strict";var r=n(375),i=0;!r.isMaster&&r.worker&&(i=r.worker.id),e.exports=parseInt(process.env.NODE_UNIQUE_ID||i,10)},function(e,t){e.exports=require("cluster")},function(e,t,n){"use strict";e.exports=function(){return{_gameLoop:0,_gameInfo:null,_observation:null,_previous:null,_render:null,_feature:null,_score:null,getObservation(){return this._observation},getRender(){return this._render},getFeatureLayer(){return this._feature},getScore(){return this._score},getGameInfo(){return this._gameInfo},getGameLoop(){return this._gameLoop},getEffects(){return this._observation.rawData.effects},getMapState(){return this._observation.rawData.mapState},getPrevious(){return this._previous},timeInSeconds(){return Math.round(this.getGameLoop()/22.4)}}}},function(e,t,n){"use strict";const r=n(378),i=n(7)("sc2:DebugWeights"),o=n(7)("sc2:DebugPathable"),{enums:{Alliance:s},Color:a}=n(8),{add:u,distance:l,avgPoints:c,closestPoint:p,areEqual:d}=n(2),{gridsInCircle:f}=n(15),{cellsInFootprint:h}=n(19),{gasMineTypes:g}=n(6),{getFootprint:y}=n(20);let E;const m=new Map,A=({x:e,y:t})=>({x:Math.floor(e),y:Math.floor(t)});e.exports=function(e){return{_activeEffects:[],_grids:{height:null,placement:null,pathing:null,miniMap:null},_ramps:[],_graph:null,_locations:{self:null,enemy:null},_expansions:[],_expansionsFromEnemy:[],_mapState:{visibility:null,creep:null},_mapSize:{x:0,y:0},isCustom(){return this._expansions.length<=0},isPathable(e){const t=A(e);return!this._grids.pathing[t.y][t.x]},setPathable(e,t=!0){const n=A(e);this._grids.pathing[n.y][n.x]=t?0:1,this._graph.setWalkableAt(e.x,e.y,t)},isPlaceable(e,t={}){const n=A(e);return t.graph?t.graph.isWalkableAt(n.x,n.y):!!this._grids.placement[n.y][n.x]},setPlaceable(e,t=!0){const n=A(e);this._grids.placement[n.y][n.x]=t?1:0,this._graph.setWalkableAt(e.x,e.y,t)},isVisible(e){const t=A(e);return 2===this._mapState.visibility[t.y][t.x]},isRamp(e){const t=A(e);return!!this._ramps.find(e=>d(t,e))},hasCreep(e){const t=A(e);return!!this._mapState.creep[t.y][t.x]},freeGasGeysers(){const{units:t}=e.resources.get();return t.getGasGeysers().filter(e=>t.getBases().some(t=>l(t.pos,e.pos)<12)).filter(e=>{return n=e,!t.getByType(g).find(e=>l(n.pos,e.pos)<1);var n})},getMain(){return this._expansions[0]},getEnemyMain(){return this._expansionsFromEnemy[0]},getNatural(){return this._expansions[1]},getEnemyNatural(){return this._expansionsFromEnemy[1]},getThirds(){return[this._expansions[2],this._expansions[3]]},getEnemyThirds(){return[this._expansionsFromEnemy[2],this._expansionsFromEnemy[3]]},getExpansions(e){return e===s.ENEMY?this._expansionsFromEnemy.slice():this._expansions.slice()},getOccupiedExpansions(e=s.SELF){return this._expansions.filter(t=>t.base&&!t.getBase().labels.has("dead")&&t.getBase().alliance===e)},getAvailableExpansions(){return this._expansions.filter(e=>{const t=e.getBase();return!t||t.labels.has("dead")})},closestPathable(e,t=3){const n=f(e,t,{normalize:!0}).filter(e=>this.isPathable(e));if(n.length<=0)throw new Error(`No pathable points within ${t} radius of point ${e}`);return p(e,n)},getClosestExpansion(e){const t=this.isPathable(e)?e:this.closestPathable(e),n=this.getExpansions(),{index:r}=n.map((e,n)=>({index:n,distance:this.path(t,u(e.townhallPosition,3)).length})).filter(e=>e.distance>0).sort((e,t)=>e.distance-t.distance)[0];return n[r]},getCreep(){return this._mapState.creep.reduce((e,t,n)=>(t.forEach((t,r)=>{0!==t&&e.push({x:r,y:n})}),e),[])},getVisibility(){return this._mapState.visibility.reduce((e,t,n)=>(t.forEach((t,r)=>{0!==t&&e.push({x:r,y:n})}),e),[])},getEffects(){return this._activeEffects},getGrids(){return this._grids},getLocations(){return this._locations},getHeight(e){const t=A(e);return this._grids.height[t.y][t.x]/10},getCombatRally(){if(this.isCustom())return this.getCenter();const e=this.getOccupiedExpansions().length;if(E&&E.numOfBases===e)return E.pos;const t={x:this._mapSize.x/2,y:this._mapSize.y/2},n=f(t,6,{normalize:!0}).filter(e=>this.isPathable(e)),r=p(t,n),i=this.getNatural().getWall(),o=c(i),s=f(o,5,{normalize:!0}).filter(e=>this.isPathable(e)),a=p(o,s),u=this.path(a,r),l=.05*e,d=u[Math.floor(u.length*l)];return E={numOfBases:e,pos:{x:d[0],y:d[1]}},E.pos},setActiveEffects(e=[]){this._activeEffects=e},setMapState(e){this._mapState=e},setLocations(e){this._locations={...this._locations,...e}},setGrids(t){this._grids={...this._grids,...t},o.enabled&&e.resources.get().debug.setDrawCells("debugPathable",this._grids.pathing.reduce((e,t,n)=>(t.forEach((t,r)=>{this.isPathable({x:r,y:n})&&e.push({pos:{x:r,y:n},text:"p-able",color:a.LIME_GREEN})}),e),[]))},setSize(e){this._mapSize=e},getSize(){return this._mapSize},getCenter(e=!1){const t={x:this._mapSize.x/2,y:this._mapSize.y/2};if(e){const e=f(t,6,{normalize:!0}).filter(e=>this.isPathable(e));return p(t,e)}return t},newGraph(e){return new r.Grid(this._mapSize.x,this._mapSize.y,e)},getGraph(){return this._graph.clone()},setGraph(t){if(t)this._graph=t;else{const t=new r.Grid(this._mapSize.x,this._mapSize.y,this._grids.pathing);t.nodes.forEach(e=>{e.forEach(e=>{switch(8-t.getNeighbors(e,1).length){case 1:e.weight=2;break;case 2:e.weight=3;break;case 3:e.weight=4;break;case 4:e.weight=5;break;case 5:e.weight=6;break;case 6:e.weight=7;break;case 7:e.weight=8;break;case 8:e.weight=9}})}),i.enabled&&e.resources.get().debug.setDrawCells("debugWeights",t.nodes.reduce((e,t,n)=>(t.forEach((t,r)=>{t.walkable&&t.weight>1&&e.push({pos:{x:r,y:n},text:"W: "+t.weight,color:t.weight<=1?a.LIME_GREEN:t.weight<=5?a.YELLOW:t.weight<=20?a.ORANGE_RED:a.RED})}),e),[])),this._graph=t}},setExpansions(e){this._expansions=Object.freeze(e),this._expansionsFromEnemy=Object.freeze(this._expansions.slice().sort((e,t)=>e.pathFromEnemy.length-t.pathFromEnemy.length))},setRamps(e){this._ramps=e},isPlaceableAt(e,t,n={}){const r=y(e),i=h(t,r);return n.graph?i.every(e=>n.graph.isWalkableAt(e.x,e.y)):i.every(e=>this.isPlaceable(e))},path(e,t,n={}){const i=A(e),o=A(t),s=`${i.x.toString()}${i.y.toString()}${o.x.toString()}${o.y.toString()}`;if(!n.force&&m.has(s))return m.get(s);const a=n.graph?n.graph.clone():this._graph.clone(),u=new r.AStarFinder({allowDiagonal:void 0===n.diagonal||n.diagonal,heuristic:r.Heuristic.mahattan}).findPath(i.x,i.y,o.x,o.y,a);return m.set(s,u),u}}}},function(e,t,n){e.exports=n(379)},function(e,t,n){e.exports={Heap:n(76),Node:n(94),Grid:n(381),Util:n(48),DiagonalMovement:n(26),Heuristic:n(66),AStarFinder:n(95),BestFirstFinder:n(382),BreadthFirstFinder:n(383),DijkstraFinder:n(384),BiAStarFinder:n(96),BiBestFirstFinder:n(385),BiBreadthFirstFinder:n(386),BiDijkstraFinder:n(387),IDAStarFinder:n(388),JumpPointFinder:n(389)}},function(e,t,n){(function(e){(function(){var t,n,r,i,o,s,a,u,l,c,p,d,f,h,g;r=Math.floor,c=Math.min,n=function(e,t){return e<t?-1:e>t?1:0},l=function(e,t,i,o,s){var a;if(null==i&&(i=0),null==s&&(s=n),i<0)throw new Error("lo must be non-negative");for(null==o&&(o=e.length);i<o;)s(t,e[a=r((i+o)/2)])<0?o=a:i=a+1;return[].splice.apply(e,[i,i-i].concat(t)),t},s=function(e,t,r){return null==r&&(r=n),e.push(t),h(e,0,e.length-1,r)},o=function(e,t){var r,i;return null==t&&(t=n),r=e.pop(),e.length?(i=e[0],e[0]=r,g(e,0,t)):i=r,i},u=function(e,t,r){var i;return null==r&&(r=n),i=e[0],e[0]=t,g(e,0,r),i},a=function(e,t,r){var i;return null==r&&(r=n),e.length&&r(e[0],t)<0&&(t=(i=[e[0],t])[0],e[0]=i[1],g(e,0,r)),t},i=function(e,t){var i,o,s,a,u,l;for(null==t&&(t=n),u=[],o=0,s=(a=function(){l=[];for(var t=0,n=r(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)l.push(t);return l}.apply(this).reverse()).length;o<s;o++)i=a[o],u.push(g(e,i,t));return u},f=function(e,t,r){var i;if(null==r&&(r=n),-1!==(i=e.indexOf(t)))return h(e,0,i,r),g(e,i,r)},p=function(e,t,r){var o,s,u,l,c;if(null==r&&(r=n),!(s=e.slice(0,t)).length)return s;for(i(s,r),u=0,l=(c=e.slice(t)).length;u<l;u++)o=c[u],a(s,o,r);return s.sort(r).reverse()},d=function(e,t,r){var s,a,u,p,d,f,h,g,y;if(null==r&&(r=n),10*t<=e.length){if(!(u=e.slice(0,t).sort(r)).length)return u;for(a=u[u.length-1],p=0,f=(h=e.slice(t)).length;p<f;p++)r(s=h[p],a)<0&&(l(u,s,0,null,r),u.pop(),a=u[u.length-1]);return u}for(i(e,r),y=[],d=0,g=c(t,e.length);0<=g?d<g:d>g;0<=g?++d:--d)y.push(o(e,r));return y},h=function(e,t,r,i){var o,s,a;for(null==i&&(i=n),o=e[r];r>t&&i(o,s=e[a=r-1>>1])<0;)e[r]=s,r=a;return e[r]=o},g=function(e,t,r){var i,o,s,a,u;for(null==r&&(r=n),o=e.length,u=t,s=e[t],i=2*t+1;i<o;)(a=i+1)<o&&!(r(e[i],e[a])<0)&&(i=a),e[t]=e[i],i=2*(t=i)+1;return e[t]=s,h(e,u,t,r)},t=function(){function e(e){this.cmp=null!=e?e:n,this.nodes=[]}return e.push=s,e.pop=o,e.replace=u,e.pushpop=a,e.heapify=i,e.updateItem=f,e.nlargest=p,e.nsmallest=d,e.prototype.push=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pop=function(){return o(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return a(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return i(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return f(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),(null!==e?e.exports:void 0)?e.exports=t:window.Heap=t}).call(this)}).call(this,n(93)(e))},function(e,t,n){var r=n(94),i=n(26);function o(e,t,n){var r;"object"!=typeof e?r=e:(t=e.length,r=e[0].length,n=e),this.width=r,this.height=t,this.nodes=this._buildNodes(r,t,n)}o.prototype._buildNodes=function(e,t,n){var i,o,s=new Array(t);for(i=0;i<t;++i)for(s[i]=new Array(e),o=0;o<e;++o)s[i][o]=new r(o,i);if(void 0===n)return s;if(n.length!==t||n[0].length!==e)throw new Error("Matrix size does not fit");for(i=0;i<t;++i)for(o=0;o<e;++o)n[i][o]&&(s[i][o].walkable=!1);return s},o.prototype.getNodeAt=function(e,t){return this.nodes[t][e]},o.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable},o.prototype.isInside=function(e,t){return e>=0&&e<this.width&&t>=0&&t<this.height},o.prototype.setWalkableAt=function(e,t,n){this.nodes[t][e].walkable=n},o.prototype.setWeightAt=function(e,t,n){this.isInside(e,t)&&(this.nodes[t][e].weight=n)},o.prototype.getWeightAt=function(e,t){return this.isInside(e,t)?this.nodes[t][e].weight:1},o.prototype.getNeighbors=function(e,t){var n=e.x,r=e.y,o=[],s=!1,a=!1,u=!1,l=!1,c=!1,p=!1,d=!1,f=!1,h=this.nodes;if(this.isWalkableAt(n,r-1)&&(o.push(h[r-1][n]),s=!0),this.isWalkableAt(n+1,r)&&(o.push(h[r][n+1]),u=!0),this.isWalkableAt(n,r+1)&&(o.push(h[r+1][n]),c=!0),this.isWalkableAt(n-1,r)&&(o.push(h[r][n-1]),d=!0),t===i.Never)return o;if(t===i.OnlyWhenNoObstacles)a=d&&s,l=s&&u,p=u&&c,f=c&&d;else if(t===i.IfAtMostOneObstacle)a=d||s,l=s||u,p=u||c,f=c||d;else{if(t!==i.Always)throw new Error("Incorrect value of diagonalMovement");a=!0,l=!0,p=!0,f=!0}return a&&this.isWalkableAt(n-1,r-1)&&o.push(h[r-1][n-1]),l&&this.isWalkableAt(n+1,r-1)&&o.push(h[r-1][n+1]),p&&this.isWalkableAt(n+1,r+1)&&o.push(h[r+1][n+1]),f&&this.isWalkableAt(n-1,r+1)&&o.push(h[r+1][n-1]),o},o.prototype.clone=function(){var e,t,n=this.width,i=this.height,s=this.nodes,a=new o(n,i),u=new Array(i);for(e=0;e<i;++e)for(u[e]=new Array(n),t=0;t<n;++t)u[e][t]=new r(t,e,s[e][t].walkable,s[e][t].weight);return a.nodes=u,a},e.exports=o},function(e,t,n){var r=n(95);function i(e){r.call(this,e);var t=this.heuristic;this.heuristic=function(e,n){return 1e6*t(e,n)}}i.prototype=new r,i.prototype.constructor=i,e.exports=i},function(e,t,n){var r=n(48),i=n(26);function o(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=i.OnlyWhenNoObstacles:this.diagonalMovement=i.IfAtMostOneObstacle:this.diagonalMovement=i.Never)}o.prototype.findPath=function(e,t,n,i,o){var s,a,u,l,c,p=[],d=this.diagonalMovement,f=o.getNodeAt(e,t),h=o.getNodeAt(n,i);for(p.push(f),f.opened=!0;p.length;){if((u=p.shift()).closed=!0,u===h)return r.backtrace(h);for(l=0,c=(s=o.getNeighbors(u,d)).length;l<c;++l)(a=s[l]).closed||a.opened||(p.push(a),a.opened=!0,a.parent=u)}return[]},e.exports=o},function(e,t,n){var r=n(95);function i(e){r.call(this,e),this.heuristic=function(e,t){return 0}}i.prototype=new r,i.prototype.constructor=i,e.exports=i},function(e,t,n){var r=n(96);function i(e){r.call(this,e);var t=this.heuristic;this.heuristic=function(e,n){return 1e6*t(e,n)}}i.prototype=new r,i.prototype.constructor=i,e.exports=i},function(e,t,n){var r=n(48),i=n(26);function o(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=i.OnlyWhenNoObstacles:this.diagonalMovement=i.IfAtMostOneObstacle:this.diagonalMovement=i.Never)}o.prototype.findPath=function(e,t,n,i,o){var s,a,u,l,c,p=o.getNodeAt(e,t),d=o.getNodeAt(n,i),f=[],h=[],g=this.diagonalMovement;for(f.push(p),p.opened=!0,p.by=0,h.push(d),d.opened=!0,d.by=1;f.length&&h.length;){for((u=f.shift()).closed=!0,l=0,c=(s=o.getNeighbors(u,g)).length;l<c;++l)if(!(a=s[l]).closed)if(a.opened){if(1===a.by)return r.biBacktrace(u,a)}else f.push(a),a.parent=u,a.opened=!0,a.by=0;for((u=h.shift()).closed=!0,l=0,c=(s=o.getNeighbors(u,g)).length;l<c;++l)if(!(a=s[l]).closed)if(a.opened){if(0===a.by)return r.biBacktrace(a,u)}else h.push(a),a.parent=u,a.opened=!0,a.by=1}return[]},e.exports=o},function(e,t,n){var r=n(96);function i(e){r.call(this,e),this.heuristic=function(e,t){return 0}}i.prototype=new r,i.prototype.constructor=i,e.exports=i},function(e,t,n){n(48);var r=n(66),i=n(94),o=n(26);function s(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||r.manhattan,this.weight=e.weight||1,this.trackRecursion=e.trackRecursion||!1,this.timeLimit=e.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=e.heuristic||r.manhattan:this.heuristic=e.heuristic||r.octile}s.prototype.findPath=function(e,t,n,r,o){var s,a,u,l=(new Date).getTime(),c=function(e,t){return this.heuristic(Math.abs(t.x-e.x),Math.abs(t.y-e.y))}.bind(this),p=function(e,t,n,r,s){if(this.timeLimit>0&&(new Date).getTime()-l>1e3*this.timeLimit)return 1/0;var a,u,d,h,g=t+c(e,f)*this.weight;if(g>n)return g;if(e==f)return r[s]=[e.x,e.y],e;var y,E,m=o.getNeighbors(e,this.diagonalMovement);for(d=0,a=1/0;h=m[d];++d){if(this.trackRecursion&&(h.retainCount=h.retainCount+1||1,!0!==h.tested&&(h.tested=!0)),(u=p(h,t+(E=h,(y=e).x===E.x||y.y===E.y?1:Math.SQRT2),n,r,s+1))instanceof i)return r[s]=[e.x,e.y],u;this.trackRecursion&&0==--h.retainCount&&(h.tested=!1),u<a&&(a=u)}return a}.bind(this),d=o.getNodeAt(e,t),f=o.getNodeAt(n,r),h=c(d,f);for(s=0;;++s){if((u=p(d,0,h,a=[],0))===1/0)return[];if(u instanceof i)return a;h=u}return[]},e.exports=s},function(e,t,n){var r=n(26),i=n(390),o=n(391),s=n(392),a=n(393);e.exports=function(e){return(e=e||{}).diagonalMovement===r.Never?new i(e):e.diagonalMovement===r.Always?new o(e):e.diagonalMovement===r.OnlyWhenNoObstacles?new s(e):new a(e)}},function(e,t,n){var r=n(77),i=n(26);function o(e){r.call(this,e)}o.prototype=new r,o.prototype.constructor=o,o.prototype._jump=function(e,t,n,r){var i=this.grid,o=e-n,s=t-r;if(!i.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(e,t).tested=!0),i.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==o){if(i.isWalkableAt(e,t-1)&&!i.isWalkableAt(e-o,t-1)||i.isWalkableAt(e,t+1)&&!i.isWalkableAt(e-o,t+1))return[e,t]}else{if(0===s)throw new Error("Only horizontal and vertical movements are allowed");if(i.isWalkableAt(e-1,t)&&!i.isWalkableAt(e-1,t-s)||i.isWalkableAt(e+1,t)&&!i.isWalkableAt(e+1,t-s))return[e,t];if(this._jump(e+1,t,e,t)||this._jump(e-1,t,e,t))return[e,t]}return this._jump(e+o,t+s,e,t)},o.prototype._findNeighbors=function(e){var t,n,r,o,s,a,u,l,c=e.parent,p=e.x,d=e.y,f=this.grid,h=[];if(c)t=c.x,n=c.y,r=(p-t)/Math.max(Math.abs(p-t),1),o=(d-n)/Math.max(Math.abs(d-n),1),0!==r?(f.isWalkableAt(p,d-1)&&h.push([p,d-1]),f.isWalkableAt(p,d+1)&&h.push([p,d+1]),f.isWalkableAt(p+r,d)&&h.push([p+r,d])):0!==o&&(f.isWalkableAt(p-1,d)&&h.push([p-1,d]),f.isWalkableAt(p+1,d)&&h.push([p+1,d]),f.isWalkableAt(p,d+o)&&h.push([p,d+o]));else for(u=0,l=(s=f.getNeighbors(e,i.Never)).length;u<l;++u)a=s[u],h.push([a.x,a.y]);return h},e.exports=o},function(e,t,n){var r=n(77),i=n(26);function o(e){r.call(this,e)}o.prototype=new r,o.prototype.constructor=o,o.prototype._jump=function(e,t,n,r){var i=this.grid,o=e-n,s=t-r;if(!i.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(e,t).tested=!0),i.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==o&&0!==s){if(i.isWalkableAt(e-o,t+s)&&!i.isWalkableAt(e-o,t)||i.isWalkableAt(e+o,t-s)&&!i.isWalkableAt(e,t-s))return[e,t];if(this._jump(e+o,t,e,t)||this._jump(e,t+s,e,t))return[e,t]}else if(0!==o){if(i.isWalkableAt(e+o,t+1)&&!i.isWalkableAt(e,t+1)||i.isWalkableAt(e+o,t-1)&&!i.isWalkableAt(e,t-1))return[e,t]}else if(i.isWalkableAt(e+1,t+s)&&!i.isWalkableAt(e+1,t)||i.isWalkableAt(e-1,t+s)&&!i.isWalkableAt(e-1,t))return[e,t];return this._jump(e+o,t+s,e,t)},o.prototype._findNeighbors=function(e){var t,n,r,o,s,a,u,l,c=e.parent,p=e.x,d=e.y,f=this.grid,h=[];if(c)t=c.x,n=c.y,r=(p-t)/Math.max(Math.abs(p-t),1),o=(d-n)/Math.max(Math.abs(d-n),1),0!==r&&0!==o?(f.isWalkableAt(p,d+o)&&h.push([p,d+o]),f.isWalkableAt(p+r,d)&&h.push([p+r,d]),f.isWalkableAt(p+r,d+o)&&h.push([p+r,d+o]),f.isWalkableAt(p-r,d)||h.push([p-r,d+o]),f.isWalkableAt(p,d-o)||h.push([p+r,d-o])):0===r?(f.isWalkableAt(p,d+o)&&h.push([p,d+o]),f.isWalkableAt(p+1,d)||h.push([p+1,d+o]),f.isWalkableAt(p-1,d)||h.push([p-1,d+o])):(f.isWalkableAt(p+r,d)&&h.push([p+r,d]),f.isWalkableAt(p,d+1)||h.push([p+r,d+1]),f.isWalkableAt(p,d-1)||h.push([p+r,d-1]));else for(u=0,l=(s=f.getNeighbors(e,i.Always)).length;u<l;++u)a=s[u],h.push([a.x,a.y]);return h},e.exports=o},function(e,t,n){var r=n(77),i=n(26);function o(e){r.call(this,e)}o.prototype=new r,o.prototype.constructor=o,o.prototype._jump=function(e,t,n,r){var i=this.grid,o=e-n,s=t-r;if(!i.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(e,t).tested=!0),i.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==o&&0!==s){if(this._jump(e+o,t,e,t)||this._jump(e,t+s,e,t))return[e,t]}else if(0!==o){if(i.isWalkableAt(e,t-1)&&!i.isWalkableAt(e-o,t-1)||i.isWalkableAt(e,t+1)&&!i.isWalkableAt(e-o,t+1))return[e,t]}else if(0!==s&&(i.isWalkableAt(e-1,t)&&!i.isWalkableAt(e-1,t-s)||i.isWalkableAt(e+1,t)&&!i.isWalkableAt(e+1,t-s)))return[e,t];return i.isWalkableAt(e+o,t)&&i.isWalkableAt(e,t+s)?this._jump(e+o,t+s,e,t):null},o.prototype._findNeighbors=function(e){var t,n,r,o,s,a,u,l,c,p=e.parent,d=e.x,f=e.y,h=this.grid,g=[];if(p){if(t=p.x,n=p.y,r=(d-t)/Math.max(Math.abs(d-t),1),o=(f-n)/Math.max(Math.abs(f-n),1),0!==r&&0!==o)h.isWalkableAt(d,f+o)&&g.push([d,f+o]),h.isWalkableAt(d+r,f)&&g.push([d+r,f]),h.isWalkableAt(d,f+o)&&h.isWalkableAt(d+r,f)&&g.push([d+r,f+o]);else if(0!==r){c=h.isWalkableAt(d+r,f);var y=h.isWalkableAt(d,f+1),E=h.isWalkableAt(d,f-1);c&&(g.push([d+r,f]),y&&g.push([d+r,f+1]),E&&g.push([d+r,f-1])),y&&g.push([d,f+1]),E&&g.push([d,f-1])}else if(0!==o){c=h.isWalkableAt(d,f+o);var m=h.isWalkableAt(d+1,f),A=h.isWalkableAt(d-1,f);c&&(g.push([d,f+o]),m&&g.push([d+1,f+o]),A&&g.push([d-1,f+o])),m&&g.push([d+1,f]),A&&g.push([d-1,f])}}else for(u=0,l=(s=h.getNeighbors(e,i.OnlyWhenNoObstacles)).length;u<l;++u)a=s[u],g.push([a.x,a.y]);return g},e.exports=o},function(e,t,n){var r=n(77),i=n(26);function o(e){r.call(this,e)}o.prototype=new r,o.prototype.constructor=o,o.prototype._jump=function(e,t,n,r){var i=this.grid,o=e-n,s=t-r;if(!i.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(e,t).tested=!0),i.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==o&&0!==s){if(i.isWalkableAt(e-o,t+s)&&!i.isWalkableAt(e-o,t)||i.isWalkableAt(e+o,t-s)&&!i.isWalkableAt(e,t-s))return[e,t];if(this._jump(e+o,t,e,t)||this._jump(e,t+s,e,t))return[e,t]}else if(0!==o){if(i.isWalkableAt(e+o,t+1)&&!i.isWalkableAt(e,t+1)||i.isWalkableAt(e+o,t-1)&&!i.isWalkableAt(e,t-1))return[e,t]}else if(i.isWalkableAt(e+1,t+s)&&!i.isWalkableAt(e+1,t)||i.isWalkableAt(e-1,t+s)&&!i.isWalkableAt(e-1,t))return[e,t];return i.isWalkableAt(e+o,t)||i.isWalkableAt(e,t+s)?this._jump(e+o,t+s,e,t):null},o.prototype._findNeighbors=function(e){var t,n,r,o,s,a,u,l,c=e.parent,p=e.x,d=e.y,f=this.grid,h=[];if(c)t=c.x,n=c.y,r=(p-t)/Math.max(Math.abs(p-t),1),o=(d-n)/Math.max(Math.abs(d-n),1),0!==r&&0!==o?(f.isWalkableAt(p,d+o)&&h.push([p,d+o]),f.isWalkableAt(p+r,d)&&h.push([p+r,d]),(f.isWalkableAt(p,d+o)||f.isWalkableAt(p+r,d))&&h.push([p+r,d+o]),!f.isWalkableAt(p-r,d)&&f.isWalkableAt(p,d+o)&&h.push([p-r,d+o]),!f.isWalkableAt(p,d-o)&&f.isWalkableAt(p+r,d)&&h.push([p+r,d-o])):0===r?f.isWalkableAt(p,d+o)&&(h.push([p,d+o]),f.isWalkableAt(p+1,d)||h.push([p+1,d+o]),f.isWalkableAt(p-1,d)||h.push([p-1,d+o])):f.isWalkableAt(p+r,d)&&(h.push([p+r,d]),f.isWalkableAt(p,d+1)||h.push([p+r,d+1]),f.isWalkableAt(p,d-1)||h.push([p+r,d-1]));else for(u=0,l=(s=f.getNeighbors(e,i.IfAtMostOneObstacle)).length;u<l;++u)a=s[u],h.push([a.x,a.y]);return h},e.exports=o},function(e,t,n){"use strict";const r=n(395),{distance:i}=n(2),{combatTypes:o,constructionAbilities:s,gatheringAbilities:a,mineralFieldTypes:u,vespeneGeyserTypes:l,gasMineTypes:c}=n(6),{Alliance:p,Attribute:d}=n(0),{WorkerRace:f}=n(13);e.exports=function(e){return{_units:{[p.SELF]:new Map,[p.ALLY]:new Map,[p.ENEMY]:new Map,[p.NEUTRAL]:new Map},clone(){const e=[...Array.from(this._units[p.SELF].values()),...Array.from(this._units[p.ENEMY].values()),...Array.from(this._units[p.NEUTRAL].values())].map(e=>[e.tag,JSON.parse(JSON.stringify(e))]);return new Map(e)},withCurrentOrders(e){return this.getAlive(p.SELF).filter(t=>t.orders.some(t=>t.abilityId===e))},getClosest:(e,t,n=1)=>t.map(t=>({unit:t,distance:i(e,t.pos)})).sort((e,t)=>e.distance-t.distance).map(e=>e.unit).slice(0,n),getMineralFields(e){return this.getAlive(e).filter(e=>u.includes(e.unitType))},getGasGeysers(e){return this.getAlive(e).filter(e=>l.includes(e.unitType))},getGasMines(e=p.SELF){return this.getAlive(e).filter(e=>c.includes(e.unitType))},getStructures(t={alliance:p.SELF}){return this.getAlive(t).filter(t=>e.data.getUnitTypeData(t.unitType).attributes.includes(d.STRUCTURE))},inProgress(e){return this.getAlive(p.SELF).filter(e=>e.buildProgress<1).filter(t=>t.unitType===e)},getUnfinished(e){return this.getAlive(e).filter(e=>e.buildProgress<1)},getBases(e={alliance:p.SELF}){return this.getAlive(e).filter(e=>e.isTownhall())},getAll(e){if("object"==typeof e){let t;return t=e.alliance?Array.from(this._units[e.alliance].values()):this.getAll(),r(t,e)}return"function"==typeof e?this.getAll().filter(e):"number"==typeof e?Array.from(this._units[e].values()):[...Array.from(this._units[p.SELF].values()),...Array.from(this._units[p.ENEMY].values()),...Array.from(this._units[p.NEUTRAL].values())]},getAlive(e){return this.getAll(e).filter(e=>e.isCurrent())},getById(e,t={alliance:p.SELF}){const n=Array.isArray(e)?e:[e];return this.getAlive(t).filter(e=>n.includes(e.unitType))},getByTag(e){const t=e=>this._units[p.SELF].get(e)||this._units[p.NEUTRAL].get(e)||this._units[p.ENEMY].get(e)||e;return Array.isArray(e)?e.map(e=>t(e)):t(e)},getCombatUnits(e=p.SELF){return this.getAlive(e).filter(e=>e.isCombatUnit())},getRangedCombatUnits(){return this.getCombatUnits().filter(t=>e.data.getUnitTypeData(t.unitType).weapons.some(e=>e.range>1))},getWorkers(t=!1){const{agent:n}=e,r=this.getAlive(p.SELF).filter(e=>e.unitType===f[n.race]);return t?r:r.filter(e=>!e.labels.has("command"))},getIdle(){return this.getAlive(p.SELF).filter(e=>e.noQueue)},getIdleWorkers(){return this.getWorkers().filter(e=>e.noQueue)},getMineralWorkers(){return this.getWorkers().filter(e=>1===e.orders.length&&a.includes(e.orders[0].abilityId)).filter(e=>[...e.labels.keys()].length<=0)},getConstructingWorkers(){return this.getWorkers(!0).filter(e=>e.orders.some(e=>s.includes(e.abilityId)))},withLabel(e){return this.getAlive().filter(t=>t.labels.has(e))},getByType(e){const t=Array.isArray(e)?e:[e];return this.getAlive().filter(e=>t.includes(e.unitType))},getProductionUnits(t){const{abilityId:n}=e.data.getUnitTypeData(t);let r=e.data.findUnitTypesWithAbility(n);if(r.length<=0){const t=e.data.getAbilityData(n).remapsToAbilityId;r=e.data.findUnitTypesWithAbility(t)}return this.getByType(r)},getUpgradeFacilities(t){const{abilityId:n}=e.data.getUpgradeData(t),{remapsToAbilityId:r}=e.data.getAbilityData(n),i=[...e.data.findUnitTypesWithAbility(n),...e.data.findUnitTypesWithAbility(r)];return this.getByType(i)}}}},function(e,t,n){(function(e){var n="[object Arguments]",r="[object Map]",i="[object Object]",o="[object Set]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/,u=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,p=/^\[object .+?Constructor\]$/,d=/^(?:0|[1-9]\d*)$/,f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f[n]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f["[object Function]"]=f[r]=f["[object Number]"]=f[i]=f["[object RegExp]"]=f[o]=f["[object String]"]=f["[object WeakMap]"]=!1;var h="object"==typeof global&&global&&global.Object===Object&&global,g="object"==typeof self&&self&&self.Object===Object&&self,y=h||g||Function("return this")(),E=t&&!t.nodeType&&t,m=E&&"object"==typeof e&&e&&!e.nodeType&&e,A=m&&m.exports===E&&h.process,v=function(){try{return A&&A.binding("util")}catch(e){}}(),R=v&&v.isTypedArray;function b(e,t){for(var n=-1,r=e?e.length:0,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function C(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function T(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function S(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function O(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var _,I,P,w=Array.prototype,N=Function.prototype,L=Object.prototype,D=y["__core-js_shared__"],x=(_=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"",F=N.toString,M=L.hasOwnProperty,B=L.toString,U=RegExp("^"+F.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=y.Symbol,j=y.Uint8Array,G=L.propertyIsEnumerable,H=w.splice,W=(I=Object.keys,P=Object,function(e){return I(P(e))}),V=Se(y,"DataView"),Y=Se(y,"Map"),$=Se(y,"Promise"),K=Se(y,"Set"),q=Se(y,"WeakMap"),z=Se(Object,"create"),Q=De(V),Z=De(Y),J=De($),X=De(K),ee=De(q),te=k?k.prototype:void 0,ne=te?te.valueOf:void 0,re=te?te.toString:void 0;function ie(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function se(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ae(e){var t=-1,n=e?e.length:0;for(this.__data__=new se;++t<n;)this.add(e[t])}function ue(e){this.__data__=new oe(e)}function le(e,t){var n=Be(e)||Me(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var o in e)!t&&!M.call(e,o)||i&&("length"==o||_e(o,r))||n.push(o);return n}function ce(e,t){for(var n=e.length;n--;)if(Fe(e[n][0],t))return n;return-1}ie.prototype.clear=function(){this.__data__=z?z(null):{}},ie.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ie.prototype.get=function(e){var t=this.__data__;if(z){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return M.call(t,e)?t[e]:void 0},ie.prototype.has=function(e){var t=this.__data__;return z?void 0!==t[e]:M.call(t,e)},ie.prototype.set=function(e,t){return this.__data__[e]=z&&void 0===t?"__lodash_hash_undefined__":t,this},oe.prototype.clear=function(){this.__data__=[]},oe.prototype.delete=function(e){var t=this.__data__,n=ce(t,e);return!(n<0)&&(n==t.length-1?t.pop():H.call(t,n,1),!0)},oe.prototype.get=function(e){var t=this.__data__,n=ce(t,e);return n<0?void 0:t[n][1]},oe.prototype.has=function(e){return ce(this.__data__,e)>-1},oe.prototype.set=function(e,t){var n=this.__data__,r=ce(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},se.prototype.clear=function(){this.__data__={hash:new ie,map:new(Y||oe),string:new ie}},se.prototype.delete=function(e){return Te(this,e).delete(e)},se.prototype.get=function(e){return Te(this,e).get(e)},se.prototype.has=function(e){return Te(this,e).has(e)},se.prototype.set=function(e,t){return Te(this,e).set(e,t),this},ae.prototype.add=ae.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ae.prototype.has=function(e){return this.__data__.has(e)},ue.prototype.clear=function(){this.__data__=new oe},ue.prototype.delete=function(e){return this.__data__.delete(e)},ue.prototype.get=function(e){return this.__data__.get(e)},ue.prototype.has=function(e){return this.__data__.has(e)},ue.prototype.set=function(e,t){var n=this.__data__;if(n instanceof oe){var r=n.__data__;if(!Y||r.length<199)return r.push([e,t]),this;n=this.__data__=new se(r)}return n.set(e,t),this};var pe,de,fe=(pe=function(e,t){return e&&ge(e,t,Ye)},function(e,t){if(null==e)return e;if(!Ue(e))return pe(e,t);for(var n=e.length,r=de?n:-1,i=Object(e);(de?r--:++r<n)&&!1!==t(i[r],r,i););return e});function he(e,t){var n=[];return fe(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}var ge=function(e){return function(t,n,r){for(var i=-1,o=Object(t),s=r(t),a=s.length;a--;){var u=s[e?a:++i];if(!1===n(o[u],u,o))break}return t}}();function ye(e,t){for(var n=0,r=(t=Ie(t,e)?[t]:be(t)).length;null!=e&&n<r;)e=e[Le(t[n++])];return n&&n==r?e:void 0}function Ee(e,t){return null!=e&&t in Object(e)}function me(e,t,s,a,u){return e===t||(null==e||null==t||!Ge(e)&&!He(t)?e!=e&&t!=t:function(e,t,s,a,u,l){var c=Be(e),p=Be(t),d="[object Array]",f="[object Array]";c||(d=(d=Oe(e))==n?i:d);p||(f=(f=Oe(t))==n?i:f);var h=d==i&&!T(e),g=f==i&&!T(t),y=d==f;if(y&&!h)return l||(l=new ue),c||Ve(e)?Ce(e,t,s,a,u,l):function(e,t,n,i,s,a,u){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new j(e),new j(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Fe(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case r:var l=S;case o:var c=2&a;if(l||(l=O),e.size!=t.size&&!c)return!1;var p=u.get(e);if(p)return p==t;a|=1,u.set(e,t);var d=Ce(l(e),l(t),i,s,a,u);return u.delete(e),d;case"[object Symbol]":if(ne)return ne.call(e)==ne.call(t)}return!1}(e,t,d,s,a,u,l);if(!(2&u)){var E=h&&M.call(e,"__wrapped__"),m=g&&M.call(t,"__wrapped__");if(E||m){var A=E?e.value():e,v=m?t.value():t;return l||(l=new ue),s(A,v,a,u,l)}}if(!y)return!1;return l||(l=new ue),function(e,t,n,r,i,o){var s=2&i,a=Ye(e),u=a.length,l=Ye(t).length;if(u!=l&&!s)return!1;var c=u;for(;c--;){var p=a[c];if(!(s?p in t:M.call(t,p)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var f=!0;o.set(e,t),o.set(t,e);var h=s;for(;++c<u;){p=a[c];var g=e[p],y=t[p];if(r)var E=s?r(y,g,p,t,e,o):r(g,y,p,e,t,o);if(!(void 0===E?g===y||n(g,y,r,i,o):E)){f=!1;break}h||(h="constructor"==p)}if(f&&!h){var m=e.constructor,A=t.constructor;m==A||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof A&&A instanceof A||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,s,a,u,l)}(e,t,me,s,a,u))}function Ae(e){return!(!Ge(e)||function(e){return!!x&&x in e}(e))&&(ke(e)||T(e)?U:p).test(De(e))}function ve(e){return"function"==typeof e?e:null==e?$e:"object"==typeof e?Be(e)?function(e,t){if(Ie(e)&&Pe(t))return we(Le(e),t);return function(n){var r=function(e,t,n){var r=null==e?void 0:ye(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?function(e,t){return null!=e&&function(e,t,n){t=Ie(t,e)?[t]:be(t);var r,i=-1,o=t.length;for(;++i<o;){var s=Le(t[i]);if(!(r=null!=e&&n(e,s)))break;e=e[s]}if(r)return r;return!!(o=e?e.length:0)&&je(o)&&_e(s,o)&&(Be(e)||Me(e))}(e,t,Ee)}(n,e):me(t,r,void 0,3)}}(e[0],e[1]):function(e){var t=function(e){var t=Ye(e),n=t.length;for(;n--;){var r=t[n],i=e[r];t[n]=[r,i,Pe(i)]}return t}(e);if(1==t.length&&t[0][2])return we(t[0][0],t[0][1]);return function(n){return n===e||function(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=Object(e);i--;){var a=n[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var u=(a=n[i])[0],l=e[u],c=a[1];if(s&&a[2]){if(void 0===l&&!(u in e))return!1}else{var p=new ue;if(r)var d=r(l,c,u,e,t,p);if(!(void 0===d?me(c,l,r,3,p):d))return!1}}return!0}(n,e,t)}}(e):Ie(t=e)?(n=Le(t),function(e){return null==e?void 0:e[n]}):function(e){return function(t){return ye(t,e)}}(t);var t,n}function Re(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||L,t!==r)return W(e);var t,n,r,i=[];for(var o in Object(e))M.call(e,o)&&"constructor"!=o&&i.push(o);return i}function be(e){return Be(e)?e:Ne(e)}function Ce(e,t,n,r,i,o){var s=2&i,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var l=o.get(e);if(l&&o.get(t))return l==t;var c=-1,p=!0,d=1&i?new ae:void 0;for(o.set(e,t),o.set(t,e);++c<a;){var f=e[c],h=t[c];if(r)var g=s?r(h,f,c,t,e,o):r(f,h,c,e,t,o);if(void 0!==g){if(g)continue;p=!1;break}if(d){if(!C(t,(function(e,t){if(!d.has(t)&&(f===e||n(f,e,r,i,o)))return d.add(t)}))){p=!1;break}}else if(f!==h&&!n(f,h,r,i,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function Te(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Se(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ae(n)?n:void 0}var Oe=function(e){return B.call(e)};function _e(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||d.test(e))&&e>-1&&e%1==0&&e<t}function Ie(e,t){if(Be(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!We(e))||(a.test(e)||!s.test(e)||null!=t&&e in Object(t))}function Pe(e){return e==e&&!Ge(e)}function we(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}(V&&"[object DataView]"!=Oe(new V(new ArrayBuffer(1)))||Y&&Oe(new Y)!=r||$&&"[object Promise]"!=Oe($.resolve())||K&&Oe(new K)!=o||q&&"[object WeakMap]"!=Oe(new q))&&(Oe=function(e){var t=B.call(e),n=t==i?e.constructor:void 0,s=n?De(n):void 0;if(s)switch(s){case Q:return"[object DataView]";case Z:return r;case J:return"[object Promise]";case X:return o;case ee:return"[object WeakMap]"}return t});var Ne=xe((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(We(e))return re?re.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return u.test(e)&&n.push(""),e.replace(l,(function(e,t,r,i){n.push(r?i.replace(c,"$1"):t||e)})),n}));function Le(e){if("string"==typeof e||We(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function De(e){if(null!=e){try{return F.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function xe(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s),s};return n.cache=new(xe.Cache||se),n}function Fe(e,t){return e===t||e!=e&&t!=t}function Me(e){return function(e){return He(e)&&Ue(e)}(e)&&M.call(e,"callee")&&(!G.call(e,"callee")||B.call(e)==n)}xe.Cache=se;var Be=Array.isArray;function Ue(e){return null!=e&&je(e.length)&&!ke(e)}function ke(e){var t=Ge(e)?B.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function je(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ge(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function He(e){return!!e&&"object"==typeof e}function We(e){return"symbol"==typeof e||He(e)&&"[object Symbol]"==B.call(e)}var Ve=R?function(e){return function(t){return e(t)}}(R):function(e){return He(e)&&je(e.length)&&!!f[B.call(e)]};function Ye(e){return Ue(e)?le(e):Re(e)}function $e(e){return e}e.exports=function(e,t){return(Be(e)?b:he)(e,ve(t))}}).call(this,n(93)(e))},function(e,t,n){"use strict";n(7)("sc2:silly:DebugSystem");const r=n(7)("sc2:debug:DebugSystem"),i=n(7)("sc2:DebugOnScreen"),o=n(97),{Color:s,UnitTypeId:a,enums:{Alliance:u,AllianceId:l}}=n(8);e.exports=o({name:"DebugSystem",type:"engine",defaultOptions:{state:{debug:r.enabled,unitsLost:{},debugOnScreen:i.enabled},stepIncrement:1},async onUnitDestroyed(e,t){this.state.unitsLost[t.alliance]||(this.state.unitsLost[t.alliance]={}),this.state.unitsLost[t.alliance][t.unitType]||(this.state.unitsLost[t.alliance][t.unitType]=0),this.setState({unitsLost:{...this.state.unitsLost,[t.alliance]:{...this.state.unitsLost[t.alliance],[t.unitType]:this.state.unitsLost[t.alliance][t.unitType]+=1}}})},async onStep({data:e,resources:t}){const{debug:n,units:r}=t.get();if(this.state.debugOnScreen){const t=r.getAlive(u.SELF).reduce((e,t)=>{const n=t.isWorker(),r=t.isCombatUnit()||t.data().foodRequired>0||t.data().foodProvided>0&&t.canMove(),i=t.data().foodRequired<=0&&t.isStructure();return n?e.Workers[t.unitType]?e.Workers[t.unitType]+=1:e.Workers[t.unitType]=1:r?e.Units[t.unitType]?e.Units[t.unitType]+=1:e.Units[t.unitType]=1:i&&(e.Buildings[t.unitType]?e.Buildings[t.unitType]+=1:e.Buildings[t.unitType]=1),e},{Units:{},Buildings:{},Workers:{}}),i=Object.keys(t).map(e=>`Own ${e}:\n`+Object.entries(t[e]).map(([e,t])=>`${t}x - ${a[e]}`).join("\n"));n.setDrawTextScreen("ownUnitTypes",[{size:12,color:s.FIREBRICK,pos:{x:.005,y:.01},text:i.join("\n\n")}]),n.setDrawTextScreen("unitsLost",[{size:12,color:s.FIREBRICK,pos:{x:.1,y:.01},text:Object.keys(this.state.unitsLost).map(e=>l[e]+" Units Lost:\n"+Object.entries(this.state.unitsLost[e]).map(([e,t])=>`${t}x - ${a[e]}`).join("\n")).join("\n\n")}]),n.setDrawTextScreen("earmarks",[{size:12,color:s.AQUA,pos:{x:.005,y:.3},text:"Current Earmarks\n"+e.get("earmarks").map(e=>`${e.name}: ${e.minerals}m, ${e.vespene}v`).join("\n")}])}this.state.debug&&(n.touched&&await n.updateScreen(),n.touched=!1)}})},function(e,t,n){"use strict";const r=()=>{};e.exports=function(e){const t=Array.isArray(e.units)?e.units:[e.units],n=Array.isArray(e.labels)?e.labels:[e.labels],i=e.onStep?e.onStep.bind(e):r,o=e.onNewUnit?e.onNewUnit.bind(e):r,s=e.onUnitIdle?e.onUnitIdle.bind(e):r,a=e.onUnitDestroyed?e.onUnitDestroyed.bind(e):r;function u(e){return n.some(t=>e.hasLabel(t))}function l(t,...n){return Reflect.apply(t,e,n)}e.onStep=async function(e){const{units:r}=e.resources.get(),o=n.reduce((e,t)=>(e[t]=r.withLabel(t).filter(e=>e.isFinished()),e),{}),s=t.reduce((e,t)=>(e[t]=r.getById(t).filter(e=>e.isFinished()).filter(e=>{const t=e.tag;return!Object.values(o).reduce((e,t)=>e.concat(t),[]).map(e=>e.tag).includes(t)}),e),{}),a=[...Object.values(s),...Object.values(o)].reduce((e,t)=>e.concat(t),[]);return i(e,{all:a,unlabeled:s,labeled:o})};const c=e.idleFunctions||{};e.onUnitIdle=async function(e,t){const r=n.find(e=>{if(t.hasLabel(e))return!!c[e]});return r?l(c[r],e,t):!t.hasNoLabels()&&c.labeled?l(c.labeled,e,t,[...t.labels.keys()][0]):c[t.unitType]?l(c[t.unitType],e,t):s(e,t)},e.onUnitCreated=async function(e,n){if(t.includes(n.unitType)||u(n))return o(e,n)},e.onUnitFinished=async function(e,n){if(t.includes(n.unitType)||u(n))return o(e,n)},e.onUnitDestroyed=async function(e,n){if(t.includes(n.unitType)||u(n))return a(e,n)}}},function(e,t,n){"use strict";const r=n(7)("sc2:debug:frameSystem"),i=n(97),{GameEndedError:o}=n(65),s={name:"FrameSystem",type:"engine",async onGameStart({resources:e}){const{actions:{_client:t},frame:n}=e.get(),[r,i]=await Promise.all([t.gameInfo(),t.observation()]);n._gameInfo=r,n._gameLoop=i.observation.gameLoop,n._observation=i.observation},async onStep({resources:e}){const{actions:{_client:t},frame:n,units:i,events:s}=e.get();let a;try{a=await Promise.all([t.observation()])}catch(e){throw new o("broken thingy testing",{e:e})}if(a[0].playerResult.length>0)throw r("exiting loop, results given from observation"),new o("Player results available in observation",{data:a[0].playerResult});const[u]=a,{observation:l,chat:c}=u;n._previous={_gameLoop:n._gameLoop},l&&(n._gameLoop=l.gameLoop,n._observation=l,n._result=u.playerResult,n._render=l.renderData,n._feature=l.featureLayerData,n._score=l.score);const{actions:p}=u;p.length>0&&p.forEach(e=>{e.actionRaw&&e.actionRaw.unitCommand&&e.actionRaw.unitCommand.unitTags.forEach(e=>{const t=i.getByTag(e);t&&"string"!=typeof t&&t.removeLabel("command")})});i.withLabel("command").forEach(e=>{const t=e.getLabel("command"),n=l.gameLoop-t;n>250&&(r(`Outstanding unit command after ${n}ms!`),e.isWorker()&&(e.labels.clear(),e.addLabel("stuck",!0)),e.removeLabel("command"))}),c.length>0&&c.forEach(e=>{s.write({name:"chatReceived",data:e})});const{event:d}=u.observation.rawData;if(d&&d.deadUnits.length>0){const e=i.getByTag(d.deadUnits).filter(e=>"string"!=typeof e);e.forEach(e=>e.labels.set("dead",!0)),e.forEach(e=>s.write({name:"unitDestroyed",type:"all",data:e}))}}};e.exports=i(s)},function(e,t,n){"use strict";const r=n(98),i=n(400),{Alliance:o}=n(0),s={name:"UnitSystem",type:"engine",async onGameStart(e){return this.onStep(e)},async onStep(e){const{events:t,units:n,frame:r,actions:s}=e.resources.get(),{rawData:{units:a}}=r.getObservation();a.forEach(r=>{if(n._units[r.alliance].has(r.tag)){const e=n._units[r.alliance].get(r.tag);((e,t)=>e.alliance===o.SELF&&e.buildProgress>=1&&t.buildProgress<1)(r,e)&&(t.write({name:"unitFinished",data:e,type:"all"}),r.orders.length>0&&t.write({name:"unitIdle",data:e,type:"all"})),((e,t)=>e.orders.length<=0&&!t.noQueue)(r,e)&&t.write({name:"unitIdle",data:e,type:"all"}),((e,t)=>t.unitType!==e.unitType)(r,e)&&t.write({name:"unitIsTransforming",data:e,type:"all"}),((e,t)=>e.isBurrowed&&!t.isBurrowed)(r,e)&&t.write({name:"unitHasBurrowed",data:e,type:"all"}),((e,t)=>"0"===t.engagedTargetTag&&"0"!==e.engagedTargetTag)(r,e)&&t.write({name:"unitHasEngaged",data:e,type:"all"}),((e,t)=>"0"!==t.engagedTargetTag&&"0"===e.engagedTargetTag)(r,e)&&t.write({name:"unitHasDisengaged",data:e,type:"all"}),((e,t)=>"0"!==t.engagedTargetTag&&t.engagedTargetTag!==e.engagedTargetTag)(r,e)&&t.write({name:"unitHasSwitchedTargets",data:e,type:"all"}),r.alliance===o.SELF&&((e,t)=>e.shield<t.shield||e.health<t.health)(r,e)&&t.write({name:"unitDamaged",data:e,type:"all"}),e.update(r)}else{const s=i(r,e);r.alliance===o.SELF?(t.write({name:"unitCreated",data:s,type:"all"}),r.orders.length>0&&t.write({name:"unitIdle",data:s,type:"all"})):r.alliance===o.ENEMY&&t.write({name:"enemyFirstSeen",data:s,type:"all"}),n._units[r.alliance].set(r.tag,s)}});const u=Array.from(n._units[o.SELF].keys());return s.sendQuery({abilities:u.map(e=>({unitTag:e}))}).then(e=>{e.abilities.forEach(e=>{const t=n._units[o.SELF].get(e.unitTag);t._availableAbilities=e.abilities.map(e=>e.abilityId),n._units[o.SELF].set(e.unitTag,t)})})}};e.exports=r(s)},function(e,t,n){"use strict";const r=n(1),i=n(3),{TownhallRace:o}=n(13),{Alliance:s,WeaponTargetType:a,Attribute:u,CloakState:l,Race:c}=n(0),{techLabTypes:p,reactorTypes:d,workerTypes:f,gasMineTypes:h,combatTypes:g,mineralFieldTypes:y,gatheringAbilities:E,returningAbilities:m,carryingMineralsBuffs:A,carryingVespeneBuffs:v}=n(6),{townhallTypes:R,constructionAbilities:b}=n(6);e.exports=function(e,{data:t,resources:n}){const{frame:C,units:T,actions:S}=n.get(),{alliance:O}=e,_={tag:e.tag,lastSeen:C.getGameLoop(),noQueue:0===e.orders.length,labels:new Map,_availableAbilities:[],async inject(e){if(this.canInject()){let t;if(e)t=e;else{const[e]=T.getClosest(this.pos,T.getById(o[c.ZERG]),3).filter(e=>e.isIdle());if(!e)return;t=e}return S.do(i.EFFECT_INJECTLARVA,this.tag,{target:t})}},async blink(e,t={}){if(this.canBlink())return S.do(i.EFFECT_BLINK,this.tag,{target:e,...t})},async burrow(e={}){if(this.is(r.WIDOWMINE))return S.do(i.BURROWDOWN,this.tag,e)},async toggle(e={}){const t={queue:!0,...e};return this.is(r.WARPPRISM)?S.do(i.MORPH_WARPPRISMPHASINGMODE,this.tag,t):this.is(r.WARPPRISMPHASING)?S.do(i.MORPH_WARPPRISMTRANSPORTMODE,this.tag,t):this.is(r.LIBERATOR)?S.do(i.MORPH_LIBERATORAGMODE,this.tag,t):this.is(r.LIBERATORAG)?S.do(i.MORPH_LIBERATORAAMODE,this.tag,t):void 0},addLabel(e,t){return this.labels.set(e,t)},hasLabel(e){return this.labels.has(e)},removeLabel(e){return this.labels.delete(e)},hasNoLabels(){return[...this.labels.keys()].length<=0},getLabel(e){return this.labels.get(e)},getLife(){return this.health/this.healthMax*100},abilityAvailable(e){return this._availableAbilities.includes(e)},availableAbilities(){return this._availableAbilities},data(){return t.getUnitTypeData(this.unitType)},is(e){return this.unitType===e},isAttacking(){return this.orders.some(e=>e.abilityId===i.ATTACK_ATTACK)},isCloaked(){return this.cloak!==l.NOTCLOAKED},isConstructing(){return this.orders.some(e=>b.includes(e.abilityId))},isCombatUnit(){return g.includes(this.unitType)},isMelee(){return this.data().weapons.some(e=>e.range<1)},isEnemy(){return this.alliance===s.ENEMY},isFinished(){return this.buildProgress>=1},isHolding(){return this.orders.some(e=>e.abilityId===i.HOLDPOSITION)},isTownhall(){return R.includes(this.unitType)},isWorker(){return f.includes(this.unitType)},isMineralField(){return y.includes(this.unitType)},isGasMine(){return h.includes(this.unitType)},isReturning(e){return this.orders.some(t=>{if(m.includes(t.abilityId)){if(!e)return!0;if("minerals"===e)return this.buffIds.some(e=>A.includes(e));if("vespene"===e)return this.buffIds.some(e=>v.includes(e))}})},isGathering(e){return this.orders.some(t=>{if(E.includes(t.abilityId)){if(!e)return!0;const n=T.getByTag(t.targetUnitTag);if("string"==typeof n)return!1;if(n){if("minerals"===e)return n.isMineralField();if("vespene"===e)return n.isGasMine()}}})},isHarvesting(e){return this.isGathering(e)||this.isReturning()},isCurrent(){return this.lastSeen===C.getGameLoop()},isIdle(){return this.noQueue},isStructure(){return this.data().attributes.includes(u.STRUCTURE)},hasReactor(){const e=T.getByTag(this.addOnTag);return d.includes(e.unitType)},hasTechLab(){const e=T.getByTag(this.addOnTag);return p.includes(e.unitType)},canInject(){return this.abilityAvailable(i.EFFECT_INJECTLARVA)},canBlink(){return this.abilityAvailable(i.EFFECT_BLINK)||this.abilityAvailable(i.EFFECT_BLINK_STALKER)},canMove(){return this._availableAbilities.includes(i.MOVE)},canShootGround(){return this.data().weapons.some(e=>e.type!==a.AIR)},canShootUp(){return this.data().weapons.some(e=>e.type!==a.GROUND)},update(e){Object.assign(this,e,{noQueue:0===e.orders.length,lastSeen:C.getGameLoop()})}};switch(O){case s.ALLY:case s.SELF:case s.ENEMY:case s.NEUTRAL:return{...e,..._};default:throw new Error("CANT CREATE A UNIT WITH NO ALLIANCE, THIS SHOULD NEVER HAPPEN")}}},function(e,t,n){"use strict";const r=n(7)("sc2:DrawPlacementMap"),i=n(7)("sc2:DrawDebugMap"),o=n(7)("sc2:DrawDebugWalls"),s=n(7)("sc2:debug:MapSystem"),a=n(7)("sc2:silly:MapSystem"),u=n(161),l=n(443),c=n(187),p=n(98),{consumeRawGrids:d,consumeImageData:f}=n(448),{createClusters:h}=n(456),g=n(457),y=n(459),{distanceAAShapeAndPoint:E}=n(19),{distance:m,avgPoints:A,areEqual:v,closestPoint:R,createPoint2D:b,getNeighbors:C}=n(2),{frontOfGrid:T}=n(102),{gridsInCircle:S}=n(15),{MineralField:O,VespeneGeyser:_,Townhall:I,getFootprint:P}=n(20),{cellsInFootprint:w}=n(19),{Alliance:N}=n(0),{MapDecompositionError:L}=n(65),D=n(74),{UnitType:x,UnitTypeId:F}=n(8),{vespeneGeyserTypes:M,unbuildablePlateTypes:B,mineralFieldTypes:U}=n(6);function k(e){const{units:t,debug:n,map:r}=e.resources.get(),o=r.getLocations().self,s=t.getMineralFields(),a=t.getAll(N.SELF).find(e=>e.isTownhall()),u=t.getByType(M);if(!o)throw new L("No starting locations - map is likely custom");const p=b(o);p.x=p.x+3;const d=b(r.getLocations().enemy[0]);let f;d.x=d.x+3;try{f=h([...s,...u]).map(t=>g(e,t)).map(e=>{const t={...e.townhallPosition};t.x=t.x+3;const n={pathFromMain:r.path(t,p),pathFromEnemy:r.path(t,d)};return 0===n.pathFromEnemy.length&&(n.pathFromEnemy.length=999),0===n.pathFromMain.length&&(n.pathFromMain.length=999),Object.assign(e,n)}).sort((e,t)=>e.pathFromMain.length-t.pathFromMain.length).map(t=>function(e,t){const{map:n,debug:r}=e.resources.get(),{townhallPosition:i,cluster:{mineralFields:o,vespeneGeysers:s}}=t,a=m(n.getLocations().self,i)<5||m(n.getLocations().enemy[0],i)<5,u=y(n.getGrids().miniMap,Math.trunc(i.x+3),Math.trunc(i.y),null,104,!a&&16),p=u.filter(e=>[...o,...s].some(t=>{const n=I(i),r=t.isMineralField()?O(t.pos):_(t.pos);return E(r,e)<4&&E(n,e)<3})),d=u.filter(e=>o.some(t=>{const n=I(i),r=O(t.pos),o=E(r,e),s=E(n,e);return o<5&&s>4&&s>o})),f=y(n.getGrids().placement,Math.trunc(i.x),Math.trunc(i.y),null,104,!a&&16),h=l(f,2,[".x",".y"]).reduce((e,t,n,r)=>{const i=r[n+1]||r[0];return c(t.x,t.y,i.x,i.y,(t,n)=>{e.find(e=>e.x===t&&e.y===n)||e.push({x:t,y:n})}),e},[]);return{...t,areas:{areaFill:f,hull:h,placementGrid:u.filter(e=>!p.find(t=>t.x===e.x&&t.y===e.y)),mineralLine:p,behindMineralLine:d}}}(e,t)).map(e=>Object.assign(e,{centroid:A(e.areas.areaFill)})),f[0].base=a.tag,r.setExpansions(f),i.enabled&&n.setRegions(f)}catch(e){console.warn(e),console.warn("Map is not decomposable! If this is a 1v1 ladder map, please submit a bug report")}return f}const j={name:"MapSystem",type:"engine",defaultOptions:{stepIncrement:1},async onGameStart(e){const{units:t,frame:n,map:r,debug:i}=e.resources.get(),{startRaw:s}=n.getGameInfo(),a=t.getAlive(N.SELF).find(e=>e.isTownhall());var l;a&&s.startLocations.length>0&&r.setLocations({self:a.pos,enemy:s.startLocations}),r.setGrids(d(s)),r.setSize(s.mapSize),r.setGraph(),r.setRamps((l=r._grids.miniMap,l.reduce((e,t,n)=>(t.forEach((t,r)=>{114===t&&(e=e.concat([{x:r,y:n}]))}),e),[])).map(e=>Object.assign(e,{z:r.getHeight(e)}))),r.setRamps(r._ramps.filter(e=>{const{x:t,y:n}=e;return[{y:n-1,x:t},{y:n,x:t-1},{y:n,x:t+1},{y:n+1,x:t}].some(e=>r.isRamp(e))}));const p=t.getGasGeysers(),f=t.getByType(U),h=t.getByType(B);[...p,...f].forEach(e=>{const t=P(e.unitType);w(b(e.pos),t).forEach(e=>{r.setPlaceable(e,!1),r.setPathable(e,!1)})}),h.forEach(e=>{const t=P(e.unitType);w(b(e.pos),t).forEach(e=>r.setPlaceable(e,!1))}),k(e),function(e,t){const{resources:n}=e,{map:r,units:i,debug:s}=n.get(),{placement:a}=r.getGrids(),l=t.areas.hull,p=T(n,l),d=i.getByType(B),f=u(d.map(e=>{const t=P(e.unitType);return w(b(e.pos),t)}));function h(e=!0){const t=t=>e?r.isRamp(t):!r.isRamp(t),{deadHull:n,liveHull:i}=p.reduce((e,n)=>{const i=C(n,!1),o=C(n,!0,!0),s=i.filter(e=>!r.isPathable(e)),a=o.filter(e=>!r.isPathable(e));return s.length<=0&&a.length<=0&&i.some(t)&&(i.some(e=>f.some(t=>v(t,e)))||o.some(e=>f.some(t=>v(t,e)))||e.liveHull.push(n)),e.deadHull=e.deadHull.concat(s.filter(e=>C(e).some(t))),e},{deadHull:[],liveHull:[]});let o=0;i.forEach((e,t)=>i.forEach((n,r)=>{t!==r&&(o=m(e,n)>o?m(e,n):o)}));const s=n.reduce((e,t)=>{if(e.length<=0){const n=[t];return n.centroid=t,e.push(n),e}const n=e.findIndex(e=>m(e.centroid,t)<o);if(-1!==n)e[n].push(t),e[n].centroid=A(e[n]);else{const n=[t];n.centroid=t,e.push(n)}return e},[]);return s.reduce((e,t,n)=>{const r=u(t.map(e=>s.filter((e,t)=>t!==n).map(t=>{const n=R(e,t),r=[];return c(e.x,e.y,n.x,n.y,(e,t)=>r.push({x:e,y:t})),r})));return e.concat(r)},[]).map(e=>{const t=e[0],n=e[e.length-1],i=r.newGraph(a.map(e=>e.map(e=>0===e?1:0)));return i.setWalkableAt(t.x,t.y,!0),i.setWalkableAt(n.x,n.y,!0),r.path(e[0],e[e.length-1],{graph:i,diagonal:!0}).map(([e,t])=>({x:e,y:t}))}).map(e=>e.filter(e=>r.isPlaceable(e))).sort((e,t)=>e.length-t.length).filter(e=>e.length>=o).filter(e=>m(A(e),A(i))<=o)}let g=h(!0);g[0]||(g=h(!1));const[y]=g;o.enabled&&s.setDrawCells("dhwall",y.map(e=>({pos:e})),{size:.9,color:D.FUCHSIA,cube:!0,persistText:!0}),t.areas.wall=y,t.areas.areaFill=t.areas.areaFill.filter(e=>y.every(n=>m(n,t.townhallPosition)>m(e,t.townhallPosition)))}(e,r.getNatural())},async onStep({data:e,resources:t}){const{frame:n,map:i,events:o,debug:s}=t.get(),u=n.getMapState(),l={creep:f(u.creep,i._mapSize.x),visibility:f(u.visibility,i._mapSize.x)};i.setMapState(l);const c=i.getEffects(),p=n.getEffects(),d=p.filter(e=>!(c.length>0)||!c.some(t=>!(t.effectId===e.effectId&&t.pos[0].x===e.pos[0].x&&t.pos[0].y===e.pos[0].y&&t.pos.length===e.pos.length))).map(t=>{const n=e.getEffectData(t.effectId),r=t.pos.reduce((e,t)=>e.concat(S(t,n.radius,{normalize:!0})),[]);return{...t,...n,effectGrid:r}});d.length>=1&&d.forEach(e=>{a("New Effect!",e),o.write({name:"newEffect",data:e})});const h=c.filter(e=>!(p.length>0)||!p.some(t=>!(e.effectId===t.effectId&&e.pos[0].x===t.pos[0].x&&e.pos[0].y===t.pos[0].y&&e.pos.length===t.pos.length)));h.length>=1&&h.forEach(t=>{const n=e.getEffectData(t.effectId);a("Expired effect!",t),a("Effect Data:",n),o.write({name:"expiredEffect",data:{...t,...n}})});const g=c.filter(e=>!(h.length>0)||!h.some(t=>!(e.effectId===t.effectId&&e.pos[0].x===t.pos[0].x&&e.pos[0].y===t.pos[0].y&&e.pos.length===t.pos.length)));i.setActiveEffects(g.concat(d)),r.enabled&&s.setDrawCells("debugDrawPlaceable",i.getGrids().placement.reduce((e,t,n)=>(t.forEach((t,r)=>{e.push({pos:{x:r,y:n},size:.5,color:t?D.LIME_GREEN:D.RED})}),e),[]),{includeText:!1})},async onUnitCreated({resources:e},t){const{map:n,frame:r}=e.get();if(t.isStructure()){const{pos:e}=t,r=P(t.unitType);w(b(e),r).forEach(e=>{n.setPlaceable(e,!1),n.setPathable(e,!1)})}if(t.isTownhall()){if(s("new townhall detected: "+F[t.unitType]),r.getGameLoop()<=8)return;const e=n.getExpansions().find(e=>v(e.townhallPosition,n.getClosestExpansion(t.pos).townhallPosition));e&&m(e.townhallPosition,t.pos)<4.5&&(e.base=t.tag)}},async onUnitDestroyed({resources:e},t){const{map:n}=e.get();if(t.isStructure()&&!t.isGasMine()){t.is(x.PYLON);const{pos:e}=t,r=P(t.unitType);w(b(e),r).forEach(e=>{n.setPlaceable(e,!0),n.setPathable(e,!0)})}},async onEnemyFirstSeen({resources:e},t){const{map:n}=e.get();if(t.isStructure()){const{pos:e}=t,r=P(t.unitType);w(b(e),r).forEach(e=>{n.setPlaceable(e,!1),n.setPathable(e,!1)})}if(!t.isTownhall())return;const r=n.getExpansions().find(e=>v(e.townhallPosition,n.getClosestExpansion(t.pos).townhallPosition));r&&m(r.townhallPosition,t.pos)<4.5&&(r.base=t.tag)}};e.exports=p(j)},function(e,t,n){"use strict";var r=Array.prototype.slice,i=n(163),o=Object.keys,s=o?function(e){return o(e)}:n(403),a=Object.keys;s.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return i(e)?a(r.call(e)):a(e)}):Object.keys=s;return Object.keys||s},e.exports=s},function(e,t,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=n(163),a=Object.prototype.propertyIsEnumerable,u=!a.call({toString:null},"toString"),l=a.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{p(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===o.call(e),r=s(e),a=t&&"[object String]"===o.call(e),d=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var h=l&&n;if(a&&e.length>0&&!i.call(e,0))for(var g=0;g<e.length;++g)d.push(String(g));if(r&&e.length>0)for(var y=0;y<e.length;++y)d.push(String(y));else for(var E in e)h&&"prototype"===E||!i.call(e,E)||d.push(String(E));if(u)for(var m=function(e){if("undefined"==typeof window||!f)return p(e);try{return p(e)}catch(e){return!1}}(e),A=0;A<c.length;++A)m&&"constructor"===c[A]||!i.call(e,c[A])||d.push(c[A]);return d}}e.exports=r},function(e,t,n){"use strict";var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,o=Object.prototype.toString;e.exports=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==o.call(t))throw new TypeError(r+t);for(var n,s=i.call(arguments,1),a=function(){if(this instanceof n){var r=t.apply(this,s.concat(i.call(arguments)));return Object(r)===r?r:this}return t.apply(e,s.concat(i.call(arguments)))},u=Math.max(0,t.length-s.length),l=[],c=0;c<u;c++)l.push("$"+c);if(n=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(a),t.prototype){var p=function(){};p.prototype=t.prototype,n.prototype=new p,p.prototype=null}return n}},function(e,t,n){"use strict";var r=n(9),i=r("%Symbol.species%",!0),o=r("%TypeError%"),s=n(406),a=n(78),u=n(79),l=n(410),c=n(169),p=n(27);e.exports=function(e,t){if(!c(t)||t<0)throw new o("Assertion failed: length must be an integer >= 0");if(!u(e))return s(t);var n=a(e,"constructor");if(i&&"Object"===p(n)&&null===(n=a(n,i))&&(n=void 0),void 0===n)return s(t);if(!l(n))throw new o("C must be a constructor");return new n(t)}},function(e,t,n){"use strict";var r=n(9),i=r("%Array.prototype%"),o=r("%RangeError%"),s=r("%SyntaxError%"),a=r("%TypeError%"),u=n(169),l=Math.pow(2,32)-1,c=r("%Object.setPrototypeOf%",!0)||([].__proto__!==i?null:function(e,t){return e.__proto__=t,e});e.exports=function(e){if(!u(e)||e<0)throw new a("Assertion failed: `length` must be an integer Number >= 0");if(e>l)throw new o("length is greater than (2**32 - 1)");var t=arguments.length>1?arguments[1]:i,n=[];if(t!==i){if(!c)throw new s("ArrayCreate: a `proto` argument that is not `Array.prototype` is not supported in an environment that does not support setting the [[Prototype]]");c(n,t)}return 0!==e&&(n.length=e),n}},function(e,t,n){"use strict";e.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}},function(e,t,n){var r="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&i&&"function"==typeof i.get?i.get:null,s=r&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=a&&u&&"function"==typeof u.get?u.get:null,c=a&&Set.prototype.forEach,p="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,h=Boolean.prototype.valueOf,g=Object.prototype.toString,y=Function.prototype.toString,E=String.prototype.match,m=String.prototype.slice,A=String.prototype.replace,v=String.prototype.toUpperCase,R=String.prototype.toLowerCase,b=RegExp.prototype.test,C=Array.prototype.concat,T=Array.prototype.join,S=Array.prototype.slice,O=Math.floor,_="function"==typeof BigInt?BigInt.prototype.valueOf:null,I=Object.getOwnPropertySymbols,P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,w="function"==typeof Symbol&&"object"==typeof Symbol.iterator,N="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===w||"symbol")?Symbol.toStringTag:null,L=Object.prototype.propertyIsEnumerable,D=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function x(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||b.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var r=e<0?-O(-e):O(e);if(r!==e){var i=String(r),o=m.call(t,i.length+1);return A.call(i,n,"$&_")+"."+A.call(A.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return A.call(t,n,"$&_")}var F=n(409),M=F.custom,B=H(M)?M:null;function U(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function k(e){return A.call(String(e),/"/g,"&quot;")}function j(e){return!("[object Array]"!==Y(e)||N&&"object"==typeof e&&N in e)}function G(e){return!("[object RegExp]"!==Y(e)||N&&"object"==typeof e&&N in e)}function H(e){if(w)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!P)return!1;try{return P.call(e),!0}catch(e){}return!1}e.exports=function e(t,n,r,i){var a=n||{};if(V(a,"quoteStyle")&&"single"!==a.quoteStyle&&"double"!==a.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(V(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!V(a,"customInspect")||a.customInspect;if("boolean"!=typeof u&&"symbol"!==u)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(V(a,"indent")&&null!==a.indent&&"\t"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(V(a,"numericSeparator")&&"boolean"!=typeof a.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var g=a.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,n){if(t.length>n.maxStringLength){var r=t.length-n.maxStringLength,i="... "+r+" more character"+(r>1?"s":"");return e(m.call(t,0,n.maxStringLength),n)+i}return U(A.call(A.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,K),"single",n)}(t,a);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var v=String(t);return g?x(t,v):v}if("bigint"==typeof t){var b=String(t)+"n";return g?x(t,b):b}var O=void 0===a.depth?5:a.depth;if(void 0===r&&(r=0),r>=O&&O>0&&"object"==typeof t)return j(t)?"[Array]":"[Object]";var I=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=T.call(Array(e.indent+1)," ")}return{base:n,prev:T.call(Array(t+1),n)}}(a,r);if(void 0===i)i=[];else if($(i,t)>=0)return"[Circular]";function M(t,n,o){if(n&&(i=S.call(i)).push(n),o){var s={depth:a.depth};return V(a,"quoteStyle")&&(s.quoteStyle=a.quoteStyle),e(t,s,r+1,i)}return e(t,a,r+1,i)}if("function"==typeof t&&!G(t)){var W=function(e){if(e.name)return e.name;var t=E.call(y.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),X=J(t,M);return"[Function"+(W?": "+W:" (anonymous)")+"]"+(X.length>0?" { "+T.call(X,", ")+" }":"")}if(H(t)){var ee=w?A.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):P.call(t);return"object"!=typeof t||w?ee:q(ee)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var te="<"+R.call(String(t.nodeName)),ne=t.attributes||[],re=0;re<ne.length;re++)te+=" "+ne[re].name+"="+U(k(ne[re].value),"double",a);return te+=">",t.childNodes&&t.childNodes.length&&(te+="..."),te+="</"+R.call(String(t.nodeName))+">"}if(j(t)){if(0===t.length)return"[]";var ie=J(t,M);return I&&!function(e){for(var t=0;t<e.length;t++)if($(e[t],"\n")>=0)return!1;return!0}(ie)?"["+Z(ie,I)+"]":"[ "+T.call(ie,", ")+" ]"}if(function(e){return!("[object Error]"!==Y(e)||N&&"object"==typeof e&&N in e)}(t)){var oe=J(t,M);return"cause"in Error.prototype||!("cause"in t)||L.call(t,"cause")?0===oe.length?"["+String(t)+"]":"{ ["+String(t)+"] "+T.call(oe,", ")+" }":"{ ["+String(t)+"] "+T.call(C.call("[cause]: "+M(t.cause),oe),", ")+" }"}if("object"==typeof t&&u){if(B&&"function"==typeof t[B]&&F)return F(t,{depth:O-r});if("symbol"!==u&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!=typeof e)return!1;try{o.call(e);try{l.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var se=[];return s.call(t,(function(e,n){se.push(M(n,t,!0)+" => "+M(e,t))})),Q("Map",o.call(t),se,I)}if(function(e){if(!l||!e||"object"!=typeof e)return!1;try{l.call(e);try{o.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var ae=[];return c.call(t,(function(e){ae.push(M(e,t))})),Q("Set",l.call(t),ae,I)}if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{p.call(e,p);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return z("WeakMap");if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{p.call(e,p)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return z("WeakSet");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{return f.call(e),!0}catch(e){}return!1}(t))return z("WeakRef");if(function(e){return!("[object Number]"!==Y(e)||N&&"object"==typeof e&&N in e)}(t))return q(M(Number(t)));if(function(e){if(!e||"object"!=typeof e||!_)return!1;try{return _.call(e),!0}catch(e){}return!1}(t))return q(M(_.call(t)));if(function(e){return!("[object Boolean]"!==Y(e)||N&&"object"==typeof e&&N in e)}(t))return q(h.call(t));if(function(e){return!("[object String]"!==Y(e)||N&&"object"==typeof e&&N in e)}(t))return q(M(String(t)));if(!function(e){return!("[object Date]"!==Y(e)||N&&"object"==typeof e&&N in e)}(t)&&!G(t)){var ue=J(t,M),le=D?D(t)===Object.prototype:t instanceof Object||t.constructor===Object,ce=t instanceof Object?"":"null prototype",pe=!le&&N&&Object(t)===t&&N in t?m.call(Y(t),8,-1):ce?"Object":"",de=(le||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(pe||ce?"["+T.call(C.call([],pe||[],ce||[]),": ")+"] ":"");return 0===ue.length?de+"{}":I?de+"{"+Z(ue,I)+"}":de+"{ "+T.call(ue,", ")+" }"}return String(t)};var W=Object.prototype.hasOwnProperty||function(e){return e in this};function V(e,t){return W.call(e,t)}function Y(e){return g.call(e)}function $(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function K(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+v.call(t.toString(16))}function q(e){return"Object("+e+")"}function z(e){return e+" { ? }"}function Q(e,t,n,r){return e+" ("+t+") {"+(r?Z(n,r):T.call(n,", "))+"}"}function Z(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+T.call(e,","+n)+"\n"+t.prev}function J(e,t){var n=j(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=V(e,i)?t(e[i],e):""}var o,s="function"==typeof I?I(e):[];if(w){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var u in e)V(e,u)&&(n&&String(Number(u))===u&&u<e.length||w&&o["$"+u]instanceof Symbol||(b.call(/[^\w$]/,u)?r.push(t(u,e)+": "+t(e[u],e)):r.push(u+": "+t(e[u],e))));if("function"==typeof I)for(var l=0;l<s.length;l++)L.call(e,s[l])&&r.push("["+t(s[l])+"]: "+t(e[s[l]],e));return r}},function(e,t,n){e.exports=n(37).inspect},function(e,t,n){"use strict";var r=n(411)("%Reflect.construct%",!0),i=n(412);try{i({},"",{"[[Get]]":function(){}})}catch(e){i=null}if(i&&r){var o={},s={};i(s,"length",{"[[Get]]":function(){throw o},"[[Enumerable]]":!0}),e.exports=function(e){try{r(e,s)}catch(e){return e===o}}}else e.exports=function(e){return"function"==typeof e&&!!e.prototype}},function(e,t,n){"use strict";e.exports=n(9)},function(e,t,n){"use strict";var r=n(9)("%TypeError%"),i=n(413),o=n(174),s=n(175),a=n(416),u=n(176),l=n(59),c=n(177),p=n(178),d=n(27);e.exports=function(e,t,n){if("Object"!==d(e))throw new r("Assertion failed: Type(O) is not Object");if(!l(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");var f=i({Type:d,IsDataDescriptor:u,IsAccessorDescriptor:a},n)?n:p(n);if(!i({Type:d,IsDataDescriptor:u,IsAccessorDescriptor:a},f))throw new r("Assertion failed: Desc is not a valid Property Descriptor");return o(u,c,s,e,t,f)}},function(e,t,n){"use strict";var r=n(9),i=n(38),o=r("%TypeError%");e.exports=function(e,t){if("Object"!==e.Type(t))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in t)if(i(t,r)&&!n[r])return!1;if(e.IsDataDescriptor(t)&&e.IsAccessorDescriptor(t))throw new o("Property Descriptors may not be both accessor and data descriptors");return!0}},function(e,t,n){"use strict";var r=n(38);e.exports=function(e){return r(e,"[[StartIndex]]")&&r(e,"[[EndIndex]]")&&e["[[StartIndex]]"]>=0&&e["[[EndIndex]]"]>=e["[[StartIndex]]"]&&String(parseInt(e["[[StartIndex]]"],10))===String(e["[[StartIndex]]"])&&String(parseInt(e["[[EndIndex]]"],10))===String(e["[[EndIndex]]"])}},function(e,t,n){"use strict";e.exports=function(e){if(void 0===e)return e;var t={};return"[[Value]]"in e&&(t.value=e["[[Value]]"]),"[[Writable]]"in e&&(t.writable=!!e["[[Writable]]"]),"[[Get]]"in e&&(t.get=e["[[Get]]"]),"[[Set]]"in e&&(t.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(t.enumerable=!!e["[[Enumerable]]"]),"[[Configurable]]"in e&&(t.configurable=!!e["[[Configurable]]"]),t}},function(e,t,n){"use strict";var r=n(38),i=n(101),o=n(27);e.exports=function(e){return void 0!==e&&(i(o,"Property Descriptor","Desc",e),!(!r(e,"[[Get]]")&&!r(e,"[[Set]]")))}},function(e,t,n){"use strict";e.exports=n(180)},function(e,t,n){"use strict";var r=n(9)("%TypeError%"),i=n(181),o=n(419),s=n(420),a=n(78),u=n(427),l=n(79),c=n(428),p=n(437);e.exports=function e(t,n,d,f,h){var g;arguments.length>5&&(g=arguments[5]);for(var y=f,E=0;E<d;){var m=p(E),A=u(n,m);if(!0===A){var v=a(n,m);if(void 0!==g){if(arguments.length<=6)throw new r("Assertion failed: thisArg is required when mapperFunction is provided");v=o(g,arguments[6],[v,E,n])}var R=!1;if(h>0&&(R=l(v)),R){var b=c(v);y=e(t,v,b,y,h-1)}else{if(y>=i)throw new r("index too large");s(t,p(y),v),y+=1}}E+=1}return y}},function(e,t,n){"use strict";var r=n(9),i=n(49),o=r("%TypeError%"),s=n(79),a=r("%Reflect.apply%",!0)||i("%Function.prototype.apply%");e.exports=function(e,t){var n=arguments.length>2?arguments[2]:[];if(!s(n))throw new o("Assertion failed: optional `argumentsList`, if provided, must be a List");return a(e,t,n)}},function(e,t,n){"use strict";var r=n(9)("%TypeError%"),i=n(421),o=n(59),s=n(27);e.exports=function(e,t,n){if("Object"!==s(e))throw new r("Assertion failed: Type(O) is not Object");if(!o(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");var a=i(e,t,n);if(!a)throw new r("unable to create data property");return a}},function(e,t,n){"use strict";var r=n(9)("%TypeError%"),i=n(174),o=n(175),s=n(422),a=n(176),u=n(426),l=n(59),c=n(177),p=n(27);e.exports=function(e,t,n){if("Object"!==p(e))throw new r("Assertion failed: Type(O) is not Object");if(!l(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");var d=s(e,t),f=!d||u(e);return!(d&&!d["[[Configurable]]"]||!f)&&i(a,c,o,e,t,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":n,"[[Writable]]":!0})}},function(e,t,n){"use strict";var r=n(9),i=n(423),o=r("%TypeError%"),s=n(49)("Object.prototype.propertyIsEnumerable"),a=n(38),u=n(79),l=n(59),c=n(424),p=n(178),d=n(27);e.exports=function(e,t){if("Object"!==d(e))throw new o("Assertion failed: O must be an Object");if(!l(t))throw new o("Assertion failed: P must be a Property Key");if(a(e,t)){if(!i){var n=u(e)&&"length"===t,r=c(e)&&"lastIndex"===t;return{"[[Configurable]]":!(n||r),"[[Enumerable]]":s(e,t),"[[Value]]":e[t],"[[Writable]]":!0}}return p(i(e,t))}}},function(e,t,n){"use strict";var r=n(9)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(e){r=null}e.exports=r},function(e,t,n){"use strict";var r=n(9)("%Symbol.match%",!0),i=n(425),o=n(179);e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(r){var t=e[r];if(void 0!==t)return o(t)}return i(e)}},function(e,t,n){"use strict";var r,i,o,s,a=n(49),u=n(182)();if(u){r=a("Object.prototype.hasOwnProperty"),i=a("RegExp.prototype.exec"),o={};var l=function(){throw o};s={toString:l,valueOf:l},"symbol"==typeof Symbol.toPrimitive&&(s[Symbol.toPrimitive]=l)}var c=a("Object.prototype.toString"),p=Object.getOwnPropertyDescriptor;e.exports=u?function(e){if(!e||"object"!=typeof e)return!1;var t=p(e,"lastIndex");if(!(t&&r(t,"value")))return!1;try{i(e,s)}catch(e){return e===o}}:function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===c(e)}},function(e,t,n){"use strict";var r=n(9),i=r("%Object.preventExtensions%",!0),o=r("%Object.isExtensible%",!0),s=n(183);e.exports=i?function(e){return!s(e)&&o(e)}:function(e){return!s(e)}},function(e,t,n){"use strict";var r=n(9)("%TypeError%"),i=n(59),o=n(27);e.exports=function(e,t){if("Object"!==o(e))throw new r("Assertion failed: `O` must be an Object");if(!i(t))throw new r("Assertion failed: `P` must be a Property Key");return t in e}},function(e,t,n){"use strict";var r=n(9)("%TypeError%"),i=n(78),o=n(184),s=n(27);e.exports=function(e){if("Object"!==s(e))throw new r("Assertion failed: `obj` must be an Object");return o(i(e,"length"))}},function(e,t,n){"use strict";var r=n(9),i=r("%TypeError%"),o=r("%Number%"),s=r("%RegExp%"),a=r("%parseInt%"),u=n(49),l=n(430),c=n(183),p=u("String.prototype.slice"),d=l(/^0b[01]+$/i),f=l(/^0o[0-7]+$/i),h=l(/^[-+]0x[0-9a-f]+$/i),g=l(new s("["+["","​","￾"].join("")+"]","g")),y=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),E=new RegExp("(^["+y+"]+)|(["+y+"]+$)","g"),m=u("String.prototype.replace"),A=n(431);e.exports=function e(t){var n=c(t)?t:A(t,o);if("symbol"==typeof n)throw new i("Cannot convert a Symbol value to a number");if("bigint"==typeof n)throw new i("Conversion from 'BigInt' to 'number' is not allowed.");if("string"==typeof n){if(d(n))return e(a(p(n,2),2));if(f(n))return e(a(p(n,2),8));if(g(n)||h(n))return NaN;var r=function(e){return m(e,E,"")}(n);if(r!==n)return e(r)}return o(n)}},function(e,t,n){"use strict";var r=n(49)("RegExp.prototype.exec");e.exports=function(e){return function(t){return null!==r(e,t)}}},function(e,t,n){"use strict";var r=n(432);e.exports=function(e){return arguments.length>1?r(e,arguments[1]):r(e)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,i=n(433),o=n(180),s=n(434),a=n(435),u=function(e,t){if(null==e)throw new TypeError("Cannot call method on "+e);if("string"!=typeof t||"number"!==t&&"string"!==t)throw new TypeError('hint must be "string" or "number"');var n,r,s,a="string"===t?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<a.length;++s)if(n=e[a[s]],o(n)&&(r=n.call(e),i(r)))return r;throw new TypeError("No default value")},l=function(e,t){var n=e[t];if(null!=n){if(!o(n))throw new TypeError(n+" returned for property "+t+" of object "+e+" is not a function");return n}};e.exports=function(e){if(i(e))return e;var t,n="default";if(arguments.length>1&&(arguments[1]===String?n="string":arguments[1]===Number&&(n="number")),r&&(Symbol.toPrimitive?t=l(e,Symbol.toPrimitive):a(e)&&(t=Symbol.prototype.valueOf)),void 0!==t){var o=t.call(e,n);if(i(o))return o;throw new TypeError("unable to convert exotic object to primitive")}return"default"===n&&(s(e)||a(e))&&(n="string"),u(e,"default"===n?"number":n)}},function(e,t,n){"use strict";e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}},function(e,t,n){"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,o=n(182)();e.exports=function(e){return"object"==typeof e&&null!==e&&(o?function(e){try{return r.call(e),!0}catch(e){return!1}}(e):"[object Date]"===i.call(e))}},function(e,t,n){"use strict";var r=Object.prototype.toString;if(n(165)()){var i=Symbol.prototype.toString,o=/^Symbol\(.*\)$/;e.exports=function(e){if("symbol"==typeof e)return!0;if("[object Symbol]"!==r.call(e))return!1;try{return function(e){return"symbol"==typeof e.valueOf()&&o.test(i.call(e))}(e)}catch(e){return!1}}}else e.exports=function(e){return!1}},function(e,t,n){"use strict";e.exports=function(e){return e>=0?1:-1}},function(e,t,n){"use strict";var r=n(9),i=r("%String%"),o=r("%TypeError%");e.exports=function(e){if("symbol"==typeof e)throw new o("Cannot convert a Symbol value to a string");return i(e)}},function(e,t,n){"use strict";var r=n(9)("%Object%"),i=n(439);e.exports=function(e){return i(e),r(e)}},function(e,t,n){"use strict";e.exports=n(440)},function(e,t,n){"use strict";var r=n(9)("%TypeError%");e.exports=function(e,t){if(null==e)throw new r(t||"Cannot call method on "+e);return e}},function(e,t,n){"use strict";var r=n(162),i=n(442),o=n(186);e.exports=function(){var e=o();return r(Array.prototype,{flat:e},{flat:function(){return Array.prototype.flat!==e}}),i("flat"),e}},function(e,t,n){"use strict";var r=n(38),i="function"==typeof Symbol&&"symbol"==typeof Symbol.unscopables,o=i&&Array.prototype[Symbol.unscopables],s=TypeError;e.exports=function(e){if("string"!=typeof e||!e)throw new s("method must be a non-empty string");if(!r(Array.prototype,e))throw new s("method must be on Array.prototype");i&&(o[e]=!0)}},function(e,t,n){"use strict";var r=n(444),i=n(445),o=n(446),s=n(447);function a(e,t){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function u(e,t,n){var r=[t[0]-e[0],t[1]-e[1]],i=[n[0]-e[0],n[1]-e[1]],o=a(e,t),s=a(e,n);return(r[0]*i[0]+r[1]*i[1])/Math.sqrt(o*s)}function l(e,t){for(var n=0;n<t.length-1;n++){var i=[t[n],t[n+1]];if(!(e[0][0]===i[0][0]&&e[0][1]===i[0][1]||e[0][0]===i[1][0]&&e[0][1]===i[1][1])&&r(e,i))return!0}return!1}function c(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function p(e,t,n){for(var r,i,o=null,s=d,a=d,c=0;c<t.length;c++)r=u(e[0],e[1],t[c]),i=u(e[1],e[0],t[c]),r>s&&i>a&&!l([e[0],t[c]],n)&&!l([e[1],t[c]],n)&&(s=r,a=i,o=t[c]);return o}var d=Math.cos(90/(180/Math.PI)),f=.6;e.exports=function(e,t,n){var r,u,l,d,h,g,y,E=t||20;return(y=function(e){return e.filter((function(e,t,n){var r=n[t-1];return 0===t||!(r[0]===e[0]&&r[1]===e[1])}))}(function(e){return e.sort((function(e,t){return e[0]==t[0]?e[1]-t[1]:e[0]-t[0]}))}(o.toXy(e,n)))).length<4?y.concat([y[0]]):(h=[(d=function(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,o=e.length-1;o>=0;o--)e[o][0]<t&&(t=e[o][0]),e[o][1]<n&&(n=e[o][1]),e[o][0]>r&&(r=e[o][0]),e[o][1]>i&&(i=e[o][1]);return[r-t,i-n]}(y))[0]*f,d[1]*f],r=s(y),l=y.filter((function(e){return r.indexOf(e)<0})),g=Math.ceil(1/(y.length/(d[0]*d[1]))),u=function e(t,n,r,i,o){for(var s,u,l,d,f,h,g,y=!1,E=0;E<t.length-1;E++)if(u=(s=[t[E],t[E+1]])[0].join()+","+s[1].join(),!(a(s[0],s[1])<n||!0===o[u])){l=0,f=c(s);do{h=(f=i.extendBbox(f,l))[2]-f[0],g=f[3]-f[1],d=p(s,i.rangePoints(f),t),l++}while(null===d&&(r[0]>h||r[1]>g));h>=r[0]&&g>=r[1]&&(o[u]=!0),null!==d&&(t.splice(E+1,0,d),i.removePoint(d),y=!0)}return y?e(t,n,r,i,o):t}(r,Math.pow(E,2),h,i(l,g),{}),o.fromXy(u,n))}},function(e,t){function n(e,t,n,r,i,o){var s=(o-t)*(n-e)-(r-t)*(i-e);return s>0||!(s<0)}e.exports=function(e,t){var r=e[0][0],i=e[0][1],o=e[1][0],s=e[1][1],a=t[0][0],u=t[0][1],l=t[1][0],c=t[1][1];return n(r,i,a,u,l,c)!==n(o,s,a,u,l,c)&&n(r,i,o,s,a,u)!==n(r,i,o,s,l,c)}},function(e,t){function n(e,t){this._cells=[],this._cellSize=t,e.forEach((function(e){var t=this.point2CellXY(e),n=t[0],r=t[1];void 0===this._cells[n]&&(this._cells[n]=[]),void 0===this._cells[n][r]&&(this._cells[n][r]=[]),this._cells[n][r].push(e)}),this)}n.prototype={cellPoints:function(e,t){return void 0!==this._cells[e]&&void 0!==this._cells[e][t]?this._cells[e][t]:[]},rangePoints:function(e){for(var t=this.point2CellXY([e[0],e[1]]),n=this.point2CellXY([e[2],e[3]]),r=[],i=t[0];i<=n[0];i++)for(var o=t[1];o<=n[1];o++)r=r.concat(this.cellPoints(i,o));return r},removePoint:function(e){for(var t,n=this.point2CellXY(e),r=this._cells[n[0]][n[1]],i=0;i<r.length;i++)if(r[i][0]===e[0]&&r[i][1]===e[1]){t=i;break}return r.splice(t,1),r},point2CellXY:function(e){return[parseInt(e[0]/this._cellSize),parseInt(e[1]/this._cellSize)]},extendBbox:function(e,t){return[e[0]-t*this._cellSize,e[1]-t*this._cellSize,e[2]+t*this._cellSize,e[3]+t*this._cellSize]}},e.exports=function(e,t){return new n(e,t)}},function(e,t){e.exports={toXy:function(e,t){return void 0===t?e.slice():e.map((function(e){return new Function("pt","return [pt"+t[0]+",pt"+t[1]+"];")(e)}))},fromXy:function(e,t){return void 0===t?e.slice():e.map((function(e){return new Function("pt","var o = {}; o"+t[0]+"= pt[0]; o"+t[1]+"= pt[1]; return o;")(e)}))}}},function(e,t){function n(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}e.exports=function(e){var t,r=function(e){for(var t=[],r=0;r<e.length;r++){for(;t.length>=2&&n(t[t.length-2],t[t.length-1],e[r])<=0;)t.pop();t.push(e[r])}return t.pop(),t}(e);return(t=function(e){for(var t=e.reverse(),r=[],i=0;i<t.length;i++){for(;r.length>=2&&n(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),r}(e).concat(r)).push(e[0]),t}},function(e,t,n){"use strict";const r=n(449);function i(e,t,n=1/0){if(!t)throw new Error("Map width needed to digest raw grids!");let r=e.data.slice();1===e.bitsPerPixel&&(r=r.reduce((e,t)=>(e.push(t>>7&1,t>>6&1,t>>5&1,t>>4&1,t>>3&1,t>>2&1,t>>1&1,t>>0&1),e),[]));const i=[];for(;r.length>0&&!(i.length>n);)i.push(r.splice(0,t));return i}e.exports={consumeRawGrids:function(e){const{mapSize:t,placementGrid:n,pathingGrid:r,terrainHeight:o}=e,{x:s,y:a}=t,u=i(n,s,a),l=i(r,s,a).map(e=>e.map(e=>0===e?1:0));return{height:i(o,s,a).map(e=>e.map(e=>{const t=5*Math.ceil(Math.round((e-127)/8*10)/5);return t<0?0:t})),miniMap:u.map((e,t)=>e.map((e,n)=>1===e&&0===l[t][n]?66:0===e&&0===l[t][n]?114:e)),placement:u,pathing:l}},consumeImageData:i,debugGrid:function(e,t,n=!1){e.slice().reverse().forEach((e,i)=>{console.log([...e].map((e,o)=>{if(!0===n)return r.rgb(0,e,0)("X");switch(e){case 0:return(({p0:e,p1:t},n,r)=>n>e.x&&n<t.x&&r>e.y&&r<t.y)(t,i,o)?r.bgGreen` `:r.bgRed` `;case 1:return"░";case 66:return r.bgBlue` `;case 114:return r.bgCyanBright`░`;case 104:return;case 72:return r.bgRed`░`;default:return e}}).join(""))})}}},function(e,t,n){"use strict";const r=n(450),{stdout:i,stderr:o}=n(129),{stringReplaceAll:s,stringEncaseCRLFWithFirstIndex:a}=n(454),u=["ansi","ansi","ansi256","ansi16m"],l=Object.create(null);class c{constructor(e){return p(e)}}const p=e=>{const t={};return((e,t={})=>{if(t.level>3||t.level<0)throw new Error("The `level` option should be an integer from 0 to 3");const n=i?i.level:0;e.level=void 0===t.level?n:t.level})(t,e),t.template=(...e)=>A(t.template,...e),Object.setPrototypeOf(t,d.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},t.template.Instance=c,t.template};function d(e){return p(e)}for(const[e,t]of Object.entries(r))l[e]={get(){const n=y(this,g(t.open,t.close,this._styler),this._isEmpty);return Object.defineProperty(this,e,{value:n}),n}};l.visible={get(){const e=y(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:e}),e}};const f=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const e of f)l[e]={get(){const{level:t}=this;return function(...n){const i=g(r.color[u[t]][e](...n),r.color.close,this._styler);return y(this,i,this._isEmpty)}}};for(const e of f){l["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const{level:t}=this;return function(...n){const i=g(r.bgColor[u[t]][e](...n),r.bgColor.close,this._styler);return y(this,i,this._isEmpty)}}}}const h=Object.defineProperties(()=>{},{...l,level:{enumerable:!0,get(){return this._generator.level},set(e){this._generator.level=e}}}),g=(e,t,n)=>{let r,i;return void 0===n?(r=e,i=t):(r=n.openAll+e,i=t+n.closeAll),{open:e,close:t,openAll:r,closeAll:i,parent:n}},y=(e,t,n)=>{const r=(...e)=>E(r,1===e.length?""+e[0]:e.join(" "));return r.__proto__=h,r._generator=e,r._styler=t,r._isEmpty=n,r},E=(e,t)=>{if(e.level<=0||!t)return e._isEmpty?"":t;let n=e._styler;if(void 0===n)return t;const{openAll:r,closeAll:i}=n;if(-1!==t.indexOf(""))for(;void 0!==n;)t=s(t,n.close,n.open),n=n.parent;const o=t.indexOf("\n");return-1!==o&&(t=a(t,i,r,o)),r+t+i};let m;const A=(e,...t)=>{const[r]=t;if(!Array.isArray(r))return t.join(" ");const i=t.slice(1),o=[r.raw[0]];for(let e=1;e<r.length;e++)o.push(String(i[e-1]).replace(/[{}\\]/g,"\\$&"),String(r.raw[e]));return void 0===m&&(m=n(455)),m(e,o.join(""))};Object.defineProperties(d.prototype,l);const v=d();v.supportsColor=i,v.stderr=d({level:o?o.level:0}),v.stderr.supportsColor=o,v.Level={None:0,Basic:1,Ansi256:2,TrueColor:3,0:"None",1:"Basic",2:"Ansi256",3:"TrueColor"},e.exports=v},function(e,t,n){"use strict";(function(e){const t=(e,t)=>(...n)=>`[${e(...n)+t}m`,r=(e,t)=>(...n)=>{const r=e(...n);return`[${38+t};5;${r}m`},i=(e,t)=>(...n)=>{const r=e(...n);return`[${38+t};2;${r[0]};${r[1]};${r[2]}m`},o=e=>e,s=(e,t,n)=>[e,t,n],a=(e,t,n)=>{Object.defineProperty(e,t,{get:()=>{const r=n();return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0}),r},enumerable:!0,configurable:!0})};let u;const l=(e,t,r,i)=>{void 0===u&&(u=n(451));const o=i?10:0,s={};for(const[n,i]of Object.entries(u)){const a="ansi16"===n?"ansi":n;n===t?s[a]=e(r,o):"object"==typeof i&&(s[a]=e(i[t],o))}return s};Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,n={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};n.color.gray=n.color.blackBright,n.bgColor.bgGray=n.bgColor.bgBlackBright,n.color.grey=n.color.blackBright,n.bgColor.bgGrey=n.bgColor.bgBlackBright;for(const[t,r]of Object.entries(n)){for(const[t,i]of Object.entries(r))n[t]={open:`[${i[0]}m`,close:`[${i[1]}m`},r[t]=n[t],e.set(i[0],i[1]);Object.defineProperty(n,t,{value:r,enumerable:!1})}return Object.defineProperty(n,"codes",{value:e,enumerable:!1}),n.color.close="[39m",n.bgColor.close="[49m",a(n.color,"ansi",()=>l(t,"ansi16",o,!1)),a(n.color,"ansi256",()=>l(r,"ansi256",o,!1)),a(n.color,"ansi16m",()=>l(i,"rgb",s,!1)),a(n.bgColor,"ansi",()=>l(t,"ansi16",o,!0)),a(n.bgColor,"ansi256",()=>l(r,"ansi256",o,!0)),a(n.bgColor,"ansi16m",()=>l(i,"rgb",s,!0)),n}})}).call(this,n(93)(e))},function(e,t,n){const r=n(188),i=n(453),o={};Object.keys(r).forEach(e=>{o[e]={},Object.defineProperty(o[e],"channels",{value:r[e].channels}),Object.defineProperty(o[e],"labels",{value:r[e].labels});const t=i(e);Object.keys(t).forEach(n=>{const r=t[n];o[e][n]=function(e){const t=function(...t){const n=t[0];if(null==n)return n;n.length>1&&(t=n);const r=e(t);if("object"==typeof r)for(let e=r.length,t=0;t<e;t++)r[t]=Math.round(r[t]);return r};return"conversion"in e&&(t.conversion=e.conversion),t}(r),o[e][n].raw=function(e){const t=function(...t){const n=t[0];return null==n?n:(n.length>1&&(t=n),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)})}),e.exports=o},function(e,t,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,n){const r=n(188);function i(e){const t=function(){const e={},t=Object.keys(r);for(let n=t.length,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;){const e=n.pop(),i=Object.keys(r[e]);for(let r=i.length,o=0;o<r;o++){const r=i[o],s=t[r];-1===s.distance&&(s.distance=t[e].distance+1,s.parent=e,n.unshift(r))}}return t}function o(e,t){return function(n){return t(e(n))}}function s(e,t){const n=[t[e].parent,e];let i=r[t[e].parent][e],s=t[e].parent;for(;t[s].parent;)n.unshift(t[s].parent),i=o(r[t[s].parent][s],i),s=t[s].parent;return i.conversion=n,i}e.exports=function(e){const t=i(e),n={},r=Object.keys(t);for(let e=r.length,i=0;i<e;i++){const e=r[i];null!==t[e].parent&&(n[e]=s(e,t))}return n}},function(e,t,n){"use strict";e.exports={stringReplaceAll:(e,t,n)=>{let r=e.indexOf(t);if(-1===r)return e;const i=t.length;let o=0,s="";do{s+=e.substr(o,r-o)+t+n,o=r+i,r=e.indexOf(t,o)}while(-1!==r);return s+=e.substr(o),s},stringEncaseCRLFWithFirstIndex:(e,t,n,r)=>{let i=0,o="";do{const s="\r"===e[r-1];o+=e.substr(i,(s?r-1:r)-i)+t+(s?"\r\n":"\n")+n,i=r+1,r=e.indexOf("\n",i)}while(-1!==r);return o+=e.substr(i),o}}},function(e,t,n){"use strict";const r=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,i=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,o=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,s=/\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.)|([^\\])/gi,a=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function u(e){const t="u"===e[0],n="{"===e[1];return t&&!n&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):t&&n?String.fromCodePoint(parseInt(e.slice(2,-1),16)):a.get(e)||e}function l(e,t){const n=[],r=t.trim().split(/\s*,\s*/g);let i;for(const t of r){const r=Number(t);if(Number.isNaN(r)){if(!(i=t.match(o)))throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`);n.push(i[2].replace(s,(e,t,n)=>t?u(t):n))}else n.push(r)}return n}function c(e){i.lastIndex=0;const t=[];let n;for(;null!==(n=i.exec(e));){const e=n[1];if(n[2]){const r=l(e,n[2]);t.push([e].concat(r))}else t.push([e])}return t}function p(e,t){const n={};for(const e of t)for(const t of e.styles)n[t[0]]=e.inverse?null:t.slice(1);let r=e;for(const[e,t]of Object.entries(n))if(Array.isArray(t)){if(!(e in r))throw new Error("Unknown Chalk style: "+e);r=t.length>0?r[e](...t):r[e]}return r}e.exports=(e,t)=>{const n=[],i=[];let o=[];if(t.replace(r,(t,r,s,a,l,d)=>{if(r)o.push(u(r));else if(a){const t=o.join("");o=[],i.push(0===n.length?t:p(e,n)(t)),n.push({inverse:s,styles:c(a)})}else if(l){if(0===n.length)throw new Error("Found extraneous } in Chalk template literal");i.push(p(e,n)(o.join(""))),o=[],n.pop()}else o.push(d)}),i.push(o.join("")),n.length>0){const e=`Chalk template literal is missing ${n.length} closing bracket${1===n.length?"":"s"} (\`}\`)`;throw new Error(e)}return i.join("")}},function(e,t,n){"use strict";const{MINERALFIELD10:r}=n(1),{vespeneGeyserTypes:i}=n(6),{add:o,multiply:s,divide:a,areEqual:u,distanceSquared:l,getNeighbors:c}=n(2);e.exports={createClusters:function(e,t=14){const n=t*t;return e.reduce((e,t)=>{if(t.unitType===r)return e;const u=i.includes(t.unitType),{distance:c,target:p}=e.reduce((e,n)=>{const r=l(t.pos,n.centroid);return r<e.distance?{distance:r,target:n}:e},{distance:1/0,target:null});if(c>n)return e.concat([{centroid:t.pos,mineralFields:u?[]:[t],vespeneGeysers:u?[t]:[]}]);{u?p.vespeneGeysers=[...p.vespeneGeysers,t]:p.mineralFields=[...p.mineralFields,t];const n=p.mineralFields.length+p.vespeneGeysers.length;return p.centroid=a(o(s(p.centroid,n-1),t.pos),n),e}},[])},clusterByNeighbor:function(e){return e.slice().sort((e,t)=>e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0).reduce((e,t)=>{const n=e.find(e=>e.some(e=>c(e).some(e=>u(e,t))));return n?n.push(t):e.push([t]),e},[])}}},function(e,t,n){"use strict";const{Alliance:r}=n(0),i=n(458);e.exports=function(e,t){const{units:n}=e.resources.get();return{cluster:t,labels:new Map,zPosition:t.mineralFields[0].pos.z,townhallPosition:i(e,t.centroid,t.mineralFields,t.vespeneGeysers),getWall(){return this.areas.wall},getBase(){if(this.base)return n.getByTag(this.base)},getAlliance(){if(this.base){const e=n.getByTag(this.base);return e.labels.has("dead")?r.NEUTRAL:e.alliance}return r.NEUTRAL}}}},function(e,t,n){"use strict";const{gridsInCircle:r}=n(15),{add:i,areEqual:o,avgPoints:s,createPoint2D:a,closestPoint:u,multiply:l,normalize:c,subtract:p,distance:d}=n(2),{cellsInFootprint:f}=n(19),{getFootprint:h}=n(20),{COMMANDCENTER:g}=n(1);e.exports=function(e,t,n,y){const{map:E,debug:m}=e.resources.get(),A=[...n,...y],v=A.map(e=>c(p(e.pos,t))),R=p(t,l(s(v),15)),b=r(a(R),5,{normalize:!0}).map(e=>{const t=f(e,h(g)).map(e=>{const t=A.reduce((t,n)=>{const r=f(a(n.pos),h(n.unitType)),i=u(e,r),o=d(e,i);return o<t.distance?{closestField:n,distance:o}:t},{closestField:null,distance:1/0});return{...e,closest:t}});return{...e,cellBucket:t}}).filter(e=>e.cellBucket.every(e=>e.closest.distance>=4)).map(e=>({x:e.x,y:e.y})).filter(e=>!!o(i(e,.5),E.getLocations().self)||E.isPlaceableAt(g,e));return u(t,b)}},function(e,t,n){"use strict";const{distance:r}=n(2);e.exports=function e(t,n,i,o,s,a=!1,u=[],l){const c=t.length,p=t[0].length;return null==l&&(l={x:n,y:i}),null==o&&(o=t[i][n]),a&&r(l,{x:n,y:i})>a||t[i][n]!==o||u.some(e=>e.x===n&&e.y===i)||(t[i][n]=s,u.push({y:i,x:n}),n>0&&e(t,n-1,i,o,s,a,u,l),i>0&&e(t,n,i-1,o,s,a,u,l),n<p-1&&e(t,n+1,i,o,s,a,u,l),i<c-1&&e(t,n,i+1,o,s,a,u,l)),u}},function(e,t){e.exports=["2000AtmospheresAIE","BerlingradAIE","BlackburnAIE","CuriousMindsAIE","DeathAura506","DeathAuraLE","EternalEmpire506","EternalEmpireLE","EverDream506","EverDreamLE","GlitteringAshesAIE","GoldenWall506","GoldenWallLE","HardwireAIE","IceandChrome506","IceandChromeLE","InsideAndOutAIE","JagannathaAIE","JagannathaLE","LightshadeAIE","LightshadeLE","MoondanceAIE","OxideAIE","OxideLE","PillarsofGold506","PillarsofGoldLE","RomanticideAIE","RomanticideLE","StargazersAIE","Submarine506","SubmarineLE","WaterfallAIE"]},function(e,t,n){"use strict";n(7)("sc2:debug:WorkerBalance");const r=n(7)("sc2:silly:WorkerBalance"),{createSystem:i}=n(5),o=n(3),{Alliance:s}=n(0),{gatheringAbilities:a,rallyWorkersAbilities:u}=n(6),{distance:l}=n(2),{createUnitCommand:c}=n(18),{getClosestExpansion:p}=n(39),d=n(14),{gather:f}=n(16),{getPendingOrders:h}=n(24),{balanceResources:g,gatherOrMine:y}=n(45),{getMineralFieldAssignments:E,setPendingOrders:m,getNeediestMineralField:A}=n(12);function v(e){const{map:t,units:n}=e.get(),r=[];return R(n,"minerals",!0).forEach(i=>{const{pos:o}=i;if(void 0===o)return;const[s]=n.getClosest(o,n.getBases(),1);if(s){const[o]=p(t,s.pos),{mineralFields:u}=o.cluster,l=i.labels.get("mineralField");if(l&&void 0!==l.tag){let t=n.getByTag(l.tag);if(t){const o=A(n,u);if(void 0===o)return;if(t.tag!==o.tag){const e=function(e,t){const n=E(e,t).filter(e=>e.count<=2&&e.targetedCount<=2).sort((e,t)=>{const{mineralContents:n}=e,{mineralContents:r}=t;return void 0===n||void 0===r?0:n-r}).sort((e,t)=>t.count-e.count);if(n.length>0){const[t]=n,{mineralFieldTag:r}=t;if(r)return e.getByTag(r)}}(n,u);if(void 0===e)return;const r=t.tag===e.tag,{mineralContents:s}=o,{mineralContents:a}=e;if(void 0===s||void 0===a)return;const l=s>2*a;r&&l&&(i.labels.set("mineralField",o),o.labels.set("workerCount",o.labels.get("workerCount")+1),t.labels.set("workerCount",t.labels.get("workerCount")-1),t=o)}const s=function(e,t){const n=t.pendingOrders&&t.pendingOrders.find(t=>t.targetUnitTag&&e.getByTag(t.targetUnitTag).isMineralField());return n||t.orders.find(e=>a.includes(e.abilityId))}(n,i);if(!s)return;if(s.targetUnitTag!==t.tag)if(t.labels.get("workerCount")<3){const n=f(e,i,t,!1);r.push(...n)}else i.labels.delete("mineralField"),t.labels.set("workerCount",t.labels.get("workerCount")-1)}else i.labels.delete("mineralField")}else{const t=A(n,u);if(t){const n=f(e,i,t,!1);r.push(...n),i.labels.set("mineralField",t),t.labels.set("workerCount",t.labels.get("workerCount")+1)}}}}),r}function R(e,t,n=!1){const r=e.getWorkers().filter(e=>e.isGathering(t)||e.pendingOrders&&e.pendingOrders.some(e=>a.includes(e.abilityId)));return n?r.filter(e=>{const{orders:t}=e;if(void 0===t)return!1;const n=t[0],{abilityId:r}=n;return void 0!==r&&a.includes(r)}):r}e.exports=i({name:"WorkerBalanceSystem",type:"agent",defaultOptions:{stepIncrement:32,state:{}},async onGameStart(e){const{resources:t}=e,n=[];return n.push(...v(t)),n},async onStep(e){const{resources:t}=e,{units:n,actions:i}=t.get(),a=[];d.isPlanPaused||g(e);const u={buildProgress:1,alliance:s.SELF},c=R(n,void 0,!0),p=n.getAlive(u).filter(e=>e.isTownhall()),E=p.filter(e=>{if(e.enemyUnits){let[t]=n.getClosest(e.pos,e.enemyUnits,1);if(t)return e.selfDPSHealth>=t.selfDPSHealth}return!0}).find(e=>e.assignedHarvesters<e.idealHarvesters);if(E){const e=p.filter(e=>e.assignedHarvesters>E.assignedHarvesters+1),[i]=n.getClosest(E.pos,e);if(r("possible doners",c.map(e=>e.tag)),i&&c.length>0){r("chosen closest th",i.tag);const[e]=n.getClosest(i.pos,c);r("chosen worker",e.tag);const o=n.getMineralFields().filter(e=>{const t=n.getWorkers().filter(t=>{const{orders:n}=t;return void 0!==n&&n.some(t=>t.targetUnitTag===e.tag)}).length;return l(e.pos,E.pos)<8&&(!e.labels.has("workerCount")||e.labels.get("workerCount")<2)&&t<2}),[s]=n.getClosest(E.pos,o);if(s){e.labels.set("mineralField",s),s.labels.has("workerCount")?s.labels.set("workerCount",s.labels.get("workerCount")+1):s.labels.set("workerCount",1);const n=f(t,e,s,!1);a.push(...n),n.forEach(t=>m(e,t))}else{const r=n.getMineralFields(),[i]=n.getClosest(E.pos,r);if(i){e.labels.delete("mineralField");const n=f(t,e,i,!1);a.push(...n)}}}}a.push(...v(t)),a.push(...function(e){const{resources:t}=e,{units:n}=e.resources.get(),r=[];return n.getWorkers().filter(e=>{const{orders:t}=e;if(t===undefined){return false}const r=h(e);return r.length===0&&t.length===0||t.some(e=>e.abilityId===o.MOVE&&e.targetUnitTag!==undefined&&n.getByTag(e.targetUnitTag).isStructure())}).forEach(e=>{console.log("idle worker.orders",e.orders),r.push(...y(t,e))}),r}(e)),await i.sendAction(a)},async onUnitIdle({resources:e},t){const n=h(t);if(t.isWorker()&&t.noQueue&&0===n.length){const{actions:n,units:r}=e.get();if(r.getBases(s.SELF).length>0){console.log("gatherOrMine");const r=y(e,t);if(r.length>0)return n.sendAction(r)}}},async onUnitFinished({resources:e},t){const n=[],{actions:i,map:o,units:s}=e.get(),{pos:a}=t;if(void 0!==a){if(t.isTownhall()){const i=s.getMineralFields().filter(e=>e.pos&&o.getHeight(e.pos)===o.getHeight(a)&&l(e.pos,a)<16),[p]=s.getClosest(a,i),d=u.find(e=>t.abilityAvailable(e));if(p&&d){const e=c(d,[t]);e.targetUnitTag=p.tag,n.push(e)}const h=s.getBases().filter(e=>e.assignedHarvesters>e.idealHarvesters),g=R(s,void 0,!0);r("bases with extra workers: "+h.map(e=>e.tag).join(", "));const y=h.map(e=>{const{assignedHarvesters:t,idealHarvesters:n,pos:r}=e;if(void 0===t||void 0===n||void 0===r)return[];return s.getClosest(r,g,t-n)}).flat();r("total extra workers: "+y.map(e=>e.tag).join(", ")),y.forEach(t=>{const r=A(s,i);if(r){const i=f(e,t,r,!1);n.push(...i),t.labels.set("mineralField",r),r.labels.set("workerCount",r.labels.get("workerCount")+1)}})}await i.sendAction(n)}}})},function(e,t,n){"use strict";const{GasMineRace:r}=n(13),i=n(14);e.exports={gasMineCheckAndBuild:async({agent:e,data:t,resources:n},o=2.4)=>{const{actions:s,map:a,units:u}=n.get(),{minerals:l,vespene:c}=e,p=l/c,d=r[e.race],f=t.getUnitTypeData(d).abilityId,[h]=a.freeGasGeysers();if([p>o,e.canAfford(d),u.getById(d).filter(e=>e.buildProgress<1).length<1,i.planMax&&i.planMax.gasMine?e.foodUsed>i.planMax.gasMine:u.getById(d).length>2,u.withCurrentOrders(f).length<=0,h].every(e=>e))try{await s.buildGasMine()}catch(e){console.log(e.message)}}}},function(e,t,n){"use strict";const{createSystem:r}=n(5),{CANCEL_BUILDINPROGRESS:i}=n(3),{Alliance:o}=n(0),s=n(464),{convertPlan:a}=n(193),{gatherOrMine:u}=n(45),l=n(194),c=n(41),p=n(68),{setUnitTypeTrainingAbilityMapping:d}=n(23),{getPendingOrders:f}=n(24);let h=null,g=0;const y=r({name:"main",type:"agent",defaultOptions:{state:{defenseMode:!1,defenseLocation:null,enemyBuildType:"standard",cancelPush:!1,pushMode:!1}},async onEnemyFirstSeen(e,t){h.onEnemyFirstSeen(t)},async onGameStart(e){const{data:t,resources:n}=e,{map:r,frame:i}=n.get();console.log("frame.getGameInfo().playerInfo",i.getGameInfo().playerInfo),console.log("Natural Wall:",!!r.getNatural().getWall()),console.log("Backup Wall",p.wall.length>0);const o=e.agent.race,a=this.getBuild(o);h=new s(a),h.onGameStart(e),d(t)},async onStep(e){const{units:t}=e.resources.get();c.removePendingOrders(t);const n=(new Date).getTime();await h.onStep(e,this.state);const r=(new Date).getTime();g=r-n>g?r-n:g},async onUnitCreated(e,t){await h.onUnitCreated(e,t)},async onUnitDamaged({resources:e},t){const{actions:n}=e.get();if((t.health+t.shield)/(t.healthMax+t.shieldMax)<1/3&&t.isStructure()&&t.buildProgress<1){const e={abilityId:i,unitTags:[t.tag]};await n.sendAction(e)}await h.onUnitDamaged(e,t)},async onUnitIdle({resources:e},t){const n=f(t);if(t.isWorker()&&t.noQueue&&0===n.length){const{actions:n,units:r}=e.get(),i=u(e,t);if(r.getBases(o.SELF).length>0&&i.length>0)return n.sendAction(i)}t.labels.has("combatPoint")&&t.labels.delete("combatPoint")},getBuild(e){const t=l[e];var n=Object.keys(t);const r=t[n[n.length*Math.random()<<0]];return"two variable"===r.buildType?a(r,e):r}});e.exports=y},function(e,t,n){"use strict";const{PYLON:r,WARPGATE:i,OVERLORD:o,SUPPLYDEPOT:s,SUPPLYDEPOTLOWERED:a,MINERALFIELD:u,BARRACKS:l,GATEWAY:c,ZERGLING:p,PHOTONCANNON:d}=n(1),{distance:f}=n(2),{Alliance:h,Race:g}=n(0),y=n(465),{WarpUnitAbility:E,UnitType:m,Upgrade:A,UnitTypeId:v}=n(8),R=n(467),{TownhallRace:b,GasMineRace:C,WorkerRace:T}=n(13),{defend:S,attack:O,push:_}=n(103),I=n(468),{generalScouting:P,cancelEarlyScout:w}=n(111),{labelQueens:N,inject:L,spreadCreep:D,maintainQueens:x}=n(469),{overlordCoverage:F}=n(470),{moveAway:M}=n(105),{salvageBunker:B}=n(190),{expand:U}=n(471),{repairBurningStructures:k,repairDamagedMechUnits:j,repairBunker:G,finishAbandonedStructures:H}=n(472),{getMiddleOfNaturalWall:W,findPosition:V,getCandidatePositions:Y,getInTheMain:$}=n(42),{restorePower:K,warpIn:q}=n(110),{liftToThird:z,addAddOn:Q,swapBuildings:Z}=n(81),{balanceResources:J}=n(45),{addonTypes:X}=n(6),ee=n(473),{haveAvailableProductionUnitsFor:te}=n(54),ne=n(29),{checkUnitCount:re}=n(33),ie=n(191),{getStringNameOfConstant:oe}=n(46),{keepPosition:se}=n(108),{getEnemyWorkers:ae,deleteLabel:ue,setPendingOrders:le,getMineralFieldTarget:ce}=n(12),pe=n(14),{getNextPlanStep:de}=n(14),fe=n(25),he=n(33),ge=n(54),{checkBuildingCount:ye,getAbilityIdsForAddons:Ee,getUnitTypesWithAbilities:me,assignAndSendWorkerToBuild:Ae,setAndLogExecutedSteps:ve,unpauseAndLog:Re,premoveBuilderToPosition:be,isSupplyNeeded:Ce,canBuild:Te,findPlacements:Se,getFoodUsed:Oe,shortOnWorkers:_e}=n(4),{getAvailableExpansions:Ie,getNextSafeExpansion:Pe}=n(51),we=n(61),{addEarmark:Ne,getSupply:Le}=n(23),De=n(4),{buildGasMine:xe}=n(61),Fe=n(192),{gridsInCircle:Me}=n(15),{getFootprint:Be}=n(20),{cellsInFootprint:Ue}=n(19),{pointsOverlap:ke}=n(31),je=n(16),{getTargetLocation:Ge}=n(39),He=n(25),{creeperBehavior:We}=n(112);let Ve,Ye;e.exports=class{constructor(e){this.collectedActions=[],this.foundPosition=!1,pe.legacyPlan=e.orders,this.mainCombatTypes=e.unitTypes.mainCombatTypes,this.defenseTypes=e.unitTypes.defenseTypes,this.defenseStructures=e.unitTypes.defenseStructures,this.supportUnitTypes=e.unitTypes.supportUnitTypes}onEnemyFirstSeen(e){fe.opponentRace=e.data().race}onGameStart(e){Ve=e.resources.get().actions,Ye=e.agent.race,fe.opponentRace=e.agent.opponent.race}async onStep(e,t){this.collectedActions=[],this.state=t,this.state.defenseStructures=this.defenseStructures;const{resources:n}=e;this.world=e,this.agent=e.agent,this.data=e.data,this.foodUsed>this.world.agent.foodUsed&&(pe.pausePlan=!1),this.foodUsed=this.world.agent.foodUsed,this.resources=e.resources,this.frame=this.resources.get().frame,this.map=this.resources.get().map,this.units=this.resources.get().units,this.resourceTrigger=this.agent.minerals>512&&this.agent.vespene>256,this.threats=I(this.resources,this.state);const{outpowered:r}=De;if([r,ge.workersTrainingTendedTo&&!pe.isPlanPaused,!_e(e)&&!pe.isPlanPaused].some(e=>e)){r?console.log("Scouted higher power"):console.log("Free build mode.");const t=de(this.foodUsed);if(De.unitProductionAvailable=this.defenseTypes.some(t=>te(e,t)),De.unitProductionAvailable){const i=this.defenseTypes.filter(n=>[te(e,n),this.agent.hasTechFor(n),r||!t||this.data.getUnitTypeData(n).foodRequired<=t[0]-this.foodUsed].every(e=>e));if(i.length>0){this.selectedTypeToBuild=i.includes(this.selectedTypeToBuild)?this.selectedTypeToBuild:i[Math.floor(Math.random()*i.length)];let{mineralCost:e,vespeneCost:t}=this.data.getUnitTypeData(this.selectedTypeToBuild);this.selectedTypeToBuild===p&&(e+=e,t+=t);const o=this.agent.minerals>=2*e&&this.agent.vespene>=2*t;(r||o)&&await this.train(n,this.foodUsed,this.selectedTypeToBuild,null)}}}if(await this.runPlan(e),this.foodUsed<194)this.state.pushMode||(this.state.defenseMode?this.collectedActions.push(...await S(e,this.mainCombatTypes,this.supportUnitTypes,this.threats)):this.collectedActions.push(...y(e,this.supportUnitTypes,this.state.defenseLocation)));else{const{selfCombatSupply:e,inFieldSelfSupply:t}=he;De.outpowered&&e!==t||this.collectedActions.push(...O(this.world,this.mainCombatTypes,this.supportUnitTypes))}this.agent.minerals>512&&this.manageSupply(e),Oe(e)>=132&&!_e(e)&&this.collectedActions.push(...await U(e)),this.checkEnemyBuild(),this.units.getBases().filter(e=>e.buildProgress>=1).length>=3?(this.collectedActions.push(...B(this.units)),this.state.defendNatural=!1,fe.enemyBuildType="midgame"):this.state.defendNatural=!0,await this.raceSpecificManagement(e),this.collectedActions.push(...await ee(e));this.units.withLabel("pendingOrders").forEach(e=>e.labels.delete("pendingOrders")),this.data.get("earmarks").forEach(e=>this.data.settleEarmark(e.name)),await Ve.sendAction(this.collectedActions)}async onUnitDamaged(e,t){const{units:n}=e.get();if(t.labels.get("scoutEnemyMain")||t.labels.get("scoutEnemyNatural")){const[e]=n.getClosest(t.pos,ne.enemyUnits);await Ve.sendAction(M(t,e,4))}}async ability(e,t,n){if(Oe(this.world)>=e&&(void 0===n||n.targetType||n.targetCount===this.units.getById(n.countType).length+this.units.withCurrentOrders(t).length)){if(n&&n.targetType&&!1===n.continuous&&this.foodUsed!==e)return;let r=this.data.findUnitTypesWithAbility(t);0===r.length&&(r=this.units.getAlive(h.SELF).filter(e=>e.abilityAvailable(t)).map(e=>e.unitType));const i=this.units.getByType(r).filter(e=>e.abilityAvailable(t));if(i.length>0){let e=i[Math.floor(Math.random()*i.length)];const r={abilityId:t,unitTags:[e.tag]};if(n&&n.targetType){let t;if(n.targetType===u){if(!(n.controlled&&this.agent.minerals<=512)&&n.controlled)return;t=ce(this.units,e)}else{const e=this.units.getById(n.targetType).filter(e=>!e.noQueue&&-1===e.buffIds.indexOf(281));t=e[Math.floor(Math.random()*e.length)]}if(!t)return;r.targetUnitTag=t.tag}await Ve.sendAction([r]),pe.pausePlan=!1}else void 0!==n&&void 0!==n.targetType||(pe.pausePlan=!0,pe.continueBuild=!1)}}async build(e,t,n,r,i=[]){const{resources:o}=e;if(Oe(this.world)+1>=t){const s=Oe(this.world)+1===t;if(ye(this.world,n,r))switch(s&&Ne(this.data,this.data.getUnitTypeData(T[Ye])),!0){case C[Ye]===n:this.collectedActions.push(...await xe(this.world,n,r,s));break;case b[Ye].includes(n):if(0===b[Ye].indexOf(n))if(2===this.units.getBases().length&&Ye===g.TERRAN)i=await $(this.resources,n),await this.buildBuilding(e,n,i,s);else{je.availableExpansions=0===je.availableExpansions.length?Ie(o):je.availableExpansions;const{availableExpansions:t}=je;i=t.length>0?[await Pe(this.world,t)]:[],await this.buildBuilding(e,n,i,s)}else if(s)Ne(this.data,this.data.getUnitTypeData(n));else{const e=await we.ability(this.world,this.data.getUnitTypeData(n).abilityId);e.length>0&&(Re(this.world,v[n]),Ne(this.data,this.data.getUnitTypeData(n)),this.collectedActions.push(...e))}break;case X.includes(n):const t=Ee(this.data,n);let a=me(this.data,t);const u=this.units.withLabel("addAddOn").filter(e=>{const t=e.labels.get("addAddOn");if(!(t&&f(e.pos,t)<1))return!0;e.labels.delete("addAddOn")}),l=u.filter(e=>t.some(t=>e.abilityAvailable(t)&&(!e.pendingOrders||0===e.pendingOrders.length))).length>0?u:this.units.getByType(a).filter(e=>t.some(t=>e.abilityAvailable(t)&&(!e.pendingOrders||0===e.pendingOrders.length)));if(l.length>0){let e=l[Math.floor(Math.random()*l.length)];await Q(this.world,e,n,s)}else if(!s){const{mineralCost:e,vespeneCost:t}=this.data.getUnitTypeData(n);await J(this.world,e/t),pe.pausePlan=!0,pe.continueBuild=!1}break;default:d===n&&(i=this.map.getNatural().areas.placementGrid),0===i.length&&!1===this.foundPosition&&(i=await Se(this.world,n)),await this.buildBuilding(e,n,i,s)}}}async buildBuilding(e,t,n,r){if(this.foundPosition=await async function(e,t,n,r){const{resources:i}=e;if(t){const{map:e,units:r}=i.get(),o=function(e,t,n){const r=Be(t);if(void 0===r)return!1;const i=e.getAlive(h.ENEMY).filter(e=>e.pos&&f(e.pos,n)<16).map(e=>{const{pos:t,radius:n,unitType:r}=e;if(void 0===t||void 0===n)return[];if(e.isStructure()){const e=Be(r);return void 0===e?[]:Ue(t,e)}return[t,...Me(t,n)]}).flat();return ke(i,Ue(n,r))}(r,n,t)&&b[Ye][0]===n;if(e.isPlaceableAt(n,t)&&!o)return t}return await V(i,n,r)}(e,this.foundPosition,t,n),this.foundPosition)if(this.agent.canAfford(t)&&!r)await Ve.canPlace(t,[this.foundPosition])?(await Ve.sendAction(Ae(this.world,t,this.foundPosition)),pe.pausePlan=!1,pe.continueBuild=!0,this.foundPosition=!1):(this.foundPosition=!!se(this.resources,t,this.foundPosition)&&this.foundPosition,this.foundPosition&&this.collectedActions.push(...be(this.world,this.foundPosition,t,r)),r||(pe.pausePlan=!0,pe.continueBuild=!1));else if(this.collectedActions.push(...be(this.world,this.foundPosition,t,r)),!r){const{mineralCost:e,vespeneCost:n}=this.data.getUnitTypeData(t);await J(this.world,e/n),pe.pausePlan=!0,pe.continueBuild=!1}}checkEnemyBuild(){const{frame:e}=this.resources.get();if(fe.earlyScout){if(e.timeInSeconds()>122)return fe.earlyScout=!1,console.log(fe.scoutReport),void w(this.units);{const t=ae(this.world).filter(e=>f(e.pos,this.map.getEnemyMain().townhallPosition)>16).length;if(t>2)return fe.enemyBuildType="cheese",fe.scoutReport=`${fe.enemyBuildType} detected:\n            Worker Rush Detected: ${t} sus workers.`,fe.earlyScout=!1,console.log(fe.scoutReport),void w(this.units);let n=[];const r={alliance:h.ENEMY};switch(fe.opponentRace){case g.PROTOSS:this.units.getById(c,r).length>2&&(console.log(e.timeInSeconds(),"More than two gateways"),fe.enemyBuildType="cheese",fe.earlyScout=!1),n=[2===this.units.getById(c,r).length],n.every(e=>e)?fe.enemyBuildType="standard":fe.enemyBuildType="cheese",fe.scoutReport=`${fe.enemyBuildType} detected:\n            Gateway Count: ${this.units.getById(c,r).length}.`;break;case g.TERRAN:const t=this.units.getById(l,r).length>1;"cheese"!==fe.enemyBuildType&&t&&(console.log(e.timeInSeconds(),"More than one barracks"),fe.enemyBuildType="cheese"),n=[1===this.units.getById(l,r).length,1===this.units.getById(C[fe.opponentRace],r).length,!!this.map.getEnemyNatural().getBase()],n.every(e=>e)?fe.enemyBuildType="standard":fe.enemyBuildType="cheese",fe.scoutReport=`${fe.enemyBuildType} detected:\n            Barracks Count: ${this.units.getById(l,r).length}.\n            Gas Mine Count: ${this.units.getById(C[fe.opponentRace],r).length}.\n            Enemy Natural detected: ${!!this.map.getEnemyNatural().getBase()}.`}}fe.earlyScout||(console.log(fe.scoutReport),w(this.units))}}async getMiddleOfNaturalWall(e){return await W(this.resources,e)}async manageSupply(e,t=null){if((!t||t.indexOf(this.foodUsed)>-1)&&Ce(this.world,.2))switch(this.foundPosition=!1,Ye){case g.TERRAN:await this.build(e,this.foodUsed,s,this.units.getById([s,a]).length);break;case g.PROTOSS:await this.build(e,this.foodUsed,r,this.units.getById(r).length);break;case g.ZERG:let{abilityId:t}=this.data.getUnitTypeData(o);await this.train(e,this.foodUsed,o,this.units.getById(o).length+this.units.withCurrentOrders(t).length)}}async onUnitCreated(e,t){await P(e,t),await e.resources.get().actions.sendAction(this.collectedActions)}async raceSpecificManagement(e){switch(Ye){case g.ZERG:N(this.units),this.collectedActions.push(...L(this.world)),this.collectedActions.push(...F(this.units)),this.collectedActions.push(...await D(this.resources)),this.collectedActions.push(...We(e));break;case g.TERRAN:this.collectedActions.push(...k(this.resources)),this.collectedActions.push(...j(this.resources)),this.collectedActions.push(...G(this.resources)),this.collectedActions.push(...H(this.resources));break;case g.PROTOSS:this.collectedActions.push(...await K(this.world))}}async push(e){e.indexOf(this.foodUsed)>-1&&(!1!==this.state.pushMode||this.state.cancelPush||([...this.mainCombatTypes,...this.supportUnitTypes].forEach(e=>{this.units.getById(e).filter(e=>!e.labels.get("scout")&&!e.labels.get("creeper")&&!e.labels.get("injector")).forEach(e=>e.labels.set("pusher",!0))}),console.log("getSupply(this.units.withLabel(label), this.data)",Le(this.data,this.units.withLabel("pusher"))),this.state.pushMode=!0)),this.units.withLabel("pusher").length>0&&!this.state.cancelPush?De.outpowered?(this.state.cancelPush=!0,ue(this.units,"pusher"),console.log("cancelPush")):this.collectedActions.push(...await _(this.world,this.mainCombatTypes,this.supportUnitTypes)):!0===this.state.pushMode&&(this.state.pushMode=!1,this.state.cancelPush=!0,ue(this.units,"pusher"),console.log("cancelPush"))}scout(e,t,n,r,i){const{resources:o}=e,{map:s,units:a}=o.get(),u=i&&i.label?i.label:"scout",l=!i||!i.scoutType||fe[i.scoutType];if(t.indexOf(Oe(e))>-1&&l){const e=Ge(s,"get"+r);0===a.withLabel(u).filter(e=>e.unitType===n&&!e.isConstructing()).length&&He.setScout(a,e,n,u)}else{const e=a.withLabel(u).filter(e=>e.unitType===n&&!e.isConstructing());e.length>0&&e.forEach(e=>{e.removeLabel(u),e.labels.set("clearFromEnemy",!0)})}}async train(e,t,n,r){if(Oe(this.world)>=t){let t=this.data.getUnitTypeData(n).abilityId;if(re(this.world,n,r)||null===r)if(Te(this.world,n)){const e=this.units.getProductionUnits(n).find(e=>{const n=e.pendingOrders?e.pendingOrders:[];return(e.noQueue&&0===n.length||e.hasReactor()&&e.orders.length+n.length<2)&&e.abilityAvailable(t)}),o=this.data.getUnitTypeData(n);if(e){const n={abilityId:t,unitTags:[e.tag]};await Ve.sendAction([n]),le(e,n),pe.pendingFood+=o.foodRequired}else{t=E[n];if(!(this.units.getById(i).filter(e=>e.abilityAvailable(t)).length>0))return void(null!==r&&(pe.pausePlan=!0));q(this.resources,this,n)}pe.pausePlan=!1,ve(this.world,this.frame.timeInSeconds(),oe(m,n)),this.selectedTypeToBuild=null,console.log("Training "+Object.keys(m).find(e=>m[e]===n)),Ne(this.data,o)}else{if(Ce(this.world)&&n!==o)await this.manageSupply(e);else if(!this.agent.canAfford(n)){console.log("Cannot afford "+Object.keys(m).find(e=>m[e]===n),pe.isPlanPaused);const{mineralCost:e,vespeneCost:t}=this.data.getUnitTypeData(n);await J(this.world,e/t)}null!==r&&(pe.pausePlan=!0,pe.continueBuild=!1)}}}async upgrade(e,t,n){const{agent:r,data:i,resources:o}=e,{frame:s,units:a}=o.get();if(Oe(e)>=t){const t=oe(A,n);n=ie[t]?A[ie[t]]:A[t];const o=a.getUpgradeFacilities(n),u=i.getUpgradeData(n),{abilityId:l}=u,c=o.find(e=>e.orders.find(e=>e.abilityId===l)),{upgradeIds:p}=r;if(void 0===p)return;if(!p.includes(n)&&void 0===c){const{mineralCost:o,vespeneCost:c}=i.getUpgradeData(n);if(void 0===o||void 0===c)return;if(r.canAffordUpgrade(n)){const r=a.getUpgradeFacilities(n).find(e=>e.noQueue&&e.abilityAvailable(l));if(r){const n={abilityId:l,unitTags:[r.tag]};await Ve.sendAction([n]),pe.pausePlan=!1,ve(e,s.timeInSeconds(),t),console.log("Upgrading "+t)}else console.log(t+" not available"),await J(e,o/c)}else console.log("Cannot afford "+t),await J(e,o/c);Ne(i,u)}}}async runPlan(e){const{resources:t}=e,{map:n}=t.get();pe.continueBuild=!0,pe.pendingFood=0;for(let n=0;n<pe.legacyPlan.length&&(pe.currentStep=n,pe.continueBuild);n++){const r=pe.legacyPlan[n];let i=r[3];const o=r[0];let s,a;switch(r[1]){case"ability":const n=r[2];s=r[3],await this.ability(o,n,s);break;case"build":{a=r[2],this.unitType=a;const t=r[5];if(t&&fe.enemyBuildType!==t&&!fe.earlyScout)break;const n=r[4]?await Y(this.resources,r[4],a):[];await this.build(e,o,a,i,n);break}case"continuouslyBuild":const u=r[0];this.resourceTrigger&&u.indexOf(this.foodUsed)>-1&&await R(this.world,this,r[2],r[3]);break;case"harass":"standard"===fe.enemyBuildType&&(Fe.harassOn=!0);break;case"liftToThird":Oe(this.world)>=o&&await z(this.resources);break;case"maintainQueens":Oe(this.world)>=o&&await x(this.world);break;case"manageSupply":await this.manageSupply(e,r[0]);break;case"push":this.push(o);break;case"scout":{a=r[2];const t=r[3];s=r[4],s||(s={});const n="scout"+t;s.label=n,this.scout(e,o,a,t,s);break}case"train":a=r[2];try{await this.train(t,o,a,i)}catch(e){console.log(e)}break;case"swapBuildings":s=r[2],Oe(this.world)>=o&&await Z(this.world,s);break;case"upgrade":const l=r[2];await this.upgrade(this.world,o,l)}}pe.latestStep=pe.currentStep,pe.currentStep=null,pe.pausedThisRound||(pe.pausePlan=!1)}}},function(e,t,n){"use strict";const{BUNKER:r,LARVA:i}=n(1),{engageOrRetreat:o}=n(103),{tankBehavior:s}=n(60),a=n(29),{createUnitCommand:u}=n(18),{STOP:l}=n(3),{getCombatRally:c}=n(16);e.exports=function(e,t,n=null){const{resources:p}=e,{units:d}=p.get(),f=[],h=d.getCombatUnits().filter(e=>0===e.labels.size);if(d.withLabel("defending").forEach(e=>{e.labels.delete("defending")&&f.push(u(l,[e]))}),n||(n=c(p)),h.length>0){const s=[];if(t.forEach(e=>{s.concat(d.getById(e).filter(e=>0===e.labels.size))}),d.getById(r).filter(e=>e.buildProgress>=1).length>0){const[e]=d.getById(r);n=e.pos}const u=[...h,...s],l=a.mappedEnemyUnits.filter(e=>!(e.unitType===i));f.push(...o(e,u,l,n))}return f.push(...s(d,n)),f}},function(e,t,n){"use strict";const{UnitType:r}=n(8),{Alliance:i}=n(0),{REACTOR:o,TECHLAB:s}=n(1),{gridsInCircle:a}=n(15),{cellsInFootprint:u}=n(19),{getFootprint:l}=n(20),{flyingTypesMapping:c}=n(28),{existsInMap:p}=n(32),{findPosition:d}=n(42),{getAddOnBuildingPlacement:f,getAddOnPlacement:h}=n(52),{pointsOverlap:g}=n(31),{getStringNameOfConstant:y}=n(46),E=n(4),m=n(12);e.exports={handleOrphanReactor:()=>{},checkAddOnPlacement:async(e,t,n=o)=>{const{data:A,resources:v}=e,{map:R,units:b}=v.get();if(E.getAbilityIdsForAddons(A,n).some(e=>t.abilityAvailable(e))){let e=null,o=null,E=1;do{const A=a(h(t.pos),E).filter(e=>{const r=b.getAlive(i.SELF).filter(e=>e.unitType===s).reduce((e,t)=>[...e,...u(f(t.pos),{h:3,w:3})],[]),o=[...u(e,l(n)),...u(f(e),{h:3,w:3})];return[p(R,e)&&R.isPlaceableAt(n,e)&&R.isPlaceableAt(c.get(t.unitType)||t.unitType,f(e)),!g(o,[...m.seigeTanksSiegedGrids,...r])].every(e=>e)});A.length>0&&(Math.random()<.5?(o=A[Math.floor(Math.random()*A.length)],console.log("isPlaceableAt for "+y(r,n),o),e=f(o),console.log("isPlaceableAt for "+y(r,t.unitType),e)):(o=await d(v,n,A),o&&(e=await d(v,t.unitType,[f(o)])))),E++}while(!e||!o);return e}}}},function(e,t,n){"use strict";const{LARVA:r,ZERGLING:i,WARPGATE:o}=n(1),{Race:s,Alliance:a}=n(0),{WarpUnitAbility:u}=n(8),{distance:l}=n(2),{warpIn:c}=n(110),{canBuild:p}=n(4);e.exports=async function(e,t,n,d=!1){const{agent:f,data:h,resources:g}=e,{foodUsed:y,minerals:E}=f,{actions:m,units:A}=g.get(),v=[];if(f.race!==s.ZERG||A.getById(r).length>0&&y<198){const r=n.filter(t=>!(t==i&&E<50)&&p(e,t));if(r.length>0){const e=r[Math.floor(Math.random()*r.length)];let n=h.getUnitTypeData(e).abilityId,i=null;if([i]=function(e,t,n){let r=e.filter(e=>{const[t]=n.getClosest(e.pos,n.getCombatUnits(a.ENEMY));return e.buildProgress>=1&&!e.isEnemy()&&(!t||l(e.pos,t.pos)>8)});return t?r.filter(e=>e.noQueue&&e.hasTechLab()||e.hasReactor()&&e.orders.length<2):r.filter(e=>e.noQueue)}(A.getProductionUnits(e),d,A),i){const e={abilityId:n,unitTags:[i.tag]};v.push(e);try{await m.sendAction(v)}catch(e){console.log(e)}}else{n=u[e];A.getById(o).filter(e=>e.abilityAvailable(n)).length>0&&c(g,t,e)}}}}},function(e,t,n){"use strict";const{Alliance:r}=n(0),{distance:i}=n(2);e.exports=function(e,t){const{units:n}=e.get(),o=n.getStructures().map(e=>e.pos),s=[],a=[];return o.forEach(e=>{const t=n.getAlive(r.ENEMY).filter(t=>i(t.pos,e)<16);t.length>0?s.push(!0):s.push(!1),a.push(...t)}),s.some(e=>e)?t.defenseMode=!0:t.defenseMode=!1,a}},function(e,t,n){"use strict";const{EFFECT_INJECTLARVA:r,BUILD_CREEPTUMOR_QUEEN:i,BUILD_CREEPTUMOR_TUMOR:o}=n(3),{QUEEN:s,CREEPTUMORBURROWED:a,CREEPTUMOR:u,HATCHERY:l,LAIR:c}=n(1),{Alliance:p}=n(0),{distance:d,add:f}=n(2),{intersectionOfPoints:h}=n(31),{gridsInCircle:g}=n(15),{findPosition:y}=n(42),{creepGenerators:E}=n(6),{getClosestPosition:m}=n(40),{canBuild:A,getDPSHealth:v}=n(4),{createUnitCommand:R}=n(18),{getPathCoordinates:b}=n(50),{getPathablePositionsForStructure:C,getMapPath:T,getPathablePositions:S}=n(39),{getClosestUnitByPath:O,getClosestPositionByPath:_,getClosestPathablePositionsBetweenPositions:I}=n(16);e.exports={labelQueens:e=>{e.withLabel("injector").length<e.getBases().filter(e=>e.buildProgress>=1).length?w(e,"injector"):e.getById(s).length>e.getBases().length&&w(e,"creeper")},inject:e=>{const{units:t}=e.resources.get(),n=[];return t.withLabel("injector").filter(e=>e.availableAbilities().includes(r)).forEach(r=>{const[i]=t.getClosest(r.pos,r.enemyUnits);if(i){const o=v(e,r,r.enemyUnits.map(e=>e.unitType));r.selfDPSHealth-o>i.selfDPSHealth&&n.push(...N(t,r))}else n.push(...N(t,r))}),n},maintainQueens:async e=>{const{data:t,resources:n}=e,{actions:r,units:i}=n.get(),o=t.getUnitTypeData(s).abilityId;if(i.getById(s).length+i.withCurrentOrders(o).length<=i.getBases().length&&A(e,s)){if(i.getProductionUnits(s).find(e=>e.noQueue&&e.buildProgress>=1))try{await r.train(s)}catch(e){console.log(e)}}},spreadCreep:async e=>{const{map:t,units:n}=e.get(),r=[],s=n.getById(a).filter(e=>e.availableAbilities().length>0&&!e.labels.get("done"));if(s.length>0)if(n.getById(a).length<=3){const n=t.getEnemyNatural().townhallPosition;s.forEach(s=>{const{pos:a}=s;if(void 0===a)return;const[u]=_(e,n,C(t,s));if(!u)return;const l=b(t.path(u,n)),[c]=l.filter(e=>d(e,a)<=10&&t.hasCreep(e)).sort((e,t)=>d(t,a)-d(e,a));if(!c)return;R(i,[s]);const p=R(o,[s]);p.targetWorldSpacePos=c,r.push(p)})}else for(let i=0;i<s.length;i++){const a=10;let l=9,c=null;const p=s[i];do{let r=g(p.pos,l);const i=g(p.pos,a).filter(e=>{const[i]=n.getClosest(e,n.getById(E)),[o]=m(e,t.getExpansions().map(e=>e.townhallPosition));return[i,!r.includes(e),d(e,i.pos)>l,d(e,p.pos)<=a,!o||d(e,o)>3].every(e=>e)});c=await y(e,u,i),l-=.5}while(!c&&l>0);if(c){const e=R(o,[p]);e.targetWorldSpacePos=c,r.push(e)}p.labels.set("done",!0)}return r},spreadCreepByQueen:async e=>{const t=[],{map:n,units:r}=e.get(),o=r.withLabel("creeper").filter(e=>e.abilityAvailable(i)&&0===e.orders.length);if(o.length>0)if(r.getById(a).length<=3){const s=n.getCreep().filter(e=>{const[t]=r.getClosest(e,r.getById(E));if(t){const n=d(e,t.pos);return n>9&&n<12.75}}),a=n.getOccupiedExpansions().map(e=>e.getBase()),{townhallPosition:u}=n.getEnemyNatural(),[l]=O(e,u,a).map(e=>e.pos);if(void 0===l)return t;const c=I(e,l,u),{pathablePosition:p,pathableTargetPosition:f}=c,g=T(n,p,f),y=b(g),m=h(y,s);if(m.length>0){const n=_(e,l,m,m.length)[m.length-1],[s]=r.getClosest(n,o),a={abilityId:i,targetWorldSpacePos:n,unitTags:[s.tag]};t.push(a)}}else t.push(...await async function(e,t,n,r){const{actions:o,map:s,units:f}=e.get();let h=[],g=[];g=r.length>250?function(e,t){let n=new Array(t),r=e.length,i=new Array(r);if(t>r)throw new RangeError("getRandom: more elements taken than available");for(;t--;){var o=Math.floor(Math.random()*r);n[t]=e[o in i?i[o]:o],i[o]=--r in i?i[r]:r}return n}(r,250):r;const y=(new Date).getTime(),E=g.filter(e=>function(e,t,n,r,i){return[...t.getById(n),...e.getAvailableExpansions()].map(e=>e.pos||e.townhallPosition).every(n=>{const[o]=t.getClosest(n,t.getStructures(p.ENEMY));return o?d(n,r)>=i&&e.getOccupiedExpansions(p.ENEMY).every(e=>d(r,e.townhallPosition)>11.5):d(n,r)>=i})}(s,f,[l,c,a],e,9)),m=(new Date).getTime();if(P=m-y>P?m-y:P,console.log(`creepPoints.filter(point${m-y} milliseconds. Longest Time ${P}`),E.length>0){const e=E.filter(e=>n===i||t.some(t=>d(e,t.pos)<=10.5)),r=[...f.getById(a)].filter(e=>e.availableAbilities().length>0);if(e.length>0){const i=await o.canPlace(u,e);if(i){const[e]=f.getClosest(i,t),o={abilityId:n,targetWorldSpacePos:i,unitTags:[e.tag]};h.push(o),r.forEach(e=>e.labels.set("done",!1))}}else t.forEach(e=>e.labels.set("done",!0))}return h}(e,o,i,n.getCreep()));return t}};let P=0;function w(e,t){const n=e.getById(s).find(e=>!e.labels.get("injector"));n&&(n.labels.clear(),n.labels.set(t,!0))}function N(e,t){const n=[],i=e.getBases().filter(e=>!e.buffIds.includes(11)),[o]=e.getClosest(t.pos,e.getClosest(t.pos,i));if(o){const e=R(r,[t]);e.targetUnitTag=o.tag,n.push(e)}return n}},function(e,t,n){"use strict";const{OVERLORD:r,OVERSEER:i}=n(1),{distance:o}=n(2),{moveAway:s}=n(105);e.exports={overlordCoverage(e){const t=[],n=[...e.getById(r),...e.getById(i)].filter(e=>0===e.orders.length);if(n.length>0){const r=n[Math.floor(Math.random()*n.length)],i=e.getClosest(r.pos,n,2);if(i.length>1){o(r.pos,i[1].pos)<r.data().sightRange&&t.push(s(r,i[1]))}}return t}}},function(e,t,n){"use strict";const{UnitType:r}=n(8),{TownhallRace:i}=n(13),{addEarmark:o}=n(23),{getStringNameOfConstant:s}=n(46),a=n(14),{assignAndSendWorkerToBuild:u,setAndLogExecutedSteps:l,premoveBuilderToPosition:c,canBuild:p}=n(4),{balanceResources:d}=n(45),{getAvailableExpansions:f,getNextSafeExpansion:h}=n(51);e.exports={expand:async e=>{const{agent:t,data:n,resources:g}=e;let y=[];const{actions:E,frame:m,units:A}=g.get(),v=f(g),R=v.length>0?await h(e,v):null;if(R){const f=i[t.race][0];if(p(e,f)){const t=n.getUnitTypeData(f).abilityId;if(A.inProgress(f).length+A.withCurrentOrders(t).length<1){const t=n.getUnitTypeData(f);await E.sendAction(u(e,f,R)),l(e,m.timeInSeconds(),s(r,f)),o(n,t)}a.pausePlan=!1}else{y.push(...c(e,R,f));const{mineralCost:t,vespeneCost:r}=n.getUnitTypeData(f);await d(e,t/r),a.pausePlan=!0,a.continueBuild=!1}}return y}}},function(e,t,n){"use strict";const{EFFECT_REPAIR:r,SMART:i}=n(3),{Alliance:o,Attribute:s}=n(0),{addonTypes:a}=n(6),{BUNKER:u}=n(1),{distance:l}=n(2),{isPendingContructing:c}=n(41);e.exports={repairBurningStructures:e=>{const{units:t}=e.get(),n=[],[i]=t.getStructures(e=>e.health/e.healthMax<1/3&&e.buildProgress>=1);if(i){const e=[...t.getMineralWorkers(),...t.getWorkers().filter(e=>e.noQueue),...t.withLabel("builder").filter(e=>!e.isConstructing())],[o]=t.getClosest(i.pos,e);if(o){const e={abilityId:r,targetUnitTag:i.tag,unitTags:[o.tag]};n.push(e)}}return n},repairDamagedMechUnits:e=>{const{units:t}=e.get(),n=[],[i]=t.getAlive(o.SELF).filter(e=>e.data().attributes.includes(s.MECHANICAL)&&e.health/e.healthMax<1/3&&e.buildProgress>=1);if(i){const[e]=t.getClosest(i.pos,t.getWorkers().filter(e=>e.tag!==i.tag&&!e.isConstructing()&&!c(e)&&l(e.pos,i.pos)<=16));if(e){const t={abilityId:r,targetUnitTag:i.tag,unitTags:[e.tag]};n.push(t)}}return n},repairBunker:e=>{const{units:t}=e.get(),n=[],[i]=t.getById([u]).filter(e=>e.health/e.healthMax<1&&e.buildProgress>=1);if(i){const[e]=t.getClosest(i.pos,t.getWorkers());if(e){const t={abilityId:r,targetUnitTag:i.tag,unitTags:[e.tag]};n.push(t)}}return n},finishAbandonedStructures:e=>{const{units:t}=e.get(),n=[],[r]=t.getStructures().filter(e=>e.buildProgress<1&&-1===a.indexOf(e.unitType));if(r){if(l(r.pos,t.getClosest(r.pos,t.getWorkers())[0].pos)<r.radius+.3)return n;let e=[...t.withLabel("builder").filter(e=>!e.isConstructing()),...t.withLabel("proxy").filter(e=>!e.isConstructing())];0===e.length&&e.push(...t.getMineralWorkers(),...t.getWorkers().filter(e=>e.noQueue));const[o]=t.getClosest(r.pos,e);if(o&&(o.labels.set("builder",!0),o)){const e={abilityId:i,unitTags:[o.tag],targetUnitTag:r.tag};n.push(e)}}return n}}},function(e,t,n){"use strict";const{setCombatBuildingsRallies:r}=n(53),{clearFromEnemyBehavior:i,scoutEnemyMainBehavior:o,scoutEnemyNaturalBehavior:s,acrossTheMapBehavior:a,recruitToBattleBehavior:u}=n(112),{liberatorBehavior:l,marineBehavior:c,supplyDepotBehavior:p,workerBehavior:d,observerBehavior:f,overlordBehavior:h}=n(60);e.exports=async function(e){const{resources:t}=e,{units:n}=t.get(),g=[];return g.push(...a(e)),g.push(...i(e)),g.push(...l(t)),g.push(...c(t)),g.push(...f(e)),g.push(...h(e)),await o(e),await s(t),g.push(...r(t)),g.push(...r(t)),g.push(...p(t)),g.push(...await d(e)),g.push(...u(n)),g}},function(e,t,n){"use strict";const{createSystem:r}=n(5),i=n(194),o=n(14),{convertPlan:s}=n(193);e.exports=r({name:"SaltConverterSystem",type:"agent",async onGameStart(e){const t=e.agent.race;this.getBuild(t)},getBuild(e){const t=i[e][138658];if("two variable"!==t.buildType)return t;o.rallies=t.rallies,o.scouts=t.scouts,o.unitMax=t.unitMax,o.wallOff=t.wallOff,s(t,e)}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{Alliance:i}=n(0),{WorkerRace:o}=n(13),{setUnitTypeTrainingAbilityMapping:s}=n(23),a=n(14),u=n(41),{runPlan:l}=n(61);e.exports=r({name:"ExecutePlanSystem",type:"agent",async onGameStart(e){const{data:t}=e;s(t)},async onStep(e){const{data:t,resources:n}=e,{units:r}=n.get();u.removePendingOrders(r),await l(e),t.get("earmarks").forEach(e=>t.settleEarmark(e.name))},async onUnitDestroyed({agent:e},t){o[e.race]===t.unitType&&t.alliance===i.ALLY&&(a.pausePlan=!1)}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{UnitTypeId:i}=n(8),{Attribute:o}=n(0),{ZERGLING:s}=n(1),a=n(14),u=n(41),{getUnitTypeCount:l,getFoodUsed:c,shortOnWorkers:p}=n(4),d=n(4),{train:f}=n(61),{getResourceDemand:h}=n(45),{haveAvailableProductionUnitsFor:g}=n(54),y=n(54);e.exports=r({name:"UnitTrainingSystem",type:"agent",async onStep(e){const{agent:t,data:n,resources:r}=e,{units:E}=r.get(),{planMin:m,trainingTypes:A,unitMax:v}=a;u.removePendingOrders(E);const{outpowered:R}=d;if([R,y.workersTrainingTendedTo&&!a.isPlanPaused,!p(e)&&!a.isPlanPaused].some(e=>e)){let r=R?"Scouted higher power":"Free build mode.";const{currentStep:u,plan:p}=a,d=(A.length>0?A:function(e){return e.getAlive().reduce((e,t)=>e.includes(t.unitType)?e:[...e,t.unitType],[])}(E)).filter(r=>[!n.getUnitTypeData(r).attributes.includes(o.STRUCTURE),g(e,r),t.hasTechFor(r),n.getUnitTypeData(r).foodRequired<=p[u].food-c(e),R||m[i[r]]<=c(e),!v[i[r]]||l(e,r)<v[i[r]]].every(e=>e));if(r+=" currentStep: "+u,d.length>0){r+=" candidateTypesToBuild: "+d;let{selectedTypeToBuild:i}=y;if(i=i||function(e,t){const{agent:n,data:r}=e,i=t.filter(e=>!(n.vespene<=170&&r.getUnitTypeData(e).vespeneCost>0));return i[Math.floor(Math.random()*i.length)]}(e,d),null!=i){r+=" selectedTypeToBuild: "+i;let{totalMineralCost:o,totalVespeneCost:a}=h(e.data,[p[u]]),{mineralCost:l,vespeneCost:c}=n.getUnitTypeData(i);i===s&&(o+=l,a+=c),r+=` totalMineralCost: ${o} totalVespeneCost: ${a}`;const d=t.minerals>=o+l,g=0===c||t.vespene>=a+c,y=d&&g;(R||y)&&await f(e,i)}y.selectedTypeToBuild=i}console.log(r)}}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{WorkerRace:i,GasMineRace:o}=n(13),s=n(14),{buildWorkers:a,shortOnWorkers:u,getFoodUsed:l}=n(4),c=n(4),{haveAvailableProductionUnitsFor:p}=n(54),d=n(54);async function f(e){const{agent:t,data:n,resources:r}=e,{race:f}=t,{units:h}=r.get(),g=h.getById(i[f]).length,y=[...h.getBases(),...h.getById(o[f])].reduce((e,t)=>t.assignedHarvesters+e,0),E=Math.min(g,y),{outpowered:m,unitProductionAvailable:A}=c;let v=s.bogIsActive&&E<=11,R=function(e){const{agent:t,data:n}=e,{race:r}=t,{abilityId:o}=n.getUnitTypeData(i[r]);if(void 0===o)return 0;let{plan:a,legacyPlan:u}=s;const c=a.find(t=>t.food>l(e))||u.find(t=>t[0]>l(e));if(void 0===c)return 0;return(c.food||c[0])-l(e)}(e);if(!s.bogIsActive){v=[p(e,i[t.race]),!s.isPlanPaused,t.minerals<512||E<=36,u(e)||R>0,!m||m&&!A].every(e=>e)}if(v){d.workersTrainingTendedTo=!1;const{abilityId:t}=n.getUnitTypeData(i[f]);if(void 0===t)return;const o=r.get().units.getProductionUnits(i[f]).find(e=>e.noQueue&&e.abilityAvailable(t));try{o&&await a(e,R)}catch(e){console.log(e)}}else d.workersTrainingTendedTo=!0}e.exports=r({name:"WorkerTrainingSystem",type:"agent",async onGameStart(e){await f(e)},async onStep(e){await f(e)},async onUnitCreated(e,t){const{agent:n}=e,{race:r}=n;i[r]===t.unitType&&await f(e)}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{distance:i,getNeighbors:o}=n(2),{getClosestPosition:s}=n(40),a=n(106),{intersectionOfPoints:u}=n(31),{gridsInCircle:l}=n(15),{BARRACKS:c,SUPPLYDEPOT:p}=n(1),{getAddOnPlacement:d,isBuildingAndAddonPlaceable:f,getAddOnBuildingPlacement:h,getBuildingAndAddonGrids:g}=n(52),{cellsInFootprint:y}=n(19),{getFootprint:E}=n(20),m=n(50);n(39);e.exports=r({name:"WallOffRamp",type:"agent",async onGameStart({resources:e}){const{debug:t,map:n}=e.get();t.setDrawCells("rmps",n._ramps.map(e=>({pos:e})),{size:1,cube:!0});const{areas:r}=n.getMain();if(void 0===r)return;const{pathFromMain:A}=n.getNatural();if(void 0===A)return;const v=m.getPathCoordinates(A);a.adjacentToRampGrids=r.placementGrid.filter(e=>{const t=o(e).some(e=>n.isRamp(e)),r=v.some(t=>i(t,e)<=4);return t&&r}),t.setDrawCells("adToRamp",a.adjacentToRampGrids.map(e=>({pos:e})),{size:1,cube:!0});const R=function(e){const t=a.adjacentToRampGrids.filter(t=>e.isPlaceable(t)),n=t.filter(e=>2===u(l(e,1).filter(t=>i(t,e)<=1),t).length);let r=[];return n.forEach(t=>{const n=l(t,3);let i=s(t,n,n.length).filter(t=>e.isPlaceableAt(p,t));const[o]=s(t,n.filter(t=>e.isRamp(t)));if(o){const[e]=s(o,i);e&&(a.supplyWallOffPositions.push(e),r.push(...y(e,E(p))))}}),r}(n);!function(e,t){const n=a.adjacentToRampGrids.filter(e=>![...t].some(t=>t.x===e.x&&t.y===e.y)),r=n.filter(e=>2===u(l(e,1).filter(t=>i(t,e)<=1),n).length),[o]=s(e.getMain().townhallPosition,r);let p;if(o){const n=l(o,3).filter(e=>![...t].some(t=>t.x===e.x&&t.y===e.y));let r=s(o,n,n.length).filter(n=>0===u(t,g(n,c)).length&&f(e,c,n));const[a]=s(o,n.filter(t=>e.isRamp(t)));if(a){r=r.map(e=>i(e,a)<i(d(e),a)?e:d(e));const[n]=s(a,r);if(n){let r=null;r=0===u(t,g(n,c)).length&&f(e,c,n)?n:h(n),p=r}}}a.barracksWallOffPosition=p}(n,R)}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{generalScouting:i}=n(111),{scoutEnemyMainBehavior:o,clearFromEnemyBehavior:s}=n(112),{supplyDepotBehavior:a,overlordBehavior:u,muleBehavior:l}=n(60),{setCombatBuildingsRallies:c}=n(53),p=n(25);e.exports=r({name:"RunBehaviorsSystem",type:"agent",async onGameStart({agent:e}){p.opponentRace=e.opponent.race},async onEnemyFirstSeen(e,t){p.opponentRace=t.data().race},async onStep(e){const{resources:t}=e,{actions:n}=t.get(),r=[];r.push(...c(t)),r.push(...s(e)),r.push(...u(e)),r.push(...l(t)),await o(e),r.push(...a(t)),await n.sendAction(r)},async onUnitCreated(e,t){await i(e,t)}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{Alliance:i}=n(0),{setSelfSupplyPowers:o,setEnemySupplyPowers:s}=n(23),{setArmorUpgradeLevel:a,setAttackUpgradeLevel:u}=n(24),{setSelfDPSHealthPower:l,setEnemyDPSHealthPower:c,setTotalEnemyDPSHealth:p}=n(4),d=n(33),f=n(29);e.exports=r({name:"EnemyTrackingSystem",type:"agent",async onStep(e){const{data:t,resources:n}=e,{units:r}=n.get();f.clearOutdatedMappedUnits(n),f.addUnmappedUnit(r),f.setBaseThreats(n);const{mappedEnemyUnits:h}=f,{selfUnits:g}=d;o(t,h),s(t,h,g),l(e,h,g),c(e,h,g),a(r.getAlive(i.ENEMY)),u(r.getAlive(i.ENEMY)),p(e)},async onEnemyFirstSeen({},e){f.addEnemyUnit(e)},async onUnitDestroyed({},e){e.alliance===i.ENEMY&&f.removeEnemyUnit(e)}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{LOAD_BUNKER:i,SMART:o,MOVE:s}=n(3),{Alliance:a}=n(0),{BUNKER:u,QUEEN:l,LARVA:c}=n(1),{tankBehavior:p}=n(60),d=n(82),{engageOrRetreat:f}=n(82),{getCombatRally:h}=n(16);e.exports=r({name:"RallySystem",type:"agent",async onStep({data:e,resources:t}){const{actions:n}=t.get();if(!d.defenseMode){const{units:r}=t.get(),d=[],g=r.getCombatUnits().filter(e=>!e.labels.get("harasser")&&![...e.labels.keys()].some(e=>e.includes("scout")));let y=h(t);if(g.length>0)if(r.getById(u).filter(e=>e.buildProgress>=1).length>0){const[e]=r.getById(u);y=e.pos;const t=r.getClosest(e.pos,g,g.length).map(e=>e.tag);if(e.abilityAvailable(i)){const n={abilityId:o,targetUnitTag:e.tag,unitTags:t};d.push(n)}else{const e={abilityId:s,targetWorldSpacePos:y,unitTags:g.map(e=>e.tag)};d.push(e)}}else{const n=[...g,...r.getById(l)],i=r.getAlive(a.ENEMY).filter(e=>!(e.unitType===c));d.push(...f({data:e,resources:t},n,i,y))}d.push(...p(r,y)),await n.sendAction(d)}}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{Alliance:i,Race:o}=n(0),{QUEEN:s,BUNKER:a}=n(1),{salvageBunker:u}=n(190),{getMiddleOfNaturalWall:l}=n(42),c=n(82),{attackWithArmy:p,engageOrRetreat:d}=n(82),{getClosestUnitByPath:f,getCombatRally:h}=n(16),{getCombatPoint:g}=n(53),{canBuild:y}=n(4),E=n(29);n(25);e.exports=r({name:"DefenseSystem",type:"agent",async onStep(e){const{resources:t}=e,{actions:n,units:r}=t.get(),o=[],a=h(t);a&&o.push(...function(e,t){const{data:n,resources:r}=e,{units:o}=r.get(),a=[];let[u]=f(r,t,E.threats);if(u){let l=o.getCombatUnits();const[h]=f(r,u.pos,o.getCombatUnits());if(h){const f=o.getCombatUnits(i.ENEMY),h=f.map(e=>n.getUnitTypeData(e.unitType).foodRequired).reduce((e,t)=>e+t,0);const y=[...l,...o.getWorkers().filter(e=>e.isAttacking())].map(e=>n.getUnitTypeData(e.unitType).foodRequired).reduce((e,t)=>e+t,0);if(y>h){if(console.log("Defend",y,h),u.isFlying){l.find(e=>e.canShootUp())||l.push(...o.getById(s))}const e=g(r,l,u);if(e){const t={combatPoint:e,selfCombatUnits:l,enemyTarget:u};a.push(...p(n,o,t))}}else y<h&&(console.log("engageOrRetreat",y,h),l=[...l,...o.getById(s)],a.push(...d(e,l,f,t)));c.defenseMode=!0}}else c.defenseMode=!1;return a}(e,a)),r.getBases().filter(e=>e.buildProgress>=1).length>=3&&o.push(...u(r)),await n.sendAction(o)}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{Race:i}=n(0),{SUPPLYDEPOT:o,PYLON:s,OVERLORD:a}=n(1),u=n(14),{isSupplyNeeded:l}=n(4),{build:c,train:p}=n(61);e.exports=r({name:"ManageSupplySystem",type:"agent",async onStep(e){const{agent:t}=e;if([l(e,.2)&&(t.foodUsed>u.planMax.supplyDepot||t.minerals>512)].some(e=>e))switch(t.race){case i.TERRAN:await c(e,o);break;case i.PROTOSS:await c(e,s);break;case i.ZERG:await p(e,a)}}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{Color:i}=n(8),{unbuildablePlateTypes:o}=n(6),{frontOfGrid:s}=n(102),{cellsInFootprint:a}=(n(161),n(19)),{createPoint2D:u,getNeighbors:l,distance:c,avgPoints:p,closestPoint:d,areEqual:f}=n(2),{getFootprint:h}=n(20),{Alliance:g}=(n(187),n(29),n(0)),{LARVA:y}=n(1),{getBuildingFootprintOfOrphanAddons:E}=n(108);n(485),n(7)("sc2:DrawDebugWalls");e.exports=r({name:"Debug",type:"agent",async onGameStart(e){},async onStep(e){}})},function(e,t,n){"use strict";e.exports={pathCandidates:[]}},function(e,t,n){"use strict";const{createSystem:r}=n(5),{Alliance:i}=n(0),{setSelfSupplyPowers:o,setEnemySupplyPowers:s}=n(23),{setArmorUpgradeLevel:a,setAttackUpgradeLevel:u}=n(24),{setSelfDPSHealthPower:l,setEnemyDPSHealthPower:c,setTotalSelfDPSHealth:p}=n(4),d=n(29),{setSelfCombatSupply:f}=n(33),h=n(33);e.exports=r({name:"TrackUnitsSystem",type:"agent",async onStep(e){const{data:t,resources:n}=e,{units:r}=n.get(),g=r.getAlive(i.SELF);var y={};g.forEach(e=>y[e.tag]=!0),h.missingUnits.push(...h.previousUnits.filter(e=>!y[e.tag]&&!e.labels.get("dead"))),h.missingUnits=h.missingUnits.filter(e=>!g.some(t=>t.tag===e.tag)),h.previousUnits=g;let E=[...g,...h.missingUnits];f(e),h.selfUnits=E,o(t,E),s(t,E,d.enemyUnits),l(e,E,d.mappedEnemyUnits),c(e,E,d.enemyUnits),a(E),u(E),p(e)},async onUnitDestroyed({},e){h.missingUnits=h.missingUnits.filter(t=>e.tag!==t.tag)}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{Ability:i}=n(8),{liftingAbilities:o,landingAbilities:s}=n(6),{BARRACKS:a,REACTOR:u}=n(1),{distance:l}=n(2),{getAddOnBuildingPosition:c}=n(52),p=n(14),d=n(41),{repositionBuilding:f}=n(4),{setPendingOrders:h}=n(12);e.exports=r({name:"SwapBuildingSystem",type:"agent",async onStep(e){const t=[],{actions:n,units:r}=e.resources.get();d.removePendingOrders(r);const g=r.withLabel("swapBuilding");for(let e=0;e<g.length;e++){const t=g[e];if(t.availableAbilities().find(e=>o.includes(e))&&!t.labels.has("pendingOrders"))if(l(t.pos,t.labels.get("swapBuilding"))>1){const e={abilityId:i.LIFT,unitTags:[t.tag]};await n.sendAction(e),h(t,e)}else t.labels.delete("swapBuilding");if(t.availableAbilities().find(e=>s.includes(e))){const e={abilityId:i.LAND,unitTags:[t.tag],targetWorldSpacePos:t.labels.get("swapBuilding")};await n.sendAction(e),p.pausePlan=!1,h(t,e)}}t.push(...function(e){const{data:t,resources:n}=e,{units:r}=n.get(),i=r.getById(a).filter(e=>!e.hasTechLab()&&!e.hasReactor()&&e.availableAbilities().find(e=>o.includes(e))),s=r.getById(u).filter(e=>!e.labels.has("reposition"));s.length>0&&i.forEach(e=>{const{orders:t,pos:n,unitType:r}=e;if(void 0!==t&&void 0!==n&&void 0!==r&&r===a){const t=s.reduce((e,t)=>{if(void 0===t.pos)return e;const r=l(n,t.pos);if(void 0===e||void 0===e.pos)return t;const i=l(n,e.pos);return void 0===e||r<i?t:e},void 0);void 0!==t&&(e.labels.set("reposition",c(t.pos)),t.labels.set("reposition",e.tag))}});return[]}(e)),t.push(...f(e)),t.length>0&&await n.sendAction(t)}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{TownhallRace:i}=n(13),{liftToThird:o}=n(81);e.exports=r({name:"LiftToThird",type:"agent",async onStep(e){const{agent:t,resources:n}=e;n.get().units.getById(i[t.race]).length>=2&&await o(n)}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{UnitType:i}=n(8),{HALT_TERRANBUILD:o}=n(3),{Race:s,Alliance:a}=n(0),{distance:u}=n(2),l=n(46),c=n(14),p=n(4),{logActionIfNearPosition:d}=n(4);n(189);e.exports=r({name:"Logging",type:"agent",async onStep(e){!function({agent:e,resources:t}){const n=l.formatToMinutesAndSeconds(t.get().frame.timeInSeconds()),{foodUsed:r,minerals:i,vespene:o}=e,{totalSelfDPSHealth:s,totalEnemyDPSHealth:a}=p;let u="foodUsed: "+r;u+=", time: "+n,u+=", isPlanPaused: "+c.isPlanPaused,u+=", step: "+c.latestStep,u+=`, resources: ${i}/${o}`,u+=`, powerLevels: ${s}/${a}(${s/a})`,console.log(""+u)}(e),function(e){const{agent:t,data:n,resources:r}=e,{units:a}=r.get(),l=a.getConstructingWorkers();l.length>0&&l.forEach(e=>{const r=e.orders.find(t=>t.targetWorldSpacePos&&u(t.targetWorldSpacePos,e.pos)<4);if(r){const l=Object.keys(i).find(e=>n.getUnitTypeData(i[e]).abilityId===r.abilityId),c=i[l];if(l){if(t.race===s.TERRAN&&e.abilityAvailable(o))return;if(t.race===s.PROTOSS){const[e]=a.getClosest(r.targetWorldSpacePos,a.getById(c));if(e&&u(e.pos,r.targetWorldSpacePos)<1)return}}}})}(e)},async onUnitCreated(e,t){const n=e.resources.get().frame.getGameLoop();t.isStructure()&&n>0&&d(e,t.unitType,t,t.pos)}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{Upgrade:i,UnitType:o}=n(8),{Attribute:s,Alliance:a,Race:u}=n(0),{townhallTypes:l,gasMineTypes:c}=n(6),{WorkerRace:p}=n(13),{DRONE:d}=n(1),f=n(107),h=n(14),g=n(41),{getUnitTypeCount:y,getFoodUsed:E,shortOnWorkers:m,getBuilder:A,assignAndSendWorkerToBuild:v}=n(4),{build:R,train:b,upgrade:C,runPlan:T}=n(61),S=n(25),{v4:O}=n(505),_=n(23),{setUnitTypeTrainingAbilityMapping:I}=n(23),{supplyTypes:P}=n(28),{getDistanceByPath:w}=n(16),{setScout:N}=n(25),L=n(22),{getTargetLocation:D}=n(39),{getTimeInSeconds:x}=n(44);let F=[];function M(e,t){if(t===o.EXTRACTOR){return 0===e.freeGasGeysers().length}return!1}function B(e,t,n){const{attributes:r}=e.getUnitTypeData(t);if(void 0===r)return!1;if(r.includes(s.STRUCTURE)){return 1/(8*(([...c,...l].includes(t)?n:8*n)+1))<Math.random()}return 1/(([...P].includes(t)?n:0)+1)<Math.random()}function U(e,t){const{agent:n,resources:r}=e,{foodUsed:i}=n,{map:s,units:a}=r.get();if(void 0===i)return;const{unitType:u,targetLocation:l}=t,c=function(e,t){const{agent:n,resources:r}=e,{start:i}=t,{foodUsed:s}=n;if(void 0===s)return!1;const{frame:a,units:u}=r.get(),l=[];void 0!==i.food?l.push(s>=i.food):void 0!==i.time&&l.push(x(a.getGameLoop())>=i.time);void 0!==i.unit&&l.push(u.getById(o[i.unit.type]).length>=i.unit.count);void 0!==t.scoutType&&l.push(S[t.scoutType]);return l.every(e=>e)}(e,t),p=function(e,t){const{agent:n,resources:r}=e,{end:i}=t,{foodUsed:o}=n;if(void 0===o)return!1;const{frame:s}=r.get(),a=[];void 0!==i.food?a.push(o>=i.food):void 0!==i.time&&a.push(x(s.getGameLoop())>=i.time);return a.every(e=>e)}(e,t);if(c&&!p){if(0===a.withLabel("scout"+l).length){const e=D(s,"get"+l);N(a,e,o[u],"scout"+l)}}else a.withLabel("scoutEnemyMain").forEach(e=>{e.removeLabel("scoutEnemyMain"),e.addLabel("clearFromEnemy",!0)})}e.exports=r({name:"BoGeneratorSystem",type:"agent",async onGameStart(e){const{agent:t,data:n}=e,{race:r}=t;F=[],h.bogIsActive=!0,h.uuid=O(),h.mineralMaxThreshold=r===u.ZERG?300:400,h.mineralMinThreshold=100,r===u.PROTOSS&&(h.naturalWallPylon=!0,console.log("planService.naturalWallPylon",h.naturalWallPylon)),I(n),Array.from(Object.values(i)).forEach(e=>{F[n.getUpgradeData(e).abilityId.toString()]=e}),f.minimumAmountToAttackWith=Math.round(200*Math.random()),console.log("Minimum amount of food to attack with: "+f.minimumAmountToAttackWith)},async onStep(e){const{agent:t,data:n,resources:r}=e,{actions:i,units:o}=r.get(),{mineralMaxThreshold:l,mineralMinThreshold:c}=h;g.removePendingOrders(o);const f=[];await T(e);const S=E(e);!function(e){const{agent:t}=e,{race:n}=t;switch(n){case u.TERRAN:{const t=L([{start:{food:17},end:{time:120},unitType:"SCV",targetLocation:"EnemyMain",scoutType:"earlyScout"}]);U(e,t);break}case u.PROTOSS:{const t=L([{start:{food:14,unit:{type:"PYLON",count:1}},end:{food:19},unitType:"PROBE",targetLocation:"EnemyMain",scoutType:"earlyScout"}]);U(e,t);break}}}(e);const O=t.minerals>c&&t.minerals<l;if(S===h.foodMark){if(O)return void(m(e)&&Math.random()>1/3&&(await b(e,p[t.race]),h.foodMark++))}else if(S<h.foodMark){if(O)return m(e)&&Math.random()>1/3&&await b(e,p[t.race]),void n.get("earmarks").forEach(e=>n.settleEarmark(e.name))}else if(S>h.foodMark)return void(h.foodMark=S);if(t.minerals>l&&h.continueBuild){const t=function(e,t){const n=new Map;return t.getAlive(a.SELF).forEach(t=>{if(!t.isStructure()||t.isIdle()||t.hasReactor()&&1===t.orders.length){t.availableAbilities().forEach(t=>{if(!n.has(t)){const r=_.unitTypeTrainingAbilities;if(r.entries(),Array.from(r.keys()).some(e=>e===t)){0===e.getUnitTypeData(r.get(t)).unitAlias&&n.set(t,{orderType:"UnitType",unitType:r.get(t)})}else Object.keys(F).some(e=>parseInt(e)===t)&&n.set(t,{orderType:"Upgrade",upgrade:F[t]})}})}}),n}(n,o);await async function(e,t){const{agent:n,data:r,resources:i}=e,{actions:o}=i.get(),{foodUsed:a}=n;if(void 0===a)return;const{map:u,units:l}=i.get(),c=[],f=Array.from(t.values());let g=!1;for(;!g&&f.length>0;){const[t]=f.splice(Math.floor(Math.random()*f.length),1),{orderType:i,unitType:o}=t;if("UnitType"===i){const t=y(e,o)+(o===d?l.getStructures().length-1:0);if([M(u,o),B(r,o,t),p[n.race]===o&&!m(e)].some(e=>e))continue;const c=h.plan.some(e=>e.unitType===o&&e.targetCount===t);if(g=!0,!c){h.plan.push({orderType:i,unitType:o,food:a,targetCount:y(e,o)});const{attributes:t}=r.getUnitTypeData(o);if(void 0===t)return;t.includes(s.STRUCTURE)?await R(e,o):await b(e,o)}}else"Upgrade"===i&&(h.plan.push({orderType:i,upgrade:t.upgrade,food:a}),await C(e,t.upgrade),g=!0)}c.length>0&&await o.sendAction(c)}(e,t)}return f.push(...function(e){const{agent:t,data:n,resources:r}=e,{units:i}=r.get(),o=[];return i.getWorkers().forEach(a=>{const{orders:u,pos:l}=a;if(void 0===u||void 0===l)return;let c;const p=u.find(e=>{const{abilityId:t}=e;if(void 0===t)return!1;const r=_.unitTypeTrainingAbilities;if(c=r.get(t),void 0===c)return!1;const{attributes:o}=n.getUnitTypeData(c);if(void 0===o)return!1;if(o.includes(s.STRUCTURE)){const{targetWorldSpacePos:t}=e;if(void 0===t)return!1;const{x:n,y:r}=t;if(void 0===n||void 0===r)return!1;return void 0===i.getStructures().find(e=>{const{pos:t}=e;if(void 0===t)return!1;const{x:i,y:o}=t;return void 0!==i&&void 0!==o&&(i===n&&o===r)})}return!1});if(void 0===p)return;const{targetWorldSpacePos:d}=p;if(void 0===d)return;const f=A(e,d);if(null===f)return;const{pos:h}=f;void 0!==h&&void 0!==c&&(f.tag===a.tag||w(r,l,d)<=w(r,h,d)||t.canAfford(c)&&o.push(...v(e,c,d,!1)))}),o}(e)),n.get("earmarks").forEach(e=>n.settleEarmark(e.name)),i.sendAction(f)},async onEnemyFirstSeen(e,t){S.opponentRace=t.data().race}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{UnitType:i}=n(8),{MOVE:o}=n(3),{Alliance:s,Race:a}=n(0),{GasMineRace:u,TownhallRace:l}=n(13),{GATEWAY:c,BARRACKS:p}=n(1),{cellsInFootprint:d}=n(19),{distance:f}=n(2),{getFootprint:h}=n(20),{cancelEarlyScout:g}=n(111),y=n(42),E=n(14),{getZergEarlyBuild:m}=n(4),A=n(4),v=n(25),R=n(25),{setOutsupplied:b,setEnemyCombatSupply:C}=n(25);e.exports=r({name:"ScoutingSystem",type:"agent",async onStep(e){const{agent:t,data:n,resources:r}=e;!function(e){const{frame:t,map:n,units:r}=e.resources.get();if(v.earlyScout){if(t.timeInSeconds()>122)return R.earlyScout=!1,console.log(v.scoutReport),void g(r);if(R.earlyScout){let i=[];switch(R.opponentRace){case a.PROTOSS:r.getById(c,s.ENEMY).length>2&&(console.log(t.timeInSeconds(),"More than two gateways"),R.enemyBuildType="cheese",R.earlyScout=!1),i=[2===r.getById(c,s.ENEMY).length],i.every(e=>e)?R.enemyBuildType="standard":R.enemyBuildType="cheese",R.scoutReport=`${R.enemyBuildType} detected:\n            Gateway Count: ${r.getById(c,s.ENEMY).length}.`;break;case a.TERRAN:const o=r.getById(p,s.ENEMY).length>1;"cheese"!==R.enemyBuildType&&o&&(console.log(t.timeInSeconds(),"More than one barracks"),R.enemyBuildType="cheese"),i=[1===r.getById(p,s.ENEMY).length,1===r.getById(u[R.opponentRace],s.ENEMY).length,!!n.getEnemyNatural().getBase()],i.every(e=>e)?R.enemyBuildType="standard":R.enemyBuildType="cheese",R.scoutReport=`${R.enemyBuildType} detected:\n            Barracks Count: ${r.getById(p,s.ENEMY).length}.\n            Gas Mine Count: ${r.getById(u[R.opponentRace],s.ENEMY).length}.\n            Enemy Natural detected: ${!!n.getEnemyNatural().getBase()}.`;break;case a.ZERG:m(e)}}v.earlyScout||(console.log(v.scoutReport),g(r))}}(e),await async function(e){const{actions:t,frame:n,map:r,units:s}=e.resources.get(),a=[];E.scouts&&E.scouts.forEach(t=>{let{end:u,start:l,targetLocation:c,unitType:p}=t;p=i[p];const d=l.food&&l.food<=e.agent.foodUsed||l.time<=n.timeInSeconds(),h=u.food&&u.food>e.agent.foodUsed||u.time>n.timeInSeconds(),g="get"+c,E=r[g]&&r[g]()?r[g]().centroid:y[g](r),m="scout"+c;if(d&&h){let e=s.withLabel(m).filter(e=>e.unitType===p&&!e.isConstructing());if(0===e.length){R.setScout(s,E,p,m),e=s.withLabel(m).filter(e=>e.unitType===p&&!e.isConstructing());const[t]=e;if(t&&f(t.pos,E)>16){const e={abilityId:o,targetWorldSpacePos:E,unitTags:[t.tag]};a.push(e)}}}else{const e=s.withLabel(m).filter(e=>e.unitType===p&&!e.isConstructing());e.length>0&&e.forEach(e=>{e.removeLabel(m),e.labels.set("clearFromEnemy",!0)})}}),await t.sendAction(a)}(e),C(n),function(e,t){const{map:n,frame:r,units:i}=e.get(),o=d(n.getEnemyNatural().townhallPosition,h(t));i.getAlive(s.SELF).filter(e=>o.some(t=>f(t,e.pos)<=e.data().sightRange+e.radius)).length>0&&(v.lastSeen.enemyNaturalTownhallFootprint=r.timeInSeconds())}(r,l[t.race][0]),b(),A.outpowered=A.totalEnemyDPSHealth>A.totalSelfDPSHealth,!E.dirtyBasePlan&&A.outpowered&&(E.dirtyBasePlan=!0,console.log("dirtyBasePlan".toUpperCase()))}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),i=2;e.exports=r({name:"TaggingSystem",type:"agent",defaultOptions:{stepIncrement:8},async onGameStart({resources:e}){const{actions:t,map:n}=e.get();n._expansions||await t.sendChat({channel:i,message:"Tag: no_expansions"})}})},function(e,t,n){"use strict";const{DifficultyId:r,RaceId:i}=n(0),o=n(17),s=n(10),a=n(25),u=n(196),l=n(46),c={saveReplay:e=>{o.writeFileSync(s.join(__dirname,"../replays",Date.now()+".SC2Replay"),e.data)},saveExecutedStepsLog:(e,t)=>{let n=i[e.race],c=i[a.opponentRace],p=r[u.difficulty];const d=o.createWriteStream(s.join(__dirname,"../logs",`${Date.now()}_Lucid_${p}_${n.charAt(0)}v${c.charAt(0)}_${t.replace(/\s+/g,"")}.txt`));l.executedSteps.forEach(e=>{d.write(JSON.stringify(e).replace(/,/g,", ")+",\n")})}};e.exports=c},function(e,t,n){"use strict";const{createSystem:r}=n(5),{EFFECT_CALLDOWNMULE:i,MORPH_ORBITALCOMMAND:o}=n(3),{createUnitCommand:s}=n(18),a=n(14),{getMineralFieldTarget:u}=n(12);e.exports=r({name:"MulingSystem",type:"agent",async onStep(e){const{agent:t,resources:n}=e,{actions:r}=n.get(),l=[],{minerals:c}=t;if(void 0===c)return[];c<=a.mineralThreshold&&(l.push(...function(e){const{resources:t}=e,{units:n}=t.get(),r=[],o=n.getBases();return o.filter(e=>e.abilityAvailable(i)).forEach(e=>{const t=u(n,e),o=s(i,[e]);o.targetUnitTag=t.tag,r.push(o)}),r}(e)),l.push(...function(e){const{resources:t}=e,{units:n}=t.get(),r=[],i=n.getBases();return i.filter(e=>e.abilityAvailable(o)).forEach(e=>{const t=s(o,[e]);r.push(t)}),r}(e))),await r.sendAction(l)}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{TownhallRace:i}=n(13),{gridsInCircle:o}=n(15),{cellsInFootprint:s}=n(19),{distance:a,getNeighbors:u}=n(2),{getFootprint:l}=n(20),{getClosestPosition:c}=n(40),{existsInMap:p}=n(32),{intersectionOfPoints:d,pointsOverlap:f}=n(31),{getPathCoordinates:h}=n(50),{getDistanceByPath:g}=n(16),{setStructurePlacements:y}=n(68),E=n(68);function m(e,t){return!e.some(e=>{const[n,r]=[e.path[0],e.path[e.path.length-1]],[i,o]=[t[0],t[t.length-1]],s=n.x===i.x&&n.y===i.y,a=r.x===o.x&&r.y===o.y;return s&&a})}e.exports=r({name:"WallOffNatural",type:"agent",async onGameStart(e){!function(e){const{agent:t,resources:n}=e,{debug:r,map:A}=n.get(),v=A.getNatural(),R=A.path(A.getNatural().townhallPosition,A.getEnemyNatural().townhallPosition),b=h(R).filter(e=>{const n=l(i[t.race][0]),r=s(v.townhallPosition,n);return!f([e],r)}).slice(4,13);r.setDrawCells("pthTEnm",b.map(e=>({pos:e})),{size:1,cube:!1});if(b.some(e=>A.isRamp(e))){E.adjacentToRampGrids=v.areas.placementGrid.filter(e=>{const t=A.getEnemyNatural().townhallPosition;return a(e,c(e,A._ramps)[0])<2&&g(n,e,t)<g(n,v.townhallPosition,t)});const e=E.adjacentToRampGrids.filter(e=>1===d(u(e,!0,!1),E.adjacentToRampGrids).length);e.length>0&&(E.adjacentToRampGrids=A.path(e[0],e[1],{diagonal:!0,force:!0}).map(e=>({x:e[0],y:e[1]})),0===E.wall.length&&(E.wall=E.adjacentToRampGrids),r.setDrawCells("adTRmp",E.adjacentToRampGrids.map(e=>({pos:e})),{size:1,cube:!1}))}else{const e=[];b.reverse().map(t=>{const n=function(e,t){return o(t,8).filter(n=>p(e,n)&&e.isPlaceable(n)&&u(n,!1).filter(t=>!e.isPlaceable(t)).length>0&&e.getHeight(n)===e.getHeight(t))}(A,t),r=function(e,t,n){const r=[];return t.forEach(i=>{const o=t.filter(t=>{if(a(i,t)<9)return!1;const r=h(e.path(i,t,{diagonal:!0,force:!0}));if(r.some(t=>u(t).some(t=>e.isRamp(t))))return!1;return 1===r.filter(e=>n.some(t=>a(e,t)<=1)).length});if(o.length>0){const[t]=c(i,o),n=h(e.path(i,t,{diagonal:!0,force:!0}));m(r,n)&&r.push({path:n,pathLength:n.length})}}),r.sort((e,t)=>e.pathLength-t.pathLength),r}(A,n,b);m(e,n)&&e.push(...r.filter(t=>m(e,t.path)))});const t=e.sort((e,t)=>e.pathLength-t.pathLength).slice(0,4);t.length>0&&(console.log("shortestWallCandidate",t[0]),r.setDrawCells("wllCnd",t[0].path.map(e=>({pos:e})),{size:1,cube:!1}),y(n,t))}}(e)}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{SIEGETANKSIEGED:i,SUPPLYDEPOT:o,SUPPLYDEPOTLOWERED:s}=n(1),{gridsInCircle:a}=n(15),{cellsInFootprint:u}=n(19),{getFootprint:l}=n(20),{readUnitTypeData:c}=n(197),p=n(12);e.exports=r({name:"UnitResourceSystem",type:"agent",async onGameStart(){p.unitTypeData=c(),console.log(p.unitTypeData)},async onStep(e){const{resources:t}=e,{map:n,units:r}=t.get();p.seigeTanksSiegedGrids=[],r.getByType(i).forEach(e=>{p.seigeTanksSiegedGrids.push(...a(e.pos,e.radius,{normalize:!0}))});r.getByType([o,s]).forEach(e=>{u(e.pos,l(e.unitType)).forEach(t=>{e.unitType===o?n.setPathable(t,!1):n.setPathable(t,!0)})})}})},function(e,t,n){"use strict";e.exports={4:{healthMax:200,isFlying:!1,radius:1,shieldMax:150,weaponCooldownMax:23.980224609375},5:{healthMax:400,isFlying:!1,radius:1.125,shieldMax:0,weaponCooldownMax:0},6:{healthMax:400,isFlying:!1,radius:1.125,shieldMax:0,weaponCooldownMax:0},8:{healthMax:50,isFlying:!1,radius:.375,shieldMax:0},9:{healthMax:30,isFlying:!1,radius:.375,shieldMax:0},12:{healthMax:5,isFlying:!1,radius:.375,shieldMax:0},16:{healthMax:35,isFlying:!1,radius:.375,shieldMax:0},18:{healthMax:1500,isFlying:!1,radius:2.75,shieldMax:0,weaponCooldownMax:0},19:{healthMax:400,isFlying:!1,radius:1.25,shieldMax:0,weaponCooldownMax:0},20:{healthMax:500,isFlying:!1,radius:1.6875,shieldMax:0,weaponCooldownMax:0},21:{healthMax:1e3,isFlying:!1,radius:1.8125,shieldMax:0,weaponCooldownMax:0},22:{healthMax:850,isFlying:!1,radius:1.8125,shieldMax:0,weaponCooldownMax:0},23:{healthMax:250,isFlying:!1,radius:1.125,shieldMax:0,weaponCooldownMax:11.296875},24:{healthMax:400,isFlying:!1,radius:1.8125,shieldMax:0},27:{healthMax:1250,isFlying:!1,radius:1.8125,shieldMax:0,weaponCooldownMax:0},28:{healthMax:1300,isFlying:!1,radius:1.8125,shieldMax:0,weaponCooldownMax:0},29:{healthMax:750,isFlying:!1,radius:1.8125,shieldMax:0,weaponCooldownMax:0},31:{healthMax:150,isFlying:!1,radius:1,shieldMax:0,weaponCooldownMax:0},32:{healthMax:175,isFlying:!1,radius:.875,shieldMax:0,weaponCooldownMax:43.838623046875},33:{healthMax:175,isFlying:!1,radius:.875,shieldMax:0,weaponCooldownMax:15.134521484375},34:{healthMax:135,isFlying:!1,radius:.75,shieldMax:0,weaponCooldownMax:0},35:{healthMax:135,isFlying:!0,radius:.75,shieldMax:0,weaponCooldownMax:29.48974609375},37:{healthMax:400,isFlying:!1,radius:1.125,shieldMax:0,weaponCooldownMax:0},38:{healthMax:400,isFlying:!1,radius:1.125,shieldMax:0,weaponCooldownMax:0},39:{healthMax:400,isFlying:!1,radius:1.125,shieldMax:0,weaponCooldownMax:0},42:{healthMax:400,isFlying:!1,radius:1.125,shieldMax:0,weaponCooldownMax:0},45:{healthMax:45,isFlying:!1,radius:.375,shieldMax:0,weaponCooldownMax:21.586181640625},47:{healthMax:400,isFlying:!1,radius:1.25,shieldMax:0,weaponCooldownMax:0},48:{healthMax:45,isFlying:!1,radius:.375,shieldMax:0,weaponCooldownMax:14.7587890625},49:{healthMax:60,isFlying:!1,radius:.375,shieldMax:0,weaponCooldownMax:0},51:{healthMax:125,isFlying:!1,radius:.5625,shieldMax:0,weaponCooldownMax:23.8720703125},52:{healthMax:400,isFlying:!1,radius:1,shieldMax:0},53:{healthMax:90,isFlying:!1,radius:.625,shieldMax:0},54:{healthMax:150,isFlying:!0,radius:.75,shieldMax:0,weaponCooldownMax:0},55:{healthMax:140,isFlying:!0,radius:.75,shieldMax:0},56:{healthMax:140,isFlying:!0,radius:.625,shieldMax:0},57:{healthMax:550,isFlying:!0,radius:1.25,shieldMax:0},59:{healthMax:1e3,isFlying:!1,radius:2.75,shieldMax:1e3,weaponCooldownMax:0},60:{healthMax:200,isFlying:!1,radius:1.125,shieldMax:200,weaponCooldownMax:0},61:{healthMax:300,isFlying:!1,radius:1.6875,shieldMax:300,weaponCooldownMax:0},62:{healthMax:0,isFlying:!1,radius:1.8125,shieldMax:0},63:{healthMax:400,isFlying:!1,radius:1.8125,shieldMax:400},65:{healthMax:500,isFlying:!1,radius:1.8125,shieldMax:500},66:{healthMax:150,isFlying:!1,radius:1.125,shieldMax:150,weaponCooldownMax:16.3818359375},68:{healthMax:500,isFlying:!1,radius:1.8125,shieldMax:500},70:{healthMax:0,isFlying:!1,radius:1.8125,shieldMax:0},71:{healthMax:0,isFlying:!1,radius:1.8125,shieldMax:0},72:{healthMax:550,isFlying:!1,radius:1.8125,shieldMax:550,weaponCooldownMax:0},73:{healthMax:100,isFlying:!1,radius:.5,shieldMax:50,weaponCooldownMax:20.757568359375},74:{healthMax:80,isFlying:!1,radius:.625,shieldMax:80,weaponCooldownMax:28.9189453125},76:{healthMax:0,isFlying:!1,radius:.375,shieldMax:0},77:{healthMax:40,isFlying:!1,radius:.5,shieldMax:40,weaponCooldownMax:0},78:{healthMax:120,isFlying:!0,radius:.75,shieldMax:60},80:{healthMax:150,isFlying:!0,radius:1,shieldMax:100},81:{healthMax:80,isFlying:!0,radius:.875,shieldMax:100,weaponCooldownMax:0},82:{healthMax:40,isFlying:!0,radius:.5,shieldMax:20,weaponCooldownMax:0},83:{healthMax:200,isFlying:!1,radius:.75,shieldMax:100,weaponCooldownMax:22.197021484375},84:{healthMax:20,isFlying:!1,radius:.375,shieldMax:20,weaponCooldownMax:22.476318359375},86:{healthMax:0,isFlying:!1,radius:2.75,shieldMax:0,weaponCooldownMax:0},87:{healthMax:0,isFlying:!1,radius:1,shieldMax:0},88:{healthMax:0,isFlying:!1,radius:1.6875,shieldMax:0,weaponCooldownMax:0},89:{healthMax:0,isFlying:!1,radius:1.8125,shieldMax:0,weaponCooldownMax:0},90:{healthMax:750,isFlying:!1,radius:1.8125,shieldMax:0,weaponCooldownMax:0},91:{healthMax:0,isFlying:!1,radius:1.8125,shieldMax:0,weaponCooldownMax:0},93:{healthMax:850,isFlying:!1,radius:1.8125,shieldMax:0,weaponCooldownMax:0},94:{healthMax:0,isFlying:!1,radius:1.8125,shieldMax:0,weaponCooldownMax:0},97:{healthMax:850,isFlying:!1,radius:1.8125,shieldMax:0,weaponCooldownMax:0},98:{healthMax:300,isFlying:!1,radius:1.125,shieldMax:0},99:{healthMax:400,isFlying:!1,radius:.875,shieldMax:0,weaponCooldownMax:0},100:{healthMax:2e3,isFlying:!1,radius:2.75,shieldMax:0},101:{healthMax:2500,isFlying:!1,radius:2.75,shieldMax:0,weaponCooldownMax:0},102:{healthMax:1e3,isFlying:!1,radius:1.125,shieldMax:0,weaponCooldownMax:0},103:{healthMax:200,isFlying:!1,radius:.125,shieldMax:0,weaponCooldownMax:0},104:{healthMax:40,isFlying:!1,radius:.375,shieldMax:0,weaponCooldownMax:21.979248046875},105:{healthMax:35,isFlying:!1,radius:.375,shieldMax:0,weaponCooldownMax:10.13525390625},106:{healthMax:200,isFlying:!0,radius:1,shieldMax:0,weaponCooldownMax:0},107:{healthMax:90,isFlying:!1,radius:.625,shieldMax:0,weaponCooldownMax:11.1875},110:{healthMax:145,isFlying:!1,radius:.5,shieldMax:0,weaponCooldownMax:30.99853515625},111:{healthMax:90,isFlying:!1,radius:.625,shieldMax:0,weaponCooldownMax:0},112:{healthMax:200,isFlying:!0,radius:.625,shieldMax:0,weaponCooldownMax:0},117:{healthMax:90,isFlying:!1,radius:.625,shieldMax:0},118:{healthMax:145,isFlying:!1,radius:.5,shieldMax:0},119:{healthMax:35,isFlying:!1,radius:.375,shieldMax:0},125:{healthMax:175,isFlying:!1,radius:.875,shieldMax:0},126:{healthMax:175,isFlying:!1,radius:.875,shieldMax:0,weaponCooldownMax:13.4599609375},127:{healthMax:0,isFlying:!1,radius:.625,shieldMax:0},128:{healthMax:200,isFlying:!0,radius:1,shieldMax:0},129:{healthMax:200,isFlying:!0,radius:1,shieldMax:0,weaponCooldownMax:0},130:{healthMax:1500,isFlying:!1,radius:2.75,shieldMax:0},132:{healthMax:1500,isFlying:!1,radius:2.75,shieldMax:0,weaponCooldownMax:0},133:{healthMax:500,isFlying:!1,radius:1.8125,shieldMax:500,weaponCooldownMax:0},136:{healthMax:80,isFlying:!0,radius:.875,shieldMax:100},137:{healthMax:50,isFlying:!1,radius:1,shieldMax:0},138:{healthMax:0,isFlying:!1,radius:1,shieldMax:0},141:{healthMax:10,isFlying:!1,radius:1,shieldMax:350},142:{healthMax:0,isFlying:!1,radius:1.125,shieldMax:0},151:{healthMax:25,isFlying:!1,radius:.125,shieldMax:0,weaponCooldownMax:0},268:{healthMax:60,isFlying:!1,radius:.375,shieldMax:0,weaponCooldownMax:0},289:{healthMax:30,isFlying:!1,radius:.375,shieldMax:0,weaponCooldownMax:0},311:{healthMax:70,isFlying:!1,radius:.5,shieldMax:70,weaponCooldownMax:0},484:{healthMax:135,isFlying:!1,radius:.625,shieldMax:0},498:{healthMax:90,isFlying:!1,radius:.5,shieldMax:0},500:{healthMax:0,isFlying:!1,radius:.5,shieldMax:0},687:{healthMax:100,isFlying:!1,radius:.75,shieldMax:0},688:{healthMax:120,isFlying:!1,radius:.75,shieldMax:0,weaponCooldownMax:0},689:{healthMax:180,isFlying:!0,radius:.75,shieldMax:0},692:{healthMax:120,isFlying:!1,radius:.75,shieldMax:0,weaponCooldownMax:14.832275390625},694:{healthMax:100,isFlying:!1,radius:.5,shieldMax:100,weaponCooldownMax:0},733:{healthMax:100,isFlying:!1,radius:.5,shieldMax:100,weaponCooldownMax:0},734:{healthMax:180,isFlying:!0,radius:.75,shieldMax:0},830:{healthMax:1,isFlying:!1,radius:.5,shieldMax:0},893:{healthMax:200,isFlying:!0,radius:1,shieldMax:0}}},function(e,t,n){"use strict";const{createSystem:r}=n(5),{Alliance:i}=n(0),{ZEALOT:o,ZERGLING:s}=n(1),{GLIALRECONSTITUTION:a}=n(92),{distance:u}=n(2),l=n(24);e.exports=r({name:"DetectUpgrade",type:"agent",async onStep(e){const{agent:t,resources:n}=e,{frame:r,units:u}=n.get(),f=[];l.enemyCharge||(!function(e){const{data:t,resources:n}=e,{frame:r,units:s}=n.get();let a=(r.getGameLoop()-p)/22.4;const u=s.getById(o,{alliance:i.ENEMY});d(u,a)-.01>t.getUnitTypeData(o).movementSpeed&&(l.enemyCharge=!0,console.log("enemy charge detected"))}(e),f.push(o)),l.enemyMetabolicBoost||(!function(e){const{data:t,resources:n}=e,{frame:r,units:o}=n.get();let a=(r.getGameLoop()-p)/22.4;const u=o.getById(s,{alliance:i.ENEMY});d(u,a)-.01>t.getUnitTypeData(s).movementSpeed&&(l.enemyMetabolicBoost=!0,console.log("enemy metabolic boost detected"))}(e),f.push(s)),l.selfGlialReconstitution||(l.selfGlialReconstitution=t.upgradeIds.includes(a),l.selfGlialReconstitution&&console.log("self glial reconstitution detected")),c=u.getById(f,{alliance:i.ENEMY}).map(e=>({tag:e.tag,pos:e.pos})),p=r.getGameLoop()}});let c=[],p=0;function d(e,t){let n=0;return e.forEach(e=>{const r=c.find(t=>t.tag===e.tag);if(r){const i=u(r.pos,e.pos)/t;n=n>i?n:i}}),n/1.4}},function(e,t,n){"use strict";const{createSystem:r}=n(5),i=n(22),{getCandidatePositions:o}=n(42),s=n(14),a=n(16),{getFoodUsed:u}=n(4);async function l(e){const{resources:t}=e,{units:n}=t.get(),r=s.rallies.find(t=>{let r=!1,i=!1;return Object.prototype.hasOwnProperty.call(t.conditionStart,"food")&&(r=u(e)>=t.conditionStart.food),Object.prototype.hasOwnProperty.call(t.conditionEnd,"unitType")&&(i=n.getById(t.conditionEnd.unitType).length>=t.conditionEnd.count),r&&!i});return r?await o(t,r.location):[]}e.exports=r({name:"SetRallySystem",type:"agent",async onStep(e){(await l(e)).length>0?a.combatRally=i(await l(e)):a.combatRally=null}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{MOVE:i,ATTACK_ATTACK:o}=n(3),{Alliance:s}=n(0),{OVERLORD:a}=n(1),{distance:u}=n(2),{getRandomPoint:l}=n(32),{createUnitCommand:c}=n(18),p=n(107),{canAttack:d}=n(53);e.exports=r({name:"AttackSystem",type:"agent",async onStep(e){const{agent:t,resources:n}=e,{map:r}=n.get(),{actions:f,units:h}=n.get(),g=function(e){return e.getAlive(s.SELF).filter(e=>!e.isStructure()&&!e.isWorker()&&e.abilityAvailable(i))}(h);if(g.length>0){const e=t.foodUsed>=p.minimumAmountToAttackWith,y=function(e){let t=e.filter(e=>e.isStructure());0===t.length&&(t=e);return t}(e?h.getAlive(s.ENEMY):function(e){const t=e.getAlive(s.SELF).filter(e=>e.isStructure());return e.getAlive(s.ENEMY).filter(e=>t.some(t=>u(e.pos,t.pos)<=16))}(h)),E=[];if(y.length>0){if(E.push(...function(e,t,n){const{units:r}=e.get(),s=[];return t.forEach(t=>{const{pos:u}=t;if(void 0===u)return;const l=t.abilityAvailable(o)?o:i;if(t.unitType!==a){const i=n.filter(n=>d(e,t,n,!1)),[o]=r.getClosest(u,i);if(o){const e=c(l,[t]);e.targetWorldSpacePos=o.pos,s.push(e)}}}),s}(n,g,y)),E.length>0)return f.sendAction(E)}else e&&E.push(...function(e,t){const n=[];return t.forEach(t=>{if(t.isIdle()){const r=l(e);if(r){const e=c(i,[t]);e.targetWorldSpacePos=r,n.push(e)}}}),n}(r,g));if(E.length>0)return f.sendAction(E)}}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{EFFECT_INJECTLARVA:i,MOVE:o,TRAIN_QUEEN:s}=n(3),{QUEENSPAWNLARVATIMER:a}=n(58),{Race:u}=n(0),{TownhallRace:l}=n(13),{QUEEN:c}=n(1),{areEqual:p}=n(2),{shuffle:d}=n(31),{createUnitCommand:f}=n(18),{getTimeInSeconds:h}=n(44),g=n(14),{getDistance:y}=n(30),{getClosestUnitByPath:E,getDistanceByPath:m,getClosestUnitPositionByPath:A}=n(16),{getMovementSpeed:v,getPendingOrders:R}=n(24),{getUnitCount:b}=n(4),{setPendingOrders:C}=n(12);e.exports=r({name:"InjectorSystem",type:"agent",async onStep(e){const{agent:t,resources:n}=e;if(t.race===u.ZERG){const{actions:r}=n.get(),u=[];u.push(...function(e){const{units:t}=e.get(),n=[],r=function(e){const{frame:t,units:n}=e.get();return n.getBases().map(e=>{const{buffIds:n}=e;if(void 0===n)return{base:e,timeLeft:0};if(n.includes(a)){if(e.labels.get("queenSpawnLarvatimer")){const n=e.labels.get("queenSpawnLarvatimer");return{base:e,timeLeft:40/1.4-h(t.getGameLoop()-n)}}return e.labels.set("queenSpawnLarvatimer",t.getGameLoop()),{base:e,timeLeft:40/1.4}}return e.labels.delete("queenSpawnLarvatimer"),{base:e,timeLeft:0}})}(e);return t.getById(c).forEach(s=>{const{energy:u,orders:l,pos:c,radius:d}=s;if(void 0===u||void 0===l||void 0===c||void 0===d)return;const h=25-u>0?(25-u)/.7875:0,[g]=E(e,c,r.filter(t=>{const{base:{pos:n},timeLeft:r}=t;if(void 0===n)return!1;const i=A(e,n,c),o=function(e,t,n){const{pos:r}=t;if(void 0===r)return 1/0;const i=m(e,r,n),o=v(t);return void 0===o?1/0:i/o}(e,s,i);return r<=h||r<=o}).map(e=>e.base));if(g){const{buffIds:e,pos:r}=g;if(void 0===e||void 0===r)return;const u=R(s).concat(l);if(s.canInject()){if(u.every(e=>e.abilityId!==i)&&!e.includes(a)){const e=f(i,[s]);e.targetUnitTag=g.tag,n.push(e),C(s,e),g.labels.delete("queenSpawnTimerLeft")}}else{const[e]=t.getClosest(r,t.getBases()),{pos:i,radius:a}=e;if(void 0===i||void 0===a)return;if(y(c,i)>d+a){if(u.every(e=>{const{abilityId:t,targetWorldSpacePos:n}=e;return void 0===n||(t!==o||!p(n,i))})){const t=f(o,[s]);t.targetWorldSpacePos=e.pos,n.push(t),C(s,t)}}}}}),n}(n));const{minerals:T}=t;if(void 0===T)return[];T<=g.mineralThreshold&&u.push(...function(e){const{agent:t,resources:n}=e,{race:r}=t,{units:i}=n.get(),o=[],a=b(e,l[r][0])-b(e,c);let u=i.getBases().filter(e=>e.abilityAvailable(s)&&e.isIdle());return d(u).slice(0,a).forEach(e=>{const t=f(s,[e]);o.push(t)}),o}(e)),await r.sendAction(u)}}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{ATTACK_ATTACK:i,MOVE:o}=n(3),{Alliance:s}=n(0),{STALKER:a}=n(1),{avgPoints:u,distance:l}=n(2),{createUnitCommand:c}=n(18),{getCombatRally:p}=n(16),{microRangedUnit:d}=n(4),f=n(192);e.exports=r({name:"HarassSystem",type:"agent",async onStep(e){const{resources:t}=e,{actions:n,map:r,units:h}=t.get(),g=[],y="harasser",{harassFinished:E,harassOn:m}=f;if(!0===m&&!E){if(4===h.getById(a).length){h.getById(a).forEach(e=>e.labels.set(y,!0))}const n=h.withLabel(y),E=n.map(e=>e.pos),m=u(E),A=[],v=h.getAlive(s.ENEMY).filter(e=>(e.isWorker()&&A.push(e),!0));let[R]=h.getClosest(m,A);const b=R||h.getClosest(m,v)[0];if(4===h.withLabel(y).filter(e=>e.labels.get(y)).length)if(b&&l(b.pos,m)<=8){const t=[];n.forEach(n=>t.push(...d(e,n,b))),g.push(...t),console.log("harassers attacking")}else{const e=[],t=n.filter(t=>{if(!(l(t.pos,m)>8))return!0;e.push(t)}),s=c(i,t);s.targetWorldSpacePos=r.getEnemyNatural().townhallPosition;const a=c(o,e);a.targetWorldSpacePos=m,g.push(s,a),console.log(t.length+" harassers attacking"),console.log(e.length+" harassers moving")}else{(!b||l(b.pos,m)>8)&&(f.harassOn=!1,f.harassFinished=!0,n.forEach(e=>e.labels.delete(y)),console.log("harass finished"));const e=c(o,n);e.targetWorldSpacePos=p(t),g.push(e),console.log("harassers moving")}}if(g.length)return n.sendAction(g)}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{EFFECT_CHRONOBOOSTENERGYCOST:i}=n(3),{CHRONOBOOSTENERGYCOST:o}=n(58),{NEXUS:s}=n(1),a=n(22),{createUnitCommand:u}=n(18);e.exports=r({name:"ChronoBoostSystem",type:"agent",async onStep(e){const{resources:t}=e,{actions:n,units:r}=t.get(),l=[],c=r.getById(s).filter(e=>e.abilityAvailable(i));if(c.length>0){const e=r.getStructures().filter(e=>function(e){const{buffIds:t}=e;return void 0!==t&&(!t.includes(o)&&!e.isIdle())}(e));if(e.length>0){const[t]=c.sort((e,t)=>t.energy&&e.energy?t.energy-e.energy:0),n=a(e),r=u(i,[t]);r.targetUnitTag=n.tag,l.push(r)}if(l.length>0)return n.sendAction(l)}}})},function(e,t,n){"use strict";const{createSystem:r}=n(5),{Alliance:i}=n(0),{clearOutdatedMappedUnits:o,addUnmappedUnit:s,setBaseThreats:a}=n(29),u=n(33),l=n(80);e.exports=r({name:"StateOfGameSystem",type:"agent",async onGameStart(e){l.world=e},async onStep(e){l.world=e;const{resources:t}=e,{units:n}=t.get();!function(e){const t=e.getAlive(i.SELF);var n={};t.forEach(e=>n[e.tag]=!0),u.missingUnits.push(...u.previousUnits.filter(e=>{const{tag:t,labels:r}=e;return!n[t]&&!r.get("dead")})),u.missingUnits=u.missingUnits.filter(e=>!t.some(t=>t.tag===e.tag)),u.previousUnits=t}(n),o(t),s(n),l.clearStateOfGame()},async onUnitDestroyed(e,t){u.missingUnits=u.missingUnits.filter(e=>t.tag!==e.tag)}})},function(e,t,n){"use strict";n.r(t),n.d(t,"v1",(function(){return y})),n.d(t,"v3",(function(){return A})),n.d(t,"v4",(function(){return v})),n.d(t,"v5",(function(){return R})),n.d(t,"NIL",(function(){return b})),n.d(t,"version",(function(){return C})),n.d(t,"validate",(function(){return l})),n.d(t,"stringify",(function(){return p})),n.d(t,"parse",(function(){return E}));var r=n(34),i=n.n(r);const o=new Uint8Array(256);let s=o.length;function a(){return s>o.length-16&&(i.a.randomFillSync(o),s=0),o.slice(s,s+=16)}var u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;var l=function(e){return"string"==typeof e&&u.test(e)};const c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).substr(1));var p=function(e,t=0){const n=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!l(n))throw TypeError("Stringified UUID is invalid");return n};let d,f,h=0,g=0;var y=function(e,t,n){let r=t&&n||0;const i=t||new Array(16);let o=(e=e||{}).node||d,s=void 0!==e.clockseq?e.clockseq:f;if(null==o||null==s){const t=e.random||(e.rng||a)();null==o&&(o=d=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=f=16383&(t[6]<<8|t[7]))}let u=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:g+1;const c=u-h+(l-g)/1e4;if(c<0&&void 0===e.clockseq&&(s=s+1&16383),(c<0||u>h)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=u,g=l,f=s,u+=122192928e5;const y=(1e4*(268435455&u)+l)%4294967296;i[r++]=y>>>24&255,i[r++]=y>>>16&255,i[r++]=y>>>8&255,i[r++]=255&y;const E=u/4294967296*1e4&268435455;i[r++]=E>>>8&255,i[r++]=255&E,i[r++]=E>>>24&15|16,i[r++]=E>>>16&255,i[r++]=s>>>8|128,i[r++]=255&s;for(let e=0;e<6;++e)i[r+e]=o[e];return t||p(i)};var E=function(e){if(!l(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};var m=function(e,t,n){function r(e,r,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=E(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(r),s.set(e,r.length),s=n(s),s[6]=15&s[6]|t,s[8]=63&s[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=s[e];return i}return p(s)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r};var A=m("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i.a.createHash("md5").update(e).digest()}));var v=function(e,t,n){const r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return p(r)};var R=m("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i.a.createHash("sha1").update(e).digest()})),b="00000000-0000-0000-0000-000000000000";var C=function(e){if(!l(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}}]);